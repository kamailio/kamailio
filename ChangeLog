===================== 2011-12-01 Version 3.2.1 Released =====================

===================== Changes Since Version 3.2.0 ===========================

commit 7ba0e2a44b989357c9d2b677075d4c49d0330ed0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 1 15:22:04 2011 +0100

    Makefile: version set to 3.2.1

commit f33ea2538178633d0f53a89fdc049dd22234e07c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 1 11:13:09 2011 +0100

    pkg/rpm: set version to 3.2.1 for kamailio rpm specs

commit a424da7f9ad2b82aa9557d95f71b35a744f40342
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 1 11:10:19 2011 +0100

    pkg/debs: set version to 3.2.1 for kamailio debs

commit e80ca150ece624be1faf6abadf1ee692b6ee1b19
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Dec 1 12:00:32 2011 +0200

    modules/lcr: fixed testing of transport protocol by to_gw functions
    
    - Test failed when transport protocol is taken from Request-URI and
      there is not any.
    (cherry picked from commit 5cd8e582f833243884fa4daf891d24c4c0dcf1f9)

commit 3bc0cc561630cb24332bd2e1ae2c84d8dba2826c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 30 18:57:21 2011 +0100

    dialog(k): disable unused functionunref_new_dialog()
    
    - get rid of compliler warning
    (cherry picked from commit 880b447b43bb75328a3cd2f245d969272812ae42)

commit 926caef8f2b37dc83aab12aa5b8f717a9eeff328
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Nov 26 00:32:23 2011 +0100

    dialog(k): safety check for lookup in dialog table at shutdown
    (cherry picked from commit 017ea5779710223df8f5a28829f77eff8395affc)
    (cherry picked from commit b018f09abbecc6b057c6f9446406c6f20f43a235)

commit e8dd7fee405a375e0ad501018b05700401e8d26a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 21 23:52:43 2011 +0100

    dialog(k): refactored dlg ref counting
    
    - dlg pointer is no longer stored in tm callbacks parameter and ref
      counting for these kind of needs was removed
    - the internal id (hash entry, dlg id) is given now to tm callbacks. The
      callbacks will do dlg lookup to get the structure
    - there are longer-time persistent ref counting for:
      * storing dlg structure in dialog hash table
      * keeping dlg in timer list
      * waiting for the reply of BYE to destroy dialog structure
    - all the other ref countings are for short time, only for the period of
      doing specific processing
    - the new ref counting is safer in relation with tm callbacks and avoids
      tight dependecy which may have been easily broken by future tm changes
    (cherry picked from commit 9ba4ee25e32368a9c17c3f86784a52a97b748b93)
    (cherry picked from commit 5bdee1ffe820d3e9e75898bb252d1660b4bbad60)

commit a56b17e065d175f213688cacd3db3aa88fe48e2a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 17:22:26 2011 +0100

    parser: don't free on error To param linked in to_body struct
    
    - if a To header parameter was already linked in to_body struct, don't
      free if there is a parsing error for it later, it will be freed by
      free_to_params()
    - reported by Bayan Towfiq in FS#180
    (cherry picked from commit 6299704ebb280214f35fc86968d86be972219e51)

commit ec8535487fd06e5de7b5efa218f764a6e850b42b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 15:30:15 2011 +0100

    textops(k): free only pkg body lumps for set_body()
    
    - if set_body() is used in failure_route, it should not destroy
      completely the lumps cloned in tm, just ignore them and free the ones
      added in failure_route before execution of itself
    - reported by Brandon Armstead, FS#181
    (cherry picked from commit c22a3ec7366ad1a3cc0b5e8229fbabe2c179cca1)

commit 6fd2307f66d7207721e6a346d6287a3b9c043107
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 15:28:04 2011 +0100

    tm: backup/restore lump lists for faked requests
    
    - some cfg functions that can be used in failure_route can destroy the
      head of lump lists, thus better backup before and restore after failure_route
      execution
    (cherry picked from commit b6d90904de590a3f6a95bca8f89cf2521d630902)

commit 50d96b4fa2b8a8b5998c45dc01f08617606aca8d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 15:26:47 2011 +0100

    core: better check for cloned lumps in shared memory
    
    - bitwise test for LUMPFLAG_SHMEM
    (cherry picked from commit 8652f5f5fb2b10210c65b04772064c452608c728)

commit d44956c4f3d5fb98bc2af42d8718a420d624d259
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 12:56:28 2011 +0100

    core: save and restore branch_iterator in print_dset
    
    - safe usage in branch_route where branch_interator is used to add the
      new brnaches, but some variables can change it if used in config
      branch_route
    - closes FS#182, reported by Pawel Sternal
    (cherry picked from commit c5f101dfac9a50f428e3452893c402d8b1e0400b)

commit ae248a3744ab06a61c962415a8ac55a9c53fba82
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 22 11:30:56 2011 +0100

    dialog(k): destroy dlg structure first time ref counter gets to 0
    
    - reported by Bayan Towfix, FS#173
    (cherry picked from commit 5949e296b7bafab42a4ac3261f453f286d98e41c)

commit 24f138c9c39ac6475347ed76e311e1759d4d8531
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 22 11:30:02 2011 +0100

    pv: use msg pid to check the integrity of cached time
    
    - safer when dealing with async or failure processing
    (cherry picked from commit cc33486a8c17ae2cb4cbb5fce42f7a73646cd3c1)

commit addbd17723585197ea41c58904be1c4b6be2fe7d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 18 00:10:26 2011 +0100

    libkcore: set pid attribute for fake msg
    (cherry picked from commit 950b1e52ed8a94462be17e206d6970fd13a41661)

commit 4eadcbaa1db1157ad7b967b7177200a937696891
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 18 00:08:44 2011 +0100

    core: store pid per sip message
    
    - when a sip message is received, store pid in sip_msg_t structure
    - help identifying same sip msg across many processes
    (cherry picked from commit 76f7847fe6245e06aa88d104b60245c7c03b04f0)

commit 5d46e1bb59fb39bd539ace1840d502b14225c924
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 18 09:22:26 2011 +0100

    diversion: user anchor_lump2 to insert diversion header
    
    - remove the caching of anchor, is not save across many processes, when
      handling diversion in request_route and failure_route
    (cherry picked from commit 55615d11ece77074ad779d1ad09361b1fd2b2bad)

commit 609b0aa86624416828c0c117e0cfdbeb7643bcb8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 17 23:14:32 2011 +0100

    tm: free path if set first time in a branch route
    (cherry picked from commit 7b612d999e061d05b60054e7749052d0abdf514c)

commit d3408c64b6c07806a51e1e72589f8e124c8c651c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 16 07:50:42 2011 +0100

    core: at shutdown, first call the destroy module functions then free module exports structure
    
    - some modules may need access to other modules at shut down
    - reported by Juha Heinanen
    (cherry picked from commit 2396dde7230e04f853e6936cfff9059661c55635)

commit 2ffbba2004371c1136157bcf8ba60fab787de9ad
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 15 09:27:46 2011 +0100

    ndb_redis: docs update - server parameter type is string
    
    - more details to server parameters to show that many redis servers can
      be used
    (cherry picked from commit da07d2a093a4aec9673ae2e5a0bd4bccb9d3cd70)

commit 97738606ba186fd41a4137e6b4c28f5d97a403e9
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Nov 20 21:42:14 2011 +0000

    modules_k/presence_xml: Fixed segmentation fault in pres_check_activities()

commit d50bf0933db8925d75da09de0036d559c9b34b64
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sat Nov 19 22:44:21 2011 +0000

    modules_k/xcap_server: xcaps_buf sometimes freed in w_xcaps_put()
    
    - The buffer is alloc'd at module startup so should not be freed here.
    - When freed here the buffer memory can be alloc'd for other things and then
      future XCAP server operations will trample over it causing segmentation
      faults.
    - Fix by Hugh Waite @ Crocodile RCS.

commit fb75114b7c5e220c4fcfbd1a0ad583c0d9e2fb4b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 14 19:10:05 2011 +0100

    Makefile: remove typo comma at the end of the sipcapture module name

commit a823c40f18b7f7481dd1c7f114f9e68704042dd4
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Tue Nov 8 23:46:37 2011 +0100

    dialog(k): Remove warning in docs regarding usage of stateless replies
    (resolved by now).
    (cherry picked from commit 378a6e03ac35000212ff0263a997807f6e178f01)

commit baed413617a0c9eac9241564708b8330276ef023
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Mon Nov 7 23:36:36 2011 +0100

    dialog(k): Use correct logical operation to enable DLG_FLAG_CHANGED_VARS
    flag.
    (cherry picked from commit 8ca6de5604ee32076aea5924472f5081a48c99b7)

commit 9442bf0249cab256c6bc68a219b2c44aee17c916
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Sun Nov 6 02:21:08 2011 +0100

    dialog(k): When restoring dialog variables from database calculate and
    set variable string length.
    
    - Fixes Flyspray #172.
    (cherry picked from commit ae76e2183c9966cfe44c0519de7d5a53be08041c)

commit 406ecb7c981a37e789402990dbdfd7eaf1157cec
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Sat Nov 5 02:41:19 2011 +0100

    acc(k): Define timersub macro for Solaris as it is not provided in
    <sys/time.h>.
    (cherry picked from commit 456903d2b4775e3d968e2eaa08b46e64993f4053)

commit 271a02a29975611cb6de9c82b185dd37932a462e
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Fri Nov 4 23:09:02 2011 +0100

    dialog(k): When restoring dialog variables from database, stop iterating
    through given dialog hash table bucket once matching dialog is found.
    
    - Fixes FS #171.
    - Credits to Daniel-Constantin Mierla.
    (cherry picked from commit 34fc972291e965a40086b59f077a4b34fba2d12d)

commit 24eb7d2dbd1841b9e61c35f52b271431c49e911a
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Nov 3 23:10:38 2011 +0100

    dialog(k): Set dialog parameters (timeout, etc.) before create callback
    is executed to provide these parameters to registered functions.
    (cherry picked from commit 987c8a5fbfa0f23e1211e4253e7113f4ea79b22b)

commit 019c69196f96c929f5aee2763fa619ce17d5debb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 3 22:10:52 2011 +0100

    docbook: remove double quotes around XML_CATALOG_FILES
    (cherry picked from commit c22415ba7a65e0a054cb625440812aae292ea2d5)

commit 966851f9d25775b1990de8951713448ddb264a53
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 3 21:12:46 2011 +0100

    dispatcher(k): sample cfg file updated
    
    - some clarifications added to faq
    (cherry picked from commit 60670bd00570adc5fff2de30929d88b7d956d3ea)

commit c5ca8379095e2532f0889c706204bed3c194402b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 3 11:48:30 2011 +0100

    dispatcher(k): fixed copy&paste typo of maintaining inactive state
    
    - instead of setting the inactive state, it was resetting it
    - restructured the usage of fake msg for running event routes for
      keepalive replies, so that it is generated only if event routes are
      defined
    (cherry picked from commit 1f63d8d3e619ec1e9a0d15f45c507547a72dc715)

commit 29fce242772f2875066c366465c5957f845b31f0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 2 10:42:52 2011 +0100

    dispatcher(k): added clarifications to ds_probing_mode parameter
    (cherry picked from commit b589e42a06feba2382c2b4dbb9e0d56ebe4b6ed1)

commit aec0f940786c300de4be733281e0b58e8462d63c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 2 10:35:22 2011 +0100

    dispatcher(k): use defines for probing modes
    
    - it can be DS_PROBE_NONE (0), DS_PROBE_ALL (1) or DS_PROBE_INACTIVE (2)
    - when ds_probing_mode is set to 2, keep probing inactive gateways until
      they become active. Note that the gateway must be set to probing when
      it goes in trying or inactive state
    (cherry picked from commit d665458442aed734bf1831e37ccf666ab2846f25)

commit 4152e6e2e599669c5a427dded0bc6ea7ad20926b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:32:42 2011 +0100

    db_text(k): init DB API lib in mod_register()
    (cherry picked from commit fa9e7de6bbef15110cb4940769b27d90b2c000c8)

commit 9ef9a9edc7c1862d6d427b3784284b4b43e7c743
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:30:15 2011 +0100

    db_oracle(k): init DB API lib in mod_register()
    (cherry picked from commit d0ede402a4e5a9163405fa3da66b2cb38ab24552)

commit 959d06b65596dc87da1e0692ee3439d88914b579
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:28:26 2011 +0100

    db_unixodbc: init DB API lib in mod_register()
    (cherry picked from commit f122ee6e63087d15cee95642c4e8ac9249b4f958)

commit 2018f85239ebb9ee2d1238a39cf3837430dcb915
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:26:37 2011 +0100

    db_sqlite: init DB API lib in mod_register()
    (cherry picked from commit 4040fead1833abddee710d18e7c655ca53cfb0ed)

commit d422ab1114dfe2a7c4199e05a91226ad4c5d4c3a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:26:07 2011 +0100

    db_postgres: use db_api_init() to initialize srdb1 lib
    (cherry picked from commit 4578f6eba8b3539202dffa756cf0813dfa7eb328)

commit 4f8c2466982ec00eadc0e864b4c5182b7a2b1173
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:22:30 2011 +0100

    db_berkeley: init DB API lib in mod_register()
    (cherry picked from commit 41225392808b1e5462be40e37ba85700e8eab632)

commit 244cdf2a863d85b82112b39ee2eeb721d315dbfe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:21:19 2011 +0100

    db_postgres: init DB API lib in mod_register()
    
    - this will initialize the sql buffer at module load time, avoiding
      crash at startup if a module using the DB driver is loaded before the
      db driver itself
    - reported by Timo Teras
    (cherry picked from commit b3b34accb2f65ccef6045b083879166cb1a1e060)

commit 1335ac992736172ac3e366d7f9a73f1593c98032
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:20:38 2011 +0100

    db_flatstore: init DB API lib in mod_register()
    (cherry picked from commit cc88761be68212c7c08dcdef182fe2e16b42a3e1)

commit 590366ca79ea875bf10e678e5d4ffec881230993
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:18:36 2011 +0100

    db_mysql: initialize DB API in mod_register() function
    
    - internal buffer sql_buf initialized in this function
    - renamed sql_buf to mysql_sql_buf to avoid potential conflict with
      global variable in srdb1 library
    (cherry picked from commit 9a7e99d01e1c60dae8bec62037e8321c7d671c1d)

commit f96f053af7492c69ea5c51a4aa353f9ca89fbd81
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:15:50 2011 +0100

    srdb1: added db_api_init() function
    
    - to be executed to initialize internas of DB API library
    - calls internal function db_query_init() that initialize the buffer to
      print db queries
    (cherry picked from commit 86e28b07474e75582423f50f560cf6156022da86)

commit 0f9c491423c327fa1df273d49be6668d94426b31
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 16:18:34 2011 +0100

    sdpops: support for codecs with same name and many different ids
    
    - reported by Juha Heinanen
    (cherry picked from commit e4d2b647d1b0e8764b1eb0cfe07d446231af0df8)

commit 31ec432c587403d526c3d1fcd72ac24d4be796a1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 11:38:51 2011 +0100

    sdpops: fixed usage of delim param in sdp_codec_in_str()
    
    - matching codecs in a comma separated list should work now
    - reported by Juha Heinanen as part of testing keep_codecs_by_name()
    (cherry picked from commit 83253d3a5cc08ce581fad88378de5eb3bd7fc784)

commit eb5bbb29e9b7a72de94270f877d8fc686d4d5bd6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 11:43:28 2011 +0100

    parser/sdp: updated parse_sdp() description
    
    - reflect properly return codes
    (cherry picked from commit e1c6eafe29973a05f9f9358efbac9bf6be16a92d)

commit 258422027eec9bbfc4bc3bfd926a97e5b9c5b7ce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 11:22:37 2011 +0100

    snmpstats: removed c&p duplicated module parameter
    
    - reported by Klaus Darilion
    (cherry picked from commit 50880207fe208df5de065e0f915c560ac255a9d8)

commit 9c79ed2ea7891b720dcae415d0d1d48ff6177d67
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 11:20:05 2011 +0100

    sdpops: check for sdp structure after parse_sdp()
    
    - the function can return 1 in case of no body
    - reported by Juha Heinanen
    (cherry picked from commit 704c619f401b6286588c43c8dec9e04670f4ad43)

commit 524bf120a2b86f5ef25e42cab4472dcdd9b49060
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 16:45:17 2011 +0200

    dispatcher(k): clarification about trying transition state from active to inactive
    (cherry picked from commit 0b8f2ee4c128cd2b532356087272445519c1c08b)

commit 0b5e236808bec4501a18af49c71156b2a93c56bf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 16:44:44 2011 +0200

    dispatcher(k): default probing threshold set to 1
    (cherry picked from commit 7330cbc114821732b4f8bed5a43893226a800198)

commit beb683f7b116afb019caa8d9203ed05d3de3d5ce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 16:07:33 2011 +0200

    dispatcher(k): docs update and rebuild readme file
    (cherry picked from commit 372b113b6bd4447dfd73b8b6da6a5672730a5636)

commit b017f6f9d85a7d0bbe1032d23c64d89757438876
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 16:00:55 2011 +0200

    dispatcher(k): new state trying for destination addresses
    
    - the state trying (t) is a transition between active to inactive, when
      inactive state is wanted after a certain number of failures specified
      in probing threshold
    - when in trying state, the destination is still selected, but
      additional settings of trying state will increment an internal failure
      counter which results in setting inactive state when probing threshold
      is matched
    - the functionality was before based on probing mode, but since 3.2
      probing is not longer related to destination selection. This will
      provide back the lost functionality
    - ds_mark_dst(x) can have as parameter a combination between state and
      probing mode, such as 'ip' - inactive and probing, or ap - active and
      probing, or 'tp' - trying and probing
    (cherry picked from commit cbe2e236846e6527a2fc9e6b40b80befe329825b)

commit c928129c08660934dcfee585fb69fe5a41f2c897
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 07:17:52 2011 +0200

    dialog(k): postpone setting tm callbacks until T is created
    
    - add dialog in tm callbacks when transaction is created
    - when using dlg_manage(), if dialog does not makes it to transaction,
      clean it up
    - fixes case when stateless reply is used after dlg_manage() to create a
      new dialog
    (cherry picked from commit ad4cfe8a3410059bc5c0b4951e49a952c4b01dfe)

commit a623f8ed8b08e92a8df4c581d22201da0f0df160
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 04:21:24 2011 +0200

    docbook/Makefile: option to not use local catalog
    
    - if nocatalog=yes, the xsltproc is started without XML_CATALOG_FILES
      and the default ones from system are used
    (cherry picked from commit a5c9d7e4bfe5949177290671072616ab054722bc)

commit 14bc519b2a496f2f5f7a7bfc4403e942ff5d7c09
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 26 21:21:22 2011 +0200

    sdpops: find codec ids in sdp when not found in static table
    
    - functions to keep/remove codecs by name work now with dynamic ids for
      codecs
    - reported by Juha Heinanen
    (cherry picked from commit 511dc62e6a6ca74324f42b66a23bd9d80b377252)

commit 233b229e00aa1d1be3a6d9b1484aa2c9ece3407e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 17:16:36 2011 +0100

    ctl: use SRNAME define to build default ctl file path
    
    - this define is set by sercmd comilation (NAME is set to sercmd in this
      case)
    - otherwise use NAME, which is set by sip server compilation
    - reported by Henning Westerholt
    (cherry picked from commit b515ac33300f3c1d47195961409812d49fafb58f)

commit 1e7488d5a94554cf8e2845240b9c61170537c5f5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 17:18:11 2011 +0100

    utils/sercmd: set SRNAME at compile time
    
    - it is set to sip server name (e.g., ser, kamailio)
    - it is used to build the default path to ctl file used to communicate
      with sip server via ctl module
    - reported by Henning Westerholt
    (cherry picked from commit 1b58b26b7ccf7b2c01185a22ad076a3655e43664)

commit abd0a077a626bd780e4719e38c9338d7ba6aa81b
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed Nov 2 12:20:54 2011 +0100

    pkg/deb Add libncurses to build-dep

commit 395b4707025241f8de07a679c04c385a9bfc5937
Author: Michal Karas <largon@largon.net>
Date:   Mon Oct 17 11:18:51 2011 +0200

    app_python: fixing clone string for dirname and basename
    
    - variable tname replaced by dname_src and bname_src, because both
      dirname() and basename() requires it's argument not to change: "These
      functions may return pointers to statically allocated memory which may
      be overwritten by subsequent calls. Alternatively, they may return a
      pointer to some part of path, so that the string referred to by path
      should not be modified or freed until the pointer returned by the
      function is no longer required."
    - related to FS#137
    
    Signed-off-by: Daniel-Constantin Mierla <miconda@gmail.com>
    (cherry picked from commit d05616d81960e6b1647981d8d8b5e0dbe04a3dcb)

commit 639f0a4b7608217679e63e9121fcff34a5c6424c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 03:50:56 2011 +0200

    dialog(k): removed invalid html tag for docbook source
    (cherry picked from commit 1d917dac68bdaf3a6aabcb644e08c00fd2f9ae0f)

commit 6eeaecbf81f07ee4f3d9453c5c3090ef8e90954b
Author: Jason Penton <jason.penton@gmail.com>
Date:   Wed Oct 26 14:32:00 2011 +0200

    Dialog: Fixed lurking html tag in XML doc
    (cherry picked from commit db308939b551a920b31bdebd76c28b5b104db68c)

commit 7c241cea37d31313949bf252ddb063a36c8f1436
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 26 18:59:39 2011 +0200

    dispatcher(k): clarified notes about probing mode
    (cherry picked from commit 9056b574f3df2d3358c3e726772d63bbbcd6dc23)

commit a356ec5e2ce2daa16b1e2339880cb29a39ebc975
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 25 17:35:25 2011 +0200

    core/sdp: restore setting of IP address type
    
    - refactoring of extract_mediaip() skipped setting IPv4/IPv6 type in sdp
      structure
    - reported by Jason Penton
    (cherry picked from commit 6e1af068c99e84d0bfd5f713ced1e5f484ff9c5c)

commit 4bdb5ecc0853968f55cc6fadf12ed05b47c39fdc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 20 23:50:08 2011 +0200

    dispatcher(k): restore actve state via MI
    
    - resetting the state flags were not in effect for active state,
      reported by Asgaroth
    - added define to check whether a destionation addres should be skipped
      or not based on its state
    (cherry picked from commit 25bedcd991bc0225c50467abf0b6e48618893cbf)

commit e19bb840fdb581ca8dbed6410e167b67ee899c77
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 20 20:02:47 2011 +0200

    kamctl: version set to 3.2.0 to match kamailio stable branch



===================== 2011-10-18 Version 3.2.0 Released =====================

===================== Changes Since Version 3.1.0 ===========================

commit bd71957fe6ba1a1b45e530ae623163f7dd56b5cb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 18 13:05:17 2011 +0200

    Makefile: version set to 3.2.0

commit f3694bbc88b7693a6aab693e4aab79de19ab8459
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 18 13:02:53 2011 +0200

    presence_xml: remove unecessary include
    
    - adds warnings about strptime
    (cherry picked from commit 82b44dc4b97a9bd9a3e0720e06c4dda69995b998)

commit 7bbcaadba5674ecde5086037e802b1078e0a5a47
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 18 12:50:49 2011 +0200

    core and modules: fix compile warnings on freebsd
    (cherry picked from commit 7dfda822e579a543bbda65dc4764b0f426a144e5)

commit 2a6b94c7ac3ce8c87509381f85861be484d247b3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 18 11:10:51 2011 +0200

    core and modules: fix compile warning
    (cherry picked from commit e91db504fda2a878418b94f6ab454b22c44fa369)

commit 08390a9a79e111e2d22533476d397dd9a92744ac
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 17 18:42:39 2011 +0200

    dialplan: added sample records to readme
    
    - added note about limitation in using pseudo-variables in replacement
      expressions

commit ae89dc494ff9ef046adf1fb954d41a162e12cfd9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 17 18:27:42 2011 +0200

    dialplan: fix usage of avps in replacement expression
    
    - clone the replacement expression to shared memory before parsing it in
      order to have variables names available at runtime
    - most of variables should be safe to use now in replacement
      expressions, including avps with string name. This fixes FS#153
      reported by Andrew Pogrebennyk
    - variables with dynamic name have no easy way to clone at this moment,
      thus avoid using them directly. Use instead avps or script vars
      ($var(...)), copying the value from initial variable to it. Variables
      pointing to sip message attributes are safe to use.

commit 807f07499b4875cf77463c3bdb6a47e099f18f58
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Oct 17 11:46:45 2011 +0200

    dialog(k): Note dependency between dlg_manage() and transactions
    in docs.

commit 0696af54dac4ecc53bb0a9dc4e56da11bc3f2b30
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 16 11:33:16 2011 +0200

    snmpstats: control exporting registrar records
    
    - exporting of large location database may result in out of shared
      memory, as well as when the records are not pulled - might be the case
      of out of memory messages reported by Klaus Darilion
    - new parameter export_registrar was added to enable/disable location
      records export (off by default)
    - fixed missing exporting the counter with all processed dialogs
      (discussion from March 2011 with Stefan Tiedje)

commit df4dfe61500f4ada6051f0d7c74824efa3c2c628
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 15 23:02:09 2011 +0200

    ctl: used flavour's NAME in path of default ctl socket

commit 242e0ada7df9d105f0045d68cb7481f33e2f04f3
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Oct 15 17:07:12 2011 +0300

    modules_k/(auth|misc)_radius: added cast
    
    - Added cast of int to long in order to avoid compiler warning on 64 bit
      operating system.

commit 5b208d94b6c3d2eee09849af31f589efb9a36c04
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 15 00:07:11 2011 +0200

    kamailio.cfg: added storage of src ip to extra acc example
    
    = renamed define id LOCAL_TEST_RUN to WITH_SRCPATH to match the pattern
    used for default config define switches and to suggest better the
    purpose of setting modules location to sources path

commit 751114fd6ee5eb54b73b9214941ee689b9d70450
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 14 21:34:08 2011 +0200

    kamailio.cfg: load cfg_rpc module to allow runtime updates
    
    - use request_route { ... } instead of route { ... } for easier
      reference in docs and discussions

commit 9fc41bd1a157d7cfe20c389ed3220e559f0b2712
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 14 21:33:08 2011 +0200

    cfg_rpc: improved documentation
    
    - aliased set_now_int to seti and set_now_string to sets

commit 0c36970e4f72f775a29607919a3c9a83df6e0940
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Oct 14 14:06:56 2011 +0100

    modules_k/osp, modules_k/siputils: The bind_siputils function takes 1 parameter, but the bind command in here (and as used in osp) was specified as taking 0 parameters.

commit e34040497b405f3f5c104cb9ba7a1e23e81871bf
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Oct 14 14:03:52 2011 +0100

    modules_k/presence_xml: The presentity activities check wasn't quite right.

commit 92da08fde8ee3273cb7b181f3320fd0f613aeb17
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Oct 14 14:00:36 2011 +0100

    modules_k/dispatcher: Fixes to handling of empty DB and hostnames that cannot be resolved
    
    - Dispatcher handles an empty DB on start-up, but it doesn't do so well on a
      reload - especially when the DB is now empty, but previously contained
      records.  This commit fixes these issues.
    - Dispatcher also doesn't cope well when a hostname cannot be resolved to an
      address.  This means a mis-typed DB entry can stop Kamailio from starting up
      properly.  Also fixed in this commit.

commit 4e4069330fd44e454c7db19b5d944dbe4ca46a39
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Oct 14 13:55:24 2011 +0100

    modules/app_lua: Fix to lua_sr_pv_is_null()
    
    - Previously this function returned an error when it could not retrieve the pv
      (for example if it did not exist).  As Lua is not a language in which you
      have to declare variables not existing is equivalent to NULL.  This function
      now treats a pv that does not exist as NULL.

commit 1ced096557f951b437c1fa5970ac0fa16357d8f0
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Fri Oct 14 11:06:25 2011 +0200

    modules:sipcapture: fixed uint types and IPPROTO_IPIP on Solaris.
    
    		Thanks to Jason Penton <jason.penton@gmail.com> for the bug report and testing.

commit 3e154160f4b94dcb55eb3057dc9c3d346ec25ac8
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Oct 14 11:37:20 2011 +0300

    core: auto_bind_ipv6 : changed param from cfg framework to normal global parameter as setting it at run time doesn't change anything

commit bd3d3546af5e52263ed803000f8b490b96108504
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Oct 11 11:35:56 2011 +0300

    core: added parameter to enable/disable automatic binding of ipv6 interfaces
    TODO: documentation

commit c6b62bf87238be251845f33fc306bb4522ca5915
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Sep 28 13:39:39 2011 +0300

    core:socket_info Added automatic discovery of IPv6 interfaces on Linux using RT_NETLINK socks
    
    The behavior now is identical for IPv4 or IPv6 interfaces : if no listen directives are given,
    either via command line or config file, Kamailio will automatically detect IPv4/IPv6 interfaces and
    bind to them (well, it will not bind to link-local prefixes)

commit e32982644f0da3b9f8240237fdf33dfcabd80af0
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Oct 13 02:23:29 2011 +0200

    dialog(k): Fix typos.

commit 78078ec214827852ca884d1e019b356b95b9de13
Author: Henning Westerholt <hw@kamailio.org>
Date:   Thu Oct 13 00:02:04 2011 +0200

    Revert "message shooter module added"
    
    This reverts commit 9c9609dd2ec1f57f0a7f803728f57e7390a27898.
    
    As announced in the following mail:
    > [sr-dev] Development branch frozen for v3.2.0
    > Daniel-Constantin Mierla miconda at gmail.com
    > Tue Aug 23 14:56:02 CEST 2011
    > [..]the development of new features in master
    > branch has been frozen, to allow proper testing for release of version
    > 3.2.0. That means no new features should be committed to GIT master
    > branch.
    
    The master branch is currently closed for new features. Please re-introduce
    this code again when 3.2.0 has been released and the master branch is open
    again.

commit 9c9609dd2ec1f57f0a7f803728f57e7390a27898
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Tue Oct 11 17:18:17 2011 +0200

    message shooter module added
    
    This is a small module for sending out SIP messages
    outside of the current transaction. The ruri, from, to, additional
    headers, and optionally the body can be specified which make up the
    SIP message that is sent out.

commit f4aa54a8136e36739dc383862ffc32a8eccb7d9e
Author: Sven Knoblich <sven.knoblich@1und1.de>
Date:   Wed Oct 12 09:06:16 2011 +0200

    modules_k/acc: fix cdr documentation
    - using the correct names for the cdr commands(cdr_facility,cdr_start_on_confirmed,cdr_extra)

commit 8c9681ac3ba42287b060fc1b5472cbac7d579cb8
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Tue Oct 11 15:51:12 2011 +0200

    modules:sipcapture: IPIP raw socket has moved to the sipcapture.
                        fixed source(from) structure in IPIP mode
                        fixed port and port range in monitoring/ipip mode.

commit d22d6d3f57d2fde13456eb365f42fd035980faed
Author: Sven Knoblich <sven.knoblich@1und1.de>
Date:   Tue Oct 11 10:34:47 2011 +0200

    modules_k/acc: Fix bug which produce an invalid cdr-log
    - exclude the check of an existing cdr_log_extra_str in acc_mod.c:mod_init.
      (fixes flyspray-issue 166)

commit 49f44b0f415011d0d3b62fca179021fdf18b5fad
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Oct 10 14:55:40 2011 +0200

    acc(k): Remove double #define.
    
    Remove definition of ACC_CORE_LEN in acc.h, it's part of acc_api.h
    nowadays.

commit c51bc346dee05d47b53ba150dc681e9ed779574a
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Mon Oct 10 11:55:35 2011 +0200

    modules:sipcapture: fixed len of SIP message for hep callback function

commit a67ba5f07b433e677b65a329e22c97fbef957dc4
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Oct 10 11:43:46 2011 +0200

    kamutil: Improve README.
    
    - Remark that <tablename> and database table name must match.
    - Brand evilness of dashes as opposed to underscores.

commit 11bdc4ad80f653c208f60c200725eb81f28757b2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 9 23:49:25 2011 +0200

    lib/kmi: use system malloc for MI operations

commit 509763109abfe3e6e10da5a6974ee29e9630a409
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 9 19:33:26 2011 +0200

    dmq: removed libxml2 from Makefile deps
    
    - the lib is not used in sources

commit dbb012c32ec34cafc7cef3e5af66f6dc3f61c303
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 9 13:05:36 2011 +0200

    srdb1/kamctl: dialog_vars table added to dialog group
    
    - dialog_vars is used by dialog module and created at once with dialog
      table, otherwise the module does not start

commit 724a642d99becfe674a8af62b4d80a67a9097608
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 9 12:16:13 2011 +0200

    core: move exit salutation before killing children
    
    - syslog() is not re-entrant (see linux man page) and can cause troubles
    - some that could be related is reported by Alex Hermann, FS#165

commit f4b7f30172ae9c790d21493f26a77fb515b7953f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 9 12:01:22 2011 +0200

    dialog(k): new dialogs can be created only by INVITE
    
    - remove unnecessary reset of current dialog pointer added previously,
      spotted by Timo Reimann

commit 95c66ffadf3c12a0840cd4beac49ebe185d9f13d
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Oct 3 20:39:43 2011 +0200

    acc(k): Replace custom time arithmetics logic with existing macro
    definition.
    
    - Use timersub() from <sys/time.h> instead of custom code.
    - In string2time(), restore microseconds precision before
      returning timeval structure (because timersub() expects it).

commit 05e61912a21226f08725953f9e3b31b2c70caca2
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Oct 3 20:10:34 2011 +0200

    acc(k): Add time2string() function and clean up code.
    
    - Implement time2string():
        * Replace redundant time-to-string conversion logic in various
          functions with implementation and call to new, single function.
        * Reduce microseconds precision from timeval structure to
          milliseconds as it used to be prior to refactoring.
        * Store conversion result in static buffer.
    - Add variables and macro definitions now needed.
    - Remove variables no longer needed.

commit 8fd917d8306ba784242e5fa60e3e5598b2d4b922
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Oct 3 19:26:24 2011 +0200

    acc(k): Rename time_from_string() to string2time().

commit c73f7667017ab6f3889995db6d530aad3e36b28b
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Sep 28 00:13:55 2011 +0200

    acc(k): Change time_from_string() signature in order to remove
    is_time_equal().
    
    - Let time_from_string() accept pointer to target timeval struct and return
      success/error state in int-typed return value.
    - Change variable names in time_from_string().
    - Remove is_time_equal() which was used for error checking only.
    - Remove time_error struct which is now represented by return value from
      time_from_string().

commit 88b730e923b4baccfdd9966702d1de5b1a1f1a16
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Oct 3 19:21:28 2011 +0200

    acc(k): Change start/end IDs from sz/ez to st/et.

commit 5a6a30cd341f14ba46e8a1b99e9c4327a2fad495
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Sep 28 00:28:05 2011 +0200

    acc(k): Replace call to (deprecated) atoi() function with
    strtol().

commit 3e7994287183bf6cc352c11f2bb15f934822142d
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Sep 28 00:02:53 2011 +0200

    acc(k): Rename '*_timeval' variables to '*_time' to decouple name
    from type.

commit 49ac4e51e382588f9212eef3500b1b65deb3e9c4
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Sep 27 23:46:14 2011 +0200

    acc(k): Replace ftime() call with gettimeofday().
    
    * ftime() is deprecated, switch to gettimeofday().
    * Employ timeval structure (created from gettimeofday()) instead
      of timeb structure.

commit f54077c7f3c5fbe8863939b5c1aa04b860c08cf1
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Fri Oct 7 15:11:26 2011 +0200

    lib/srdb1/schema: Add XML files related to dialog variables.

commit ad30fed3e34904b3c8857aacf0925ee4d50fed1b
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Fri Oct 7 10:34:35 2011 +0200

    kamutil: Add README describing the naming schema.

commit 4e6e29c23530bf7a816de3acbd8e771fddf76929
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Fri Oct 7 10:31:23 2011 +0200

    kamctl: User proper naming schema for SQL creation scripts.

commit 20599670ead5e94f9b3716eaf6e05324eb99b39d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Oct 6 21:25:38 2011 +0300

    modules/lcr/utils/lcr_upgrade_from_3.1.sh: upgraded also lcr_gw index.

commit 65bac992f75893bd9f80894af9c0759f5492498b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 6 17:47:38 2011 +0200

    core: make method conditions work on reply routes
    
    - reported by Alex Hermann, closes FS#164

commit c0eb441000e08e1efce8730ddae51efdddc9814a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 6 01:02:11 2011 +0200

    textopsx: copy msg->hash_index in msg_apply_changes()
    
    - patch by Hugh Waite

commit 3c1b71be01bd2e6a7d92ea44e8157f718c6b7d95
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 4 22:34:35 2011 +0200

    dialog(k): reset global dlg shortcut when destroying the structure

commit 2a9b1cdc98d322032598d0c48fc4d7db085a83a0
Author: Carsten Bock <carsten@bock.info>
Date:   Tue Oct 4 17:14:44 2011 +0200

    - In active probing mode (ds_probing_mode=1) disable gateways not only on "408" but also on any non-successful reply (as per ds_reply_codes)
    (e.g. SEMS replies with "503" when in shutdown mode)

commit 75303582714b3f110f3535ba6856d9a71d8ee608
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 3 23:51:16 2011 +0200

    core: some adjustments to two debug messages

commit c54b89a3a840e032a2a8abc5842b3ea78fa537ba
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 3 17:33:21 2011 +0200

    db_text(k): init new db text table structure to 0
    
    - can cause a crash when reloading, reported by Bruno Bresciani

commit d8a6e606267d2cfd9eaf6343120b7a89046c411f
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 23:42:00 2011 +0200

    mi_xmlrcp: Update dependency in doc.
    
    Acording to the Makefile, libxmlrpc-c3 versions 0.9.10
    and 1.06.10-1.06.30 are supported.
    Build against version 1.16 fails at the moment.

commit 40a72503f71d019e882454c00db2455de32dbc90
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 22:15:28 2011 +0200

    pkg/debian: Add Wheezy build folder
    
    Include a "debian" folder for building kamailio
    in Debian Wheezy

commit b1237297178d7f7c161fe7dff200485ff426509c
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 22:07:00 2011 +0200

    jsonrpc: Fix dependency in doc
    
    Added libevent as dependency for jsonrpc module

commit e25a712439446f7180a87b53e8e34a7ab2a74756
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 22:01:42 2011 +0200

    pkg/debian Add libevent as dependency for jsonrpc module

commit 8fb4f1da10f0e57c4738fec6c737e377201171a1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 2 14:21:44 2011 +0200

    iptrtpproxy: docbook parts split to functions.xml and params.xml

commit 7296a3d6b0714d1284499e01811f3710dd48d223
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 2 14:05:48 2011 +0200

    auth_identity: parts of docbook split to functions and params.xml

commit 558dea003f05078699fb41d66d51d2999b2d7cf2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 2 13:38:17 2011 +0200

    app_lua: test for lua5.1 with pkg-config
    
    - the lua lib name for pkg-config can be lua5.1 on some distros
    - reported and troubleshooting by Jon Bonilla, affecting Debian Wheezy

commit ba7961bb891e6fa75e57e82ae88f63df6f772844
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 2 10:53:35 2011 +0200

    modules*: regenerated readmes

commit f0199eb6622c9b98a45ed2dc5b6b931c34fb5592
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 2 10:49:04 2011 +0200

    Makefile: version set to 3.2.0-pre4

commit 26b2312814b317c6f51ccb81d2f11c840f2e2873
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 2 10:47:35 2011 +0200

    osp(s): updated name of docbook file to follow common pattern

commit 9114eebc9b15f98d3df4379e3d1a7831e3d329ad
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 2 10:42:27 2011 +0200

    docbook: consitent titles of main section
    
    - updated various forms of titles to: Functions, Modules, MI Commands

commit e37d7de9a7eeb55245a37475685c8370422c2d4b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 22:30:23 2011 +0200

    privacy: removed incomple module residing in for long time

commit 68b761bcb0a475031cef595a851664a60cb7011e
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 08:38:49 2011 +0200

    pkg/debian: Add Json modules and package

commit b98890fd7a682d702a3fcc7d552c3817210f87c5
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 08:23:17 2011 +0200

    Makefile: Do not exclude modules without external depends

commit 4e3c5c81f07fab443ca1ccfe012b85b9c0d2398c
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 08:20:00 2011 +0200

    Makefile: Add dmq to K modules standard

commit 08ad3ec093c8010253be4067da0c205ab3a639fd
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 08:12:09 2011 +0200

    pkg/debian: Add sqlite module and package
    
    Add db_sqlite k_module package.
    Also fix ndb_redis packaging

commit a18873765fe7cbd08394f4f4e951f5056d8ea68d
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 07:54:01 2011 +0200

    Makefile: Add async module

commit 7bc98250523f2e9620b7afa265f1d747ef9c4ddb
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 2 07:44:39 2011 +0200

    ndb_redis: Add to Makefile and kamailio/debian packaging

commit f3e297a9412dcf834cc89e03e6a7f7d114a27b63
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 22:01:33 2011 +0200

    tm: some restructuring to docbook for better ToC

commit 9f5e182d73c4e6fb1bc28b468f549eddfbeae788
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 13:54:38 2011 +0200

    modules dockbook: a bit of restructuring for better ToC

commit 138402b936a435b7e6722ba1e94dcb2ec4328e8a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 11:37:28 2011 +0200

    cfg_db: added docbook params.xml file

commit 8a4b3b96183425551cd16a9255f96dc262baccf9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 11:07:01 2011 +0200

    jsonrpc-c: renamed docbook files to match module name

commit bc995845e31a01563d4cec863f73f729fd84da46
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 10:59:52 2011 +0200

    pipelimit: small reformating of parm presentation
    
    - avoid syntax conflict between txt result and dokuwiki link when
      generating indexes

commit c0c1513114b14fb6a49cce0c529cafc001c06f6d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 10:57:39 2011 +0200

    auth_identity: added section id in docbook and common xml tag

commit d62abc5fefaa77d9818059a57bfd862171aeb1e6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 10:55:33 2011 +0200

    iptrtpproxy: selects are now a different section than cfg functions
    
    - docbook updated with proper category for exported selects

commit d4a344f3251d8e9d8136e815f4e36c9b23f5b263
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 10:36:45 2011 +0200

    drouting, call_control: updates to docbook files
    
    - use <xi:include .../>

commit 11890e6b7172c954e5aed02e9bd8c76895ed1504
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 1 10:16:00 2011 +0200

    p_usrloc: updates to docbook files
    
    - renamed *_user to *_admin file to match the general pattern
    - use <xi:include ...> to include the files

commit b7ed9c1e4f83f834ba067b60a54a8eb96083c9c1
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Fri Sep 30 20:44:04 2011 +0200

    modules:sipcapture: fixed mirroring capture mode. Currently it works only on Linux.

commit b03a9c1bc72a348c633db94410a7f3e01c5849ab
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 30 14:02:47 2011 +0200

    xmlrpc: redeclaration of v/snprintf() conditioned by OS type

commit a367a923f83a60b1b72907d42afff4484f49ad35
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 30 13:58:16 2011 +0200

    lib/kmi, mi_*: better handling of mi child init

commit 0e5fc52895a67818c8559bcc673238b766e70445
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 30 13:29:15 2011 +0200

    lib/kmi: safety re-entrant call of init_mi_child()
    
    - otherwise can get to a loop of trying, reported by Juha Heinanen

commit 66ab994a5905d2416a0452841407be6f63f504af
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 30 13:17:48 2011 +0200

    lib/kmi: turned a debug log in error

commit de1509aa7f2ade90074c2fe3b9b13e65224c4b43
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Fri Sep 30 11:37:35 2011 +0200

    modules:sipcapture: ETHHDR moved from .h to .c, changed method check in kamailio.cfg

commit 81d63a1737506c0b34e4450b5867ab37ad584faf
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Sep 29 13:03:47 2011 +0200

    modules_k/sqlops: use signed int to string conversion for sql.val transformation
    
    integer variables in kamailio are signed by default, conversion to string should be signed also.

commit 6f8973719551dec797c89452ba1abb87ef1ad894
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Thu Sep 29 15:03:46 2011 +0200

    modules:sipcapture: fixed rotation scripts (maxvalue) and SQL schema.
    
          Thanks Dorn B. <djbinter@gmail.com> for reports and fixes.

commit 81cd64fe78847ad777f51316c50ff45becf1764c
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Thu Sep 29 14:26:45 2011 +0200

    modules:sipcapture: fixed mirroring mode, added BPF functionality.

commit ece30366e75ad5f057e911ce25f79caf9861cec6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 29 10:25:16 2011 +0200

    core: init_child(1) for no-fork mode replaced with init_child(PROC_SIPINIT)
    
    - use the defined proc rank instead if its integer value

commit c5ca00dc3dba76bfa5d2b35963999ae10db88cf1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 29 10:23:23 2011 +0200

    usrloc(k): use PROC_SIPINIT instead of rank 1 in child_init
    
    - this child is used to load the records from db

commit 119ad6aa83a6efed0ffc71eea477e4b5cfbea73b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 29 10:18:01 2011 +0200

    core: added defines for positive child ranks
    
    - PROC_SIPINIT 1 - some modules do specific processing in this child
      only, like usrloc loading records from db
    - PROC_SIPRPC 127 - special positive rank to use in RPC workers to init
      the environment for processing SIP-specific commands. For example,
      event_route[tm:local-request] can be executed due to MI/RPC command
      and have insite SIP related functions from other modules which need db
      connection, like acc_db_request()

commit 359a96d03de99322a34934160d2817157b35846c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 29 10:14:32 2011 +0200

    lib/kmi: init MI workers for SIP commands when needed

commit ab84134e3d34c0ef85c3bb9724796f9c2034f342
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 29 09:33:01 2011 +0200

    tm: advertise child rpc-sip mode when using event_route[tm:local-request]
    
    - the event route can be executed for MI/RPC commands that send
      requests, thus there are sip routing specific functions that work when
      child init for sip workers is executed for that process
    - example, calling acc_db_request() requires db connection to be open

commit dc623cc5923c76747c177da10c9b0a8194269a33
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 28 23:56:07 2011 +0200

    xmlrpc: updated the way of setting child sip-rpc mode

commit df1958c017f01d82a2dfe821daa292884a989c1a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 28 23:52:49 2011 +0200

    core: allow to specify that rpc worker may handle sip commands
    
    - a sip child process can handle rpc (e.g., xmlops module) and a rpc
      child process can handle sip commands (e.g., mi cmd to end dlg and
      event_route[tm:local-request])

commit 30f501c092cecdcd6c90b929f14db45921767f77
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 28 23:04:02 2011 +0200

    mi_rpc: call init mi child based on core advertising of handling rpc commands
    
    - update of the way to prepare sip workers to execute mi commands via rpc

commit f079c23f5af6f154279d9a68a0c2abd09a788736
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 28 22:53:48 2011 +0200

    xmlrpc: advertise to core that sip workers handle rpc commands

commit cbc9536d27b23115a0731a6f93bd8ef1b673be1c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 28 22:48:23 2011 +0200

    xmlrpc: removed redeclaration of v/snprintf()
    
    - otherwise throws error on mac os x when redeclaring functions from stdio.h

commit 37db0ca71dd14653182ac3c50bc27c7271f322cf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 28 22:18:53 2011 +0200

    core: added possibility to know if SIP workers handle RPC commands
    
    - for example when using xmlrpc module, the rpc commands are handled by
      sip workers and may require special sip child initialization

commit 908f674978349fbabb2d79d6e45381a77a716ffc
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Sep 28 20:04:36 2011 +0200

    dialog(k): Do not consider late requests for dialogs in "deleted"
    state as bogus messages.

commit 3786d09052e4852ba50bec78aaf00485de5a12e6
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed Sep 28 17:19:14 2011 +0200

    Fix previous commit e5a5344290a351344c2451017d1d5677fe649cb8
    
    Thanks to Andrew Pogrebennyk

commit e5a5344290a351344c2451017d1d5677fe649cb8
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed Sep 28 17:16:34 2011 +0200

    ndb_redis: fix parsing of integer arguments from server connect string
    
    Reported and patch contributed by Andrew Pogrebennyk

commit 550a879a50258557084da59787f13f3f6eb285f1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 28 16:02:02 2011 +0200

    core: parser/sdp - optimized a= lines parsing
    
    - search for next a= line from the last parsed position in previous a=
      line

commit e332ea9eaac3035c3ccd1605ef0b623a2b63a733
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 28 15:48:02 2011 +0200

    core: parser/sdp - fixed parsing attributes lines
    
    - some lines were mistakenly jumped over

commit 54040de85443e16a0022a94ab0a9d2d7a8d1bbf4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 28 14:45:53 2011 +0200

    core: parser/sdp - refactored extract_mediaip()
    
    - added ser_memrmem(...) for reverse search of a str in another str
    - use it to locate IP address in o= and c= lines
    - this closes also FS#160 reported by Juha Heinanen

commit 8d58764d5aaffa25b95ae91adb665b415b7c00e1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 27 18:09:41 2011 +0200

    Makefile: version set to 3.2.0-pre3

commit 47a3fdbff80ac33add93d1a6f1474c8fd890fbbb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 27 18:09:13 2011 +0200

    core: added extra debug messages when cfg command is not found

commit 98b3adf26f69e5dbbddc36f502b5f2ef1f3a729c
Author: Henning Westerholt <hw@kamailio.org>
Date:   Tue Sep 27 10:02:50 2011 +0200

    pike(k): add parameter unit, reported from dirtytoni at gmx dot de

commit eeaa618e9ae30651622cb929973cdd6a068c35c4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 26 22:46:16 2011 +0200

    db_mysql: use variable $(MAKE) to call make command

commit 00ea7481c9c78f123c70aaa32e1eb618c2f05392
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 26 22:44:49 2011 +0200

    srdb1: make strptime available on freebsd
    
    - remove unnecessary compile flags from db_ut.h

commit 5b7c18bcc197735ff6720ba13e463f0be81f86fe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 26 12:17:04 2011 +0200

    kamailio.cfg: version set to 3.2 in top comments

commit 19bc90cf844a65ed94d495276452b7f6693da799
Author: Carsten Bock <carsten@bock.info>
Date:   Sun Sep 25 21:53:13 2011 +0200

    - added sipcapture at a second place (was missing)

commit 6e07eea40c8a67b0b4a24fc59d5c712888cd9cf3
Author: Carsten Bock <carsten@bock.info>
Date:   Sun Sep 25 20:50:36 2011 +0200

    - Added sipcapture to the default module-list

commit 195ab47e1dd5a50d041315ea77eecea9cbeba249
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Sep 24 10:49:22 2011 +0200

    kamailio.cfg: check if uri is still myself after aliases and speed dial
    
    - new uri can point to other voip domains
    - set tcp connection lifetime and max expires registrations to cope with
      UA behind NAT using TCP

commit 5b76dc48d7c49a4f84b4e5a4515676ada2a2aeec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 23 22:08:23 2011 +0200

    tmx: $T(reply_type) to solve ambiguity of received or local replies
    
    - it returns 1 in failure route if the reply was local generated (e.g.,
      timeout), otherwise is 0. If there is no transaction, it returns null.
    - helps to avoid using $T_rpl(pv) in case of local replies, which returns
      null for any pv, without it is no way to detect if some pv is null value
      itself or the whole reply is not available

commit 989960e3a76e3a993880824aac855f98a3fe1a5a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 23 21:48:46 2011 +0200

    acc: enable TM failure callback for missed calls when acc_prepare_flag is set
    
    - allow recording missed calls even the flag for it is set first time in
      TM-specific routes
    - reported by Ozren Lapcevic

commit b986c7f0ace6d5d96bf99add235c56045176a31a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 23 12:52:10 2011 +0200

    acc: documented new parameter acc_prepare_flag

commit cf7a3249f9f792b0873b20bf6998f2ba74d7eb9d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 23 12:42:22 2011 +0200

    acc: added acc_prepare_flag parameter
    
    - useful to tell to acc module to prepare the request for later
      accounting, in case the acc or missed call flag is not set in request
      route block at all. Otherwise there will be no accounting if the acc
      flags are set for first time in TM routes (e.g., like failure_route)
    - dicovered in a discussion with Ozren Lapcevic

commit 7b2eca4939ccae16ec7af4fa42e4b8a6e1a92b2f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 23 11:46:20 2011 +0200

    siptrace: track outgoing CANCEL requests
    
    - use associated INVITE transaction to check the siptrace flag state
    - reported by Timo Klecker

commit 377b2f7569902b4f23d4b0431fcac681214be703
Author: Henning Westerholt <hw@kamailio.org>
Date:   Wed Sep 21 23:54:31 2011 +0200

    doxygen: a bunch of doxygen fixes in dialog module

commit d168239a5f8efea45f349296effb439fab2d980a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Sep 21 21:33:58 2011 +0300

    modules_k/presence:  fix typo and improved error message
    - Fixed typo and improved error message on missing/unsupported event
      header field.

commit ffa448dc09f9e086af9d5089e3d6fcec5104a283
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 20 20:21:55 2011 +0200

    srdb1: return error code when DB URL is too long

commit d3b4e5486e6cefce9c7aad53b29e3514b35cfde4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 20 20:08:16 2011 +0200

    pv/presence/pua: add a couple of missing free_to_params
    
    - patch by Walter Doekes, closes FS#156

commit fa71c181323448c934ac46ab9720e52783f62eb7
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Sep 20 17:51:33 2011 +0200

    lib/srdb1: fix conversion of longlong to string in db_val2pv_spec()
    
    The length of the buffer was not set, resulting in random failures.

commit 4b220639cb255a20bac762fd60e36a4336339a45
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Sep 20 09:46:53 2011 +0300

    modules_k/nathelper: fix_nated_sdp("1") fix
    
    - Call fix_nated_sdp("1") now adds a=direction:active line after every
      m line in sdp.  Earlier it just added one a=direction:active line at
      the end of body.

commit 713c1c52e36b9ee16eb13a79e3ee611e869080bb
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 19 13:47:22 2011 +0200

    pkg: name fixes and cleanups, Patch from Claudio Furrer, elcaio at gmail dot com

commit dc453ac1e9d631c417b1b9c70d7b9d92107b389f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 19 13:29:44 2011 +0200

    parser: switch pkg_free(tob) to free_to(tob) to free To header structure
    
    - this takes care of freeing parameters in case of paring error of
      To-like headers
    - patch by Walter Doekes, closes FS#155

commit 67172188fa23112fa449cf60d790bc84d02fed28
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Sep 15 17:05:36 2011 +0200

    cfg framework: fix the freeing of the replaced strings
    
    The replaced strings and the memory block of the replaced
    group instances cannot be freed when the old configuration
    block is freed. There might be a child process using an even older
    configuration that references to the same string value or to the same
    group instance that is beeing replaced. Hence, as long as there
    is any child process with an older configuration, the replaced
    strings cannot be freed.
    
    The fix is to link the replaced strings to the per-child process
    callback list instead of the old cfg block. When the last child process
    updates its configuration, it also frees the old string values.

commit 4e5338445645a0f4a51122b9224f801bba4107f3
Author: Sven Knoblich <sven.knoblich@1und1.de>
Date:   Thu Sep 15 10:22:07 2011 +0200

    Fix typo in acc_cdr
    
    - rename dot_adress into dot_address

commit 260d43bb8bda0e9f0445d7d942dc10e976ff4621
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 14 20:59:54 2011 +0200

    tm: proper data type for xavp in tm_xdata_t struct
    
    - reported by Juha Heinanen
    - no real effect on branch 3.1 as xavps not enabled, but anyhow safer

commit 1e83919bcb3f1a2fb2890a6766a007b8f50cb986
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 14 18:39:37 2011 +0200

    tm: backup X/AVP lists when building new T in t_uac()
    
    - build_cell() is setting core X/AVP lists to new T structure, losing
      the lists that existed in case another T was set already. This is in
      t_uac() which is used for local generated requests, such as
      uac_req_send(), presence notifications, msilo...
    - a revious patch was backing up only X/AVPs lists for
      execution of event_route[tm:local-request]
    - reported by Vitaliy Aleksandrov

commit 61b184441ae41d08c9af06bc5192453f6f424d20
Author: Sven Knoblich <sven.knoblich@1und1.de>
Date:   Wed Sep 14 14:43:32 2011 +0200

    Fix bug which causes an error during the convertion from string to timeb
    
    - add buffer in time_from_string. copy given string into buffer and finish it with '\0' to use c-string functions correctly.

commit 10eac9b125ff2a13a2ae240897a3f17bc1243c71
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 14 11:19:56 2011 +0200

    rr(k): execute callbacks only for local route uri
    
    - parameters callback are executed only if there is a list with
      parameters in Route URI and for loose routing the URI has to match
      myself condition
    - should fix bogus value of Route URI params in callback function when
      URI of top Route is not myself
    - reported by Andreas Granig

commit 65c6b1e6367cd01149e70c49140322b563a27e4a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Sep 14 10:16:01 2011 +0300

    modules/lcr: added PROTO_OTHER case to which in order to get rid of warning

commit 442413cc843bd14e6cc8378fb430d4dd1036a5c8
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Sep 14 09:49:30 2011 +0300

    modules/utils: updated xcap table version to match schema

commit 4554192745fb4273ad082b65e7453d55fec3c48d
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Wed Sep 14 00:03:24 2011 +0200

    [core] Bug fixed in Via parser when \r or \n after Via transport.

commit cf4651db94cc88b6523918faed6d89e8497da2c6
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Tue Sep 13 23:59:25 2011 +0200

    core: Via parser now allows any token as Via transport field.

commit b111f84d6afc3cfe1b4906771e0d406e377f2e31
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 13 18:56:54 2011 +0200

    xcap_server: check xml document validity for db interaction
    
    - check if xcap doc is xml valid before inserting in db as well as when
      retrieving from db
    - better safety check for retrieval of etag value from database record
    - reported and intial patch by Laura Testi

commit 43ba6803e884cc3e6c9d06e88e17a394c2c0c737
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 13 11:54:28 2011 +0200

    kamctl: added mtrees tables for dbtext and berkeley db

commit 0704fc5368f04ca90e6dcbc6bb6408b6339a96a4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 13 11:53:44 2011 +0200

    utils: removed invalid lib path from Makefile

commit b383c20861adc64b8628d6db1933edbeeb036ef5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 13 11:52:57 2011 +0200

    utils: is_int() function moved to pv module

commit c8fb53ac59b4fba5d16de9745a723a18897b282b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 13 11:48:49 2011 +0200

    pv: moved in is_int() from utils module
    
    - function added by Juha Heinanen in utils module but works on
      pseudo-variables, thus is here is a more appropriate place

commit 9cc429b65b86c763bf7a56737fbb61c260030b35
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 13 11:02:21 2011 +0200

    textops(k): cleanup of route types for exported functions
    
    - convert to ANY_ROUTE the long list of all route types
    - removed non-existing anymore route types

commit c867df9a6212db099d23ba099e22b970b49f3a84
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 12 21:29:26 2011 +0200

    doxygen: fix a bunch of errors in parser, db_mysql and xmlrpc modules

commit 451eb00507c3f4fe81c16da83dae11223efb6cfe
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Sep 12 11:25:26 2011 +0200

    modules/auth: mark credentials after verifying realm, not only after authentication succeeded
    
    Make $Au backwards compatible with 1.x. In 1.x $Au would be set to the credentials
    username@domain for matching realm, not only for successfull authentication.

commit 07b830d4aca21074592dc92dd99c7f7da924bcab
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Sep 6 10:18:10 2011 +0200

    lib/srdb1: eleminate string copy in db_val2pv_spec()
    
    After fixing a memory leak, i now realize pv_set_spec_value() always makes
    a string copy too, so this one can be removed safely.

commit 6537171c48a35af3a0e01f932b6abd595cb5f95a
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Sep 6 14:44:25 2011 +0200

    modules_k/nathelper: fix add_contact_alias() for contacts without angle brackets <>
    
    When adding the brackets and the alias, the function suffered from the
    infamous problem that the same part of a message can only be changed once.
    Inserting 3 lumps created an offset problem resulting in the alias
    parameter being added outside the brackets. This patch converts it to
    adding just 2 non-overlapping lumps by combining the closing > with the
    alias parameter.

commit 11f7ddaf80d2865a649d35581f8d0ff06857af04
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 12 12:52:33 2011 +0200

    dispatcher(k): typo in ds_next_dst() dstid avp handling
    
    - fixes wrong condition in finding dstid avp
    - patch by Bogdan Pintea

commit 02e845bf64f0151255ca54feb7f59a9b500dc1e0
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Sep 12 11:20:55 2011 +0200

    modules_k/dialog: Do not log an ERROR level message when
    attempting to delete a non-existing dialog variable, thereby
    bringing dialog variable behavior more in line with AVP behavior.
    
    Credits to Anca Vamanu (anca.vamanu@1and1.ro).

commit a8d376e9108e1f1835a40c5da29b104adf847399
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Fri Sep 9 13:34:10 2011 +0200

    modules_k/dialog: Remove unused parameter "new" from prototype and
    calls to set_dlg_variable_unsafe().
    
    Credits to Anca Vamanu (anca.vamanu@1und1.ro).

commit 59da3210b23cd376662c97bc3d18de78d4a88efa
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 9 10:25:31 2011 +0200

    Makefile: version set to 3.2.0-pre2

commit 5969fc96aac2ae61f1171c704e98a681f2679ed4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 9 10:25:02 2011 +0200

    xcap_client: use curl-config to get include and lib compile flags

commit 3e502e2ac387999306d4a472784ed0699b8c7f77
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 9 10:08:33 2011 +0200

    xcap_server: use xml2-config to get include and libs compile flags

commit 3dde3b652f8ceb7300cf8ac3b4ce4a04dcf6b642
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 8 16:05:42 2011 +0200

    kamctl: regenerated sql scripts from latest db schema

commit b123fcd6009a7d13091233556963f84d2a850ed5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 8 16:02:49 2011 +0200

    xcap_server: ability to insert new nodes in xcap docs
    
    - xpath cannot do it alone when the selected node is missing
    - reported by Laura Testi - credits for testing and further patching

commit 7603a6aa4526a87cd2942d913cf9327a39aa3c33
Merge: 7e1564b 5ecd7de
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 8 15:58:37 2011 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    * 'master' of ssh://git.sip-router.org/sip-router:
      lib/srdb1/schema/pr_xcap.xml: made doc_uri size match XCAP_MAX_URI_SIZE

commit 5ecd7deddc7a6fb23f8d0bb530be3e68672c495d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Sep 8 09:36:34 2011 +0300

    lib/srdb1/schema/pr_xcap.xml: made doc_uri size match XCAP_MAX_URI_SIZE

commit 7e1564b7e67a25eb22c26f4ae235d9b380ce8417
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 7 21:57:03 2011 +0200

    xcap_server: remove invalid lib dir from Makefile

commit cad2daebf295443f2318abbb608102bb99111948
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 7 13:23:07 2011 +0200

    dispatcher(k): fix segfault if dispatcher cannot resolve hostnames
    
    - applies if the dispatcher module cannot resolve hostnames during
      startup (and tries to shutdown)
    - patch by Hugh Waite

commit 08a4bbcecfb878fc520f4a2bab182bda1526ce62
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 6 21:47:45 2011 +0200

    app_lua: use pv spec cache
    
    - avoid memory leaks when working with PVs that have dynamic name

commit b24b560af3acaec10c61d0709d7b1ad63c377b92
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 6 21:44:12 2011 +0200

    core: caching support for pv spec parsing
    
    - can be used to reduce pkg memory usage by PVs
    - solves memory leak of using PVs with dynamic names from embedded
      languages

commit ed55e6f5080df7a154ba4c233d098672e688b305
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 6 14:14:01 2011 +0200

    dispatcher: just some 80 char long line alignaments

commit c589ca35b2aa3097a3c9e2a5a050514337300c05
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 6 14:12:00 2011 +0200

    tm: update T msg flags after {branch/failure}_route
    
    - after execution of branch_route or failure_route, set the message
      flags of the temporary request back to transaction request
    - 1.x behaviour
    - reported and partial patch by Alex Hermann

commit a89e2b1a2f71c932f38c0bfdcceb2fa1880431f5
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 5 21:50:23 2011 +0200

    pgk: add symlink to kamailio directory for new gentoo ebuild

commit 4c201e8c08e607f60efe695b5b9bb22042b7dbbe
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 5 21:46:12 2011 +0200

    pkg: also remove Makefile.defs.diff from calling files

commit 65340ae5b19f20d904d6a80b2e80711c93d44f7d
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 5 21:42:03 2011 +0200

    pkg: remove Makefile.defs.diff file, which set special daemon name - use the default

commit e9771b7dd11287b48f8684d3603b4e0b61d0b462
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 5 21:33:21 2011 +0200

    pkg: move gentoo ebuild to ser directory, remove obselete 0.8.X ebuild

commit d7b0e82c14caa1809bb6f0d96646354eabf2c253
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 5 18:17:40 2011 +0200

    pkg: remove obselete gentoo ebuild, add new generic ebuild from Claudio Furrer (FS#134)

commit 15adc86286e05805cb99617686ae2c6fe1e69d27
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 5 18:10:39 2011 +0200

    pkg: fix wrong package name, closes FS#148, reported from Andrew Pogrebennyk

commit 77d6e6697d8918dfd528046f74a2c97ce4b62a00
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Sep 5 17:24:47 2011 +0200

    lib/srdb1: remove comments on db_val2pv_spec() that resulted from merge error

commit 5105633118009caebf92a35bd23bf2f7cf53548b
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Sep 5 17:08:18 2011 +0200

    modules_k/sqlops: fix memory leak with string memory in sql_xquery()

commit b4af74a164d521f7db21abb9257e33e6e82dc985
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Sep 5 16:41:55 2011 +0200

    lib/srdb1: Fix memory leak with string memory in db_val2pv_spec()

commit 123e831d69a69dbc97e7c2424ebc701b1c624924
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 5 14:14:54 2011 +0200

    srdb1: fix for undeclared INADDR_LOOPBACK on darwin os

commit 21ff48876956bf1df67ace6651ea9782e297946b
Author: Sven Knoblich <sven.knoblich@1und1.de>
Date:   Mon Sep 5 13:35:50 2011 +0200

    core: fix typo in parser.
    
    - use correct function-name in log message of parse_param.c:parse_contact_class.
      (fixes flyspray-issue 147)

commit 28af5617ff471e975dbfeea0e49112e9f0f607f8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 5 13:44:06 2011 +0200

    srdb1: fix compile warning related to strptime on linux

commit 5148e721c2fb569d0cab78eaccfba1877721193b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Sun Sep 4 22:14:09 2011 +0200

    rr: remove out commented is_2rr function, not compiled since more than two years

commit 8d67ed8e92dd0e46490d44e1dcd869b12116e4ec
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Sun Sep 4 22:13:23 2011 +0200

    modules: several small doxygen bug fixes

commit 5813703a7931f288b95840b9a93c628773c33a03
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 2 10:22:35 2011 +0200

    sctp: update the cfg before handling notifications
    
    Update the local config immediately after successfully reading
    a message (before processing notifications, since some of the
    notifications processing makes use of cfg values).

commit b1a8bfd69c82e700ad31ebda16f571ff610c72a7
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Sep 1 10:26:05 2011 +0100

    modules_k/sqlops: small bug fix to sqlops_get_value

commit 5fd18d3ccc29c2a194ddcd9b5b533c7c927b0ef1
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Wed Aug 31 22:02:45 2011 +0200

    - fixed throttling (do not override values when adjust_timeout())

commit da79de336c13dca23ad6cfd13c961ec1ebee7e46
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 31 23:49:14 2011 +0200

    app_lua: fixed copy-and-paste error in loadin registrar API
    
    - patch by Hugh Waite

commit d593078c2e0bb123d56de2d440473cc12a08fba6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 31 09:38:28 2011 +0200

    usrloc(k): request a db connection per child
    
    - avoid sharing the connection between processes
    - reported by MSZROS Mihly

commit 8e400e86fe48202b05dd4e439a208945bb233353
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Aug 29 18:09:51 2011 +0200

    modules_k/dialog: Show error message and return from function
    prematurely if trying to remove a non-existing dialog variable.
    
    - Fixes a segfaulting bug.

commit 1b3cc04023100e3c27d130002dc03c4bf33e21ff
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun Aug 28 15:36:56 2011 +0300

    modules/mtree: removed unused variable.

commit 99db13c459888a2a7e8ac4af0fc7642541ba5ccb
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Sat Aug 27 02:41:51 2011 +0200

    modules_k/dialog: Remove old parameter "del" from interface
    description.

commit 71dd754818d8c3ec304298f1002a45889c2da0aa
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Sat Aug 27 01:32:49 2011 +0200

    modules_k/dialog: Improve error handling during dialog creation.
    
    - Set current dialog only after all other setup work succeeded.
      (Eliminates call to profile_cleanup() and guarantees that dialog
      profiling does not yield to segfault if dialog creation fails
      for certain reasons.)
    - During error handling, refrain from decrementing the reference
      counter for dialog linking if this is a spiraled request
      (because positive spiral detection skips the linkage code path).

commit f44534cbe841046079e176512b04a6b9c5a68bdc
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Aug 25 15:17:48 2011 +0200

    modules_k/dialog: Simplify and refactor parts of reference counter
    handling.
    
    - Remove special handling for dialogs in the "deleted" state to
      allow accessing such dialogs (e.g., from the configuration
      script).
      Besides making the code easier to understand, this also fixes a
      bug where the reference counter would be decremented after
      detecting a spiral (dlg_handlers.c) even though get_dlg() does
      not increment it for "deleted" dialogs.
    - Adapt interfaces for lookup_dlg() and get_dlg() accordingly,
      i.e., remove "del" parameter and update in-code documentation.
    - Replace direct increments on a dialog structure's ref variable
      by calls to ref_dlg_unsafe().
    - Move {un}ref_dlg_unsafe() definitions towards the head of the
      file to make declaration available earlier.
    - Improve store_dlg_in_tm():
        * Return and evaluate result code.
        * Replace second register call by passing unreference_dialog()
          as release function to the first register call.
    - Document various places in the code dealing with reference
      counting.

commit b61b3d2f43108e2f758e3428449cdfadefd4097f
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Fri Aug 26 17:18:21 2011 +0200

    module: sipcapture: Changed SQL schema for partitioning table.
    
         Bug fix: mySQL doesn't support DAYOFWEEK rushing. Changed to
         RANGE condition: TO_DAYS and UNIX_TIMESTAMP. The last one, only for mySQL => 5.1.58
         The two crontab scripts are in example directory.

commit c191f7b603a67f609cb9fe8adf0fc91f99bf9e33
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 26 09:32:51 2011 +0200

    core:mem: short status dumping
    
    - patch by Andrade Ricardo, on Aug 1, 2011

commit d903b7707d1f9c5ecb4110de9ab9d8a573a6f8cd
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Aug 25 13:19:13 2011 +0200

    modules_k/dialog: Provide in-code documentation for tricky part in
    dlg_new_dialog().

commit cf8e80cbe53380e628476edf0cff0e05b77e25f9
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 23 15:36:45 2011 +0200

    modules_k/dialog: Add reference count to list of items returned
    via RPC.

commit b7beb6024763a58fca28790be1bb2bfe9dd5e842
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 23 14:15:38 2011 +0200

    Makefile: version set to pre-release
    
    - development cycle for 3.2.0 ended

commit d702484d2021cf132f48aa2fe3ed9f0984f028f1
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 23 11:05:59 2011 +0200

    modules_k/auth_db: Fix error in docs.

commit d8a3d9d91921b836e0cf98647ba1aabf29d9c3c5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 23 00:27:33 2011 +0200

    json, jsonrpc-c: use pkg-config to locate the libs
    
    - if available, use pkg-config tool to locate json and event libs

commit 1d4f8bbf2e3889c9c5279bf81ec832fb86b69112
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 23 00:27:10 2011 +0200

    app_lua: fixed assignments for Makefile vars

commit be2e5095a2d2fa67b435e994cee79eb754b57668
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 22 23:56:01 2011 +0200

    Makefile: devel version increased

commit fecb235c07b095a12a6d06a8013d803016f00e72
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 22 23:55:14 2011 +0200

    Makefile: json modules added to excluded list
    
    - they depend on json-c library

commit ee368a4c2672c2ae4f9a2ed5478f195f30f5e173
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 22 23:45:44 2011 +0200

    sipcapture: fixed compilation on mac os x
    
    - added missing include files
    - wrapped label error around linux os defines since it is used only
      there and throws warning on other systems

commit c5af2356803e0e7863cd581aa5330e61d6e9d7d7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 22 23:36:53 2011 +0200

    siptrace: wrap SCTP values within USE_SCTP
    
    - make the module compile on no SCTP support OS
    - fixed some compile warnings

commit 4246484bfa68be168aae2efe2ff1da06b46f75fd
Merge: 580afba 8ef99a9
Author: Matthew Williams <matthew@flowroute.com>
Date:   Mon Aug 22 16:11:39 2011 -0500

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit 580afbaa924ee699bce59eaf669ccabad886d33c
Author: Matthew Williams <matthew@flowroute.com>
Date:   Mon Aug 22 16:10:29 2011 -0500

    Added json module, providing a simple json parser.

commit 044a6b9187791bcc23895f8e3fcef0b695bd2838
Author: Matthew Williams <matthew@flowroute.com>
Date:   Mon Aug 22 16:09:01 2011 -0500

    Added jsonrpc-c module, providing a client interface to json-rpc services
    over netstrings.

commit 8ef99a9eecc8744b028e6a6290defd836d0d40b7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Aug 22 20:02:02 2011 +0200

    tm: fix retransmission disabled case
    
    Commit a92001 broke the magic value (-1) used when retransmissions
    were supposed to be disabled.
    
    Reported-by:  Peter Dunkley  peter.dunkley crocodile-rcs com

commit 72778ab8a5f156e67704cff921f4b2d52ef80723
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Mon Aug 22 13:28:56 2011 +0200

    siptrace: added support for HEP encapuslation. Disabled DB's check in the duplicate mode.

commit 1f75be46fd7c79b49e0afdeec134854e3d3e74c1
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Mon Aug 22 13:23:05 2011 +0200

    sipcapture: sip capture module. Homer Project. The module has support for: 1) HEP encapsulation 2) IPIP encapsulation 3) Mirroring port.

commit ea6bc8837af00cc1841e2c10d1b082c127c70acc
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Mon Aug 22 13:11:01 2011 +0200

    core: new raw_ipip flag, indicate to cut off the extra IP header in IPIP encapsulation.

commit 01a0bfd830a4efb5e2f8d26fbaf80297eb5a1ba3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Aug 22 11:45:38 2011 +0200

    auth_radius(s): use the update pre_auth
    
    Handle the new pre_auth returns.

commit e3c7609041f9a875e74991e0b63734b9e31e9935
Merge: 15e1eea 9b56086
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Aug 22 11:18:49 2011 +0200

    Merge remote branch 'remotes/origin/tma0/iptrtpproxy-v2'
    
    * remotes/origin/tma0/iptrtpproxy-v2:
      - fix of recent commit
      - added xtablesmoduledir macro
      - do not apply NAT contact fix of UAS when not usrloc forwarded
      - removed revision history
      oob script fixes
      Log missed calls fix
      Fix for iptables 1.4.8
      - added ser module for new version of iptrtpproxy-v2 - modified oob script to simplify patching with RTPPROXY stuff - rtpproxy control rewritten in script - re-INVITE won't proactively create new RTP session, it's not fully RFC3264 compliant but enable working with non-compliant clients (phones)
      - taken changes from modules_k (missing pre_auth enums handled in switch)

commit 15e1eea33c24413abca5ff480fe432307245e0b2
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sat Aug 20 13:01:42 2011 +0100

    modules_k/presence_xml: Adding file missed out on previous commit

commit 0a8e9ea74191e1231abf431f87212f7508b8cc92
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Aug 20 13:37:27 2011 +0200

    srdb1: fixed compilation on Mac OS X
    
    - pvar.h included before changing OS compile flags for time functions

commit 33654b5ceebbcbbdb0062dc8dd8fad143a185c24
Author: Alex Hermann <alex@speakup.nl>
Date:   Sat Aug 20 10:30:07 2011 +0200

    lib/srdb1: fix typos in db_val2pv_spec comments

commit 560bf0f68eccce7741f171c73c4e5cfa61a1e3d2
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Aug 19 17:53:23 2011 +0200

    modules_k/auth_db: allow arbitrary PV's in load_credentials
    
    Instead of just avp's, now every writable PV can be used.

commit ab4e481be8efa9daed925c8a20546a10653f4b91
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Aug 19 13:33:32 2011 +0200

    modules_k/sqlops: add sql_pvquery(). Query function that stores results in arbitrary PV's

commit ed78c0967b69abc6e8333924460641de08b73e8f
Author: Alex Hermann <alex@speakup.nl>
Date:   Sat Aug 20 09:48:00 2011 +0200

    lib/srdb1: introduce helper to convert db_val to pv_spec

commit a470a5e5502fc677c4029d9a4870479676a6259c
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Aug 19 13:10:12 2011 +0200

    modules_k/sqlops: fix typo in sql_parse_param()

commit e23d26e3c1e5b54a8573f17f9d779dcdee212a33
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Aug 19 13:08:54 2011 +0200

    core/pvapi: more verbose error logging in parse_pvname_list()

commit b7376fe2ed4d9df55183a827e393dcb4f7ab6a5b
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Aug 19 13:07:47 2011 +0200

    core/pvapi: allow newline in parse_pvname_list()

commit 7d5f08c3b594bf2444901caa6f8bdf56dcb60ba5
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Aug 19 11:40:57 2011 +0200

    core: add is_in_str macro to ut.h and remove all local definitions

commit c8d99c6586549972d2eaa54a1327c877b0c1da68
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Aug 20 09:23:24 2011 +0200

    sdpops: fixes in some debug messages

commit fb92dde610813b6f305d31b380019053505e5628
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Aug 20 08:33:38 2011 +0200

    sdpops: documented the functions for keeping only a set of codecs

commit 8ad53ff31e15ace4600f32da94925c4667ee7754
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 19 14:46:48 2011 +0200

    sdpops: make delim char a parameter for function to search codec

commit 9ed8d781d8ac8a0fba808d2f62162f267a065ec4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 19 14:41:43 2011 +0200

    sdpops: added functions to keep in SDP only a set of codecs
    
    - sdp_keep_codecs_by_id(idlist) - keep in SDP only the codecs that are
      also in idlist, parameter being a list of codec integer IDs
    - sdp_keep_codecs_by_name(list) - keep in SDP only the codecs that are
      also in list, parameter being a list of codec names

commit 4e2315c120cd5a67d1d67c1225d3a5a7f94d6155
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Aug 20 09:48:28 2011 +0300

    lib/srdb1/schema/mtrees.xml: fixed c&p error reported by Daniel

commit 8052c90610cf13a30d0a0b541bbc154669d117da
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Aug 20 08:21:39 2011 +0300

    lib/srdb1/schema: added schema for mtrees table.

commit 604a8a95e0f61c792f6f235dd444fbb7781ecd26
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Aug 19 15:30:26 2011 +0100

    modules/app_lua, modules_k/presence_xml: Added support for pres_check_basic() and pres_check_available() to app_lua

commit d23aff6ed1e42b1c81b60805f3c1d5fea94cf310
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 19 12:23:05 2011 +0200

    srdb1: column expires in htable set to type int
    
    - it was string, reported by Mszros Mihly

commit bd8b01b9e236f9b3dbf20a4c3a153057dc8daa52
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Aug 18 20:04:32 2011 +0300

    modules/mtree: added new mode to mt_match()
    
    - Added mode=2 to mt_match() call that instead of setting value of
      longest matching prefix to a pv, sets values of all matching prefixes to
      an avp so that value of longest matching prefix is in avp index 0.

commit 486c7e1871eae56c356baef98e4ac0e399914681
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Aug 18 18:17:59 2011 +0200

    modules_k/sqlops: Move s.sql transformation to sqlops as sql.val and add sql.val.int, sql.val.str
    
    s.sql was not really a string transformation as it handled null and integers
    too. Move it to sqlops as sql.val (it was not yet in a released version) and
    add 2 new transformations.
    
    Summarizing:
    
    sql.val: returns a valid SQL value. $null as NULL, int as number, string as
             quoted and escaped string
    sql.val.int: returns a non-null integer ($null becomes 0)
    sql.val.str: returns a non-null quoted and escaped string. ($null becomes '')

commit abc175ad51767f8607b77b0478878149a1a39131
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Aug 18 16:47:13 2011 +0100

    modules/app_lua, modules_k/presence: Added support for the exported function pres_auth_status() to app_lua

commit bedf2c75669a27ccaf4195ef705312277fc5e090
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Aug 18 16:35:51 2011 +0100

    modules/app_lua, modules/sdpops: Fixed a couple of small issues with sdpops in app_lua

commit c64bc01063c7f221445c2d60af9714ec12e649f7
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Aug 18 16:00:17 2011 +0200

    modules_k/textops: Fix backwards incompatibility in re.subst
    
    The commit to add pvar suppott to re.subst inadvertently
    removed support for embedded linebreaks and tabs in the
    regular expression.

commit a078f2d1dd19d83a9e740834403f48fdf6088d2b
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Aug 18 15:12:33 2011 +0100

    modules_k/presence_xml: Modified pres_check_activities() to return -2 when part of the XML tree is not present
    
    - This is needed because some presence UAs (such as pua_usrloc) only
      fill in the basic part of the tree.  This change enables you to
      distinguish between not having a particular activity set (by a client
      that supports that) and not having any activities at all (by clients
      that only support basic presence).

commit 8573ebdc4acfc220a0e76b7e185cd41912ea5eb1
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Aug 18 15:04:33 2011 +0200

    modules_k/acc: Fix typo.

commit 8929a642a55a5346c9cec3ec004c25d2eb369fd1
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 17 18:08:09 2011 +0200

    modules_k/xcap_server: Do not define xcaps_str_appsexml for the
    moment as it seems unused and produces compiler warnings.

commit bdfdf6b7e35db04dd3fd48924082dba4dd4a63d5
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 17 18:05:55 2011 +0200

    modules_k/rls: Remove definitions of CONT_COPY{,_1} as they are
    not used within the module and produce compiler warnings.

commit 24d30bd0f9fd378c9f34829bfffdd725b3b57edf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 18 10:46:48 2011 +0200

    dmq: fixed missing tags in xml docs
    
    - added README to GIT repository

commit 9bd65819c8af6140f56f09fb891cc585dcb4badb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 18 10:32:37 2011 +0200

    acc: new parameter to allow usage of insert delayed
    
    - db_insert_mode can be set to 1 in order to use INSERT DELAYED when
      adding the acc records to database

commit c54925a1e06d1817e7cdc32a2c0f1d78a442a66e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 18 10:31:43 2011 +0200

    srdb1: fixed c&p error related to DB_CAP_INSERT_UPDATE

commit 33c5fc98db553ae28385608890df1a883aaa51d4
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Aug 11 13:19:21 2011 +0200

    modules/textops: allow pseudovariables in re.subst parameter

commit d947e7528ff1fc2693d04657592f37f6b2f97b4e
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Aug 9 12:31:48 2011 +0200

    modules_k/sqlops: new PV $sqlrows return affected rows of previous query
    
    The PV $sqlrows(<con>) returns the number of affected rows of the
    previous UPDATE, INSERT or DELETE query on the specified connection.

commit 588d1ffbb7b6e5074e3dbb6950b2149544ea1521
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Aug 9 11:58:01 2011 +0200

    modules/db_mysql: Implement affected_rows for mysql

commit 26f2169a0aef931b17b35e64a2aca580d82b6b1a
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Aug 9 11:56:21 2011 +0200

    lib/srdb1: Add support for affected rows.
    
    affected_rows is the number of rows affected by a query.
    Primarily used after UPDATE, INSERT and DELETE queries,
    to know how many rows were affected.

commit dfc2834223b7c6b2e799da5a0876b8096cfdae5e
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Aug 9 11:54:05 2011 +0200

    modules/db_mysql: Don't call mysql_next_results if there aren't any results left
    
    Calling mysql_next_results looses connection state for the previous result,
    making it impossible to use mysql_last_insert_id and mysql_affected_rows
    afterwards.

commit a001f2f26d0b9746aa5e9f83e493ab30da965b9e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 18 00:35:48 2011 +0200

    db_mysql: renamed some internal functions
    
    - 'mysql' added in the name of some functions from DB APIv1 to be
      consistent with the rest of them

commit 4c7c1b819699484f4694d7775b94ad72f98cab28
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 18 00:33:51 2011 +0200

    db_mysql: insert delayed implemented for DB API v1

commit 13e07c7875d6f62aa46068a4daaf01ecdf8fa216
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 18 00:30:59 2011 +0200

    srdb1: insert delayed support in DB API v1
    
    - new field in DB API struct for insert delayed implementations
    - sql insert command wrapped to allow 'delayed' flag
    - DB_CAP_INSERT_DELAYED flag added to show db insert delayed capability

commit 390ec4355fb0b4990cdff3e037e5256babc5f3fd
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Aug 17 17:00:51 2011 +0100

    modules_k/dispatcher: removed recently added modparams and added event_routes
    
    - As per Daniel's suggestion, the module now uses libkcore/faked_msg and
      instead of parameters to specify routes when a destination goes up/down
      the module now calls the event_route[dispatcher:dst-up] and
      event_route[dispatcher:dst-down].

commit 3b7a97f8f463dae560de2a371ada379c99c4db47
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 17 17:25:14 2011 +0200

    modules_k/dialog: Prefix get_valid_msg() function name with "dlg_"
    and turn static inline to enable usage when the dialog module is
    not linked in.
    
    - modules_k/pua_dialoginfo: Use changed function name.

commit bd598ce945d8e5db910ea1a12795c5cdd7d580cf
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Aug 17 15:01:26 2011 +0100

    modules_k/presence, modules_k/presence_xml: Added new exported functions to enable the online status of a user to be checked
    
    - Exported two new API functions from presence (get_presentity() and
      free_presentity()). These functions are used by the new exported
      functions.
    
    - Added two new exported functions to presence_xml. pres_check_basic()
      enables you to find out whether a users basic status matches the
      string you provide. pres_check_activities() enables you to find out
      whether any of a users listed activities matches the string you
      provide.
    
      pres_check_basic() effectively lets you tell whether a user is
      online or offline (based on presence). pres_check_activities()
      lets you see what a user is currently doing (for example, is the
      user too busy to take a call?).
    
      The results from these exported functions can be used to make
      routing decisions. For example, you can choose not to route calls
      to users who are away or busy.

commit 11033b05be673593a87afdc2a1d8a2c887fb9ab7
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Aug 17 15:00:00 2011 +0300

    modules_k/dialog When hash_size was smaller then 1, consider this as a value(1 == 2^0)
    
    The 1<<(n-1) check for the power of two smaller than the given number doesn't work for n == 0 (undefined behavior),
    so values of dlg_hash_size smaller than 1 where not checked correctly.

commit a925dbd9e1aa6d45d2ce1dbbb1b6e40f318e3c61
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Aug 17 14:44:52 2011 +0300

    modules_k/uac In case uuid was not found in the case of remore registration, do not crash when jumping to label

commit 934adcfb97f2e92e8bde695538e0e0b289ba3614
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 17 13:35:53 2011 +0200

    Adapt multiple modules relying on the dialog module to latest
    dialog changes.
    
    - modules_k/nat_traversal: Register for DLGCB_CONFIRMED_NA
      (formerly called DLGCB_CONFIRMED; see commit e1068cb0ab4 for
      details).
    - modules_k/pua_dialoginfo:
        * In __dialog_cbtest(), make sure that valid SIP message is
          used.
        * In __dialog_cbtest(), print details for callback on
          DLGCB_CONFIRMED_NA too.
        * In __dialog_created(), register to DLGCB_CONFIRMED_NA in
          normal case and additionally to DLGCB_CONFIRMED_NA in debug
          case (PUA_DIALOGINFO_DEBUG enabled).
    - modules_k/sst:
        * Use reply message from dialog callback parameters in
          sst_dialog_confirmed_CB().
        * Register to DLGCB_CONFIRMED_NA instead of DLGCB_CONFIRMED.

commit a5498b52e9a3bbef63e4ce4212cc05124f428cd2
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 17 13:12:24 2011 +0200

    modules_k/dialog: Provider helper get_valid_msg() to retrieve
    valid SIP message from given dialog callback parameter structure.
    (Useful due to interface change committed in c02155941.)

commit aa7b306e24ba1c9b5bdb4e18b88cfc74ad00733b
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Jun 23 11:42:53 2011 +0300

    modules_k/presence : Added parameter to allow disabling of sending an initial empty NOTIFY by presence, as this confused some CPEs
    
    Default is enabled, so behavior is left the existing one. Sending of the NOTIFY (carrying the initial/default state) is left now to the application.

commit eb37a5472fd1c5de7dfbc641fdbe372c0f19fe16
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 17 11:33:55 2011 +0200

    modules/db_mysql: Add function declaration to prevent compiler
    warning.
    
    - Define db_mysql_alloc_buffer(void) in km_dbase.h.

commit 8958a14e8ef86986168f4d555435fe561bb7cb3e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 17 11:29:41 2011 +0200

    core: added test if SREV_NET_DGRAM_IN callback is set
    
    - patch by Alexandr Dubovikov

commit 0e54244acb0064760844e709d9e949e32f827ba9
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 17 11:19:38 2011 +0200

    modules_k/dialog: Remove superfluous node check.

commit e1068cb0ab4377c9debd9aa0cbc398f6dee5c998
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 17 11:04:40 2011 +0200

    modules_k/dialog: Add DLGCB_CONFIRMED_NA callback and make
    DLGCB_CONFIRM fit accordingly.
    
    - Add DLGCB_CONFIRMED_NA callback which is triggered on reception
      of a 200 OK message (setup-concluding ACK message still
      pending).
    - Execute DGLCB_CONFIRMED on reception of a setup-concluding ACK
      message.
    - Extend documentation and clarify that DLGCB_REQ_WITHIN does not
      fire on DLGCB_CONFIRMED. (This is for consistency reasons as BYE
      requests have their own callback (DLGCB_TERMINATED) as well.
      Users who wish to track both setup-concluding ACK and other
      sequential requests must register for both callbacks types now.)
    - Closes Flyspray issue #143.

commit 76fc55be0107da80997f9515bb940e837ff899de
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 17 09:58:38 2011 +0200

    modules_k/dialog: Clear dialog and dialog variable tables after
    loading dialogs from database into memory if DB_MODE_SHUTDOWN is
    used.
    
    - Closes Flyspray issue #126 ('3.x dialog module: dialogs stay in
      database when in "shutdown only" mode').

commit 4485f638675dcff339f2af3cc93b762820d0154f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 16 22:06:35 2011 +0200

    siptrace: several fixes to extra headers management
    
    - use pkg for memory needs instead of standard malloc/free
    - declare variables at beginning of functions for better C compliancy
    - free allocated pointer in case of a later error

commit 9d8df2527d13878cee23af5b14f142a0cc4cd878
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 16 17:59:30 2011 +0200

    siptrace: support to use sip_trace() in onsend_route

commit ec21c13b86139f10d2280fe75a7ba15f3e30a83a
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 16 20:33:06 2011 +0200

    utils: Add database creation scripts for dialog variable table
    (dialog_vars).

commit 9f45de90eb684e058d4c6a195fb774abbe71a52e
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 16 19:58:12 2011 +0200

    modules_k/acc: Fix typos.

commit 94338392c1202c1c7e5e3f3fdebef3ca915ef20a
Merge: 83c9d71 1df01c1
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 16 19:44:41 2011 +0200

    Merge branch 'master' into treimann/acc-cdr
    
    * master:
      modules_k/dialog: In docs, fix indention of example to "detect_spirals".
      modules/app_lua, modules/sdpops: Exported sdpops:sdp_with_media() to app_lua
      modules_k/dispatcher: Added new feature that enables routes to be run when destinations fail/recover
      tmx: fixed mix-up between $T(id_index) and $T(id_label)

commit 1df01c1027cedddc2eb1a59d2036766e060865a8
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 16 18:12:58 2011 +0200

    modules_k/dialog: In docs, fix indention of example to
    "detect_spirals".

commit c44a269969e8b8bc19e3dbc2af374fe858ce2c7b
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 16 14:39:41 2011 +0100

    modules/app_lua, modules/sdpops: Exported sdpops:sdp_with_media() to app_lua
    
    - Also fixed a bug relating to logging levels within app_lua (sr.log())
    - Feature added by Hugh Waite at Crocodile RCS

commit 085638299508ef6bf0c96673a663453da76d0a4f
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 16 11:24:44 2011 +0100

    modules_k/dispatcher: Added new feature that enables routes to be run when destinations fail/recover
    
    - Two new exported parameters ds_dst_unavailable_route and
      ds_dst_available_route allow you to specify routes to run when
      a destination is marked PROBING and unmarked PROBING respectively.
    
      This is useful for integration with NMC and alarms equipment as
      these routes can be used to trigger/log these status changes.

commit b0a7ef14887814c39f01416d19088982c55324ec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 16 12:21:14 2011 +0200

    tmx: fixed mix-up between $T(id_index) and $T(id_label)
    
    - patch by Martin Hoffmann

commit 83c9d7187ab144d3f7f7adc31ccbb129a798c521
Merge: bbb6df5 178b21c
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Aug 15 14:58:20 2011 +0200

    Merge branch 'master' into treimann/acc-cdr
    
    * master: (76 commits)
      core: new core event for received datagrams
      Added documentation to the DMQ module
      htable: docs updated with db_expires parameter
      htable: control load/save of expires value from db via parameter
      srdb1: updated the definition of siptrace table to include time_us column
      modules_k/siptrace: Add time to x-headers
      modules_k/siptrace: Add column time_us
      modules_k/siptrace: Add "x-headers" feature
      modules_k/siptrace: Add trace_to_database configuration parameter
      modules_k/siptrace: separately store to db and/or send duplicate
      pua_xmpp: fixes to SIP-XMPP presence status translations
      Expose terminate_dlg through C API
      Expose terminate_dlg through C API
      Added terminate_dlg description
      Expose terminate_dlg through C API
      modules_k/dialog: Fix a bug that would cause a segfault when caller bind address information could not be retrieved from database and "dlg_list" was fifo-issued.
      modules_k/dialog: Improve dialog timer list handling.
      modules/tm, modules_k/pua: Fix for concurrency issue in PUA module
      tm: keep internal retr. intervals in ms
      lib/srdb1/schema: forgot to increase version number of pua table
      ...
    
    Conflicts:
    	modules_k/dialog/dialog.c
    	modules_k/dialog/dlg_load.h

commit 178b21cc1f7f7f7a3fa10b6937755f6b72ec84b3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Aug 14 22:59:53 2011 +0200

    core: new core event for received datagrams
    
    - event type defined as SREV_NET_DGRAM_IN
    - allow modules to get a callback when a udp datagram is received
    - offers the possibility to handle different content sent via datagram,
      such as HEP from Homer project, without invading the core with new
      code

commit 93d10d9e5905f054f631f7354c501b64b8336025
Merge: ab423c7 ba56288
Author: Marius Bucur <bucur_marius_obidiu@yahoo.com>
Date:   Sat Aug 13 19:20:16 2011 -0700

    Merge branch 'mariusbucur/dmq'

commit ba56288aad0f8dd50e60c2fb411b305aef198fb4
Author: unknown <mariusb@.(none)>
Date:   Sat Aug 13 19:02:31 2011 -0700

    Added documentation to the DMQ module

commit ab423c7f92dd3e977946db7f6c181fefea45e9ae
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Aug 14 00:18:40 2011 +0200

    htable: docs updated with db_expires parameter

commit cfea4b3d26d34fb436763516262159023873c473
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Aug 14 00:04:25 2011 +0200

    htable: control load/save of expires value from db via parameter
    
    - db_expires - a new paramter to control if the expires of the items in
      the hash table should be loaded/saved to database
    - default is 0 - do not load/save expires value - backward
      compatibility, since there might be hash tables loaded form database
      but without expires
    - if the hash table definition does not have an auto-expires, even
      if db_expires=1, the expires column is not selected since it is not
      needed

commit 1aaf6bc3a28763a92baf398a594d2aac615a308a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Aug 13 23:37:10 2011 +0200

    srdb1: updated the definition of siptrace table to include time_us column
    
    - regenerated scripts to create the database schema based on latest xml
      schema definition

commit 0e384ed123deb82f9ddaee6bace4dd5aa76845ec
Author: Tristan Bruns <bruns@decoit.de>
Date:   Fri Aug 5 09:30:53 2011 +0200

    modules_k/siptrace: Add time to x-headers
    
    Signed-off-by: Tristan Bruns <bruns@decoit.de>
    Signed-off-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit 4c7048cba6080dbb842bcdaee7749edabf8e5403
Author: Tristan Bruns <bruns@decoit.de>
Date:   Fri Aug 5 09:26:54 2011 +0200

    modules_k/siptrace: Add column time_us
    
    Signed-off-by: Tristan Bruns <bruns@decoit.de>
    Signed-off-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit 48ebf54389b103904c3f6f46cd2d652d3d632588
Author: Tristan Bruns <bruns@decoit.de>
Date:   Fri Aug 5 09:24:14 2011 +0200

    modules_k/siptrace: Add "x-headers" feature
    
    The "x-headers" feature stores the fromip, toip, method and direction
    in the message body (using X-* headers). This allows to transmit them
    using duplicate_uri from one kamailio to an other.
    
    Signed-off-by: Tristan Bruns <bruns@decoit.de>
    Signed-off-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit 0314f73b8dde0b49f213abe5fea4495c6985bc31
Author: Tristan Bruns <bruns@decoit.de>
Date:   Wed Aug 3 12:29:24 2011 +0200

    modules_k/siptrace: Add trace_to_database configuration parameter
    
    Adding configuration parameter to disable writing to the database.
    We can use this to only duplicate the SIP messages without storing them
    in our database.
    
    Signed-off-by: Tristan Bruns <bruns@decoit.de>
    Signed-off-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit 5894713429c86be0fdadc05b6982fa0571771cc6
Author: Tristan Bruns <bruns@decoit.de>
Date:   Wed Aug 3 12:28:45 2011 +0200

    modules_k/siptrace: separately store to db and/or send duplicate
    
    Signed-off-by: Tristan Bruns <bruns@decoit.de>
    Signed-off-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit d1097d6ac9295c529ad6e682534ee4b3f0a9daae
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 12 22:51:20 2011 +0200

    pua_xmpp: fixes to SIP-XMPP presence status translations
    
    * patch by Laura Testi to fix:
    - the online/offline status is ok in both direction (SIP<-->XMPP)
    - other status (away/busy) is not ok from XMPP to SIP
    - busy status is not ok from SIP to XMPP
    - each time XMPP contact change the status, triger a new SUBSCRIBE in  xmpp
      gateway which generate multiple same subscriptions with different callid
      in both active_watchers and pua tables. This also makes multiple NOTIFY
      generation from the main Presence Server to GW when the SIP contact change
      it's status

commit f2086ceaf8753e75a2642bba330e54b586b9fb7c
Merge: ce75cc0 b93149c
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Aug 12 17:28:16 2011 +0100

    Merge branch 'pd/pua_fix'
    
    * pd/pua_fix:
      modules/tm, modules_k/pua: Fix for concurrency issue in PUA module

commit ce75cc0612ae72cceb2c07298893559aca51fe34
Author: Jason Penton <jason.penton@gmail.com>
Date:   Fri Aug 12 17:36:33 2011 +0200

    Expose terminate_dlg through C API

commit f43f2f1e08559c66fb3a9e9ad9720ce12eeb3f8e
Author: Jason Penton <jason.penton@gmail.com>
Date:   Fri Aug 12 17:34:03 2011 +0200

    Expose terminate_dlg through C API

commit 56f48489ae8fc20c6e00821f8159857d2a5cc9f5
Author: Jason Penton <jason.penton@gmail.com>
Date:   Fri Aug 12 17:28:18 2011 +0200

    Added terminate_dlg description

commit 01fce62471c4684c894199e78274753a1db5075b
Author: Jason Penton <jason.penton@gmail.com>
Date:   Fri Aug 12 17:07:17 2011 +0200

    Expose terminate_dlg through C API

commit ab21b25652a8a1b44c1ec1ece01767d24e0ba33b
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Fri Aug 12 14:08:02 2011 +0200

    modules_k/dialog: Fix a bug that would cause a segfault when
    caller bind address information could not be retrieved from
    database and "dlg_list" was fifo-issued.
    
    - Check nulliness of dlg->bind_addr[DLG_CALLER_LEG] before
      printing.
      (May be NULL when server doesn't feel responsible for a bound
      address loaded from dialog database.)
    - Move check-and-print code for both directions (caller and
      callee) next to each other.

commit 7afb2cf8e4640bbaadfc80fcc052b34d5ae3cfae
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Aug 11 17:19:20 2011 +0200

    modules_k/dialog: Improve dialog timer list handling.
    
    - Avoid updating a dialog timer item if it is not yet linked into
      the timer list.
      (Avoids reference counting bugs due to race conditions where the
      timer list has not been initialized yet prior to any update
      attempts.)
    - In case of bogus dialog during timer insertion, postpone release
      of dialog timer lock until error log message has been emitted.

commit b93149c756d3e983c70608938f1142ed43ee1834
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Aug 11 17:28:19 2011 +0100

    modules/tm, modules_k/pua: Fix for concurrency issue in PUA module
    
    - It is quite possible for the mandatory NOTIFY request sent by a
      presence server on establishment of a SUBSCRIBE dialog to
      over-take (either on the wire or within Kamailio) the 2xx response
      to the SUBSCRIBE.  When this happens Kamailio outputs an error
      message and does not update the rls_presentity table.
    
    - The change to the tm module is to make t_request_outside take the
      same arguments (and exhibit mostly the same behaviour) as t_request.
      This is safe to do as a search of the code-base has shown that
      t_request_outside was not actually used anywhere.  The difference
      between t_request and t_request_outside is that t_request frees the
      dialog structure it creates, whereas t_request_outside leaves the
      dialog structure so that the caller can use it to find things like
      the Call-ID and local tag generated for the request.
    
      The hash table implementation in pua has been modified to enable
      temporary dialogs to be found (new function
      get_temporary_dialog()).  A temporary dialog contains the minimal
      information that was available when the SUBSCRIBE request was sent.
      Temporary dialogs are replaced with proper ones when a 2xx response
      is received.  The delete_htable() function has been updated so that
      it can delete both full and temporary dialogs.
    
      pua.c has been modified to fix a bug in db_update() - n_query_cols
      was being incorrectly decremented in a certain case within a double
      loop.  db_update() has also been changed to cope with needing to
      insert temporary (and therefore not fully filled in) dialogs into
      the database.
    
      send_subscribe.c has been modified to create temporary dialogs
      whenever an initial SUBSCRIBE is sent.  The SUBSCRIBE callback
      function searches for and removes any temporary dialogs relating
      to the transaction before it returns.  In normal (non error
      handling behaviour) temporary dialogs are not removed until after
      a full dialog has been created and added to the hash table.

commit a92001d430b897e79139580d21995ec7e5d7b417
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Aug 11 16:58:12 2011 +0200

    tm: keep internal retr. intervals in ms
    
    When using ticks to keep the retransmission intervals, any
    rounding error (when converting from ms to ticks) is increased
    with each doubling of the retransmission interval. In the standard
    configuration this means that the last retransmission before t2
    kicks in, has an error up to 4 times bigger then the initial one
    (the rounding error is max. 1 tick/62.5ms for the initial interval
     => up to 250 ms for the last retransmission before t2).
    
    By keeping the retransmission intervals in ms instead of ticks,
    this problem is avoided, and the timing error is always < 1 tick
    (62.5 ms) + system timer error (< 10 ms usually).

commit c0b0350db2f6c81eae93afec0f2deac11a73d2d0
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Aug 10 17:53:19 2011 +0300

    lib/srdb1/schema: forgot to increase version number of pua table

commit 1c8fee960179c2b6d5b8dbc6ad80e89a123510c5
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Aug 10 17:25:09 2011 +0300

    lib/srdb1/schema: fixed typo in htable schema

commit b8fba98c599c280b76e9d0aa954fbf24f2ca3c13
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Aug 10 16:08:04 2011 +0300

    lib/srdb1/schema: fixed size of pua table call_id field

commit 06faa586621c7ec0dd15654bc5e8b10153927ff9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Aug 10 15:46:47 2011 +0300

    lib/srdb1/schema/rls_presentity.xml: content_type of rls_presentity table
    
    - Increased size of content_type field of rls_presentity table from 64
      to 255, because 64 is too short for many actual content types.
    - Increased table version.

commit a4485985596d64db6971b3c98a5c5e696e1e702a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 9 22:51:40 2011 +0200

    core: added helper functions to return header by name
    
    - for special cases when there is no defined type for the header

commit 233d01912e4ea5965fb68361f406aee0f650efac
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 9 14:47:19 2011 +0100

    modules_k/textops: Added new exported function append_time_to_request()
    
    - This function is similar to the existing append_time(), but the existing
      function adds the Date header to replies generated by Kamailio.  This
      function modifies the request.
    
      In my scenario I want all MESSAGE requests to contain Date headers.  The
      MSILO module inserts Date headers into MESSAGEs that have been stored,
      but not all clients insert Date headers.  This function enables me
      to ensure all MESSAGE requests contain the Date header that I require.
    
      This is not exactly correct as the Date header should reflect the time
      when the request is first sent - but the current time on the Kamailio
      server is better than nothing and good enough for my needs.
    
    - Usage example:
    
      if (is_method("MESSAGE") && !is_present_hf("Date"))
          append_time_to_request();

commit 5b258eb6c08898eb450cdf4819af4b2db1827868
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Aug 5 15:32:14 2011 +0200

    core: allow negative parameter to remove_branches

commit a22807aeeda001fbf3471bdbd73966063e53ad2d
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 9 11:50:48 2011 +0100

    modules_k/xcap_server: rolling back the addition of the xuiddomain pseudo-variable
    
    - As Juha has pointed out this change was unnecessary.  The domain can
      be extracted from xuid using $(xcapuri(u=>xuid){uri.host})

commit 414af8a49bae2a41069b003aa9da83823c729bd0
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Aug 9 08:36:39 2011 +0300

    modules_k/auth_radius: added optional uri_user param to radius_www_authorize()
    - Useful for http authorization.

commit 91d70925870aeb8212bb3099d650e32627dd4d97
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Aug 8 22:43:23 2011 +0200

    db_postgres: remove db_int2pg_varbit function, commented out since 2008

commit 34db39d95f9fcb03d5624ee6fb15b8542295a2f5
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Aug 8 22:42:19 2011 +0200

    db_postgres: fix doxygen errors, small extensions and cleanups in comments

commit 20ba5af96cc874cee9c68c2781cd46d0f0c1e3fb
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Aug 8 22:18:28 2011 +0200

    presence(k): fix doxygen errors, small extensions and cleanups in comments

commit 8d9b600516a6cafccf7ae06fe30009656abcdf56
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Aug 8 16:11:01 2011 +0200

    modules_k/pv: fix 64bit bug.
    
    time_t is a long int on 64bit systems. Do not cast a int* to time_t*.

commit 3abdef329a13e4bc452f860c76f70735fcd16201
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Mon Aug 8 12:24:46 2011 +0100

    modules_k/xcap_server: Added new pseudo variable $xcapuri(name=>xuiddomain)
    
    - $xcapuri(name=>xuiddomain) contains the domain part from $xcapuri(name=>xuid)
      The xuiddomain can be used with www_authorize() and www_challenge() if you
      want the realm to be based on the user's domain instead of something
      hard-coded (like "xcap").
    
      This is particularly useful if you need multi-domain support, don't want
      plain-text passwords in the subscriber table, and also don't want to have to
      create two entries for each subscriber (one with the SIP domain as the realm
      and one with "xcap" as the realm).

commit 30ff67af2030f8ff83c479c8c754ff734b35a71e
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Aug 1 16:09:38 2011 +0200

    modules/tm: fix t_load_contacts for failure_route. Ignore ruri if it has already been used.
    
    Commit e973bbe5e7310861f77b17ce0afaf1cca35fe48a removed the logic for handling
    failure_route. The result was that when t_load_contacts is called from
    failure_route, the current request-uri is added as branch _again_.
    
    This commit restores the original functionality by ignoring the request uri
    if it is marked as consumed.

commit 6b2d6a3f8bc1f9d2a9d48fa6e7e67c4c0a5879ec
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Aug 5 17:30:57 2011 +0200

    modules/tm: add faked_reply_prio parameter to be able to punish faked replies
    
    Thi should fix FS#54.

commit 9fa304f16f3152cae3b35b18b00ecd560c03c404
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Aug 5 14:49:16 2011 +0200

    core: add functions remove_branch(int) and clear_branches()
    
    remove_branch(int) - removes the specified branch from the destination set.
    If the parameter is absent, the last branch is removed.
    
    clear_branches() - empties the destination set.

commit f0af7250822a80ed55f41216e84f1a3481413655
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Jul 28 16:39:17 2011 +0200

    modules_k/htable: Only save/load not yet expired entries to/from database.

commit 0fa81acc8c0c756153ad153f9054b94e1f48c98f
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Jul 28 15:58:43 2011 +0200

    modules_k/htable: save/load htable entry's expires value to/from database.

commit 1a15c075076b5df815749bc28961bc088108f852
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Jul 28 12:42:50 2011 +0200

    modules_k/htable: Correctly save the value type in the database.
    
    Instead of always saving '0' (string), write a '1' (int) if value is integer.

commit 39189746aa99623860b97c676a62a8793af0daa7
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Aug 8 11:22:23 2011 +0300

    modules/tm:  reverted previous commit on t_load_contacts()
    (cherry picked from commit cc4bcb18b064f7d66b16db2b452c0e36f14aecc3)

commit 9efc7014638e2c7ead56ac36d880b303f2873b85
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Aug 8 10:55:24 2011 +0300

    modules/tm: t_load_contacts() now ignores ruri if it has already been used
    - Thanks to Alex Hermann for the patch.

commit 5e8aab47d4b52a30f5f3e1984f5eeb6dd0e529a3
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Aug 5 17:20:36 2011 +0100

    modules_k/rls: Added support for XPath within rl-services documents
    
    - RLS was recently updated to support rl-services index documents that
      "point" to resource-lists.  However, that support only extended to
      indexes that pointed to entire resource-list documents.
    
      This change enables support for resource lists that "point" to
      specific nodes within a document.
    
      For example, the following rl-services document would now be supported:
    
        <?xml version="1.0" encoding="UTF-8"?>
        <rls-services xmlns="urn:ietf:params:xml:ns:rls-services">
          <service uri="sip:alice_all@pd-laptop-linux.croc.internal">
            <resource-list>http://server.example.net:5060/xcap-root/resource-lists/users/sip:alice@example.net/generallist.xml/~~/resource-lists/list%5b@name=%22oma_buddylist%22%5d</resource-list>
            <packages>
                <package>presence</package>
            </packages>
          </service>
        </rls-services>

commit 9b56086987fbd1b0c3e5d1f3df0c6f6a22963799
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Thu Aug 4 15:39:07 2011 +0200

    - fix of recent commit

commit 0e31e1ac3ec7317ecfd944fb9f2c11f55996504f
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Thu Aug 4 15:32:08 2011 +0200

    - added xtablesmoduledir macro

commit 6de46a35f0c70c04a6871f5fcc3c31c2172523b1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 4 12:04:59 2011 +0200

    async: fixed the condition to detect last action in route block
    
    - reported by Inaki Baz Castillo

commit 816a0218130782ea86a3cc16feb2a008fe6fff68
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 4 11:41:32 2011 +0200

    tls: safety check for current cipher
    
    - SSL_get_current_cipher(...) may return NULL, in case of the cipher was
      not set yet for the connection
    - caused crash when RPC command tls.list was used in such moment
    - cipher description is set to 'unknown' for such case
    - reported by Francesco Castellano

commit 399fad110b0a92cca851b041389b65228caed051
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Thu Aug 4 11:40:43 2011 +0200

    debian: fix in init script (somewhere it was still using $MEMORY rather than the new $SHM_MEMORY).

commit 0d91623616c2459ef8330a7ecb943d7b4f942787
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Thu Aug 4 10:33:36 2011 +0200

    debian: /etc/default/kamailio now includes SHM_MEMORY and PKG_MEMORY variables (rather than just MEMORY).
    The init script takes those values for -m (shared memory) and -M (private memory) command options.
    check_kamailio_config() function within the init script also uses "-M $PKG_MEMORY" (so very long
    configuration files can be parsed by increasing PKG_MEMORY).

commit 5a99a114e6608cbe2ec8c452d837ff3223748f1d
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Thu Aug 4 00:23:05 2011 +0200

    lcr: fixed README for from_gw() arguments.

commit 3e8867456b19bc8fd1a83be1830d0e31620cd710
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Thu Aug 4 00:21:35 2011 +0200

    lcr: Fixed doc in from_gw() arguments.

commit fb4ecbf986f4af366e5be9cbad26ceba924c77fd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 3 23:03:54 2011 +0200

    tm: don't set dst_uri to next hop for branch_route
    
    - added flag to skip setting dst_uri to next hop for branch_route if the
      dst_uri was not set before
    - there is already a  select and a pseudo-variable to access next hop value,
      in case it is needed in branch route
    - reported by Alex Hermann

commit 9b553a5c25da040569d385039c6f24a9e0622d9f
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Wed Aug 3 18:29:55 2011 +0200

    debian: If RUN=no in /etc/default/kamailio then return 0 isntead of LSB compliant error codes (if not, dpkg returns error in the instalation as kamailio init script is called automatically to start when installed).

commit bd671575e308877e86189839f9132511a4bcbad5
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed Aug 3 22:12:14 2011 +0200

    Makefile: Add async module

commit 08798a6d06b628fa5888ded867c5d18416b9f013
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 3 19:34:09 2011 +0200

    tm: allow nested backup of avp lists when sending local requests
    
    - added ability to use a local variable instead static var to
      backup/restore avps lists for local generated transactions

commit 91f79909c53d3b86d497193a4671699b4ec09782
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Aug 3 17:48:44 2011 +0200

    pdbt: off-by-one error fixed in carrier.c, better output for pdbt command-line interface (parseable)

commit bbb6df5dffc1187acce2fcdd8c716e034eb5f70e
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Aug 3 13:17:24 2011 +0200

    modules_k/acc: Implement CDR-based logging.
    
    Full credits to Sven Knoblich, sven.knoblich@1und1.de .

commit 48b8190c3fa1e42ed153f92d96e0fb7839712557
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 2 20:14:52 2011 +0200

    modules_k/dialog: Allow configuration of when initial dialog
    callbacks are executed (either in-script or post-script).
    
    - Implement functionality.
    - Add documentation.

commit d0db79902cf248b03a1e7d3b058feaf99c5ea290
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 2 19:52:02 2011 +0200

    modules_k/dialog: Add documentation for DLGCB_TERMINATED_CONFIRMED
    callback.

commit f1853abaeb51f8b7de77115479ead6929109b009
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 2 19:39:13 2011 +0200

    Adjust several modules to modified dialog callback signature
    (request and response messages given instead of just request; see
    commit 5d4473297 for rationale).
    
    Full credits to Sven Knoblich, sven.knoblich@1und1.de .

commit c021559e414892b9bafae0f1ce40081945fff49a
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Aug 2 18:29:05 2011 +0200

    modules_k/dialog: Add multiple features.
    
    - Set and get dialog variables programmatically (needed in certain
      cases where PV access does not suffice).
    - Change dialog callback signature to pass both request and
      response message instead of just the request. This is to enable
      access to at least one type of message when the other is not
      available; e.g., DLGCB_FAILED callbacks due to a local timeout
      (408) do not provide requests but responses only.
      Also, adapt callback usages accordingly at multiple spots.
    - Provide additional callback DLGCB_TERMINATED_CONFIRMED that is
      executed whenever the response to a BYE request is sent.
    - Move unreference_dialog() to a more suitable location.
    - Provide functions to add and remove a dialog from a transaction
      (required for referencing at certain occassions).
    - Move spiral detection functionality into dlg_new_dialog() to
      faciliate spiral detection when dlg_manage() is used.
    - Add a dialog's reference count to list of printable statistics.
    
    Credits to Sven Knoblich, sven.knoblich@1und1.de .

commit a0fdc9b781cf8d7368a5a67912929f612a8e9c33
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Tue Aug 2 23:42:24 2011 +0200

    - do not apply NAT contact fix of UAS when not usrloc forwarded

commit b59e069c5ab2918aeab1a12190700417e46917ef
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Tue Aug 2 22:16:48 2011 +0200

    - removed revision history

commit 2a4163498e6122d8ec65aa083b829a4657714a34
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 2 14:22:16 2011 +0100

    modules_k/rls: Fixed a couple of merge errors that crept in during the splitting RLS NOTIFY development
    
    - Problem found by Paul Pankhurst and fixed by Andrew Miller

commit 9d0688efd8e45accc5928754343c6442df5a81f1
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Tue Aug 2 15:13:33 2011 +0200

    debian: minor fix (not important at all) in init scripts.

commit 2559678551f35ee3a407aaf32b9ddc7d54da5cb4
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Aug 2 00:32:02 2011 +0200

    core: remove ifdef'ed code left over from a commit one year ago

commit a7524985f79756246ab6e43b9631276116f1a487
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Aug 2 00:29:42 2011 +0200

    core: many extensions and fixes at doxygen docs for module infrastructure

commit 04d7cafbdd6aab840399865fccde854c9c11b99f
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Mon Aug 1 13:47:52 2011 +0100

    modules_k/rls, modules_k/presence: Support for splitting large RLS NOTIFY requests into multiple NOTIFY requests
    
    - Many SIP devices (including proxies and SBCs) are not able to handle
      vary large SIP requests.  Requests over 64k in size when using TCP
      are a common problem.
    
      It is easily possible with large (and even not so large) resource
      lists for RLS to generate NOTIFY requests that are too big for some
      SIP devices to handle.
    
      This enhancement gives RLS the ability to split these large NOTIFY
      requests into multiple smaller requests (that still comply with the)
      RFC.
    
      The default behaviour is the old (send a single big NOTIFY request)
      behaviour.
    
    - Feature added by Andrew Miller at Crocodile RCS

commit 01cffe6ff78f6a1b59b41f39f1a29d6a4b361603
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 1 14:49:16 2011 +0200

    kamctl: added missing tables for dbtext and db_berkeley

commit 203b2678a7115f2ba744eeda5279108fdd5b139d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 1 14:36:39 2011 +0200

    tm: backup/restore lists of avps for usage t_uac
    
    - when sending a self-generated request while processing other sip
      message, backup the list of avps and restore afterwards
    - reported by Sebastian Damm
    - added helper function to backup/restore the lists of avps from msg
      context to static var and use transaction lists

commit 76e90d5e786a71efa3dfb116dab885a0b8176592
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 1 14:35:53 2011 +0200

    kamctl: updates after changes in .gitignore

commit 285566bd31379ee4b6199f72c8c589a6b313bf07
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 1 14:33:15 2011 +0200

    .gitingnore: set root path for binary names
    
    - some directories containing the binary name (e.g., kamailio like in
      utils/kamctl/dbtext/kamailio/...) in path were ignored. Updated
      .gitignore to use /kamailio and /ser which according to manual should
      match on the root folder of GIT tree

commit aa940ed3b54c8078beba93502c17cb27327885a0
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Mon Aug 1 12:21:44 2011 +0200

    ipops: Added function is_ip_rfc1918(ip) for detecting private IPv4 according to RFC 1918.

commit 27f722f44ac080df47bb4c64e513f50be611aa7a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun Jul 31 19:04:43 2011 +0300

    lib/srdb1/schema: removed index that included missing columns

commit c50367e242afb64352b55bf1eb0959caf594d058
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Jul 29 12:19:10 2011 +0100

    core: removing SQL buffer size stuff from doc/cfg_list/docbook/cfg_core.xml

commit d38e225fbb91128d127770126a42f47d21e238c2
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Jul 29 11:56:14 2011 +0100

    module_k/xcap_server: Added support HTTP 1.1 pre-conditions (If-Match: and If-None-Match:)
    
    - Also fixed the ETag: header send by xcap_server as it should be a
      quoted-string (RFC 2616 section 3.11 and 14.19).
    - If-Match (RFC 2616 section 14.24) and If-None-Match (RFC 2616
      section 14.26) are supported for the DELETE, GET, and PUT HTTP
      requests.
    
      This feature is useful as it enables clients to cache large XML
      documents (user-profiles/avatars/resource-lists) and only have to
      download them when they have actually changed (using If-None-Match:)
    
      If-Match: can help with the race conditions present when you have
      multiple simultaneous logins by helping to prevent clients from
      overwriting changes made by other clients.

commit f0784ecd899eb486e39bce2973a07225ba5d9cf6
Merge: fa4ddbb b8f7648
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Jul 29 11:44:56 2011 +0100

    Merge branch 'master' into pd
    
    * master:
      core: fix all reported doxygen errors in PV and value evaluation code
      tls: restrict visibility of 4 only internal used functions to the module
      tls: two small code cleanups
      tls: fix all doxygen errors, extend existing documentation in touched files

commit b8f7648cf3cf1aea847c67d3e23aec56937dd71e
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 28 23:58:00 2011 +0200

    core: fix all reported doxygen errors in PV and value evaluation code

commit 85438b935b1e5513de96472a1a53cdd0a78ec442
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 28 22:29:30 2011 +0200

    tls: restrict visibility of 4 only internal used functions to the module

commit e17e7fa307a5f43d210b6cf31afaedf7d6622c6c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 28 22:26:24 2011 +0200

    tls: two small code cleanups

commit a6d72602a32e60dd8e8cc4c9a3debf1edb69729b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 28 22:24:11 2011 +0200

    tls: fix all doxygen errors, extend existing documentation in touched files

commit fa4ddbb3d4a56c35822e989c8e48aced51a0bd56
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 28 15:38:04 2011 +0100

    modules_k/xcap_server: Improved rls_update_subs() example in README

commit 4a09b0f8c57f632de5c26c6bc34f5ac32dbe86c2
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 28 12:41:07 2011 +0100

    modules_k/rls: Added a new exported function: rls_update_subs()
    
    - This new function can be called from the Kamailio configuration file
      to force the RLS module to refresh its back-end subscriptions.
    
      This is particularly useful when the resource list has changed (for
      example, a new contact has been added) as it will create a new back-
      end subscriptions when required.
    
      This means that when you add a new contact in a client the uses RLS
      the added contact can be immediately subscribed to and will get an
      authorisation request.
    - Sample usage:
    
      case "PUT":
        xcaps_put("$var(uri)", "$var(doc_uri)", "$rb");
        if($xcapuri(u=>auid)=~"pres-rules") {
          pres_update_watchers("$var(uri)", "presence");
          pres_refresh_watchers("$var(uri)", "presence", 1);
        } else if ($xcapuri(u=>auid)=~"resource-lists"
                   || $xcapuri(u=>auid)=~"rls-services") {
          rls_update_subs("$var(uri)", "presence");
        }
        exit;
      break;

commit 81ee00f531c1148e5077f81c5ece3094136bc8f0
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 28 12:35:03 2011 +0100

    module_k/rls: Added support for resource-list indices.
    
    - That is, support for resource lists that contain references to
      other resource lists.
    - This is needed for OMA/RCS compliance.
    - Implementation only works with integrated XCAP.

commit 64209434c0a59060a516c6c5cd0c9e6f066c86ac
Merge: 7545c62 db188fb
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 28 12:22:27 2011 +0100

    Merge branch 'master' into pd
    
    * master:
      textops(k): internal API bind function exported via module interface
      modules_k/xcap_server: increased maximum size of XCAP URI to 255
      doxygen documentation fixes
      core: allow forcing send socket for replies
      alias_db(k): rephrase documentation a bit to make it hopefully better understandable

commit db188fbcf4d752a2afab2e298a2f081f836d7e92
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 28 13:18:11 2011 +0200

    textops(k): internal API bind function exported via module interface
    
    - internal API was defined but no function to bind it was available in
      the module interface, reported by Timo Klecker
    - rename of functions and typedef'ed struct to match the patterns of
      exporting modules internal API

commit 08a5067225b832b7eb7f3e490aaca474d85ff31f
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 28 12:15:25 2011 +0100

    modules_k/xcap_server: increased maximum size of XCAP URI to 255
    
    - The current length (127) is insufficient for some XCAP requests
      I have seen - particularly those for avatars (preseImage).

commit 7af697744bd9922ec8e46e1c07e91f591bb60306
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 28 00:22:09 2011 +0200

    doxygen documentation fixes

commit bf48d46366eb50ebcaf0972d2524b65d3accdffa
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 27 19:34:35 2011 +0200

    core: allow forcing send socket for replies
    
    - patch by Marcus Hunger, closes FS#142

commit 288a80235fb261f2db4b7f092ea1b8c4e5b589a5
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jul 27 17:29:14 2011 +0200

    alias_db(k): rephrase documentation a bit to make it hopefully better understandable

commit 7545c62ab6dd98127149a0dfcc7e4818e3e6faa2
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jul 27 14:44:39 2011 +0100

    srdb1, modules_k/presence_xml, modules_k/xcap_server: Updated xcap table version from 3 to 4
    
    - Also fixed a merge issue where I copied the PostgreSQL version of
      presence-create.sql over the MySQL one.

commit fce0a50f90d3fc7625f9d8d4984d34a01079a4d4
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jul 27 13:49:50 2011 +0100

    srdb1: Fixed merge error made in commit 8623eeb1c2762d299cd88e0b7bc8d8fdb8fa2a72
    
    - When copying utils/kamctl/mysql/siptrace-create.sql from my local SVN I accidently
      copied across utils/kamctl/postgres/siptrace-create.sql.

commit 8623eeb1c2762d299cd88e0b7bc8d8fdb8fa2a72
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jul 27 12:18:05 2011 +0100

    srdb1: Added support for logging of messages > 64k in sip_trace with MySQL
    
    - Some SIP requests - especially full-state NOTIFYs for large resource
      losts - can easily exceed 64k.
    - This change makes MySQL use the mediumtext type for message contents.
    - Feature added by Andrew Miller at Crocodile RCS

commit 6033da2e644ccdca7fa57bee03f82cb03c36e45e
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jul 27 12:13:25 2011 +0100

    srdb1, modules_k/xcap_server: Added support for XML documents larger than 64k in MySQL
    
    - It is easily possible for some XML documents (particularly resource lists
      used as a Network Address Book) to exceed 64k in size.
    - Feature added by Andrew Miller at Crocodile RCS

commit 5cd87175faa97161023c37e2cc0f0c064e08d571
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jul 27 11:50:20 2011 +0100

    core, srdb1, modules/db_*, modules_k/db_*: Added support for configuring SQL buffer size and mediumblob/mediumtext in MySQL
    
    - Currently the SQL buffer size is hard-coded to 64k.  This isn't
      enough in some cases.  For example, it is easily possible for
      resource lists (which can be Network Address Books) to be larger
      than 64k.
    - The default buffer size is still 64k, but this can be overriden
      with the new "sql_buffer_size" configuration option.
    - Support added for mediumblob/mediumtext in MySQL as the blob/text
      types that are currently supported are limited to 64k.
    - Feature added by Andrew Miller at Crocodile RCS

commit 3c9a176bac4878983d324ce82354cd844b916373
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Mon Jul 25 10:53:10 2011 +0100

    core: support for receiving requests > 64kb on TCP
    
    - Issue found and fixed by Andrew Miller at Crocodile RCS

commit c128a347602c2dc96e8138484e908b2700dd6824
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Mon Jul 25 10:50:38 2011 +0100

    modules/tm: Added support for requests > 32 kb over TCP
    
    - Issue found and fixed by Andrew Miller at Crocodile RCS

commit b1b9d7c41189428671fa03efe88b657a6ae78b12
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Jul 21 15:24:09 2011 +0200

    modules_k/pv: Add s.sql transformation to turn PV into suitable SQL value.
    
    This transformation outputs valid SQL values for various PV values:
     - <null> values are output as NULL
     - integers are output as integers
     - everything else is output as quoted and escaped string
    
    Example:
    	$var(null) = $null;
    	$avp(null) = $null;
    	$avp(str) = "String with \ illegal \\characters";
    	$avp(nr) = 12345;
    	$avp(strnr) = "12345";
    
    	xlog("$$rm = $rm = $(rm{s.sql})");
    	xlog("$$var(null) = $var(null) = $(var(null){s.sql})");
    	xlog("$$avp(null) = $avp(null) = $(avp(null){s.sql})");
    	xlog("$$avp(str) = $avp(str) = $(avp(str){s.sql})");
    	xlog("$$avp(nr) = $avp(nr) = $(avp(nr){s.sql})");
    	xlog("$$avp(strnr) = $avp(strnr) = $(avp(strnr){s.sql})");
    
    Output:
    $rm = ACK = 'ACK'
    $var(null) = 0 = 0
    $avp(null) = <null> = NULL
    $avp(str) = String with \ illegal \characters = 'String with \\ illegal \\characters'
    $avp(nr) = 12345 = 12345
    $avp(strnr) = 12345 = '12345'

commit 411de126aa30dd67663b790df7aaa9b303189be5
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Jul 19 15:24:11 2011 +0200

    modules_k/nathelper: Add is_rfc1918(ip_addr) function to test ip_addr for rfc1918addresses.

commit 30bec8e614018a7d4949cee0f9a38b512effe455
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Jun 10 13:00:20 2011 +0200

    modules_k/uac: Add reg_request_to function
    
    This function will lookup a local user from the registration table and
    prepares mesasage variables so the request can be sent to the remote
    user, providing authentiction via uac_auth().

commit a28c9c753f7012d50183f467452cabd35c210580
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Jun 3 16:12:19 2011 +0200

    modules_k/uac: fix reg_ht_get_byuser when domain is not used.

commit e11893c8a7abdd68b1186afc6a7b8594aee19c69
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Jun 10 12:56:11 2011 +0200

    core: Add fixup_pvar_uint helper function

commit 0c3664778b50bee82c39194334729123164dcdf6
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Jun 3 12:24:12 2011 +0200

    modules_k/uac: Allow all type of PV's for uac auth_*_avp instead of just AVP's
    
    Keep the parameter names as *_avp to keep backwards compatibility even though the
    names make no sense anymore.

commit 4c5120b7925eae1d9b5e1215c7fc579441201e41
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Jun 16 16:01:33 2011 +0200

    core: Allow SUBST in include_file and import_file.

commit 3c5a8364ac8b7da011f4b311d5e7228aadd5c4ee
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jul 22 09:23:18 2011 +0200

    doxygen comment fixes (escapes, missing parameters, syntax errors) all over the place

commit 1265533a48ac444e950626702f8b6c3e5e29951e
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 21 15:28:42 2011 +0100

    xcap_server(k): Added support for the org.openmobilealliance.search auid.
    
    - This update does not perform searches, it just modifies XCAP so that it
      recognises and decodes the search auid correctly and doesn't report an
      error when one arrives.
    
      The mandatory target and optional domains parameters are decoded into new
      keys within the xcapuri pseudo-variable.
    
      Unlike other XCAP requests the org.openmobilealliance.search auid is only
      used within HTTP POSTs - so if using this kamailio.cfg should be updated to
      handle these.

commit 17f020279301b9aa8c0e4b0f20ef3a1f9d059d04
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 21 15:04:23 2011 +0100

    pua(k): added new modparam check_remote_contact
    
    - This defaults to 1 (current behaviour), but when set to 0 means that the pua
      module won't check that the remote contact matches when finding a dialog in
      the hash table.
    
      This is very important as when the initial SUBSCRIBE is created for an RLS to
      Presence dialog the remote contact will be set to the R-URI of the SUBSCRIBE.
      However, subsequent requests within the dialog need to use the remote contact
      as provided by the far end as the R-URI.
    
      This meant that re-SUBSCRIBEs from RLS to Presence get treated as new dialog
      forming requests and causes lots of extra entries in the pua and
      active_watchers tables.

commit 9f93ecb5f7072826e3cff1ea575d904a3763f868
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 21 15:01:00 2011 +0100

    pdt(k): made the "bad parameters" diagnostic in pdt_get_domain INFO
    
    - I observed this message a few times while playing around with PDT.  It isn't
      really an error as it occurs when sdomain is NULL and sdomain does not have
      to be set at all.  Changed it to INFO for now.

commit ec755f34ef81886a09a5b84d3ffba443a6300a35
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 21 14:54:34 2011 +0100

    dispatcher(k): changed the diagnostic about no sets being defined to debug
    
    - This is currently an error.  It's not an error that you don't have any sets,
      it just means you haven't created any yet.

commit 3d9ea85fcce4a05b40a11928d087a4954f6451e1
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 21 14:48:10 2011 +0100

    pua(k): increased the size of pres_id in the database table
    
    - the pua pres_id table field is used as the subsid in rls.  The pres_id
      was originally a 64 character field, but an rls subsid (consisting of
      Call-ID, To tag, and From tag) can easily exceed this.

commit 403ba772771545f4410ba4a5cf396125be353b12
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 21 08:07:22 2011 +0200

    presence(k): removed mistakenly typed } before the previous commit

commit b39747e213e350609761d14583db3e689ad6fefc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 21 00:31:49 2011 +0200

    presence(k): insert empty string as sender in db if missing
    
    - if sender_uri parameter is not given to handle_publish(), insert empty
      string for sender column in presentity table
    - the field is used for SLA/BLA
    - fixes constraint of non-null value in db table, reported by Roberto
      Fichera

commit 460fc8bf6ad5108ff3779c85ff150e4f5145b189
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 21 00:08:42 2011 +0200

    presence(k): log message abour not supported event printed as warning

commit f157bd9cfbf21fe11e2df3f5d427d0ff193fae1c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 21 00:11:09 2011 +0200

    core, counters mod: fix a bunch of doxygen errors, small whitespace fix

commit 0be9f5a4efeba2eb297a2e3286b9795f33f2dbe2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 20 23:42:05 2011 +0200

    kamdbctl: added pipelimit to the list of extra tables to create

commit 81248685cd11289daeb08fa24a7eb564dbf0b81e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 20 23:38:51 2011 +0200

    kamctl: added scripts to create pl_pipes table

commit e8a949e3032b9cadf40ce2be0027c780b29637a7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 20 23:35:01 2011 +0200

    srdb1: added definition of pipelimit module db table

commit d949f97e5b3707100a7dfc8422ece0f19bcc163c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jul 20 22:49:21 2011 +0200

    core: small doxygen fix, synchronize a few function definitions with declarations

commit c20927f7867163efa7d800bd0e7fee65e5980dcb
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jul 20 22:36:41 2011 +0200

    core: doxygen documentation for F_MALLOC memory manager

commit 683a4899a992b42d60cc0d45bd10ff197d85dd39
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jul 20 21:34:14 2011 +0200

    core: remove commented out ROUNDUP macro (2002) and big_hash_idx() (2007)

commit a3d6d80d1805109b6340cd7182323ef9ad9c11d4
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Wed Jul 20 20:27:51 2011 +0300

    fixed issue regarding caching presentity information when in DB_ONLY mode

commit 2cbd47c4f9a16ef869efd7830e48a419b3cc1020
Author: Andreas Granig <agranig@sipwise.com>
Date:   Wed Jul 20 15:54:21 2011 +0200

    Add new db option and improve connect mechanism.
    
    Add "db" option to "server" parameter to select the redis db number.
    Set 1 sec timeout when connecting to redis server.
    Perform "PING" to verify newly created redis connection.

commit 2e426419ab2f3f15adc4a50de6efe3bb06dc77b8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jul 19 19:41:20 2011 +0200

    tm: be sure branch PV is set when t_check_trans() is used for reply
    
    - reported by Alex Hermann, FS#117

commit f86e6c73e6818df799ac475c499bf641b211df78
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Tue Jul 19 09:46:35 2011 +0200

    mqueue: decrease number of items when size limit is reached
    
    - proper counting of intems in the queue
    - patch by Denis Chukhryaev

commit e151a9e99b1fed7805eaed5d16ca3d6466e1f517
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 18 22:37:07 2011 +0200

    pv: use suip2a(...) for $snd(..)
    
    - fixes FS#140, reported by Klaus Darilion

commit fabaa667795e5162fe17afd3e4a073bc99057144
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 18 22:34:47 2011 +0200

    core: new function to get IP address from su structure
    
    - suip2a(...) returns zero-terminated string representation of IPv4/IPv6
      address

commit 3ad92e15ad31f27513de21c8ced4d243643b7cad
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jul 17 09:55:13 2011 +0200

    mi_datagram: don't delete unixsock file in cfg check mode

commit 0a3fc0da283854b6d25e77f9a1283ee6704e425d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jul 17 09:54:32 2011 +0200

    mi_fifo: don't delete fifo file in cfg check mode

commit 53605f2ca1718e42f1f1fcb87bb67935c889249a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jul 17 00:28:26 2011 +0200

    app_python: provide a clone string to dirname and basename
    
    - script name value is cloned before execution of dirname and basename
      since they may modify the parameter
    - reported by Arnaud Chong, FS#137

commit 1abde923ee3cbdcce69b72d223fb0c487b892b6e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jul 17 00:17:58 2011 +0200

    app_python: fixed compile warning
    
    - warning: dereferencing type-punned pointer will break strict-aliasing
      rules

commit 831a9a4876fbcb2b47f82644bc29cb6ce5f265c4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jul 16 23:24:42 2011 +0200

    core: exit if addstr() cannot get pkg memory
    
    - if parsing config file has no enough pkg memory do exit(-1) instead of
      returning null pointer, makes no sense to continue and there are no
      safety checks for the return of addstr(), causing crash anyhow

commit 3298a44890f62191eb46251cf93579b366331c6b
Author: Jason Penton <jason.penton@gmail.com>
Date:   Sat Jul 16 10:13:14 2011 +0200

    db_mysql: fixed build on Solaris
    
    - Added preporcessor defs to avoid adding macro which breaks compile on Solaris

commit 04ff37eec6e271b978d785bfc0c1491e29c8b07d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 15 22:55:06 2011 +0200

    core: adjusted debug message for #!define

commit 7614a1d0322c930b81009675e78c2439b76a29d1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 15 21:55:33 2011 +0200

    core: control pv buffer size by core parameters
    
    - pv_buffer_size - size in bytes for internal PV buffer (default 1024)
    - pv_buffer_slots - home many internal PV buffers (default 10)

commit 8d666c30b712b75b00b281e225beb4783f964683
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 15 16:55:45 2011 +0200

    core: reinit PV buffer after config parsing
    
    - the size of the buffer may have been updated by parameters

commit 2f29210763f7587c5e3bb7df2bc2c4f36be727f1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 15 16:42:21 2011 +0200

    core: use PV api buffers for mod fixup
    
    - functions to get the values from mod fixup structures use now the
      buffers from PV api

commit 7e7d939980f147c2e473fd7f58dee7b15def37c9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 15 16:35:15 2011 +0200

    core: exported internal static buffer through PV API
    
    - access to the static buffers used to print dynamic strings with PVs
      can be accessed via PV api

commit 1f14e6ed5cafa94e74a5fb49401c53da57a57ca1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 15 15:43:35 2011 +0200

    core: renamed pvapi_init.h to pvapi.h

commit 0a609fdaf8ce764e7d4e6741cffb8d23883a8600
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 15 15:06:30 2011 +0200

    Makefile: added ndb_redis in excluded_modules

commit 9f8a2ff62f523225ce2bdfb3cdd710b3f32ce911
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 14 00:16:38 2011 +0200

    mem: small def./decl. fix for a bunch of internal functions, use void argument

commit 47f5930387a2d7f938abe44ca22455ffcb4d9ed1
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 14 00:11:48 2011 +0200

    mem: initial doxygen documentation for MM, small whitespace changes

commit 4e62c2cd6eb9d5a9e2b7217c7c01845febdfccbe
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jul 13 23:49:28 2011 +0200

    kex: some doxygen docs, a few whitespace changes

commit 2e835b6bed7196e9a020b0c31daff88000d35913
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 11 13:18:40 2011 +0200

    ndb_redis: clean up previous redis reply

commit 81a14eb9d3f7f93b5171db016fd9b7a16647e8e3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 11 13:14:29 2011 +0200

    ndb_redis: added module documentation

commit 286a14e888ed41f5dedf4aef73c9b943b8ce5c5d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 11 12:07:35 2011 +0200

    new modules: ndb_redis - connector to redis server
    
    - redis - nosql database engine
    - uses hiredis library
    - exports function to send commands to redis and a new pseudo-variable
      class to access the reply: $redis(key)

commit fc9dba1286c0e3c9ee4e28a7959cb03178f6b121
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jul 6 23:48:44 2011 +0200

    tm: remove two dlg related files which are not used and don't contain real code

commit 855a6b2821db5097d80d3a4fe5ddb7deacad3664
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 6 23:17:30 2011 +0200

    pv: new pv $rz returns r-uri scheme
    
    - possible values: sip, sips, tel and tels
    - r-uri scheme parsing error should be reflected by value: none

commit d354265484278f285df3a747b6e1a910db736df1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 6 23:16:49 2011 +0200

    core: typedef'ed struct sip_uri to sip_uri_t

commit 73ec9511e3c740304f6376890f0c0b416d84dd8f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 6 19:39:36 2011 +0200

    presence(k): switch to terminated status if no longer active
    
    - if contact is removed via xcap, making the status different than
      active, set it to terminated states
    - patch by Laura Testi, FS#133

commit 8198fd2b82181ef7e37f5bc0c7bbbbd197b4daa7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 6 15:17:12 2011 +0200

    core: added #!substdefs
    
    - similar to substdef but the defined value will be enclosed in double
      quotes

commit 7ca54b8867ca325fd318536e29f8ae8e028611c9
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jul 6 18:26:16 2011 +0200

    utils: fix kamctl start if installed in a custom prefix, tested from Fabian Borot

commit 71bfc3f3c1b22ff6f06c0b1fcafc4d6a75abd66b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jul 5 23:50:10 2011 +0200

    tm: delete obselete uri2sock function, its not compiled since almost 5 years

commit 71a7a864c6d18f4fc0bde76c2f80e15df48d1476
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jul 5 23:44:11 2011 +0200

    tm, tmx: move small redundant skip_hf macro to ut.h
    
    - move small redundant skip_hf macro in in tm and tmx to tm/ut.h file
    - this header is already included from the callers
    - rename macro to a bit more descriptive name, no other changes

commit b1c80706eb428423d9c39796be5d4218d78ce06f
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jul 5 23:38:13 2011 +0200

    core: move redundant and identical implementation of a str_list type to core
    
    - move redundant str_list and new_str implementations from tm and tmx to core
    - rename new_str to a more descriptive append_str_list, no interface changes
    - fix callers in tm and tmx
    - add doxygen documentation

commit 7a437761156b08ad19465e90941995a48eee9ced
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jul 5 23:34:41 2011 +0200

    core: small spelling fix and cleanup in doxygen docs

commit 13de789c655b2b5da47a9982fe19fef386265dc2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jul 5 23:45:14 2011 +0200

    core: new preprocessor directives: trydef and redef
    
    - #!trydef - don't define if it is already done
    - #!redef - redefine even already defined
    - both have the prototype like #!define

commit 7a2e73a673a723dff90910642cd618f5f4c63d4e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jul 5 09:20:59 2011 +0200

    core: allow #! or !! in front of include_file and import_file
    
    - import_file and include_file can have the same syntax as preprocessor
      directives

commit 1cdad56cd88cad2b0732818880ae326e6da5735c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jul 5 09:15:34 2011 +0200

    core: added import_file
    
    - import_file is similar to include_file but does not throws error if
      the file is not found:
    - example: import_file "myfile.cfg"

commit a99aa2035994fd349479ebd2d903bfc99984c388
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jul 5 00:21:39 2011 +0200

    tm: deactivate compilation for not used test function _test_insert_to_reply

commit 80978ef1a337cfae6476c0025895970c932e4000
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jul 5 00:20:35 2011 +0200

    tm: proper definition for tm_init_timers, one small whitespace fix

commit d28859fd30cbd42e7fe913b248cbcb4a2826e9f8
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jul 5 00:17:11 2011 +0200

    tm: initial round of doxygen documentation for timer.[h,c] - tbc

commit 9e2fc89369794ad58168b1008fb2fb846ccde93b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jul 4 23:47:25 2011 +0200

    tm: restrict callid_suffix and callid_prefix visibility to module, not used outside

commit 7e4dc04b9ac5c4046388974b7135186f173dee9c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jul 4 23:43:00 2011 +0200

    tm: add doxygen docs to callid.[c,h]

commit fbbfac4e2f40be6e42c63307ff1cc5450442b94c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 4 22:07:20 2011 +0200

    srdb1: regenerated db creation scripts

commit 3d070a549807495e27589befb52a1350b35d9a47
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 4 22:04:29 2011 +0200

    srdb1: entities files updated for callid_len and default cseq value

commit 0a94c6d5d549a438d64006e66c57a66c19cda8f8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 4 22:02:19 2011 +0200

    srdb1: added callid_len entity
    
    - used for size of callid columns across tables
    - set to 255

commit dea083ed12a5772ec44821c4d0ac8ca7f40d3300
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 4 22:01:45 2011 +0200

    version set to 3.2.0-dev6

commit 1db5459e967bbe34133718a6184266c45c4e868b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jul 4 00:40:21 2011 +0200

    tm: add doxygen documentation for sip_msg.[c,h] files

commit 56f2823ca3cba947e968a398b96395232ee21f62
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jul 4 00:07:45 2011 +0200

    tm: remove #ifdef POSTPONE_MSG_CLONING, its default for three years now
    
    - remove POSTPONE_MSG_CLONING define from tm module
    - its now the default for more than three years
    - control flow in the module without it is better understandable
    - the current way is the expected behavior, also recently discussed on the list

commit 17060b4656bcbaa18cd43fb7e51549ffa5a979fd
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Sun Jul 3 21:50:04 2011 +0200

    doxygen: small doc fix in parser

commit 492055eba80bfbbfeef3721ded47c2af603ae8f8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jul 3 15:32:42 2011 +0200

    tmx: doxumented t_suspend() and t_continue()

commit ddcaa44c02d90cac198ec9079d33225afd1134ec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jul 3 15:21:22 2011 +0200

    docbook: allow setting catalog path from command line

commit ed191572ee9b6fee6bbfcfcb68754c61732866ba
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jul 3 15:07:04 2011 +0200

    tmx: exported asynchronous functions to config
    
    - t_suspend() - suppend the execution of SIP request in a transaction -
      the transaction is created if it does not exist already. $T(id_index)
      and $T(id_label) can be used to get transaction's internal index and
      label identifiers
    - t_continue(index, label, rtname) - continue the execution of a
      suspended transaction identified by (index, label) with the actions in
      route[rtname]

commit 843b411829bbfcd14fd0c18b0271e4b72e9c6ce7
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jul 1 17:16:19 2011 +0200

    presence: document fallback2db parameter, add a obselete warning# Please enter the commit message for your changes. Lines starting

commit 44ffefe75f3627669d93f574c4f09a77ebd32867
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jul 1 17:12:35 2011 +0200

    presence: rename recently added parameter to the 'standard' db_mode that others uses

commit aa28b8db51cb426d284a71debfb75965722c16a7
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Thu Jun 30 18:36:37 2011 +0200

    Increase callid length to varchar(255) in acc table.

commit 793a3d362a31aeba402b481896176368e6d13ee7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jun 30 15:55:49 2011 +0200

    tmx: new pseudo-variable class $T(name)
    
    - retrieve transaction related attributes
    - name can be:
    	- id_label - internal transaction label
    	- id_index - internal transaction index
    	- branch_index - return the current branch index in transaction
    	  (alias to $T_branch_idx)
    	- reply_code - the winning reply code currently set for transaction
    	  (alias to $T_reply_code)

commit d0858edd95726117d2ccc9567b9f7bf012204448
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jun 30 15:54:42 2011 +0200

    db_mysql: search also for mysql_config5 in Makefile
    
    - on some OSes, the mysql_config tool might have the name mysql_config5

commit a32f948029dcd9f5875d6244b5d4c2efd23a1b88
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Thu Jun 30 15:50:14 2011 +0200

    pdt(k): removed add/delete mi commands
    
    - pdt_add and pdt_delete were just insert/delete sql queries followed by
      internal call of pdt_reload, creating unecessary code maintenace, thus
      they were removed. SQL queries can be executed directly from terminal
      and then pdt_reload to get same functionality

commit ecf769e633bf4401782ccbff3a216291105b8cf8
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Thu Jun 30 15:44:50 2011 +0200

    pdt(k): restructured sources
    
    - prepared for adding rpc commands to replace mi
    - mi commands moved in a dedicated file for now
    - removed unnecesary mi commads to simplify maintenance

commit 2bc80f622d415d9745ba47909c6a47d340dad8b9
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Thu Jun 30 11:17:32 2011 +0200

    xlog(k): readme updated with log_facility param

commit ff10fef4b398b4bc2f206559af9e1ad2fb3b8342
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Thu Jun 30 11:04:22 2011 +0200

    xlog(k): new module parameter log_facility
    
    - allow to specify syslog facility for messages printed by xlog module
    - xlog messages can be diverted now to special file via syslog conf

commit f369faa6d09f30a48d11fa34cbdb581df6ea01e2
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jun 29 22:35:39 2011 +0200

    ipops: add a comment about autogenerated files from ragel

commit 23bd471b227696a3b71e25403ee36eae338d85f1
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jun 29 22:30:39 2011 +0200

    core: fix two more 'no real prototype' warnings, fix one wrong caller in timer mod

commit cac710f407cac3fe039f234eae222e221c445b11
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jun 29 22:29:10 2011 +0200

    tm: fix one 'no real prototype' warning, fix the wrong call as well

commit 03a4b6fc64dd2abda540bc16ff37904984725f62
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jun 29 22:12:28 2011 +0200

    core: fix another bunch of 'no real prototype' warnings, add doxygen docs
    
    * fix another bunch of gcc 4.5 'no real prototype' warnings by making the MD5
      functions typesafe (removing this PROTO_LIST stuff)
    * refactoring of function definitions to use a proper style, like everybody else
    * remove not needed defines for datatypes, delete the then empty header completely
    * remove the unneeded include of md5global.h from a few modules
    * fix callers of MD5 utility functions which already use a proper type
    * adapt format of RSA copyright notices to the common style as well
    * add doxygen documentations to all functions and defines
    * similar changes have been done in kamailio, but have been not ported to this
      repository yet

commit 42620ff1671b0b36b6ff8ee6e02e33c866522f55
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Mon Jun 27 17:09:03 2011 +0200

    async module: mention $apv and $xavp in documentation Overview.

commit d7c0926a7f467073c3ea8907d8d76bc97b1b6cec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 26 11:51:31 2011 +0200

    async: updates to prameter types
    
    - use typedefs - straigforwards ctags jumping

commit c4c3773622a5419d890a13a5226d721ff0a7bcfa
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 26 11:48:39 2011 +0200

    tm: renamed typedef cell_type to tm_cell_t

commit 31b97e44437d66aef098f553417c647025f323cc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 26 11:42:01 2011 +0200

    async: documented async_route() function

commit b427618d03f5753eb56ac84e3ed4262119a0d5d4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 26 11:32:12 2011 +0200

    async: safety check for next action in async_sleep()

commit 7bdcf04a70519c4da7ccb64bc2c98b15e4827adc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 26 11:27:53 2011 +0200

    async: added async_route(route, seconds)
    
    - executed route block asynchronously after seconds

commit c68ba021f6b7924a703129127a58b1289aeafa9b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 26 11:26:48 2011 +0200

    core: typedef'ed struct action to cfg_action_t

commit bf05608198b343960d85bcfd6d210dba5fada5f5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 26 11:05:23 2011 +0200

    async: added module documentation

commit 58796a4ea5615e4015833d08b979b3cd99b7b5a5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 26 00:43:57 2011 +0200

    async: new module for asynchronous config operations
    
    - exports async_sleep(seconds) - sleep asynchronously and continue the
      exection after the seconds interval has passed
    - it uses t_suspend()/t_continue()
    - config execution state is lost, so a return at the same level with
      async_sleep() will exit the config execution

commit 581ab12a38919932309e179464b46eaca9d5768c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 25 21:10:08 2011 +0200

    xlog(k): use the function from core to get action struct
    
    - an internal function was moved to core and the code updated to use it

commit 486ace87c474881dd371fc98d24c960c1832f96d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 25 21:07:31 2011 +0200

    core: function to return action struct from param
    
    - moved the function from xlog module to core to be used by other
      modules
    - get_action_from_param(param, param_no) can return the pointer to
      action structure when the pointer to pointer param and param no is
      provided (like in the fixup of module functions)

commit 24ba6c21ef86a9f4a2b82ff9f8c2853d9b84bdc2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 24 20:47:21 2011 +0200

    auth_db(k): documented version_table parameter

commit 1a25853ea728711937794402a4aaa556fa69be73
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 24 20:46:11 2011 +0200

    auth_db: option to skip checking version table
    
    - new parameter 'version_table' to be able to disable checking for
      version table
    - useful when connecting to a different database to fetch the password

commit 78ccd1bb98b1329f0ee9d5acaaa5242ef4d797bc
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri Jun 24 15:10:51 2011 +0200

    cfg framework: set the handle before creating the cfg group
    
    The handle must be set before the config group is created
    because the related functions save the value for future use.
    
    The tcp and sctp config handles are not initialized to the default
    config struction. This cased a crash because orig_handle was set to
    the initial value which is uninitialized.

commit 5d3449a06ac523575ba029325048efc20cd053b7
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Tue Jun 7 20:58:38 2011 +0200

    cfg framework: set the local config in PROC_INIT
    
    The local configuration of the main process is temporary
    set during initialization in child_init with rank==PROC_INIT,
    which makes the configuration group instances available for
    the modules.
    The local configuration is reset back to NULL afterwards to make
    sure that each child process updates its own config the usual way.

commit 2ebc2cac489596f6b19bc1cebf25b57b1b69331c
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri Jun 3 14:37:03 2011 +0200

    cfg framework: safety checks added
    
    Verify that the child process has a local configuration
    in the functions that work with config group instances.

commit 62ed44d1cf6f5f2c824604bcafe54619c298ceaf
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri Jun 3 13:38:32 2011 +0200

    cfg framework: functions to iterate though the group instances
    
    Two functions, cfg_select_first and cfg_select_next, are added
    which can be used to iterate though the instances of a cfg group.

commit ee47cfb6029ecc1d2340a3f90496de17e534d505
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jun 24 00:36:18 2011 +0200

    doxygen: small bunch of fixes for doxygen documentation

commit 82a2e00d83e3c991e5275c78d6e75cf28e780e62
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jun 24 00:25:09 2011 +0200

    doxygen: convert existing documentation to doxygen, small whitespace cleanup

commit 1ecf8867f4310ac47e8d52421930c9fd00dfc693
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jun 24 00:04:01 2011 +0200

    core: replace redundant for-loop memset/ memcpy with standard (faster) libc versions

commit 6aef49b836f75d180a555973a03cf9e981e9994d
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jun 23 23:58:13 2011 +0200

    rand: fix warnings: call to function .. without a real prototype from gcc 4.5

commit 6aaba8e96fc87e1938b7abfdb5964714e4adfa3c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jun 23 23:39:01 2011 +0200

    doxygen: convert existing docs to use proper doxygen structures and groups, small cleanups

commit f992d9b4549d858944b620195611940ce1cf42b7
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jun 23 23:32:50 2011 +0200

    doxygen: add missing group definition to dialog module

commit 5f44f76c2881bcecfda860e795baadcf523808c6
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jun 23 23:08:41 2011 +0200

    doxygen: some fixes in tls module

commit 09b8aec4d4296354aaaa36abbafea9c834492778
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jun 23 22:03:43 2011 +0200

    doxygen: small syntax fix in cfg support and sl module

commit 12cc6b39ecafedd611fde7eb917becaa78038cbf
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Wed Jun 22 17:42:13 2011 +0200

    dns: typo fixed (dns_a_resovle -> dns_a_resolve)

commit 18e013cd46427ddcb3a1df8b82ff6106d92271ae
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Jun 22 14:46:59 2011 +0200

    extend documentation

commit 1158bf7a64ef0fa8777747c2b96045adc63bbdc4
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Jun 22 14:45:40 2011 +0200

    fixed description of trusted_table

commit 2a7cfd253b908fee8bb8e898b3c2e6fa11e5965b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 22 11:46:13 2011 +0200

    app_lua: removed typo 'i' from start of paragraphs
    
    - reported by Olle Johansson

commit 70ae31556b09d300f6d708b0e4edf287927748d2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 22 11:42:30 2011 +0200

    uac: more verbose debug message
    
    - give hint of how to get rid of append_fromtag requirement on rr module

commit 6e51a4d83fd13876c6bfa71cef65a001145de52e
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jun 20 13:45:47 2011 +0200

    db_sqlite: synchronize database schema with other engines

commit 9483a2092f05ed34698e53e628fb879d00871ce7
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jun 20 13:44:26 2011 +0200

    db_sqlite: fix path in Makefile and utility script

commit 60d201ddcf0e3cc119230f64ea30af3e7157434a
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jun 20 13:43:57 2011 +0200

    db_sqlite: rename database scheme files, to allow automatic updates

commit 97f64064e2a4f3571ab12317a8cb9e64bb261024
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jun 20 13:36:01 2011 +0200

    db_sqlite: rename database scheme files, to allow automatic updates

commit 11e203ba63ab31962455a5a265dad4ef44eee00d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 18 23:27:54 2011 +0200

    Makefile: exclude pua/presence_reginfo from default compile
    
    - dependency on libxml2
    - added the two modules to group presence

commit 0eaebb2c9a06f2eff7f103d1f2768f5aa677c18a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 18 23:25:12 2011 +0200

    docs: added README for pua_reginfo and presence_reginfo

commit d9bb387b0d596da75cc6295063d67dce0cea1ca3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 18 23:21:41 2011 +0200

    docs: cleanup in xml files
    
    - useless revision history removed
    - docs depend on entities.xml
    - updated global entities
    - fixed the links to users and devel mailing lists
    - fixed the link to tracker

commit 9fb70fab954ba21085fe1472bdf93630165bfd4b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 18 19:43:11 2011 +0200

    tmx: readme regenerated

commit 7ed91f0632fac344668ee7be5332d8e45490e2cd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 18 19:42:27 2011 +0200

    dbschema: regenerated db creation scripts
    
    - updates to lcr tables and rls_watchers

commit 760ae2dcf7133d9211287485e03cd2b3d2432b0d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 18 19:39:11 2011 +0200

    db schema: updated column sizes of rls_watchers table
    
    - size for callid and contact columns set to &uri_len;
    - patch by Peter Dunkley

commit cd22e9d5a8e7dee60aabdfb6ca2d7e0ad19e8b10
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 18 19:35:11 2011 +0200

    tmx: documented t_reply_callid MI command

commit 03cda297c97bc098c0389b04b180a6ec27c3e5e6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 18 19:30:09 2011 +0200

    tmx: added t_reply_callid MI command
    
    - patch by Helmut Grohne

commit 552425a497e4d6cba9ba2dd74267e14b220ff58d
Author: Carsten Bock <carsten@bock.info>
Date:   Mon Jun 13 15:04:27 2011 +0200

    - Merge of the implementation of the RFC3680 (reginfo-package) into master

commit 0a4683f73ea05a97627d868d1753aaaee3ca5173
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jun 11 11:32:16 2011 +0200

    tm: fix minor tm_load_xapi bug
    
    Due to a typo the check for load_xtm not found was wrong.

commit b6cb8823682e3a1f7881bf0e0a3ce3053bb5895c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jun 11 11:31:43 2011 +0200

    tm: fix warnings/eliminate unused variables
    
    Eliminate initialized, but unused variables (reported by gcc 4.6).

commit 8a90dd3515bddb189b411672555688427612cf31
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jun 11 11:24:05 2011 +0200

    core: remove unused variables + coding style

commit e4a750639587056cbcad699980d0fe191a10a504
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jun 11 11:21:49 2011 +0200

    core: fix warnings/eliminate unused variables
    
    Eliminate initialized, but unused variables (reported by gcc 4.6).

commit 12dc828d8677da81de4c5198ec5862dd9ee1c477
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jun 11 10:38:10 2011 +0200

    dns: case insensitive check for NAPTR record flags
    
    The NAPTR records flags where not checked in case insensitive
    mode. Records with the 'S' flags where ignored ('s' was expected).
    
    Closes: FS#135
    Reported-by: Inaki Baz Castillo  ibc aliax net

commit cb30d96052a4ccf7ce9fec627785313cb13bc442
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Fri Jun 10 19:17:25 2011 +0200

    pkg/kamailio/deb: lot of love to debian init scripts.
    - init scripts under debian/, lenny/, lucid/ and squeeze/ unified.
    - fixed a bug in restart action: now it waits until kamailio has
      been stopped (using --retry 5 option in start-stop-daemon) rather
      than waiting an artificial fixed second (which is not enough when using
      memdbg/memlog causing kamailio not to start again).
    - some text formatting.
    - more LSB compliant (status codes).

commit 35ef4b0d8f85f1e902e0d99d513f311ebd39bc6d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 10 11:19:44 2011 +0200

    debugger: safety check for pid list
    
    - some event route blocks can be executed before all children
      initialization and the internal pid list structure is not created,
      disable debugging in this case

commit 5629f449af98134c05c0679588de906a414364ab
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 7 23:19:18 2011 +0200

    core: IPv6 addr enclosed in square brackets for process descripton
    
    - UDP and SCTP listeners will have the IPv6 address in between square
      brackets inside the description string

commit 8b445f464c7d3904eae5d62a571148c621c3c6f8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 7 22:57:32 2011 +0200

    kamctl: don't require sercmd all the time
    
    - sercmd is not needed for all commands - throw error only when it is
      going to be executed but it is not found

commit a20401541ff1ac2285647c95b3627cd8a63dce73
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Tue Jun 7 15:48:27 2011 -0400

    Makefile.defs: adding LD_EXTRA_OPTS flag
     - improving support for cross compilation

commit 559e540c7a575bad7bf0db4a52d7e3cb1b531d8d
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jun 6 15:44:16 2011 +0300

    pkg/kamailio/squeeze : Make lintian happy(er) by adding dependancy on $remote_fs
    
    As Kamailio need /usr paths to be available, this requires a LSB dependancy on $remote_fs.

commit 7a700da2696f6a046b172f50652270a80d422bfb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 4 10:30:30 2011 +0200

    Makefile: updated groups of modules
    
    - ipops, p_usrloc and sdpops added to kstandard group
    - db_sqlite excluded from default compilation (depends os sqlite libs)
      and added to ksqlite group

commit a74f12d633188a7e70b09238c0d48b207efc66c3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 4 10:22:09 2011 +0200

    registrar(k): reset local interator to contacts headers
    
    - when the REGISTER request had more than one Contact header and
      max_contacts parameter was set, there were two iterations through the
      list fo Contacts header without reseting the iterator, resulting in
      not processing all Contact headers in save() - reported by Andreas Granig
    - instead of parsing the fist contact header as parameter to several
      functions, take it from sip msg structure hook

commit 5093fc039fed1dc8f974ca797e1f0708ae1df287
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Sat Jun 4 10:37:26 2011 +0300

    fixed some typos

commit 84b87a9afe9d56a1ef636c664370b458daa0db33
Merge: cba881c 510b4cb
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Sat Jun 4 10:35:37 2011 +0300

    Merge branch 'master' into mariusbucur/dmq
    
    Conflicts:
    	modules_k/htable/ht_api.c
    	modules_k/htable/ht_api.h

commit cba881c53ae0904ee296974805e81edbdf81cd6d
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Sat Jun 4 10:20:20 2011 +0300

    minor serialization changes

commit 959e8630cb1780e75c42952719e611f7b52e21b7
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Sat Jun 4 00:53:46 2011 +0300

    some minor modification in the serialization library

commit 7ff94993efc1d34bbd78498a27b9de84bc8f41b8
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Sat Jun 4 00:47:44 2011 +0300

    modified the htable so that a per-table basis dmq parameter can be added

commit 50f1a5e0c2792706588d3419e4f8bd8773bda15b
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Sat Jun 4 00:18:47 2011 +0300

    modified htable module so that it uses dmq for distributed tables
    TODO
    use dmq only on a per-table basis

commit 510b4cb8830b3cf760a84f72ad810fb202522abd
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Fri Jun 3 13:43:32 2011 -0400

    modules_k/htable: include stddef.h to let sip-router compile on old distros

commit 24ea58f16d205bf1d1e1cb8aef8896465d0f608d
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Fri Jun 3 13:31:35 2011 -0400

    modules_k/dispatcher: include stddef.h to let sip-router compile on old distros

commit 1d00cabed98e908a66c6979bda4306ccfa1a8356
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Fri Jun 3 13:02:00 2011 -0400

    core: include stddef.h to let sip-router compile on old distros

commit bbff0cca607c8e0b21fc16e0237f8345b50fdcd6
Merge: f375eef e09960f
Author: Timo Ters <timo.teras@iki.fi>
Date:   Fri Jun 3 18:31:21 2011 +0300

    Merge branch 'tteras/db_sqlite'

commit f375eef5e2559847bb42381fdb6a9727692004b4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 3 10:25:19 2011 +0200

    imc: fix announcing attepts to join private rooms
    
    - if an user cannot join a private room, the announcement was wrong,
      using invalid structure
    - reported by Ozren Lapcevic

commit 3b45fb3e161872361a1efb1ea03f5e5e6a550c9c
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Wed Jun 1 19:16:22 2011 +0300

    some minor bugs in ht_serialize. removed serialize test file

commit a0e4c378ff18052848334aa22f40e481fb6db9d0
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Wed Jun 1 17:43:04 2011 +0300

    added deserialize function

commit 1a512407932698d123d0105d0bae16321e345505
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Wed Jun 1 17:18:37 2011 +0300

    added a small serialization function for further use in htable dmq

commit 3402cfd8461c6c94dfc601d9f40116bdbdf8e0a4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 1 12:36:09 2011 +0200

    imc: keep db handle open for main process
    
    - the module sync's back to database at shutdown
    - dicovered based on an email by Ozren Lapcevic

commit 62f96b72d12c812f5990bb3dd4f1fa862a13a112
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Wed Jun 1 01:30:03 2011 +0200

    ipops: use INET6_ADDRSTRLEN constant for IPv4/IPv6 maximun size.

commit 78d26523c978a709b420c8b383ca36e7c1271913
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon May 30 23:57:18 2011 +0200

    core: added new preprocessor directive: substdef
    
    - prototype
      !!substdef '/regexp/replacement/flags'
    - separator char '/' can be replaced with any other character to avoid
      conflicts
    - it adds a preprocessor substitution like '!!subst' and in addition
      defines the regexp to replacement, like
      !!define regexp replacement
    - useful when you need to replace tokens present as ID and inside string
      values

commit 48e1227c31d5f7dd9c8ce6e3445d5a087d93f4a7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon May 30 23:03:42 2011 +0200

    core: updated man page

commit 7b5d3d76369640ac88872910dd76e61de05ec1e4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon May 30 14:20:39 2011 +0200

    kamialio.cfg: sample usage of speed dialing
    
    - can be enabled by define WITH_SPEEDDIAL

commit 33f7e045768298e8e48231820fb0116398d80c2f
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon May 30 14:17:32 2011 +0200

    deb pkg: add start suggestions for mysql, postgresql and radius, suggested from Rick Aldred

commit cf598f3229b7b381fd4d2a381bafbb8f7c0be0d1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 28 23:30:43 2011 +0200

    kamailio.cfg: reworked nat traversal config
    
    - groupped the nat traversal login in NATDETECT and NATMANAGE route
      blocks, simplifying by using rtpproxy_manage() function
    - nat traversal logic for requests is applied in branch_route for proper
      optimization of serial/parallel forking

commit ae051ee22a054120b7469cd17d71325a5f5c3cac
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 28 23:25:56 2011 +0200

    rtpproxy: safety check for T_UNDEFINED
    
    - be sure the T is valid before setting SDP flag in uas.request

commit 017687684671933ae181ebecdfb0deddae050cea
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 28 18:36:19 2011 +0200

    rtpproxy: close rtpproxy session for INVITE req in failure route
    
    - update of rtpproxy_manage() to close rtp relay session when executed
      in failure route

commit 41df497150c8eb87dca66fe2d2be3a2c490f9aec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 28 17:40:58 2011 +0200

    rtpproxy: aliased rtpproxy_destroy() to unforce_rtp_proxy()

commit b63f14b1fd5042b3b605794d6bb18a4030e573ed
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat May 28 11:43:41 2011 +0300

    modules/auth: new flag 16 to add stale=true to challenge response

commit 1d49c039699a4095219fa7f7f9c6facf22e64d92
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 28 10:11:09 2011 +0200

    Makefile: version set to 3.2.0-dev5

commit 96db2732c5c5ee055d14fe2b0c30eac4dca31d6e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 28 10:09:19 2011 +0200

    rtpproxy: documented rtpproxy_manage()

commit 7b7791c3e578e57ab33e9381d876ac3cf9103b8b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 28 08:57:19 2011 +0200

    rpproxy: new function rtpproxy_manage()
    
    - auto-pilot function to handle rtp proxy session management
    - it can take same kind of parameters as rtpproxy_offer()
    - embeds the functionality of rtpproxy_offer(), rtpproxy_answer() and
      unfroce_rtp_proxy():
      - if INVITE with SDP, then do rtpproxy offer
      - if INVITE with sdp, when tm is loaded, mark transaction with
    	internal flag FL_SDP_BODY to know that the 1xx and 2xx are for rtp
    	answer
      - if ACK with SDP, then do rtpproxy answer
      - if BYE or CANCEL, then do unforce rtpproxy
      - if reply to INVITE with code >= 300 do unfrce rtp proxy
      - if reply with SDP to INVITE having code 1xx and 2xx, then do rtpproxy
    	answer if the request had SDP or tm is not loaded, otherwise do
    	rtpproxy offer

commit 05b5d0183653d936261a91e6f172ddb1e5d30037
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 28 08:55:02 2011 +0200

    parser: new internal msg flag FL_SDP_BODY
    
    - mark the request if there is an sdp body (useful for multi-part bodies
      or to quickly check in tm routes as the msg body is not cloned in shm
      and will require parsing again)

commit e1b0dff1dfcb2f91150a01e61523db056d889d5a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 27 22:29:11 2011 +0200

    rtpproxy: changed the list of allowed route blocks with ANY_ROUTE
    
    - functions could be used in all routes, updated the bitmask to
      ANY_ROUTE

commit 78131404d62fbfc4ccbfc476d202428b5f413275
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 27 20:34:02 2011 +0200

    kamailio.cfg: replaced force_rtp_proxy()
    
    - the function has been removed, replaced with rtpproxy_offer() and
      rtpproxy_offer()

commit b20d911d29277ad202969ade69a320a59dbb1ca7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 27 13:31:35 2011 +0200

    tmx: documented the new functions
    
    - t_is_failure_route() and t_is_branch_route()

commit 0160d59ce479c40a56ecb35fc9f23537622f53c8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 27 13:21:52 2011 +0200

    tmx: two helper functions to detect route block type
    
    - t_is_failure_route() - return true if it is a failure_route execution
    - t_is_branch_route() - return true if it is a branch_route execution
    - useful to check in sub-routes executed from different points of config

commit 6bfc0187205fd4047e9410f3897ae980ab9a0553
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri May 27 10:44:13 2011 +0200

    p_usrloc: fix compile warning, reported from Ovidiu

commit e7811507b27c38e34b8c05d989fcadbd55ac0fec
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Fri May 27 09:50:42 2011 +0300

    fixed a bug in dmq_register_peer

commit 327e12423f5476fe1a6002693e43f3080468d042
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 26 18:22:23 2011 +0200

    sdpops: fix gcc warning, reported from Juha

commit e09960f043ac110b597eec1ddf39dcd2a4300417
Author: Natanael Copa <ncopa@alpinelinux.org>
Date:   Thu May 26 14:44:33 2011 +0000

    utils: Install the sqlite scripts
    
    Fix the makefiles to actually install the sqlite scripts

commit 9b4f2e9912d70b75f02dede15d1e9a833bf66d8d
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 26 12:18:16 2011 +0200

    db_sqlite: add support for autogeneration of db scheme (make dbschema)

commit f5d5348c0fd5a1b1bd204ef4bd34238c171ae047
Author: Timo Ters <timo.teras@iki.fi>
Date:   Thu May 26 13:07:10 2011 +0300

    db_sqlite(k): add docbook docs

commit 78e9801b3fd167d7b548cbe7d0bf8b7b2e45201f
Author: Timo Ters <timo.teras@iki.fi>
Date:   Thu May 26 11:36:17 2011 +0300

    db_sqlite(k): add README
    
    With information about author and module dependencies.

commit 9d36d8537b21b2d1cd51dd639ad8c1b802af2672
Author: Natanael Copa <ncopa@alpinelinux.org>
Date:   Thu May 26 07:18:44 2011 +0000

    utils: add sqlite support to kamctl/kamdbctl
    
     - sql scripts copied from postgres versions and converted to sqlite
       (only major change was: sed s/SERIAL/INTEGER/)
     - kamdbctl.sqlite based on kamdbctl.postgres with permissions stuff
       removed (sqlite has unix file permissions only) and some mysql
       emulation removed too
     - no real ro-mode

commit 6987c52c42e8df6a08d54e155ee868b8b9eb523b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 26 07:09:14 2011 +0200

    htable: adjust item array size
    
    - it was 1 too much, reported by Juha Heinanen

commit 023381eb3eb199eeaa40e59197264977409b5534
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 25 23:44:22 2011 +0200

    kamailio.cfg: added two new define options
    
    - WITH_BLOCK3XX - block 3xx replies
    - WITH_VOICEMAIL - redirect call to voicemail server on not found, busy
      or no answer

commit 9f542264b8d022959a2006af6fe73dd6b7cfbf13
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 25 22:54:53 2011 +0200

    kamailio.cfg: removed append_branch() from failure_route
    
    - it is no longer necessary

commit 01e7be75f2643fec6a6ac6ab6614ce65421f8bf3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 25 21:59:14 2011 +0200

    htable: set the size of item arrays
    
    - it was not computed properly, reported by Juha Henanen

commit 207f7c6f55fd1c986f7c1566a3acfdd3361434b5
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 25 12:00:41 2011 +0200

    core: also include newline in error msg..

commit d70215e5af181fe2f9513e44b0725e6d68fa8ba5
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 25 11:28:20 2011 +0200

    core: spelling fix in error msg, reported from Bret McDanel, trixter at 0xdecafbad dot com

commit 4bcd4628f265f6c96b2f694c644fcff29ec62cfd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue May 24 22:45:01 2011 +0200

    utils: updated vim syntx highlighting file
    
    - added new aliased route blocks names and pre-processor start sequences

commit bea80d75f6c496a88f09591fcf4b3a412b2fde03
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon May 23 13:58:33 2011 +0200

    Stress that DLGCB_CONFIRMED includes reception of the call-concluding ACK message.

commit 938b50beab952645438743720833070a484c07ab
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon May 23 13:06:49 2011 +0200

    htable: spelling fix in htable table definition docs

commit 72938bf706a75ecd4edf63dcfa2551b9ce40976b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 22 17:21:54 2011 +0200

    htable: check if hash table entries are initialized in detroy function
    
    - one of last updates to htable changed initialization to be directly in
      shared memory, while hash table slots are initialied in mod init
      funtion, causing crash of the module if config file has errors and
      proper starting does not happen
    - reported by Juha Heinanen

commit 47b81cd070197a3d8780afb4a30e5b704756439a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 22 15:20:21 2011 +0200

    core: defined preprocessor directive start token in lex
    
    - PREP_START defined as '#!' or '!!'
    - '!!' can be used as alternative to '#!' for preprocessor directive,
      being easier to distinguish it out of commented lines

commit 1d2246f48bb7bd26f7026abda1e45e7235a53da6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 22 15:02:09 2011 +0200

    core: reply_route aliased to main onreply_route block
    
    - reply_route { ... } can be used instead of main onreply_route { ... }
    - easier to refer to core reply routing actions, avoiding naming
      confusion with tm reply routing blocks

commit 3bf9b2c6fd7f65af8aef54f37858fb7e48e50ab6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 22 14:48:05 2011 +0200

    core: request_route alised to main route block
    
    - request_route { ... } can be used instead of main route { ... }
    - more suggestive in relation with its purpose and easier to spot and
      refer to it

commit 508ad1c0011352e6d24234dbef70a3f6abbdc276
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 21 12:33:00 2011 +0200

    core: added some binary operators
    
    - not, xor, left shift and right shift

commit ebb3b085c15b398192cd8e242d46914252278448
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri May 20 23:08:24 2011 +0300

    core: fixed via branch value in ack to 200 ok
    
    - By default, sr was using non-rfc3261 compliant via branch value when
      it generated ack to 200 ok.

commit 82c86ff64c2059256b776df32628e6bd4f5c13e9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri May 20 22:39:49 2011 +0300

    modules/mediaproxy: Fixed crash in mediaproxy due to insufficient buffer size.
    - Credits to giti.

commit 82653591854efea336fee54476c1e02e925f6a35
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue May 17 13:05:01 2011 +0200

    Revert "tm: add warning about t_newtran behaviour (pointed out from Iaki"
    
    This reverts commit 9f27cb55a1b4def4f393def6170430cbf70e6615.

commit d381b69cef50333ad10a602068188f3f5c4ce544
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon May 16 17:27:07 2011 +0200

    core: added rpc command core.psx
    
    - similar to core.ps but prints the details in RPC structure along with
      process index, like:
    
    sercmd> core.psx
    {
    	IDX: 0
    	PID: 73408
    	DSC: attendant
    }
    {
    	IDX: 1
    	PID: 73409
    	DSC: udp receiver child=0 sock=127.0.0.1:5060
    }

commit 4d777c5100927edc1bd99ef429625eaf552f8d23
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon May 16 18:21:09 2011 +0200

    geoip: also include URL in docs

commit b280f89b3ac4f97c3cad1487961509bae893f656
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon May 16 15:48:53 2011 +0200

    geoip: extend docs after discussion with Francesco Castellano

commit 9f27cb55a1b4def4f393def6170430cbf70e6615
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon May 16 15:22:15 2011 +0200

    tm: add warning about t_newtran behaviour (pointed out from Iaki

commit 25826d17a674ab0d13e350efbeb046a4ce1e8f23
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 14 10:45:35 2011 +0200

    xcap_client: removed invalid 'include' in lib path

commit 7264b67c499176b1912cf29a0599b89d91098ad0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 14 10:44:05 2011 +0200

    xcap_server: added oma user-profile and pres-content (avatar) support
    
    - patch by Peter Dunkley

commit ad3bf117a788f87d6da942605445cba0b6224fd0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 14 10:42:40 2011 +0200

    xcap_client: defined internal types for USER_PROFILE and PRES_CONTENT
    
    - part of patch by Peter Dunkley

commit d9618529abfe7cea53eeda8f5d09cf76e7920a85
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat May 14 11:24:11 2011 +0300

    lib/srdb1/schema/lcr_gw.xml:  updated table index
    - lcr gw lcr_id, ip_addr, port, hostname do not need to be unique

commit f5f934fa55a7938cb85b85e7661d5a9dcc5629c6
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Wed May 11 13:43:08 2011 +0300

    modules/carrieroute: fixed a bug in carrieroute
    
    the bug caused carrieroute to crash when an invalid SIP message is received (e.g. with no callid)

commit 6d894662c42d976d011a79947b677497a41fe337
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue May 10 09:50:14 2011 +0300

    modules_k/siputils: added set_uri_host script function

commit 34ae039f6949affb42a005ef8f39313c30eca75b
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Fri May 6 09:55:31 2011 +0300

    changed build_node_str so that parameters are added to the sip uri

commit 807b73d8a242ae12f93564b024baaa38dce89c8e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 6 06:42:51 2011 +0200

    pkg: deb lib dir name is set by variable LIBDIR
    
    - fixes the check for duplicate libs to variants of deb distros
    - reported in FS#130 and FS#128

commit 29b996a5d89a74c7fe866919a6e3067071f84d75
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 6 05:42:21 2011 +0200

    pkg: lib dir name is set by variable LIBDIR
    
    - fixes the check for duplicate libs
    - reported in FS#130 and FS#128

commit a8859f52b9dab4b3a79babe19f3d30c3dfcb95ce
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 5 00:43:48 2011 +0200

    tcp: fix send2child() error case
    
    If send2child() fails don't decrement the refcnt if the connection
    was already removed from the hash due to some other previous
    error (very unlikely, but possible).

commit 42d1a15584eb601a23c54a8af802e99473a8c4b6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 5 00:35:31 2011 +0200

    tcp: fix tcp_*_destroy() bug case
    
    Mark unhashed connections in the "bug" code path to avoid
    attempting to remove them twice.

commit 76cb63c6f120c22a134babc8948611819b9081c3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 5 00:13:36 2011 +0200

    tcp: fix multiple hash removal attempts
    
    In some corner cases (pending new tcp connection created in async
    mode, other processes try to append data to it but fail and the
    initial send fails after that) it was possible to attempt removing
    the connection from the hash and the local timer multiple times.

commit e950f44d733f9004710f0155d794a1c797f1580d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 4 19:25:36 2011 +0200

    tm: allow t_on_reply() in branch_route
    
    - same for t_on_failure()
    - reported by Sebastian Damm

commit e8ae4acb4e8f7b13606aaf16ec89d2a6e37959fd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 1 17:36:38 2011 +0200

    sdpops: added sdpops_remove_codecs_by_name(list)
    
    - it takes as parameter a csv list with codec names
    - works for now with codecs that have ID assigned by IANA, the rest will
      follow

commit ca91d71fd177ca9d40528c8f497a1ba789d16abf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 1 15:11:34 2011 +0200

    htable: readme was regenerated

commit 35eff4462cb1907a09603c7911e7e38aeab33210
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 19:54:46 2011 +0200

    htable: added missing PVs to short listing in the docs

commit 116fceb0da9768e9e146e6d90dc3b36630475329
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 19:50:32 2011 +0200

    htable: added two new PVs
    
    - $shtinc(htable=>key) - add atomically 1 to the value of the item
    - $shtdec(htable=>key) - decrement atomically 1 to the value of the item
    - both return the new value of the item
    - they work only with items having iteger values

commit bd6a3df6f639c004d91018507ded1ea3480a6d96
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 19:13:09 2011 +0200

    htable: documented the new 'initval' attribute for htable parameter

commit ac3c5a8087f88f5bf1609fd2000801abc37a153e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 19:06:21 2011 +0200

    htable: new attribute 'initval' to hash table definition
    
    - initval can set init integer value for hash table keys, meaning that
      if the key is not set, the init value is returned by $sht(htable=>key)
    - useful for hash tables holding counters - the value can default to 0,
      avoiding extra check for $null value

commit eef79d7f5e0fcacbf4a01232cd5039e8a6a1b464
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 12:10:14 2011 +0200

    htable: init tables directly in shm
    
    - initial developed version didn't have access to shared memory during
      parameter setting, starting with 3.0 shm is initialized before module
      parameter section, thus code was simplified getting rid of the
      temporary clone in pkg
    - helper structure and functions to store and parse 'key=>value' strings
      added
    - parsing of 'htable' parameter format was simplified reusing the
      parse_params() function

commit d98db9d2b952958d08c8668c89490adc028c8013
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 10:22:04 2011 +0200

    p_usrloc: casted parameter to int to get rid of compile warning

commit 4e4e5359a16952a0a24838e1725774ea83a2dd92
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 10:21:07 2011 +0200

    ratelimit: set macro to cast pointers diff to int

commit c769479936c3671c4ad9fa4d9609c5b03a8a3191
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 10:20:42 2011 +0200

    core: fixed compile warnings on mac os x

commit 370b7020fc9b1b22e5ecce323f311a5daee5d958
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 09:57:44 2011 +0200

    p_usrloc: include <time.h> to make compiler happy on mac os x

commit dbbe2521314a92fa7b76787e815a4de6bb8480c0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 30 09:55:22 2011 +0200

    pv: fixed compile warning
    
    - solve: dereferencing type-punned pointer will break strict-aliasing rules

commit 422f81d42d3d4d548729f1959c8fb4072328605e
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Sat Apr 30 16:15:56 2011 +0200

    - ipops module: fix in documentation.

commit fd6704daccd4359f59183367f2059576e184635e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Apr 30 00:48:12 2011 +0200

    Makefile: fix gcc 4.5 support for all archs
    
    Commit c925278 split gcc 4.5 support from the generic 4.2+ support,
    but it handled gcc 4.5 only for x86_64 (trying to compile on other
    architectures with gcc 4.5 resulted in warnings and common gcc
    optimization options).

commit 677a7bfabd0a266ebdd712b23caee75198993e4a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Apr 30 00:11:02 2011 +0200

    stun: fix attribute padded length outside the packet case
    
    - check if the attribute padded length points still inside the
      packet (only the un-padded value was checked before)
    -  use an integer and not an UINT for the remainder part of the
       packet
    - fix padded length computation in copy_str_to_buffer()
    
    Closes: FS#129
    Reported-by: Francesco Castellano

commit 263ee122bc55f81db878ddea9ad4aa2bfd8afbae
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Apr 30 00:08:11 2011 +0200

    stun: fix padd macros
    
    The PADDED_TO_* macros did not work when the length was a multiple
    of the pad value.
    (FS#129)
    
    Reported-by: Francesco Castellano

commit 1699b6a4c479031c116fb081a805635a4d088bcb
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 29 19:40:36 2011 +0200

    tm: recursive hash locks
    
    The hash locks are now recursive/re-entrant.
    This removes some of the TMCB_REQUEST_IN and TMCB_LOCAL_REQUEST_IN
    callback restrictions (like do not create new transactions,
    do not  call t_lookup_*()) solving problems like the one
    described in
    http://lists.sip-router.org/pipermail/sr-users/2011-April/068331.html

commit 15471675a7b7e0bd5634b945ee8af4ce7d85b27e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 29 17:53:34 2011 +0200

    debian(k): set version to devel 3.2.0

commit 7bb701b79d769f0c7d79d367521a1f984b35fa64
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 29 17:38:29 2011 +0200

    Makefile.defs: moved setting of dirs after target ARCH detection
    
    - should fix FS#128 - error building deb packages on chroot systems
      reported by Ali Onur Uyar

commit d9753df9fc8d969dcc28a5cc7e9e5b82e2410074
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 29 12:14:42 2011 +0200

    sdpops: added mapping table with codecs names and ids

commit 10ae1cb915a20680c36e141229aab1bc9fe85fc3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 29 12:01:24 2011 +0200

    xmlops: use xml2-config to detect compile flags and libs

commit 6fc90f2eb77b6c6716b0643f169a3858d985afe2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 29 10:23:01 2011 +0200

    xmlops: removed invalid lib path

commit 841b6c1fb05b9eaaa70d9fe42e32d7a4a411b738
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Thu Apr 28 18:19:32 2011 +0300

    added support for adding parameters to dmqnodes

commit 59403946f973194607ef7ea8411f14f3a8be9714
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Thu Apr 28 16:42:26 2011 +0200

    - new module 'ipops' for operations with IPv4 and IPv6.

commit 9287609db4ac64c709aa500e6326ac33af2c2061
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Apr 28 10:30:55 2011 +0300

    module_k/pv Changed the nameaddr transformation by relaxing the requirements on the input.
    
    As some headers might be either uri or nameaddr form, using a single transformation for parsing them was
    impossible, as nameaddr.uri returns "" on an uri input(e.g. sip:12345@example.com). With this change, the
    nameaddr transformation succedes and the resulting transformation places the whole string in the .uri field,
    .name field being empty. A transformation chaning like the one below will work as expected on both SIP URIs and
    SIP Nameaddr
    $(val(test){nameaddr.uri}{uri.domain})

commit 93514b0efdf526549bb19ae9c24e1612dced43c2
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 27 16:24:42 2011 +0300

    modules_k/sqlops Passed by value variable modified in function causes no effects in calling code
    
    Modify instead the value pointed by the pointer.

commit 84eb6933f06926b1fb5068773fc32c5f97210c66
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 27 15:32:18 2011 +0300

    modules_k/htable $shtex(htable=>key) caused a segfault when reading (null pointer deref)
    (cherry picked from commit e506dae55f1c5011fe3b7f05e94ba9f02a13dc8b)

commit db717362def3c6e774799c8f9756ede8a246555c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 27 12:44:16 2011 +0200

    presence_conference: changed include order to fix comilation on mac os x

commit 5af83d0a629cf51344b2ba01b7219c3a507bd225
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 27 13:26:13 2011 +0300

    Fixed definitions for presence related tables. Size of callid and contact should be larger than 64.

commit ba9c637db7622bc14bdcc8b461d71d03a3ea3303
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 27 11:34:48 2011 +0200

    presence modules: removed invalid lib path
    
    - invalid /usr/include/lib was removed from lib path
    - cleaned commented headers

commit 41b11916eec28133af499b7368940504c7c5834d
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 27 12:21:11 2011 +0300

    modules_k/presence : Fixed a bug caused by an incorrect Macro
    
    the macro expanded to incorrect results when called in statements like
    if(cond) COND_COPY(...);

commit f2ffcfc6a74098b0df250771865c322c9502a643
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 27 11:48:46 2011 +0300

    utils/kamctl/presence-create.sql Increased size of contact and callid in presence tables
    
    Some CPE (e.g. FritzBox,Samsung) issue larger contacts that 64 chars, thus resulting in a truncation in the
    DB backend
    (cherry picked from commit ac679cf5093f99931da6aeea4b40c1215e295a4b)

commit 21cf707ca9481fff1fede2210196258260b3b74a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Apr 27 10:11:44 2011 +0300

    modules_k/kex: renamed get_stat_val_long to get_stat_val
    - I don't know if this is correct fix, but I need to get master that
      starts up.

commit f403eea5871d682dedf28700a9544975c65fd838
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Tue Apr 26 19:21:26 2011 +0300

    implemented send/bcast functions

commit 68675b9585778e1b071982a2c52a85621c8313d5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 25 13:05:03 2011 +0200

    rls(k): removed invalid lib path

commit d4a66dae4e6e4f7a2129a1975b132eea90de71e5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 25 12:23:46 2011 +0200

    kex: added mi cmd clear_statistics
    
    - return the values and rested the counters for statistics
    - patch by Paul Pankhurst

commit 2917d848a0ede8b7285a2f8414d43fcd4262f6e3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 25 11:45:12 2011 +0200

    rls(k): few fixes
    
    - string comparison that fails because sometimes one of the strings
      is '\0' terminated and the other never is.
    - fix for when some non-RLS SUBSCRIBEs are not identified as such.
    - fix for a small typo in an error diagnostic.
    - patch by Peter Dunkley

commit c70705c4bd589bbde8bdd5a7503b11d912f70f12
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Fri Apr 22 19:49:20 2011 +0300

    improvements regarding the notification system

commit 6526248ff5204286e832df0576f0403931777646
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Mar 24 14:12:05 2011 +0100

    modules_k/pv: Add s.replace transformation.
    
    Syntax: {s.replace,<search>,<replace>}
    Replaces every occurance of <search> with <replace>. Both parameters may
    contain pvars.

commit 29318c4636b01fbaa0d119d9bdd2926adc3817de
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Mar 11 16:52:18 2011 +0100

    modules_k/pv: Add s.ftime transformation. Will format the epoch in the pv by the format in the parameter. Uses standard strftime formatting.
    
    example: $(TS{s.ftime,%Y-%m-%d %H:%M:%S})

commit ff5d5e143fd8ac1c0a269077d5fa0c6b36873472
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Mar 11 16:51:41 2011 +0100

    modules_k/pv: allow spaces in transformation parameters

commit f94e770b265276cba250ae37349c31cbe75b48a7
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Mar 11 16:50:30 2011 +0100

    modules_k/pv: remove useless loop from transformation parameter parsing.
    
    The while loop at the beginning of the macro already skips over whitespace.

commit 14fb4aac10bf9b6cf70d9b7bf6384f3eec2dd639
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Mar 25 12:17:46 2011 +0100

    core/xavp: Consolidate duplicate code. No changes to public interfaces.

commit 4563f6949d2beabd0d9411dee1e93216f5fef8f6
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Mar 24 18:50:23 2011 +0100

    core/xavps: Fix assignment to indexed subname.
    
    $xavp(name1[idx1]=>name2[idx2])
    
    When idx2 is used, the current value is now replaced instead of ignored.

commit 16965c1cf58a3c740bd039878093679b07e2cc27
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Mar 14 14:48:28 2011 +0100

    modules_k/sqlops: Add BIGINT support to sql_query()
    
    As sqlresult has no support for longlongs, convert the BIGINT to a string value.

commit 956f01b2a906dc07d45e9b0639dfd9de51e4629b
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Mar 14 14:47:25 2011 +0100

    modules_k/sqlops: Add BIGINT support for sql_xquery()
    
    xavp's have native support for longlongs so there's no reason not to use it.

commit 9b62514b4a90e169c9126b7bda6d87cc4c213ad2
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Mar 10 15:21:06 2011 +0100

    modules_k/sqlops: sql_query(): make result parameter optional
    
    No need to specify a result parameter for SQL statements that do not return
    a resultset, so make it optional.

commit 90c3fc80b5307584e2bc31b5d81b937200a3a54b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Apr 22 13:59:09 2011 +0300

    modules_k/siputils: allow tel2sip call also in branch route

commit 69aed0615f5e846203acd4809d1f7fdfd67acb8a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Apr 22 13:09:44 2011 +0300

    modules_k/siputils: added failure route to wrong function
    
    - Credits to Alex Hermann.

commit b56094a42d010e1ead64195e3db0c855e49f1cde
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Apr 22 12:25:26 2011 +0300

    modules_k/siputils:  allow tel2sip call also in failure route.

commit 5ad55516eb434a24d1dbd5225029c9b254ca5235
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Apr 22 12:18:09 2011 +0300

    modules_k/siputils: tel2sip() replaced by tel2sip(uri, hostpart, result)

commit a3918ba707bfb5316eeb5718e5854a1eab00a0d7
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Fri Apr 22 09:56:04 2011 +0300

    added send_dmq_message functionality and also used it to send initial notification message

commit 625827f2a9808f0ef700582a13175a11c57374bb
Author: Timo Ters <timo.teras@iki.fi>
Date:   Thu Mar 31 14:49:05 2011 +0000

    modules_k/db_sqlite: new sql backend
    
    Implements the kamailio database API for SQLite.

commit d2c90c180690343df1c9baf1a2ab420db6047c6a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 18 23:26:36 2011 +0200

    domain(k): use server error code for RPC fault reply

commit 3979c5627b123d64ff95064f826523aba978bd29
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 18 23:21:49 2011 +0200

    dispatcher(k): documented the RPC commands

commit d997ecfc1df1781b7276b796c443f7d6f1f7cc2a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 18 23:20:44 2011 +0200

    dispatcher(k): added RPC commands
    
    - new RPC commands to replace the MI ones

commit c925278b8ee3492f71a04c52784f593712522df8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 18 11:40:20 2011 +0200

    Makefile: disable '-mtune' parameter for gcc 4.5 x86_64
    
    - gcc 4.5 gives error when it has parameter -mtune=x86_64 (this should
      be the default value anyhow) - tested on opensuse 11.4

commit e9c660ef2ced5c479deeddac75c499f7bfabfa47
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 17 14:28:00 2011 +0200

    dialplan: rpc commands documented

commit c8dcf049d81a79ab5733ae25a4b3dcd0e06a3fcb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 17 14:22:31 2011 +0200

    dialplan: added rpc commands
    
    - dialplan.reload - to reload the records from database
    - dialplan.translate - to translate a string using a specific dialplan
      id

commit 63d4ae1463eb36a13adda76de8ee963588cddbdc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 17 13:48:14 2011 +0200

    dialplan: cfg functions can be used in ANY_ROUTE

commit d59a7f567b6f8f5c18215c15ee969cab42649710
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 16 23:05:07 2011 +0200

    domain(k): readme updated with rpc commands

commit 960406f5f4cc8701f0c4ff1db7a5e2028a839dd5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 16 23:00:17 2011 +0200

    domain(k): added rpc commands to reload and dump domains

commit 5cd534834b7ee529adbcef3f758a19ed93d29210
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 16 15:21:32 2011 +0200

    htable: safety check for null db values
    
    - with some db engines the non-null condition might not be enforced,
      resulting in working with null values
    - reported by Eric Hiller

commit 8620313f057e7e9b7744c356e954daaf213d12b2
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Fri Apr 15 09:11:24 2011 +0300

    added support for maintaining the dmq serverlist, and updating in accordingly.
    currently, some of the functions are stubs

commit e1d1c774c9ac0b4d9103f4a1c5e9b550adbb2f38
Author: Timo Ters <timo.teras@iki.fi>
Date:   Wed Apr 6 09:33:10 2011 +0300

    modules_k/uac: fix from/to restore for small original URI
    
    Seems that the URI length check is superfluous and fails under
    certain conditions. It does not make sense for the URI to have
    zero bytes, so just use the first seen zero byte as end marker.
    
    I have a reproducible test case where the restore inserts URI
    with multiple zero-bytes to wire. This happens if the original
    URI is smaller than the one we rewrote it to using uac_replace_from.

commit 7b3a6eca7bb6dd1ca2a1395ca1e5821808ec85cd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 12 21:54:07 2011 +0200

    core: pkg mem size configurable form the cmd line
    
    The pkg mem size used can be configured by using the "-M"
    parameter on the command line, e.g.:
    ser -M 8  -f test.cfg # start ser with 8mb of pkg memory
    The default remains 4Mb.

commit 5673f5cd5a50714b4a9c770294723caba15a995e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 12 10:22:15 2011 +0200

    acc_radius(k): usage flags for acc_rad_request() set to ANY_ROUTE
    
    - they were forgotten as the main acc module has this type of flags for
      acc request functions

commit de2015d507cdd40502160070a096aa3fb6754f55
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 12 10:19:38 2011 +0200

    acc(k): safety check for empty db_url
    
    - if db_url is provided as empty string, disable db accounting
    - if db_url is not provided, db acc flags are set to -1 instead
      of 0 to avoid conflict with usage in config of flag 0
    - reported by Francesco Castellano

commit 765c17f8c2ef79fd49ec2a74781b49a56aa47c3a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 11 23:52:38 2011 +0200

    srdb1: reset prev_token for safer free on error
    
    - if parse_db_url() fails internally, prev_token can point to same
      memory chunk as one of the db id attributes, causing a double-free

commit 87ee74902ef5c4a86fc3130a48ab783b1c605461
Author: Michal Matyska <michal.matyska@iptel.org>
Date:   Mon Apr 11 10:20:43 2011 -0500

    handle all cases after auth_api.pre_auth call
    
    Added cases NO_CREDENTIALS, STALE_NONCE and NONCE_REUSED to the switch.
    This prevents segfault after uninitialized var is used in gen_ha1 when
    the code continues to check the credentials if there were none.

commit 3a06d7d3561f889c84249eaa5ec7a5b79a2a23bd
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Apr 11 13:45:10 2011 +0300

    modules/ratelimit Timer was ran at a 1.5 s interval instead of timer_interval, thus rendering TAILDROP alg unusable

commit a20da4ced92796959d619adb6ba61334869f8588
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 11 12:02:23 2011 +0200

    xcap_server: use ETag header instead of SIP-ETag
    
    - over http the name of header carrying entity tag is ETag
    - patch by Peter Dunkley

commit 4990dea6ab31e9d0aec78ca09af96a481196cd70
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 10 12:47:55 2011 +0200

    seas(k): enable cfg framework for module's extra process

commit 17e94fd7535f541438e09d9536c8b2767e397f13
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 10 12:41:11 2011 +0200

    snmpstats(k): enable cfg framework for module's extra process

commit 11efca600514ba791e456cc809743dd5ec6819c2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 10 12:34:53 2011 +0200

    purple(k): enable cfg framework for module's extra process

commit cd3d112dcd6b0c5dd6e66fabc8082b70dcb317ae
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 10 12:18:44 2011 +0200

    xmpp(k): enable cfg framework for module's extra process

commit db0a6250180226ffaa700b67018ba25eb5451caf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 10 12:11:07 2011 +0200

    uac(k): enable cfg framework for module's extra process

commit 73815122531ebcc26953c784c3d66624a4154cb4
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Apr 9 19:17:52 2011 +0300

    module_k/auth_radius: update due to auth api enhancements
    - Updated script function negative result codes due to recent auth api
      enhancements. See README for new and changed codes.

commit 04fa5b387dd48f3751671b87e321438119f34d96
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Fri Apr 8 19:33:11 2011 +0300

    added dmq notification peer changes

commit 7c81dea1c74b2359770c2e5c62088897fe2f9a42
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Fri Apr 8 19:32:50 2011 +0300

    added notification peer to the dmq module

commit 8fdc717ab8b28857e23366804f0668b83971f249
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Apr 8 16:48:37 2011 +0300

    modules_k:siputils Fixed the fixup for ring_insert_callid

commit 44bc565d39ef8cb078c7e46f12863a7788c7b4e4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 22:56:46 2011 +0200

    nat_traversal: use register_dummy_timers() to handle cfg framework updates

commit 1decfa6aaf44cb228569cd180c57dd67375dbe43
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 22:55:46 2011 +0200

    nathelper(k): use register_dummy_timers() to handle cfg framework updates

commit ed6ec3be13036cd28dc0df34694f3594a5a6b292
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 22:54:55 2011 +0200

    p_usrloc: use register_dummy_timers() to handle cfg framework updates
    
    - the dummy timer is now created in child_init with rank==PROC_INIT

commit 7d784e2e7195b953f568caa1dd553cce1e587fe3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 22:54:15 2011 +0200

    rtimer: use register_dymmy_timers() to handle cfg framework updates

commit 421cba5d6b25d85d542b875633368e0bc98be07d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 20:34:18 2011 +0200

    core: wrapper to pre-register new dummy timers
    
    - register_dummy_timers(no) adds the number of new processes in the
      process table and initializes as well the number of new childres
      to the cfg framework
    - fork_dummy_timer() handles now the updates in cfg framework

commit b1429aef87e64833e0fa3c8f3356ce2ac69a4dee
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 19:29:36 2011 +0200

    mi_xmlrpc: update cfg framework structures in extra MI processes

commit 0baefce396796b02c77c9d9e2b02a63682d02173
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 19:17:57 2011 +0200

    mi_datagram: update cfg framework structures in extra MI processes

commit b5754d49ce59d659f641e5892f763208401ce8d2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 19:02:15 2011 +0200

    mi_fifo: update the config framework structures in fifo process
    
    - the extra process created by mi_fifo to listen on fifo file was not
      registered for updating the config framework structures
    - reported by Klaus Darilion
    - credits to Miklos Tirpak for hints to do it

commit 26d8a3fbfbc519535b31b3bae7b5c57d89c2652a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 13:32:45 2011 +0200

    rls(k): safer build of chunked body
    
    - the check for the size of alloc'ed buffer was using static estimation,
      not it is cmputed based on values and makes sure the ending '\0' is
      safe as well. When handling bodies with long values, could have caused
      overflow
    - reported by Peter Dunkley
    (cherry picked from commit a1b10bff76e1a88c647612c30b12eb5e9e51c90e)

commit d93dc272bdc9a7a8b74a57712965b3ef5b562060
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 7 12:03:32 2011 +0200

    rls(k): send 200ok for NOTIFY with subscription state termintated
    
    - when rls module sends an un-SUBSCRIBE (expires=0), then the dialog
      structure is removed and the NOTIFY arriving later to confirm the
      termination of subscription does not find any record, resulting in no
      reply
    - the patch detects the subscribe-state terminated in NOTIFY requests
      and sends back 200ok
    - reported by Peter Dunkley
    (cherry picked from commit cdee458b2ec4296cb847dd6e531285c0ac64dd80)

commit 78eea80ffdaf09dd6d247455d77c47a64eacae48
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Wed Apr 6 20:12:00 2011 +0300

    temporarily changed the presence module to test dmq functionality

commit ba31d863c9475bafc7d6073e3a6ebdd0b40e207a
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Wed Apr 6 19:30:31 2011 +0300

    added support for binding the dmq module within another module.
    
    also, finished the implementation for the dmq worker queues

commit c810736e9765656e4cede3f3712b180b375fffdb
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Tue Apr 5 21:53:37 2011 +0200

    oob script fixes
    
    Adjusted tm module related stuff, t_newtran, t_release, t_reply etc.

commit e8ced19c9b862fa4cd16f081625cbe8cb765d564
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Tue Apr 5 21:47:01 2011 +0200

    Log missed calls fix
    
    Added flag to log also missed calls

commit 7d5c3e875a7b3088ea1b0c2af49fe5fb96e7821c
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Tue Apr 5 19:06:59 2011 +0300

    added dmq_worker.h header file

commit a4f6960b50fd84da1c3f2f29d96d08f525878051
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Tue Apr 5 19:06:42 2011 +0300

    started implementation of worker proceses in dmq

commit 60d9c5574f4bf3cd0deb560b9a3f12bc019f95fd
Author: Carsten Bock <carsten@bock.info>
Date:   Mon Apr 4 17:01:22 2011 +0200

    Merged the extension of the dialog- and rr-modules from my carstenbock/ims branch into master

commit 78f3ede8c89a0456460158157439da90290ee8ad
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Apr 1 17:14:01 2011 +0300

    modules/carrierroute fixed permission checking in mod_init
    
    Check the permission of the cfg file based on the user settings passed to the daemon, it it applies

commit a3bb95fcaf85199e5707a25eeef98a712719de29
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Apr 1 13:22:05 2011 +0300

    modules_k/textops : fix pointer return in substr transformation
    
    Replace a local buffer with a static one, as a pointer to it was returned outside of the function
    Credits go to Timo Ters for spotting the bug
    (cherry picked from commit 87f995b66b1f58f9f85b604ba1214412819c9417)

commit b571356226b35a4f971ef77e4a83cc503de97fd8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 1 12:13:39 2011 +0200

    rls(k): update_rlsubs() broken in two funtions
    
    - deletion from hash table of expired subscriptions is done
    separately now in remove_expired_rlsubs()
    - should allow proper notification in case of un-SUBSCRIBE events,
    first doing updated of rlsubs, then sending NOTIFY requests and then
    deleting from hash table
    - reported by Peter Dunkley
    - added several safety checks about size of built attributes, used
      variables, trimmed whitespaces from attributes added in bodies to save
      some bytes on the network

commit f1808e4d5b2ac89033f61e3c6423da5c27dbbbbd
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Fri Apr 1 08:35:18 2011 +0300

    changed init behaviour

commit df7f3bc62783672eff39748450e8845187efb74a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Mar 31 16:18:45 2011 +0300

    modules/lcr:  improved documentation of defunct_gw() function.

commit 942dedaf0b54b8aa2767b5bbf2bc327aa4f4cc06
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Mar 31 14:08:37 2011 +0200

    Makefile.radius: option to use freeradius-client library
    
    - using FREERADIUS=1 turns on usage of freeradius-client library instead
      of radiusclient-ng
    - kamailio radius modules have support for freeradius-client, library
      which is included in opensuse instead of radiusclient-ng

commit 5d7aa2cb8c9b1f3b14b071f54dd36eacf42595ff
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 30 21:29:00 2011 +0200

    tls: update path for certificates with $cfg_target

commit dcc540027d3df990ba146dab6d5f86393b7da99a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 30 21:26:42 2011 +0200

    usrloc(k): update for get_stat_val() type

commit 03087fb98241680b2e2cc8c1d63dbe0d47d8d891
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 30 21:25:51 2011 +0200

    snmpstats: update for get_stat_val(type)

commit ed323cf7e12fe6e36f942b8a9716d4d4412f41b4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 30 21:25:25 2011 +0200

    dialog(k): update for get_stat_val() type

commit d28a08034e2fb9b33d9c5c3655a0cb24e77d6d65
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 30 21:24:54 2011 +0200

    pv: cast the value of statistics for PV int value

commit be40563d0735486939cb70636a4c86208828f7f5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 30 21:23:10 2011 +0200

    kcore: get_stat_val() returns long
    
    - the statistic value is long, the wrapper to get its value returns now
      long as well
    - reported by Paul Pankhurst, paul (at) crocodile-rcs.com

commit cf837383aa29090f484dde50759604169678f1a2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 30 17:34:14 2011 +0200

    Makefile: use lib64 for libs path on 64b arch
    
    - it can be overwritten from command line with 'LIBDIR=xyz'

commit 9945c914e9d964e8854dcd3cfcf4ce20e9ffbaba
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 30 12:27:21 2011 +0200

    app_lua: better detection of liblua name for v5.1

commit 565779d459f489f552799fa09a2f7f7546f7f674
Author: mariusb <mariusb@ubuntu.(none)>
Date:   Tue Mar 29 17:25:27 2011 +0300

    added new dmq module (Kamailio distributed message queue)

commit 9a7639cad604640028b930f3e4fb1242ee804499
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Mar 29 15:57:43 2011 +0200

    db1: update database scheme files after lcr extension (commit 8c0501bfaa27acab9721953)

commit 20d396d9bd190929366e9e493124606aedb087c1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 29 12:16:13 2011 +0200

    app_lua: try to locate liblua for centos
    
    - centos has liblua instead of liblua5.1 and does not provide lua-config
      or pkg-config to discover the name of lua library
    - in this case use shell to figure out whether is liblua5.1 or liblua

commit 54306955b4eac0dfcfc66d82e0eceb8551b52bb2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 29 11:18:08 2011 +0200

    db_mysql: use mysql_config to detect include and libs

commit 2f3c9d3c03f6c6425a9bbf3c84c59a51a1b4b54d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 29 11:08:54 2011 +0200

    rpm(k): updated version in spec file for CentOS rpm

commit 2b30581ac359047d3c350c432a391a7e4e4a47cc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 27 00:09:53 2011 +0100

    presence: check for transport parameter in contact URI for NOTIFY
    
    - avoid adding second time the transport parameter if it is present in
      the local contact field of subscription structure
    - discovered by Juha Heinanen and Peter Dunkley

commit 8c2a2826f5f6954b4a38405fd04f128078e98e0f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 26 23:44:01 2011 +0100

    core: added function to search a str inside a str
    
    - str_search(text, needle) added to return the position of str needle
      when it is found inside str text

commit 99077e7f90b1bf44ab336f16591399db57bc6978
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 26 14:24:27 2011 +0100

    rls: be sure From and To URIs are parsed
    
    - if RLS SUBSCRIBE is handled before any other module needed From or To
      URIs, then the structures were not filled, resulting in using empty
      username and domain to locate the RLS document
    - reported by Peter Dunkley

commit fa2e51a07ce6175697fd22a41a28cbbb4fa4270b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 26 14:22:38 2011 +0100

    kcore: check if To header is parsed before parsing To uri
    
    - parse_to_uri(msg) calls parse_to_header(msg) in order to be sure that
      the To header has been located and parsed

commit 5a264ce3401c1aab4ac0ef6a6d0cbfe7d8b995f0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 26 14:21:39 2011 +0100

    version increased to 3.2.0-dev4

commit 289d7c06a6f2b130860848e82e10c87a710c8cce
Author: mariusb <mariusb@ubuntu.(none)>
Date:   Sat Mar 26 12:54:37 2011 +0200

    must not call restore_db_subs for DB_ONLY mode

commit 26f757d0c30db79c92011313e72c6c1d97e64cd0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Mar 24 23:06:17 2011 +0100

    tm: enforce AVP_TRACK_TO only for ser-style timer AVPs
    
    - ser used the list of AVPs from track To for geting timer values
    - kamailio is using mainly track From for AVPs
    - for compatibility reasons, if avp name is given in ser style, enforce
      AVPs track To, otherwise use default track (From) if none is specified
    - reported by Min Wang

commit c1c19d849d85b4389c9fa88f83c31af5c7173b8f
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Mar 24 09:55:34 2011 +0100

    modules_k/sqlops: cast the query parameter of sql_do_xquery() to the right type.

commit 0956052b4e28c941c55c0d5e4b5550ee12b222ed
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Mar 21 17:17:12 2011 +0200

    modules_k/rr Do not falsely recover after strict route if RURI matches the server
    
    Check if the RURI contains an lr param. If it doesn't, than the request
    doesn't come after a strict route server, as Kamailio always adds a lr parameter(always loose routes)
    This fixes problems with re-SUBSCRIBEs where RURI identifies the resourse and can be the same as the initial
    subscribe.

commit 59cfef003b0314f802123c42238737c1b281b42e
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Mar 18 08:08:23 2011 +0200

    modules/auth: fixed checking and calculating of nonce count (nc) value

commit 959ab319903b9625ead7292cc9638a20146e1cca
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Mar 18 07:51:55 2011 +0200

    modules_k/acc: added 'failed_filter' module parameter
    
    Added 'failed_filter' module parameter that can be used to control based
    on SIP response code, which failed transactions are accounted, when
    'failed_transaction_flag' is set.

commit 40f5cb3a85bec9b1ad5f9a0eb4ec63a592b595c5
Author: root <root@relay.labs.nic.at>
Date:   Thu Mar 17 11:26:43 2011 +0100

    extend documentation

commit 905894f66ffbbb0e4a3b582c22050e76a4a02869
Merge: 8778302 8b57c2d
Author: Carsten Bock <carsten@bock.info>
Date:   Thu Mar 17 10:50:14 2011 +0100

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit 8778302ac862c301e46c690dc3e186d20215d6f2
Author: Carsten Bock <carsten@bock.info>
Date:   Thu Mar 17 10:48:02 2011 +0100

    - updated RTPProxy-Patch
    - the provided RTP-Proxy timeout socket in the config has to contain a port.
    (thanks to Alexandre Abreu for helping with troubleshooting)

commit 8b57c2d61d018efd1ea728b9a131b94ef0f87238
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Mar 16 09:58:17 2011 +0100

    proper LSB return value

commit 1e64f69348cf02177e4f4d732ac4044db1aa4ba8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 14 21:57:32 2011 +0100

    sdpops: remove a lines for rtpmap and fmtp
    
    - sdp_remove_codecs_by_id() removes the attributes lines of removed
      codecs

commit 4975d655b58033ee215d1f98daebb78556845b3a
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Mon Mar 14 11:01:13 2011 +0100

    proper LSB return values of init script
    
    The init script should return proper LSB error values also if
    kamailio ist not configured yet.

commit 501df6bd29bb1c22c53de8bd772eb4c641ad0d6f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 13 23:18:02 2011 +0100

    sdpops: documented sdp_print(...) and sdp_with_media(...)

commit c889ca572607e4715132b2f3911f795e2bb43bbc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 13 23:04:18 2011 +0100

    sdpops: added functions to print sdp and check media type
    
    - sdp_print(level) - print the parsed sdp structure to the debug 'level'
      (integer representation of log levels). Good for debug purposes
    - sdp_with_media(type) - return true if the sdp has 'media=type'

commit 67436c8fd301c1b59d0f58ff0f09c4f227865a5a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 13 23:03:37 2011 +0100

    core: accept signed int for fixup FPARAM_INT

commit a4daa0d11e758dc7e72673a2e670338d19591ee8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 13 22:19:12 2011 +0100

    sqlops: adding missing ending tags to docbook
    
    - replaced list of routing blocks with ANY_ROUTE

commit d0e8c06af3a119b4ea5ba6c1881b23b3f9113c0d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 13 10:51:01 2011 +0100

    sdpops: added module documentation

commit f772c256238596f3df1755cf31b31606c33ee064
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 13 10:20:20 2011 +0100

    sdpops: new module for SDP operations
    
    - the module is intended to export functions that will allow easier
      management of SDP from configuration file
    - first function: spd_remove_codecs_by_id(list)
    	- remove the codecs by their numeric IDs given in a comma separated list as paramter
    	- codecs attributes are not removed yet

commit ce7aa8e46e839a56d5759a688d03515f94497267
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 12 12:27:52 2011 +0100

    tmx: added the docs for t_flush_flags()

commit 83620cb7cd14ee3b509eef72d99337567f53967f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 12 12:22:51 2011 +0100

    tmx: restored t_flush_flags()
    
    - function to sycn the msg flags back to transaction when the
      transaction was created before modifying the flags
    - reported by Juha Heinanen

commit b2426b0c2008809f984073e37a270dcab9a7d8c5
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Fri Mar 11 14:55:03 2011 +0100

    modules_k/dialog: Refer to external match mode variable instead of
    using local copy.
    
    - Fixes a bug that would render w_dlg_manage()'s
      backup-override-and-restore logic of the seq_match_mode variable
      for the call to dlg_onroute() useless as the units dialog.c and
      dlg_handlers.c maintained individual variables each.

commit bbb082d582b0ae20c366128cf57a1f03ef594ff4
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Mar 8 11:59:01 2011 +0100

    modules_k/permissions: allow_trusted(): Make the multiple matches feature configurable, defaulting to single match.

commit b93c81421f53b6cc1620a01dc8937d92daac1be9
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Mar 7 14:36:27 2011 +0100

    modules_k/permissions: allow_trusted(): Return number of matched entries.

commit b6525fad3de205ab4504d669002acb8f6309f9a1
Author: Alex Hermann <alex@speakup.nl>
Date:   Fri Mar 4 17:22:20 2011 +0100

    modules_k/permisisons: allow_trusted(): Add tags from all matching entries to the peer_tag_avp instead of just the first match.

commit f2e79b33754fdbe627f01b26a4ed7a0c878914a8
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Dec 21 10:06:29 2010 +0100

    modules_k/sqlops: Add xavp support to sqlops

commit 024e7483317939d7a08da63ca3d26a4276bfe318
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Dec 20 23:40:31 2010 +0100

    core: Set loglevel of pv_xavp_print to INFO so it matches avp_print() behaviour.

commit bcd4c3fef321978297890f81d6620fd741cb9a6d
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Dec 20 19:03:29 2010 +0100

    core: Enable xavp's by default

commit a5cde5660a14e69ee71d69a6cc77c932c09915f9
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Jan 10 15:41:42 2011 +0100

    modules_k/pv: Make startup time available in a pseudovariable $Tb (boottime).

commit f68c308ebb8c9c0a182f92901076aee44230dae7
Author: Alex Hermann <alex@speakup.nl>
Date:   Mon Dec 20 16:49:07 2010 +0100

    modules_k/pv: Add new transformations to create prefixes
     s.prefixes creates a string with prefixes separated by comma's
     s.prefixes.quoted creates a string of quoted prefixes spearated by comma's
    Both take a parameter to specify the max prefix length. If zero, then return upto the whole string.
    Examples:
     "1234"{s.prefixes,0} => 1,12,123,1234
     "123456"{s.prefixes,4} => 1,12,123,1234
     "123456"{s.prefixes.quot,4} => '1','12','123','1234'

commit acca0fad60183745d8b9317f11326bfa601c5b02
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Mar 10 20:13:41 2011 +0100

    dialog(k): Fix indention in spiral detection example code (docs).

commit 4a92475e612ea27fcbcb471cabafd8bf87f83c8d
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Wed Mar 9 10:38:50 2011 +0100

    Fix for iptables 1.4.8
    
    Some type fixes to be compilable at Debian squeeze

commit 4363ade72cb75d0975edb124295de3223e696431
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 8 10:59:37 2011 +0100

    tm: t_cehck_trans() allowed inside all onreply routes
    
    - starting with v3.0 there is the option to enable a function only for
      core onreply route or tm onreply route
    - t_check_trans() was enabled only for tm
    - this patch enables it also for core onreply route
    - reported by Alex Hermann

commit 998ae20b26360383386d5f677ec87301e6b3ba23
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Mar 8 09:42:18 2011 +0200

    * modules_k/nathelper: add_contact_alias() fix
    
    - add_contact_alias() is now able to add alias also to contact URI, where
      hostpart contains a domain name instead of an IP address.

commit 5bb9a711cfb11b049864964ff914e784306f5446
Author: Carsten Bock <carsten@bock.info>
Date:   Mon Mar 7 21:48:20 2011 +0100

    - mini bug: In case of an Reply to the Options-Ping, the Flags should be of course removed.

commit e8cd119aa0e70033f58d51c46ddbcd5f2f37915e
Author: Carsten Bock <carsten@bock.info>
Date:   Mon Mar 7 21:24:03 2011 +0100

    - do not reactivate a gateway in probing mode, when it has been deactivated.

commit e68230ddb4ad8f5b5befef73cc42466355cc279c
Author: Carsten Bock <carsten@bock.info>
Date:   Mon Mar 7 21:06:37 2011 +0100

    - When calling ds_mark_dst("a"), reset the failure counter as-well
    - updated docs

commit 037336540926ef5b354a024aacacf55b005b577a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 7 17:11:53 2011 +0100

    kex: documentation updated with the new functions
    
    - documented setdebug(level) and resetdebug()

commit a57d5982e0966b7e21478b0bfb377e0bc93e3097
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 7 17:10:08 2011 +0100

    kex: two new functions to control local debug level
    
    - setdebug(level) - can change the debug level per process
    - resetdebug() - set back the debug level to the global parameter
      'debug'
    - useful to troubleshoot parts of config file by increasing debug level
      for a specific process, just for a set of actions

commit 0d2716bcafed9e6d3d9b920bc5137b1d726a891c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 7 17:08:15 2011 +0100

    core: support to set debug level per process from cfg
    
    - this is the part in the core dprinting system
    - getting the debug level is a warapper around fetching the local debug
      if it is set, otherwise returns the value of global parameter 'debug'
    - by default per process debug log level is not set

commit cef41576d87418aa47e7522da27bf7b4c8c72430
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 7 13:57:04 2011 +0100

    kamailio.cfg: revert mistakenly addtion of corelog
    
    - the new corelog global parameter was added and mistakenly committed to
      kamailio.cfg with its default value

commit b198224d607e88808ce60a1f316215cfc7d75f36
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 7 13:55:10 2011 +0100

    core: several error messages printed to corelog level
    
    - instead of static level L_ERR use now the global config option corelog
    - corelog value can be updated at runtime without restart via RPC
      commands

commit 7e2e4ff44945483fac3725cb7fcb5d2f3adc2d0d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 7 13:42:38 2011 +0100

    core: new global parameter corelog
    
    - control the log level for non-critical core error messages
    - e.g., useful to disable messages such as:
    	- tcp connection reset by peer
    	- error parsing received message for garbage (non-sip/html/...)

commit dd15ae96c06c1e39f42894238cff74efff3563fa
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 7 11:59:45 2011 +0100

    makefile: store the flavour in tarball
    
    - Makefile.vars is auto-generated to store the flavour when creating the
      tarball
    - Makefile.vars is stored inside the tarball
    - do 'make maintainer-clean' or 'make clean-makefile-vars' to remove it
    - allow to build the packaged flavour even when 'make FLAVOUR=... cfg'
      is forgotten - suggested by Olle E. Johansson

commit 00d2d6b98739327a6eaaeeafa50023cf0c47b0f3
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Mar 7 09:57:33 2011 +0100

    dialog(k): Register dlg_tmcb_dummy in dialog_new_dlg() even when
    given transaction t is not available.
    
    - Let tm's registration function deal with creating a transaction
      lazily.
    - Facilitates using dialogs (e.g., profiling) created on demand
      with dlg_manage().

commit d1ba0cdaed1f36d36e834fec752e7aa7c4921d61
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 6 19:36:46 2011 +0100

    uac: reuse call-id for remote register auth
    
    - request built after 401 is reusing call-id and from-tag from the first
      REGISTER request
    - should fix registrations to some servers that require such behavior
    - reported by Bernhard Suttner (bernhards) on FS#108

commit 367e8a70775c939395e121bce2352876e6c09ced
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 6 14:51:34 2011 +0100

    pkg: option to suid via start-stop-daemon
    
    - start-stop-daemon can do suid before starting the application
    - it can be enabled in /etc/default/kamailio via SSD_SUID

commit 3a2ce8df897062888c0a9acdb060186399d37411
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 6 13:51:41 2011 +0100

    pkg: updated init script for kamailio debian package
    
    - extra checks after starting kamailio
    - patch by Klaus Darilion, FS#113

commit d202b9dc49565aa13c96ed75dc67bc9e389a212a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 6 11:38:35 2011 +0100

    pv: reset the index for inner fields of xavp PV
    
    - reported by Alex Hermann

commit 395e0dae1ec45452e5d445ea3061f798b7877bba
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 6 11:19:56 2011 +0100

    core xavp: refurbised xavp_print_list()
    
    - print the level of xavp list

commit f4136d7742b0b0bfc09a9157d573c8a7f6118b76
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 6 00:51:41 2011 +0100

    core: enable dumpable flag after setuid() on Linux
    
    - init rlimit struct for proper dbg message when core limits are not
      changed

commit 7caa03982b482e9f8b84abc9b671e8df36f66713
Author: Alfred E. Heggestad <aeh@db.org>
Date:   Tue Feb 22 11:13:14 2011 +0100

    ser_stun: update to RFC 5389
    
    - Removing checking/adding of FINGERPRINT attibute
    
    - Update some attribute values according to new spec
    
    - Fix endianess of XOR-MAPPED-ADDRESS

commit 2c28a251a87fd66fa81b4802fe960fef3989fb3d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 4 22:50:02 2011 +0100

    dialog: safer unref of terminated dialogs
    
    - if reference counter is already <=0, don't deref anymore, dialog in
      destroyed state
    - should protect against bogus dereferencing
    - reported by Anton Roman

commit 8d16577bbcdd7bd84f1767bba76749083c2518fa
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 4 21:44:15 2011 +0100

    kamailio.cfg: tighten the auth checks for PUBLISH
    
    - based on a patch by Klaus Darilion

commit 9fb37a55e0b97a98b7d2d104a7692f18cb3f7df6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 4 21:27:14 2011 +0100

    srdb1: warning about different pids for db connection made dbg

commit ffa10596bcfb14d5204f0d268bf1c73857982218
Author: root <root@hp07.iptel.org>
Date:   Thu Mar 3 19:58:35 2011 +0100

    - added ser module for new version of iptrtpproxy-v2
    - modified oob script to simplify patching with RTPPROXY stuff
    - rtpproxy control rewritten in script
    - re-INVITE won't proactively create new RTP session, it's not fully RFC3264 compliant but enable working with non-compliant clients (phones)

commit e0fe362a5c661714bc7b2f16f8f6c6ba1857914e
Author: root <root@hp07.iptel.org>
Date:   Thu Mar 3 12:36:19 2011 +0100

    - taken changes from modules_k (missing pre_auth enums handled in switch)

commit 28e604d16ef4dadc5368804a277c695453c9cf9f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 28 20:50:52 2011 +0100

    uac(k): proper documentation for remote server registration
    
    - the feature was shortly mentioned without proper details of how to use
    - discovered upon discution with Ovidiu Sas

commit 1c82d0a422482298b0ae5da299fccd98d67fd6f9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 28 20:32:09 2011 +0100

    kamdbctl: create uacreg table
    
    - uacreg table was not created by kamdbctl

commit ad8c9360348d111085a8e01a277e6b718ef803ad
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 28 17:17:09 2011 +0100

    core: helper function to free parsed header struct with inner free function

commit 2316acaa9adc27355e777d281bee8bfaf393cd6d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 28 16:18:24 2011 +0100

    core: order the list of headers that allocate pkg
    
    - easier to spot the missing ones

commit 33ec2a39200c0cfaf90524970fa5249c17a2b602
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 28 14:27:25 2011 +0100

    core: update the list of header that alloc pkg for parsed structure

commit 469650e0a904331b07f8713baab6d7f19027ee48
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 28 11:17:10 2011 +0100

    core: free SE header parsed structure
    
    - use the generic free framework for headers

commit 1f092363559ebdcdbaf02cb5d8f093b6bea60b87
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 28 11:15:53 2011 +0100

    kcore: free SE parsed body through generic hdr free framework
    
    - the parser for session-expires header uses now the generic header free
      framework

commit 66d0041ec8270d4151136477b80edca66201434e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Feb 27 23:56:43 2011 +0100

    kamailio.cfg: load debugger module for WITH_DEBUG
    
    - set cfgtrace parameter to 1 in this case

commit 9a668406925abf19cbae62c98a12b86f4c045b34
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Feb 27 16:43:06 2011 +0100

    kcore: supported header exports the free function in parsed structure
    
    - parsing the supported header creates a structure allocated in PKG, now
      it exports the function to free it in order to be used when cleaning
      the SIP message structure
    - this fixes a memory leak when parsing the header
    - reported and troubleshooted by Bayan Towfiq

commit 81d05af470d979b3d3f104bbdaa287b3fa58b57c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Feb 27 16:40:37 2011 +0100

    core: framework for generic free of parsed headers
    
    - the structure of parsed headers can define as first field a function
      to free the content
    - this allow to implement the parser for headers our of the core

commit 1baf83e9407bbbe1b25e390ed013a7ef87ffc196
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 26 23:25:07 2011 +0100

    pv: added $mt - return sip message type
    
    - the value is 1 if the sip message is request
    - the value is 2 if the sip message is reply

commit d4eb2e661ad72d0a6b70aea853e428608e80ab2b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 26 22:26:29 2011 +0100

    siputils: documented new functions
    
    - readme updated with is_request() and is_reply()

commit f82c04eb21aa496b883c0e4ee486b247efeb04c9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 26 22:20:49 2011 +0100

    siputils: added functions to detect type of SIP message
    
    - is_request() returns true if the SIP message is a request
    - is_reply() returns true if the SIP message is a reply
    - useful to check in sub-routes that can be executed from both request
      and reply routes

commit f7b5a333d29579a700d636787550ff1430a58189
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun Feb 27 06:54:44 2011 +0200

    modules/dialplan: change in dp_translate return code
    
    - dp_translate now returns -2 (instead of -1) if dp with given id does
      not exist.

commit d8ae33c90851cfca9c956574f3ed1f82fc4da651
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun Feb 27 05:59:16 2011 +0200

    modules/dialplan: more repl_exp fixes
    - Now also REPLACE_CHAR, REPLACE_URI, and REPLACE_SPEC repl_exp tokens
      should work.

commit 1147c09665a05d4af5f1b48764a78fb47649a930
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 26 20:26:54 2011 +0100

    siputils: readme updated
    
    - updated the description of the functions that can be used in ANY_ROUTE

commit 3a1be374d4575e91ba7196db77813df836d98f99
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 26 20:25:29 2011 +0100

    siputils: several functions updated to ANY_ROUTE
    
    - has_totag() and comparison of uri or aor can work for requests and
      reply routes

commit fe40de5b32ae44df06b97b25016caec1f8666894
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 26 15:24:30 2011 +0100

    version set to 3.2.0-dev3

commit c3a1e2ed57337c6db94b01fc794c67631fd847b9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Feb 26 05:12:58 2011 +0200

    modules/dialplan: fixed processing of repl_exp

commit 62c8fbb721c1432466a529ab960f9ed5b7463826
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Fri Feb 25 12:09:04 2011 +0100

    htable: fixed typo in example
    
    - $null was using 1.x format (missing $)
    - reported by Ricardo Martinez

commit 18fcaadf0741aaa98354319360b5e54420c273ec
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Feb 24 18:59:23 2011 +0100

    pipelimit: a bunch of spelling fixes

commit e750f003f423e169a91d62f42d12da2c6675a700
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Wed Feb 23 01:32:12 2011 +0100

    module regex: minor fix in documentation.

commit 7ea366cd3d7ba57926e08fec1c17a1d1eb45f06c
Author: Iaki Baz Castillo <ibc@aliax.net>
Date:   Wed Feb 23 01:09:57 2011 +0100

    module regex: pcre_match_group() allows pseudo-variable in group parameter
    
    - example: pcre_match_group("$rU", "$var(num)"),
      where $var(num) can be a pseudo-variable containing an integer
      pointing to any group in the regex text file.
    - module documentation updated and improved.

commit 1f698797ec4def503630563c06f5aef4a7b40871
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 21 23:15:29 2011 +0100

    core: proper return code for pvar assignment
    
    - in some case the value of the right expression was returned instead of
      proper >=0 for success cases
    - reported by Juha Heinannen

commit 6a09b5abafe2b67e7f7959221d4486fab59c24a2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 16 10:53:31 2011 +0100

    core: log message for no 2nd via in reply sent to L_DBG

commit a8f17732a193eae57e8a9b0647d4fa6fdc0719ba
Author: Carsten Bock <carsten@bock.info>
Date:   Thu Feb 10 23:48:52 2011 +0100

    - Just a note: Need to define the timeout socket in order to activate the timeout-timer

commit 7dfe7c223f779b039e86ef0b5ab0c8cc1785613a
Author: Carsten Bock <carsten@bock.info>
Date:   Thu Feb 10 23:46:58 2011 +0100

    - Updated patch and example config after testing.

commit e5552b2b75684d17be6cd0adf2c78cce4b1fa45d
Author: Carsten Bock <carsten@bock.info>
Date:   Thu Feb 10 22:12:04 2011 +0100

    - Updated the patch and the Protocol towards the RTP-Proxy (removed the timeout-socket-type)

commit 564067f1a35a60d5a111f5f808c5f0f03fa5eab5
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Thu Feb 10 11:11:55 2011 -0500

    modules_s/nathelper: rtpproxy functionality removed
    
     - for rtpproxy functionality please use rtpproxy module from modules

commit 59c8621c61072d4b9c54903e06baab2b3147668f
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Thu Feb 10 11:09:40 2011 -0500

    modules_s/nathelper: rtpproxy functionality removed
    
     - for rtpproxy functionality please use rtpproxy module from modules

commit eedafa45ff4040d0a0f362b8fac6604be63ed7d7
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Feb 10 14:50:33 2011 +0100

    cfg framework: accept 0 int value within a group instance
    
    - The parameter verification of new_add_var() was wrong, it did not
    accept NULL values which can be the case with integer 0.
    
    - char* NULL and str {NULL, 0} are also valid values

commit 17fc9913737cf3314d317d9b62cfd3dc05f8376e
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Feb 10 14:26:14 2011 +0100

    tm: t_pick_branch() cannot ingnore the pending blined UACs
    
    Empty branches shall be considered pending branches
    before their final response is set.
    When all the responses were dropped in failure route and a new
    blind UAC was added, t_pick_branch() did not realize that
    there is still at least one pending branch, it returned an error
    instead. Later on, the blind UAC was tried to be canceled causing
    deadlock.

commit 6cdf90764965f0d52bd7c34d5f2605d0cfa30a17
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Feb 9 06:20:00 2011 +0200

    modules/lcr:  gateways of an LCR instance are not anymore required
      to be "unique"

commit 279d82c50b42a42fa5205d8296bdebcc2e5ac184
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Tue Feb 8 12:35:48 2011 +0100

    htable: fixes to mod param names in docs

commit 15c87249242b602f268ea7e86713d1cbcc0c34dd
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Tue Feb 8 12:22:13 2011 +0100

    htable: added 'dbmode' attribute to module documentation

commit ebf12d93251124d619e6d12093181eab5bab5818
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Tue Feb 8 12:18:10 2011 +0100

    htable: option to save content of htable to db at shutdown
    
    - new 'dbmode' attribute for hash table definition
    - if dbmode=1, the content fo hash table will be saved back to databse
      table when the sip server is stopped
    - default value is 0 - no sync back to database table
    - example:
      modparam("htable", "htable", "a=>size=8;dbtable=htable;dbmode=1;")

commit 7a1a5ffff6a6dbf89f42ccb9f15d588d8bfe62d0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 5 07:08:53 2011 +0100

    tm: free parsed body for faked requests
    
    - if sdp body was parsed in a failure route, the structure was left
      uncleared
    - reported by Bayan Towfiq, credits for troubleshooting access to live
      server
    - credits also to Ovidiu Sas for assistance with sdp parser

commit 66f80a68a48835b1634da04ead4deadeb89ce7f7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 4 19:27:10 2011 +0100

    topoh: add angle brackets around contact uri
    
    - if there are no angle brackets around initial contact uri, add for
      encoded uri to keep URI parameters properly

commit 7f9b429075fa870b6bfdc4fc1a08c396f6c8eeb5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 4 18:26:37 2011 +0100

    topoh: more safety checks for bad cseq

commit 4462757813b146e2ca4018b1a93636115e2408f6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 3 23:54:13 2011 +0100

    presence(k): avoid str* alloc for local contact
    
    - it is not used further an leads to memleak

commit 8bddb971122d9f7ae20bd4ed123771e5a6d0c800
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 31 01:58:00 2011 +0100

    dispatcher(k): enhanced the cfg example in docs

commit 5319d08db206b92b21df646e63415dd1cfd7a6e9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 31 01:39:17 2011 +0100

    dispatcher(k): mi ds_list prints combined flags

commit c7787aceddc3026675039801055f3cb974b4a010
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 31 01:30:25 2011 +0100

    dispatcher(k): documented disabled state

commit 241a05bc65b786084de4c3a93cd22d790ce77148
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 31 01:19:23 2011 +0100

    dispatcher(k): option to disable destionation
    
    - new flag per destination address to allow disabling destination
      address completely, so that if auto-pinging is enabled will not be
      brought back in active state
    - seting disable state and back to active/inactive mode is possible via
      mi/rpc commands

commit 9a5bc6b1554227920075f361bc3d7780a0eef935
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 31 00:20:46 2011 +0100

    dispatcher(k): force_dst set default to 1
    
    - readme updated

commit 5afd88dd704ff40b3662157d7ea8217e1332b1b5
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jan 31 17:36:59 2011 +0100

    cfg framework: @cfg_get supports nested calls
    
    @cfg_get.<group>.<variable> makes use of the already implemented
    nested select functions to parse the returned value. The following
    nested calls are supported:
    
    - @cfg.get.<group>.<variable>.nameaddr...
    - @cfg.get.<group>.<variable>.uri...
    - @cfg.get.<group>.<variable>.params...
    
    Credits go to Tomas Mandys

commit f9ad9ccf83b9341fa5a063cb3bd844567f3f06e6
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jan 31 12:45:57 2011 +0100

    cfg framework: @cfg_selected.group added
    
    @cfg_selected.<group_name> returns the selected instance id of the
    specified group. If no group instance is selected, i.e. the default
    is used, then empty string is returned.

commit 8858e0d2c3c1c64f3223ae62aa2574a54d9fbc9a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 29 20:51:07 2011 +0100

    acc: fixed typo in example
    
    - updated the route types where acc_*_request() can be used

commit 7866c516bd3bf5c6befc8d978d02bf34ab338e3a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 29 20:47:18 2011 +0100

    acc: take SIP method from CSeq header
    
    - safe usage of acc_*_request() for requests & replies

commit af13a0709188a91e0f714b7c481ede865452281d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 29 19:18:22 2011 +0100

    textopsx: documented remove_body() function

commit 42fdf377b2af8f2944f4ff3722d4e54ac7c8202c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 29 19:13:44 2011 +0100

    textopsx: added remove_body() function
    
    - remove the body of the sip request/reply
    - content-lenght is automatically adjusted
    - if you need to remove content-type, use remove_hf()

commit d260b2cba84e1699fe9b2c0860de91e018e03bca
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 29 03:11:46 2011 +0100

    core: check for empty port values
    
    - if setport has empty string parameter skip adding ':'

commit c0f87c06f60e2208f5e4421e9002f331cacb8a27
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 29 00:36:52 2011 +0100

    textops(k): handle no match for subst transformation

commit 9d5bae90cdd40e05e6aaff488a5c86f7241aa261
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 28 17:20:19 2011 +0100

    snmpstats: support of OPTIONS advertised also for siputils module

commit 8c26d7221cabe3c7c5b2f218b842c5886d830966
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 28 16:46:47 2011 +0100

    snmpstats: moved declaration of vars in .c file

commit 97a616f1e34ef3e2631f2a67e9c36cf3516a0441
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 28 09:26:10 2011 +0100

    snmpstats: return from agentx spawning

commit 41e163ccd7ea6b52886e67928d453f454a239208
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 28 09:16:05 2011 +0100

    snmpstats: start the agentx process

commit 536e5901c83b4c9b8d6aff7dd32e2fe0fefe6d0b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jan 28 15:29:45 2011 +0100

    core: small spelling fix in log message

commit bf7cacc549e18d483a892c208cd27c9263b86c49
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 28 00:02:47 2011 +0100

    core: print cfg line for failed eval expressions

commit f3217b68093f82da411b6870eaabeaba9e229e0c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 27 21:33:13 2011 +0100

    sanity: print broken uri if failed to parse

commit 820ef88912289cfff72dc153f5c1240300d49688
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 25 11:16:46 2011 +0200

    module_k/p_usrloc better documentation

commit ddc717ff392f30c126feae6e80db2a1c827b8ae0
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 25 11:06:37 2011 +0200

    modules_k/p_usrloc Fixed a typo

commit ca2e70cd6374f864cfe8af34a6f72fd572146a9e
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Mon Jan 24 10:31:07 2011 -0500

    rtpproxy: moved from modules_k to modules

commit 7ce25a6469e2cba83bcb6db403a1305324df8540
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 24 16:41:10 2011 +0200

    modules_k/usrloc removed some debug messages

commit 592e5b818dd34591abfbd25cba24c2db523a9df9
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 24 16:17:16 2011 +0200

    modules_k/usrloc fixed  rebase to master from 3.1

commit 4d86198e3075998c5ccefab3b90b244ac4df2ace
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 24 11:07:04 2011 +0200

    Removed timer to delete contacts from db, as this is not supported from p_usrloc.
    
    As documented, the deletion of expired contacts must be done externally
    Also, because of the particularities of p_usrloc, only DB_ONLY mode is supported.
    (other modes are too centralized and can't scale)

commit b6ece81f1b3a589bd02824ca5eaff90ad99c5442
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Jan 20 13:35:59 2011 +0200

    modules_k/p_usrloc fixed compilation

commit 0b6beaf491fa6aa69ec5952754c3ae5336efc38d
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Jan 20 13:32:48 2011 +0200

    Forgot Makefile

commit 5ae08566e4330115e080cd28c7d287cec015e83d
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Jan 20 13:23:56 2011 +0200

    Further refactoring of usrloc and p_usrloc

commit edcca484143edc1aae25dee5c3050e74b924121a
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Jan 20 12:08:34 2011 +0200

    module_k/p_usrloc Refactoring of p_usrloc (it uses the usrloc API include)

commit ebdb0c53cf806fb037a45055a858fcee28b59fc5
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Jan 20 12:06:04 2011 +0200

    modules_k/usrloc Further refactoring of code

commit df2148245468bf29c680c5e98a5a3784ed6d7cee
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 18 17:09:06 2011 +0200

    modules/p_usrloc Fixed mode WRITE_THROUGH (and WRITE_BACK) (crash)
    
    TODO: list of domains is kept in private mem, not shared. (!)

commit 81f9a40cd039b70b5f54f6c91ba46927d200665f
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 18 15:11:12 2011 +0200

    modules/p_usrloc Module implement the API of usrloc module.

commit 28c84b91909a03f65f6f6da982785df721322b94
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 18 15:09:16 2011 +0200

    modules/registrar : changes caused by usrloc refactoring

commit f65d06bcda8fc606c4e3b41363fc0a6ee54dbd7d
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 18 15:06:17 2011 +0200

    modules/usrloc Refactoring of usrloc: Moved interface declaration/definitions to one common header (usrloc.h)
    
    Before, mostly every header was included when using usrloc, thus the private parts were not hidden to user.
    Added a udomain_head_t data type which contains the first member of the udomain_t structure (this structure is different
    between p_usrloc and usrloc)

commit b6929fb2e81dae521405b2658a1d19467bfa44fe
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 18 15:03:29 2011 +0200

    modules/usrloc Some refactoring of usrloc to allow both usrloc and p_usrloc to coexist and share structs, code etc.
    
    First commit contains changes to code (.c files)
    Module interface (exported to registrar) is now in a common file "usrloc.h" which is used by every user of user location modules.
    P_usrloc also uses that header so changes to usrloc also affect it(changes to interface)

commit 80bd3fa9d4a47dd4acf7cdffa47304bb26f7c727
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 18 12:47:55 2011 +0200

    test/unit Update p_usrloc test (it executes correctly now and performs cleaning)

commit 97fe4da82ef825f2341704a40871852a32bf4d9f
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 18 12:24:17 2011 +0200

    test/unit improved p_usrloc test

commit c826a7996375360b14452ceda099ef691276346b
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 11 16:03:30 2011 +0200

    modules_k/p_usrloc updated documentation

commit 168783293bb69510c7425e061aa9521769a74c9f
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 11 16:01:23 2011 +0200

    modules/p_usrloc Fixed compilation errors caused by header renaming
    		Removed use_second_key parameter that has the same meaning like use_domain
    		Various other small bugfixes

commit 120d1628d109ba9839f7ed3dcf4f667cc87a4b24
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 11 13:45:49 2011 +0200

    modules_k/p_usrloc Updated documentation

commit ef9dc799602c47a1947ec516def050881594cd58
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 11 13:43:59 2011 +0200

    modules_k/p_usrloc : renamed module definition/declaration files.

commit 76455f63d72ab6655ea45e9b3e18d5c9c87d974f
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 11 12:19:06 2011 +0200

    modules/p_usrloc Updated documentation

commit 485af224db61d8bfcc8d0ac5a6bb62149a276b59
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 11 12:18:11 2011 +0200

    modules/p_usrloc removed some unneeded params

commit 65a6043ded8a5512d2c29889b48123c0e32dec57
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 11 11:30:27 2011 +0200

    modules_k/p_usrloc : Documentation for the new p_usrloc module

commit 295ac87de8ca09888719a9e013056b9555c11455
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 10 16:57:06 2011 +0200

    modules_k/p_usrloc : removed some dead code

commit a3796c7f40434e6503914972f68de8bab181d06b
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 10 16:25:17 2011 +0200

    module_k/p_usrloc further interface cleaning

commit 1786f2a5173d146d4a878013b0a7cdfa0e04c25c
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 10 16:06:30 2011 +0200

    modules_k:p_usrloc some interface cleaning

commit 8f7c41e23566de60e90622cc382b5133e2f0bbbc
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 10 12:27:22 2011 +0200

    test:unit : Basic test for partitioned registration (work in progress)

commit fca5b289428ac0a01697ef725bce9e1f58a642af
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Jan 6 15:18:10 2011 +0200

    Compleated interface of module.

commit 71a26065c3500efb7ab9136c9b071205cc572ad3
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Jan 6 12:36:05 2011 +0200

    New module p_usrloc
    
    Description:
    
    It is based on a usrloc module, but provides partitioned user location.
    This provides 3 benefits:
    1. Redundancy - if a location db is down, there is a spare running
    2. Load Balancing - the module balances the entries by hashing the username(or username@domain)
    3. Failover- in case of error and recovery, it ensures that no stale contacts are returned
    
    More info in the READMEs(soon to come)

commit faa528e4ac829f498fb770606ac2a3196a6cabe3
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 24 10:33:10 2011 +0200

    modules_k/cfgutils: Fixed memory leak and incorrect message in error case on mi commmand

commit b55c09b4fb4b8a99840477b7cdf45b4f1f5877e6
Author: kamailio <kamailio@kamailio-laptop.(none)>
Date:   Sun Jan 23 23:25:11 2011 +0100

    db_mysql: regenerated the readme
    
    - renamed km_README to README

commit 62e2c4403897b17715ef46ebd70ae1a370fd37f7
Author: kamailio <kamailio@kamailio-laptop.(none)>
Date:   Sun Jan 23 23:21:09 2011 +0100

    db_mysql: removed ./km_doc subfolder

commit c4e5ea39e4c673bf7a32223d00ca87b815f65b02
Author: kamailio <kamailio@kamailio-laptop.(none)>
Date:   Sun Jan 23 23:20:06 2011 +0100

    db_mysql: moved xml docbook files in ./doc

commit d55c6bd0f77c9211f429591df6d0a98c2ae96c33
Author: kamailio <kamailio@kamailio-laptop.(none)>
Date:   Sun Jan 23 23:04:16 2011 +0100

    db_postgres: documentation updated
    
    - documented the retries parameter

commit c14525c044e2c56b594aa529846d8eee9bfb686d
Author: kamailio <kamailio@kamailio-laptop.(none)>
Date:   Sun Jan 23 22:52:08 2011 +0100

    db_postgres: renamed subfolder km_doc to doc

commit 4c927f8e3424918a35e9d7f6a1c17cd987934f38
Author: kamailio <kamailio@kamailio-laptop.(none)>
Date:   Sun Jan 23 22:49:24 2011 +0100

    textops(k): readme regenerated

commit e6201dd5b6d49183567cbd6df47564f65b3d435c
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Sun Jan 23 12:51:07 2011 -0500

    modules_k/textops: update docs for is_audio_on_hold()

commit 9212b05c66bc0e5088fd521ffbce95a6e770c342
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jan 21 12:45:21 2011 +0200

    modules_k/dialog Fixed a crash if a null parameter was given

commit b41744eb10217dbd5a94c9545eb062cef08185bf
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Wed Jan 19 16:35:29 2011 +0200

    modules_k/presence fixed issue when sending resubscribes
    
    Fixed an issue regarding sending resubscribes (within the same dialog) when in DB_ONLY mode.

commit 3fac57bc2ba9ed5239af12a350841b78d8c4717a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 19 10:30:29 2011 +0100

    kex: fix compile warning on 64b

commit be92c6713c2b7c7cb04320758a346ba6a1324982
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 18 20:16:31 2011 +0100

    permissions(k): do not check db con in child init
    
    - proper connection is returned by comparison of pids

commit 7c10eae7255450b6a176dc03d0d5f516a6dacc10
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 18 11:49:12 2011 +0100

    db_postgres: reconnect tuning in submit query
    
    - don't attempt to reconnect if the connection state is ok upon
      submitting query, the error might be something else and will be
      reported when fetching the result

commit 958df5cda2af963b893ab7d8af6ce4f4a00cb228
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 18 12:27:08 2011 +0200

    modules_k/textops: Fixed memcpy problem
    
    The commit  4b6cfe30 did nothing.

commit 4b6cfe30388bd3cd95da2c8f540eedf991a4ee9c
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Jan 18 10:45:42 2011 +0200

    modules_k/textops If s0.s is NULL do not memcpy it.

commit 47029324eb780242b5c2bda9d707bd5396dd1278
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jan 17 18:47:44 2011 +0100

    rls: fix small typo, reported from Klaus in FS#11

commit 6c31510e42369f1025f54c53c354b36faa737af0
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 17 14:42:31 2011 +0200

    modules_k/auth_diameter : if realm is NULL, do not crash but instead use uri.host (as it was intended)

commit 5d668ec98ccf4c315da67a1cce6dc3a5cf1b2dc5
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 17 14:32:22 2011 +0200

    modules_k/group : In case of incorrect param, don't crash

commit 1c9ccc12371b38f546ba874ab8b82d775ad112f3
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jan 17 12:06:55 2011 +0200

    modules/auth Fixed a bug when realm is NULL in challenge method

commit ef82d90bec5d06ae53c202300a553ea7e09b0d27
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jan 14 19:10:08 2011 +0200

    core: switch.c Fixed dereference of null pointer
    
    c->ct_rve is NULL in else branch, further deref. will cause chaos.

commit 54d14270197a3585451675684ae10e961de0a48e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 16 23:05:19 2011 +0100

    db_postgres: check result status after query
    
    - connection might be broken and reported after the query operation
    - try to reset the connection in this case
    - reported by Javier Gallart

commit f3cc40a1e3007eff78a09cfdf767811839a018c0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 16 22:44:32 2011 +0100

    app_lua: updated the docs

commit 2bcf11332135c3f23ce2cf0aa519ed57c4d2e4d7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 16 22:40:54 2011 +0100

    app_lua: include xhttp api headers

commit b3d84f21011b023db95e0655c19c46f10d5b063c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 16 22:32:28 2011 +0100

    app_lua: exported xhttp API to Lua

commit efc3f1f5050ea2302952158098d61b457a7c8df1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 15 16:29:02 2011 +0100

    xhttp: exported xhttp reply via inter-module api

commit 0fa5e3acc651c7659fb0d55f03f0d23aade1dad1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 15 12:34:11 2011 +0100

    dispatcher(k): don't safety check db con in child init
    
    - proper db connection is returned based on pid condition

commit 6da5a7a363590b4830d841125cb7e354ec376d10
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 15 12:25:45 2011 +0100

    pdt(k): don't safety check the db con in child init
    
    - proper db connection is returned based on pid condition

commit 11b19d2f5f471bd151bfc47e82f716526118e834
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 15 12:22:45 2011 +0100

    mtree: don't safety check for db con in mod child
    
    - proper connection will be returned based on pid condition

commit 97727e803ec765aff15355dce116454d72cd2323
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jan 14 17:52:52 2011 +0200

    core:modparam.c In case of a STRING  type to STR type convertion, garbage was written
    
    The local "s" var was never written, a line was missing.

commit 5b2881b694510bcca94d1bfbf9c08ea49478b989
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jan 14 17:47:32 2011 +0200

    modules_k/usrloc If path is Null, prevent memcpy on it in get_all_ucontact(mode DB_ONLY)

commit 2453a41d48656a442c7431ceb70570fee9c2bc75
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jan 14 17:30:32 2011 +0200

    core: In case of OOM, prevent crash

commit 9cf0858d0022698a9856c2f6bf67ceb6c426acfb
Merge: 058c7ea f7c16aa
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Fri Jan 14 17:33:40 2011 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit 058c7ead662c87834edf39de2ffa4e386cc78cd4
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Fri Jan 14 17:31:25 2011 +0200

    modules_l/presence/notify.c fixed null pointer bug
    
    Added an additional check to avoid a possible dereference of a null pointer.

commit f7c16aaa7eacf64ba17a54720db2f9a4b58ad134
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jan 14 17:20:40 2011 +0200

    Prevent NULL pointer dereference when rtype was incorrect
    
    Found with clang

commit 2ded4b2f05ed0ddd41de268490113989f6b7ca03
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jan 14 17:04:09 2011 +0200

    lib/srdb1 Prevent crash in case of incorrect parameter
    
    Reported by clang.

commit 302d55cab249b25faf8bebb756a0cf5600607b3f
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jan 14 16:58:03 2011 +0200

    modules_s/register Prevented crash in case of incorrect uri
    
    Error logic performed a free_params on an garbage value (not initialized)
    Reported by clang & llvm

commit acfff3cdcc410c17938fedf1b8c30b5e766558e4
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jan 14 16:53:43 2011 +0200

    modules_k/mi_datagram Fixed pkg_free of incorrect pointer on error path
    
    Static analysis provided by clang and llvm

commit 52ce2349234da4b82bff28eed1bb89baad645a96
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 13 11:20:07 2011 +0100

    snmpstats: fixed faulty allocation of snmp stats array
    
    - the size of struct was used while the pointer to that struct was in
      the array
    - reported by Paul Pankhurst

commit 35568faf7082ccd1316bb09c9216b9ff8efd9227
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Wed Jan 12 18:13:32 2011 +0200

    modules_k/presence: added new functionality to the presence engine
    
    The new "dbmode" parameter controls the way subscriptions are handled: in memory, fallback to database, or database only.
    The "fallback2db" parameter will still ve available for config compatibility.

commit b200828b1fc13e44a098be6f26294c842444c1f6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 11 23:08:25 2011 +0100

    db_postgres: reconnect support for DB API v1
    
    - attept to reconnect to postgres server upon bad connection (e.g.,
      connection lost)
    - number of retries can be set via command line parameter, reusing
      exisiting one from DB API v2

commit e392a83f7608ae0967d22d23006748fe8f09cabf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 11 17:00:38 2011 +0100

    dialog(k): fix db connection conflict after the last backports
    
    - reported by Phillman25 Kyriacou

commit db384b843cbcbbe8a42ca8ab3b36b874042fe00e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 10 22:44:31 2011 +0100

    srdb1: extended warning with PIDs of conflicting connections
    
    - troubleshooting purposes

commit 4fc4ceb5495486ff1313c631d34a3bc04b792895
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 7 23:25:10 2011 +0100

    uac_redirect: use the flag for parsing contact header
    
    - header type was used instead

commit 9f116e23d8b46b5470dc02f5bf731b61c7516fd8
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Jan 6 11:14:14 2011 +0200

    modules/enum: fixed access to service parameter in enum_query.

commit 7c4cd425f658264f7c95e56051f021b20b55f442
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 20:25:05 2011 +0100

    Makefile: increased devel version

commit c8e8193d3d5d933445afbd636288074c1b277945
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 20:00:49 2011 +0100

    msilo(k): simplified getting of From/To

commit 8d9f412ab0b8cdc19a00e8549722326f4b368cb4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 19:52:27 2011 +0100

    rls(k): module polishing
    
    - optimiezed error checking for broken sip requests
    - internal naming changes to avoid object conflicts
    - query for rls services documents (reported by Klaus Darilion)

commit 8016597dbdb1e1aa03576c537a140c81cdc8beeb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 18:55:54 2011 +0100

    core: defines to return parsed uri in From and To

commit 10e4fcf8a75208dc934f9cbc821f7c081e6c4994
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 16:23:44 2011 +0100

    core: parse_to_header() moved to parser/parse_to.{c,h}
    
    - more convenient way of testing the validity of To header

commit 25d8ec8b5962b3193b37186b06be5683e4a22fda
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 15:24:02 2011 +0100

    rls(k): control loading db subs
    
    - parameter that can be used to control the db load from config

commit 7e01915b757da740d7fff31ba1a25c4aa5a96908
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 15:11:39 2011 +0100

    rls(k): fixed double-quotes wrong position
    
    - reported by Klaus Darilion

commit 6baa261b6494736034af8f5b90446237500eee79
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 15:11:08 2011 +0100

    kcore: extended supported parser with eventlist

commit cd29cc777996b8100680fb8ea96eb302e21f8c4c
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Jan 5 15:10:06 2011 +0100

    cfg_rpc: RPC commands for value deletion
    
    Two RPC commands added for deleting a configuration value from
    a group instance:
    
    cfg.del group[id] var
    cfg.del_delayed group[id] var

commit 7d7264e23619fddcf0fb91a4868631b07af6494d
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Jan 5 14:57:14 2011 +0100

    cfg framework: group instance values can be deleted
    
    Added support for deleting a single value from a group instance.
    The value is reset to the default value in this case, it follows the
    changes of the default value.
    
    Related functions:
    
    - cfg_del_now()
    - cfg_del_delayed()

commit 628e975416ba291f7158520e5cc92d0b0cb6826e
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Jan 5 11:40:20 2011 +0100

    bit test: bit_test_and_reset() added
    
    The function returns the bit found at offset position
    in a bitstring and resets the bit to 0.

commit fc444f6f95e373d93a8698a09571a9e67939b632
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Tue Jan 4 16:21:04 2011 +0100

    cfg framework: cfg_group_inst_exists() added
    
    The function checkes whether or not a group instance exists.

commit ca88d95652abd911f7b8d2525c43b560eb571608
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Tue Jan 4 15:47:14 2011 +0100

    cfg framework: cfg_set_* works with dynamic group even before forking
    
    Added support for the cfg_set_* functions for dynamic groups
    (i.e. variables declared from the script) before forking.

commit 106ab4610b48140a5a5e99a520b53a12bd0a2478
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Tue Jan 4 11:28:53 2011 +0100

    cfg framework: crash when adding a new group instance
    
    A log message trying to print a NULL variable name caused
    a crash when a new group instance was added before forking
    without any variable.

commit 47daa2e1174376fa94b858ea9473b868161e7341
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Tue Jan 4 11:14:30 2011 +0100

    cfg framework: mem leak in del_group_inst is corrected
    
    cfg_del_group_inst() did not free the strings that were
    set within the group instance. When the group instance was
    deleted, the strings left allocated.

commit 1dcfdfbd0360a38f4b7e3f9075de6b19d1847cb4
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jan 3 12:22:46 2011 +0100

    cfg framework: add/del_group_inst updates the local config
    
    add/del_group_inst() updates the local configuration to
    make sure that cfg_set_*() sees the change when it immediately
    follows the group intance modification.

commit 5d205c718032511a0cd1d29830bd0a0e9a0c8e70
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 13:17:26 2011 +0100

    pkg/deb(k): removed rls from excluded list
    
    - patch by Klaus Darilion

commit 9f2919ad77a16787f59a7f99c98597fb0176806c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 13:15:32 2011 +0100

    xcap_server: fix len for 'uri' comparison
    
    - patch by Klaus Darilion

commit 6d17c7421464a85ba5cf10f8c52d868fca5d3f43
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 12:59:41 2011 +0100

    rls(k): documented server_address parameter
    
    - patch by Klaus Darilion

commit 436b9532e0bdfd115705a6ae5300aa7b2c1729fe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 12:47:37 2011 +0100

    rls(k): use server_address paramter as contact in reply
    
    - server_address was just defined as parameter, but not used at all
    - server_address defines the rls server address to be set in Contact
      header of 200 replies. It has to be a valid SIP URI
    - fix cseq stale check
    - remove Max-Forward header because it is automatically added and use
      Suppoted instead of Support for header name with supported events
    - patch by Klaus Darilion

commit 7925ae1a9ae6083fcdd04249eefe974e2a5f6e8f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 12:45:58 2011 +0100

    rls(k): added CRLF for Subscription-State header
    
    - for the case of subscrition termination on timeout, the header was
      missing CRLF to its end
    - patch by Klaus Darilion

commit 8654b01c184d41da019a9e80ecfbca9da8f882ce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 11:19:49 2011 +0100

    rls(k): documented outbound_proxy parameter

commit aabeca534aebe7953b63884db9bf58e176ce5a6c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 5 11:15:28 2011 +0100

    rls(k): added outbound_proxy parameter
    
    - set SIP uri where to send subscriptions

commit ef2906d5036dd48320702285f6390e9e688a292a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 4 00:43:08 2011 +0100

    db_flatstore: skip child init for proc init rank

commit 4727a534f767e6f2422dc58bb22bbf266408874c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 4 00:39:58 2011 +0100

    db_flatstore: use PROC_MIN to compute process uid
    
    - PROC_TCP_MAIN is no longer the lowerest and can produce overlappings

commit 0f376a2589b4a11a6829ca1bdf052cf6126851bd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 4 00:29:16 2011 +0100

    pdb: skip child init for proc init and tcp main

commit 24731c59cd9dcb0d1c567821ffdfb1860d4def9c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 4 00:25:20 2011 +0100

    matrix: don't do db init for rank==proc_init and tcp main

commit d4d6d3c0270a5892fae87650adc7600a40e25c0e
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jan 3 12:41:20 2011 +0100

    doc: add small note about SCTP compile time deps to INSTALL file, reported from Juha

commit 7c530f69da7368f87e78d7a3ad1f3439005402a5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 2 19:56:40 2011 +0100

    dialog(k): open db connection for main process in db delayed mode
    
    - used at shutdown to write to db

commit 8cd8d0e18a8ead373229ce413ad7cd7f827a98e5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 2 19:44:18 2011 +0100

    pdt(k): mi child init function name updated
    
    - child_init => mi_child_init
    - mod_child_init => child_init

commit 517df28fc695b047d1f7f3cd4376a5f9240b7906
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 2 19:39:11 2011 +0100

    mtree: skip db init for special ranks

commit 88f03cb2cf50ee0b09fda8b3c4c4651553ddd176
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 2 16:10:40 2011 +0100

    dialplan: fix matching string comparison op
    
    - the return code was tested as for match of regexp, which led to
      mismatches for str comparison
    - credits to Jordan Levy

commit 12aebbf1056a3b51e349de6e69e2aca1801905a3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 2 16:00:13 2011 +0100

    dialplan: use size_t to get the size of compiled pcre
    
    - it caused crash on 64b since size was declared as int and
      pcre_fullinfo() expects size_t (on 32b is the same struct size)
    - reported by Javier Gallart and Bayan Towfiq
    - credits to Bayan for provinding testing environment and
      troubleshooting assistance, closes FS#109

commit b5866451f323aa892bb48ba86424d6a45d8108b5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 31 00:40:32 2010 +0100

    xhttp: safety checks for null parameter values

commit 4abe2eec5305de4157dc2d0d5dd9511f43c77bf2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 31 00:00:26 2010 +0100

    dialplan: specific reply for translation failure
    
    - 404 no translation returned if dp_translate MI command fails to do
      dialplan translate
    - added extra debug message

commit a4545d8d23d9de3c6cf18329a822b677d9527047
Author: Alex Hermann <alex@speakup.nl>
Date:   Tue Dec 28 13:44:53 2010 +0100

    modules_k/pv: Fix microsecond respresentation of $TV(Sn)
    
    Make sure <100000us isn't off by multiple powers of 10.
    eg make sure 5us isn't printed as 0.5 sec by padding with 0's

commit 6faec77af3e839314ce9de59b8413e73f0266c25
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 28 11:38:57 2010 +0100

    ldap(k): connect to server for negative ranks
    
    - there are some processes with negative rank that need connection to
      ldap server, like timers
    - reported by Pan Christensen

commit 8a2c200bdf22b27d01389303b4677a2b14510a81
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 28 11:02:38 2010 +0100

    kamctl: removed db_berkeley lcr obsolete tables

commit c6307d733d4d346e29cb20bacca1080ba3805495
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 28 11:00:59 2010 +0100

    kamctl: added db_berkeley table definitions for lcr
    
    - reported by Noa Resare

commit 3a21869fec8b0fdb202721485bd2fb10a6a3f49b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 28 10:59:09 2010 +0100

    lcr: removed obsoleted db tables

commit 175acb78028b6f7eb3a06dc306f097e98d72be40
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 27 13:54:55 2010 +0100

    db_text(k): add lcr tables def files

commit b8ceb2733682d576d95b98df06328559743c2a69
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 23 11:23:36 2010 +0100

    kex: get rid of 64b warnings in pkg stats updates

commit 92d6b6c19800439864d27cb2ee4df0202c255cf0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 23 09:42:01 2010 +0100

    core: fix typo added with pkg stats
    
    - reported by Juha Heinanen

commit a2d6730df7210084310d01c20b4ba2f3bcb883fb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 22 13:07:33 2010 +0100

    kex: updated pkg.stats documentation

commit b6ae8ad5695eb6c4ec330f8ca44725a36172b8d4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 22 12:59:00 2010 +0100

    kex: pkg.stats command extended
    
    - it can take optionally a filter for which process to print pkg stats.
      It can be:
      - pid value - print by process pid
      - rank value - print by process rank
      - index value - print by index in process table

commit 70b2fe02a634ed2fd020eab27cbc8e7f676289bf
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Dec 21 14:38:45 2010 +0100

    core: fix ignored force_rport
    
    The global force_rport config setting (not the force_rport()
    script function), was ignored in some cases (e.g. tm & sl).
    
    Reported-by: Tomas Mandys  tomas.mandys iptel org

commit 42888884872511454eece63f757b4d73e14e3794
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 20 23:39:07 2010 +0100

    kex: doxumented pkg.stats rpc command

commit 829b7ff2e663c3ab7cc4ea95d2831eabef57b543
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 20 09:51:05 2010 +0100

    kex: print private memory usage per process via rpc
    
    - new rpc command pkg.stats that prints used, free and real_used metrics
      per process for private memory (pkg)
    - you can see how much pkg each process is eating and how much is still
      available
    - should be useful to track pkg memory leaks and/or trigger alerts when
      there is no more pkg available

commit e2335db0b437157001c08da2802fcdf3de6c712a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 20 09:44:43 2010 +0100

    debugger: added some comments for functions

commit ed6f5bcaf616d2da8f8cfce4428b4eab41696717
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 20 09:40:46 2010 +0100

    core: execute core events when pkg usage changes
    
    - track used and real_used metrics for q/f_malloc when MALLOC_STATS is
      defined

commit 70e7b57085ea7453c2a49393241af2328169167a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 20 09:39:40 2010 +0100

    core: added core events for pkg operations
    
    - ability to track pkg used and real_used metrics

commit c55058315ef8105f3d073340e050b6d49a2fe465
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 19 21:23:15 2010 +0100

    cfgutils: documented pkg/shm_summary()

commit 122099d069aecd7f2cd74fd840f446236a88b885
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 19 21:13:06 2010 +0100

    cfgutils: added pkg_summary() and shm_summary()
    
    - ability to print summary of pkg and shm from config

commit ade20f7c8c26e732b7e7ad89a6d2c22b71228f60
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 19 11:56:49 2010 +0100

    acc(k): take r-uri from winning branch for missed call acc
    
    - only if the branch was relayed, otherwise uac struct might be
      unfinished due to drop call in config. Use r-uri from uas struct
      otherwise
    - reported by Juha Henanen

commit eb005b74c1d47d215b17ac395efafe56c14ec295
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Dec 18 00:34:54 2010 +0100

    dialplan: don't print PV name in replacement
    
    - reported by Andreas Granig

commit a3db53e7a71f1676bc0e55503fb4c71771f5e9ff
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 16 14:11:56 2010 +0100

    pv: added PV $rmid - request method id
    
    - return internal integer representation of SIP method type

commit f8108aac14f5ce0696e88d8b8762f63ce96a22a4
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Dec 16 10:59:56 2010 +0200

    modules/lcr: do not try to use rule target if its gw has been disabled.
    (cherry picked from commit 46eb7cc5e7ed341111f5cefd667b97f98d73591e)

commit a8c2c1e2bdd43b6aa5c766674d431e6a5ca6afbc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 15 20:54:38 2010 +0100

    core: removed unused piece of code
    
    - reported by Klaus Darilion

commit c3981251a2c8723e972190ee2c8e244b4ce0960f
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Dec 13 18:12:08 2010 +0200

    modules/lcr: fixed adding of ;transport parameter

commit 9ebbbf3f53d88729add23980695ff84dace90342
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 8 00:20:44 2010 +0100

    uac(k): stop trying to re-auth if first attempt fails
    
    - don't do cascade authentication if server keeps sending 401 for new
      attepts
    - reported by Bernhard Suttner, part of FS#108

commit 07959c8330861275ffe1a611805e7eadbf7799c1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 6 10:23:54 2010 +0100

    drouting: added note about dr_gateways
    
    - it can link to dr_gw_lists with '#'
    - reported by Marc Cardinal, FS#96

commit f6e2325aa6770840c25dbb64afd405f73077fc79
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 6 00:05:46 2010 +0100

    pv: $snd(id) broken in $sndto(id) and $sndfrom(id)
    
    - $snd(id) is aliased to $sndto(id)
    - $sndto(id) points to next hop address
    - $sndfrom(id) points to local socket to be used for sending

commit fef7983c13a3bc1e9c501f80b3f4c618ad80373f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 5 23:28:31 2010 +0100

    auth: README regenerated

commit 010f9159f974d81d8bf5be2ab4d92e38325de884
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 5 23:25:41 2010 +0100

    auth_db(k): more granular return codes for failure cases
    
    - enhanced the config auth functions return codes
    - part of a path by Alex Hermann, FS#101

commit 5ec0e4222a31610ec0c4184dfdbe6d10dd00e0b5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 5 23:23:41 2010 +0100

    auth: more return codes for auth API
    
    - report more granular failure causes
    - part of patch by Alex Hermann, FS#101

commit 610126b748b3f35b7bcdfe784553f9f88f8bfdd9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 5 22:33:02 2010 +0100

    db_berkeley: updated module name
    
    - module name was set to db_bdb upon integration of k and s version,
      instead of module path name
    - set now to db_berkeley
    - reported by stas - FS#106

commit b7702fe03a99d5336a1783c0e135e5c3aa2b5a62
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sat Dec 4 09:22:15 2010 +0100

    pkg/debian: Fix bad changelog.
      * Prevents dpkg-parsechangelog not parsing the correct version and generating bad versiones packages.
    (cherry picked from commit 88bda825581a919778eb6f85e0a7bf6b04ede630)

commit 9d66dfad71c8062c919b04bcb2e31e15f8ac8aed
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Fri Dec 3 16:38:01 2010 +0100

    pkg debian
      * Update version to 3.1.1
      * Install general ChangeLog instead of Debian's one.
    (cherry picked from commit 22b18eefa163392ab37c6274d1631824908a4b47)

commit dd663a733845510a9ee0557b8d49f058c77ef02c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 3 10:59:05 2010 +0100

    uac: safety checks for empty values in uacreg
    
    - the values in uacreg table must not be empty
    - reported by Bernhard Suttner

commit 0f5e21c668e46492fb9f9ec69e5b5aafe41bd272
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 3 10:45:00 2010 +0100

    dispatcher(k): fixed use of use_default parameter
    
    - when there was a single destination in destination set and it was in
      inactive state, then having parameter use_default=1 caused a divion by
      0 while atteptimpting to look for active destaintaion
    - reported by Eric Hiller

commit bd18d55dc1a5225a58483132b578723a155958e9
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Thu Dec 2 14:56:11 2010 -0500

    modules_k/textops: new function is_audio_on_hold()
    
     - returns true if at least one 'audio' stream is on hold
     - only 'audio' streams are checked

commit 27e1d6f41a7b2545af39ad040b6cf2d824a28f25
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Thu Dec 2 13:49:34 2010 -0500

    sdp parser: detect on hold media during sdp parsing

commit f138cce2c0968872f26538983e06a128a1b41344
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 1 23:30:34 2010 +0100

    srdb1: keep PID per DB connection
    
    - print warning when PID mismatches - it is cross-process shared DB
      connection
    - initial patch by Robert Verspuy

commit 907936449b2543966a5b3b2fe821d406c2293799
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 30 23:16:19 2010 +0100

    drouting: do not call init child for PROC_INIT
    
    - avoid opening a database connection before forking
    - reported by several people in context of Postgress async lib calls

commit be7c489da642888827a50c732f9b37bd57e52e14
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 28 13:39:02 2010 +0100

    kex: documented is_myself(uri) function

commit 8a88206ee66227657f827290df0e46119eedcd8d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 28 12:59:16 2010 +0100

    kex: added new function is_myself(uri)
    
    - return true if given parameter matches 'myself' condition, the
      parameter can be a static string or pseduo-variables holding an IP or
      a SIP URI

commit 95f58d8c8bde444adf5078328714526cc5a9cca1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 28 12:45:49 2010 +0100

    app_lua: doc updated with dispatcher sub-module

commit ef59a1b1176687c3b4cbe5f1639f83eefbea3feb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 28 12:38:44 2010 +0100

    app_lua: exported disptacher API to Lua

commit 86e03df9b1dbac5be70747bcd9f57a97fe5256c7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Nov 27 00:04:17 2010 +0100

    dispatcher(k): exported inter-module API

commit 6b2081df15344300ccdeda67c5447a512920fe98
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 26 22:42:46 2010 +0100

    htable: exported inter-module API

commit 6d8a726754799cb4e7e312a1436f79da7ee91646
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 26 14:26:27 2010 +0100

    topoh: option to bind to sanity for parsing checks
    
    - the module can bind to sanity to perform parsing checks before
      proceeding to encoding/decoding of received requests
    - new parameter 'sanity_checks'

commit d8803270678b730a7f7352c90f475188fca50c2c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 26 13:07:08 2010 +0100

    avpops: use proper avp list for avp_print()
    
    - reported by Alex Hermann - FS#104

commit e9b9c8f7ccdfe4824b58e252ef157dcfbf4c9738
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 26 12:39:07 2010 +0100

    sanity: export inter-module API
    
    - sanity functions can be used from inside other modules (e.g., topoh
      can use it now before getting to config file execution)

commit 50453970817aa4ed551d7ab2b351b3742c839848
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Nov 26 10:59:12 2010 +0200

    modules/topoh : If a message contains a bad CSEQ, skip processing it.
    
    This would likely cause a segmentation fault when receiving messages with bad CSEQs.

commit 4fe783a09d6af1a2c16659f961b9097a021805d8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 26 10:00:42 2010 +0100

    topoh: enhaced description of mask_ip parameter

commit 11ea0c4de66e40bfa1ba03a351f7ec6bc5f0fbfc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 26 09:54:04 2010 +0100

    topoh: more verbose err reporting during init
    
    - check also if mask ip != local ip
    - should prevent the crashes when mask ip == local ip

commit 3ff9594a30eff2d18e6ea0595c5f82f878eaca1c
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Nov 26 10:37:30 2010 +0200

    modules_k/nathelper: add_contact_alias adds <>s around contact URI
    
    Make sure that Contact URI is surrounded by <> when adding ;alias
    parameter.  Otherwise, ;alias parameter may be interpreted as header
    parameter, because the syntax seems to be ambiguous.
    (cherry picked from commit f5ef15fee0c3bf09adf2506effa0895f72af9034)

commit 18e67ca2d125f87b85c00eb74b057b9c010a8a26
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 25 22:25:01 2010 +0100

    permissions(k): changed params from PVAR to SPVE type
    
    - type of fixup params for allow_trusted() updated from PVAR to SPVE
    - PVAR can be non-zero terminated string
    - SPVE accepts also static string or combination of PVs
    - adapted patch submitted by Alex Hermann for crash related to static
      protocol value, FS#102

commit 3e44fcbe47774d2b157e82228e6266df2a08d627
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 24 22:24:25 2010 +0100

    db_flatstore: exported DB API v1 bind function
    
    - bind function for DB API v1 was no longer exported upon merging with
      implementation of DB API V2
    - reported by Javier Gallart

commit dbfd450d4e27c12793daa8225b348aa496a02d5b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Nov 23 14:22:52 2010 +0200

    modules_k/siputils: added set_uri_user(uri, user) function.

commit 1b209e395c1816aa126592c005f4fb61d9828dfd
Merge: 0e564bc 8ea8966
Author: Jan Janak <jan@ryngle.com>
Date:   Wed Nov 17 18:27:35 2010 -0500

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    * 'master' of ssh://git.sip-router.org/sip-router: (31 commits)
      app_lua: several tm functions added to Lua api
      tm: added export structure for extra API
      app_lua: added several core functions to sr package
      app_lua: helper function to return error code
      app_lua: fixed name of module in modparam examples
      app_lua: added registrar API to Lua
      registrar(k): exported inter-module API
      usrloc(k): db modes defines moved in usrloc.h
      usrloc(k)API function get_udomain()
      usrloc(k): preload parameter exported
      usrloc(k): new parameter 'preload'
      sqlops: added LF to end of debug message
      app_lua: sr.maxfwd mentioned as available submodule
      maxfwd(k): added inter-module API structure
      auth_db(k): added new file api.h
      app_lua: typo in register parameter
      app_lua: added functions from auth_db api
      auth_db(k): close db handle only for second param fixup
      app_lua: note about submodule sr.auth
      app_lua: exported functions from AUTH API to Lua
      ...

commit 0e564bcd3616f9dc981bb768003545674c79c2a7
Author: Jan Janak <jan@ryngle.com>
Date:   Wed Nov 17 18:26:32 2010 -0500

    db_mysql: Fixes crash in libmysqlclient after connection reset.
    
    Sometimes SIP-Router would crash in libmysqlclient after a connection
    to the server has been reset. This is caused by mysql_stmt_prepare
    which will reset the connection data structure if a connection has been
    reset. Subsequent calls to other mysql functions (mysql_stmt_execute)
    crash unless the connection has been re-connected. This is documented
    as mysql bug #33384.
    
    A workaround is to reset and reconnect the connection explicitly
    immediately after mysql_stmt_prepare has failed with
    CR_SERVER_GONE_ERROR. This change implements exactly that.
    
    First of all, this patch fixes a minor bug in updating the variable
    that keeps track of number of connection resets for each database
    connection and pre-pared statement. The variable needs to be
    incremented each time a connection is closed. Previously it was
    incremented only if a connection was successfully reconnected. If the
    reconnect attempt failed than the variable was not incremented. The
    function that uploads commands to the server relies on the variable
    to detect connection resets and may not have worked properly under
    some circumstances (if a connection fails to reconnect).
    
    Function upload_cmd has been modified to close the connection
    explicitly if mysql_stmt_prepare fails with CR_SERVER_GONE_ERROR. This
    ensures that subsequent calls to mysql_stmt_exec are forced to reconnect
    and re-upload commands to the server. This is needed to prevent the
    library from crashing.
    
    exec_cmd_safe now checks if a connection has been disconnected and if
    so it tries to reconnect it before executing a prepared statement. This
    is used to recover from failing mysql_stmt_prepare.

commit 8ea8966228a0d15ee4ddd7ab3087d4c11a0680d0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 17 13:33:17 2010 +0100

    app_lua: several tm functions added to Lua api

commit 618712b6ee69ebc41b963754957303d8b1e0aca2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 17 12:53:18 2010 +0100

    tm: added export structure for extra API
    
    - used for not-so-common inter-module API functions
    - initial tm API structure got quite big and not all functions are very
      used

commit 0026a3b553ab3c8ac539cbfcd8fd99fc6f1cb799
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 17 11:47:03 2010 +0100

    app_lua: added several core functions to sr package

commit b4570312106ce5420ab1f55be54ebb2308c408dd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 23:08:02 2010 +0100

    app_lua: helper function to return error code

commit fc57fcf7828a1576a44c7bfe9a3148f61f89f68d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 21:43:28 2010 +0100

    app_lua: fixed name of module in modparam examples
    
    - added note about submodule sr.registrar

commit 36f053fd2c3624ae159611687e8432db7bfea600
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 21:12:44 2010 +0100

    app_lua: added registrar API to Lua

commit 5befde48382fc9503e6476a457efb94d4a8ccefb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 20:55:44 2010 +0100

    registrar(k): exported inter-module API

commit efe9d9d48fe3aa66228633230de332181d43eacf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 20:51:05 2010 +0100

    usrloc(k): db modes defines moved in usrloc.h
    
    - they are part of API as registrar uses them

commit c7e65c0f19a008e738eadf75244733bf29a4993c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 19:51:21 2010 +0100

    usrloc(k)API function get_udomain()
    
    - get usrloc domain only if it exists, don't create a new one

commit eed3781650ada2681cd120526ef487d7ccf4bc1c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 19:40:50 2010 +0100

    usrloc(k): preload parameter exported

commit 16679e6dfe49955acc242ad9f29a51d2e7909a3d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 19:37:41 2010 +0100

    usrloc(k): new parameter 'preload'
    
    - can be used to specify list of location table to be initiated at
      startup, even they are not used by registrar module functions
    - good for using the usrloc module from other modules

commit 0d247e7be4092a8ec1666d2c83c1cda89be88bdb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 19:29:29 2010 +0100

    sqlops: added LF to end of debug message

commit a4de75cc00840d3871e5ca3bbcfa22c84b54ad3c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 18:55:26 2010 +0100

    app_lua: sr.maxfwd mentioned as available submodule

commit 5d3b2f3631132d6905f4121d9288c936720e8df8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 18:37:37 2010 +0100

    maxfwd(k): added inter-module API structure

commit 63e68790909ac67ee1e4513af8c58d95736c65b6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 18:28:17 2010 +0100

    auth_db(k): added new file api.h

commit 689ee06964f4af8f0ad1aad63a68ed791ea5e8b9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 18:17:43 2010 +0100

    app_lua: typo in register parameter
    
    - note about submodule sr.auth_db

commit 8955a1a8ce44f2dfd2916e92fec574eff74be3ee
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 18:04:17 2010 +0100

    app_lua: added functions from auth_db api

commit c70565c3aad53a3f0d153fe3edc52a1160b0f764
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 16:43:30 2010 +0100

    auth_db(k): close db handle only for second param fixup
    
    - digest_authenticate() refurbished to accept clear text values for
      realm and table

commit 542fccb1fce497f1837fdc2b442384556fd277bf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 16:29:49 2010 +0100

    app_lua: note about submodule sr.auth

commit 579006b5552e4bead7a99a70a2d965c593b45577
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 14:18:45 2010 +0100

    app_lua: exported functions from AUTH API to Lua

commit 85cb98785685b1af22c21965048772080c5c2de3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 14:18:24 2010 +0100

    app_lua: added helper function to return int to Lua

commit dc15caf8305fd3bd1e27a3c97fc9f13a6370fdda
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 13:48:57 2010 +0100

    auth: several functions exported via inter-module API

commit 5674d65978fb07986729e23500b38abecfc997a0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 13:37:19 2010 +0100

    auth: pv_authenticate() made inter-modules API friendly

commit e5f14b9e1f888ef2aad675e8902a166833c1cf11
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 13:20:28 2010 +0100

    auth: parameters are resolved in wrapper functions
    
    - parameters for www/proxy_challenge() are resolved in wrapper functions
      in order to have auth_challenge() receiving the string or integer values
    - cleaner approach for the perspective of exporting auth_challenge() to
      inter-modules API

commit 9451c9cd7742d9ecef2d88c23d556cc319ec23a3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 12:47:20 2010 +0100

    app_lua: doc updated with rr export note

commit 4a9a0ab4f7d8f4a85ef6e10a6e0be7aa74ac809e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 12:45:48 2010 +0100

    app_lua: exported functions from RR module to Lua

commit 81f9b6a0ea5be99def8184488bd57b1599b8754a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 11:44:27 2010 +0100

    app_lua: note about subpackage sr.sqlops

commit 69c68b70a96fade11bfd66b9cf7c7df8ce295f64
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 11:41:47 2010 +0100

    rr(k): record_route() and loose_route() exported via API

commit d4e3b923fa68f16fa985c4e6eccedded82585987
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 10:55:44 2010 +0100

    app_lua: export to Lua the API from sqlops module

commit 99b933c12d0612c5c5d1ffa4d9e5716bd6820e17
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 16 10:55:00 2010 +0100

    sqlops: return the reference to DB result value in API

commit d421a577d9b4d23485dfae4aa0f4b4c51bef5051
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 15 23:27:07 2010 +0100

    app_lua: added note about sr.tm submodule

commit 26947fe82b8917d41174f0aa45665569bbd7e1dc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 15 22:36:40 2010 +0100

    sqlops: documented new sqlres module parameter

commit 576ed7b991e41b1023213a080fe589badc0c1a6f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 15 22:16:34 2010 +0100

    sqlops: exported sql functions via module API structure
    
    - new module parameter sqlres to be able to declare DB results IDs

commit 13932b3a17620a4e9ac598ec43ad188aa2626f7e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 15 21:47:51 2010 +0100

    sqlops: return $null pv if the value in result is null

commit a0f8762f139ca907a199219e3bab7d656ca2731a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 15 19:41:20 2010 +0100

    app_lua: exported first TM functions to Lua
    
    - you can call t_reply() and t_relay() natively in Lua via
      sr.tm.t_reply(code, reason) and sr.tm.t_relay()

commit e15ef088980a6d6898a6a93b872fa620fab85d42
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 15 19:36:25 2010 +0100

    app_lua: added helper functions to return true/false to Lua

commit bffe87d58679020d26a650fbd0535536a0213096
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 15 19:33:05 2010 +0100

    tm: small wrapper for exporting API
    
    - tm_load_api() added as wrapper to load_tm_api() to match the common
      pattern for naming module exporting API functions

commit e1e6ddb22dc8487517a61653ea7d21d3086122cc
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Fri Nov 12 13:13:38 2010 +0100

    pkg/debian: add libgeoip version requirements
       reported by Klaus Darilion

commit 72c052a94ce3a5fd2baefc74861d797c1a404a1a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 12 12:52:27 2010 +0100

    dispatcher(k): more verbose logs for MI ds_reload
    
    - if the command is disabled, print error message to syslog with some
      hints

commit e1371192357f889c35003ea28d0eb2351e27f84d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 12 12:26:26 2010 +0100

    dispatcher(k): note about disabling MI ds_reload
    
    - the MI command ds_reload is disabled for call load based dispatching
      (algorithm 10)

commit 4a0b559062b70c1c089c1ea9908eaae60679ad04
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 12 12:22:20 2010 +0100

    sanity: note about different behavior based on autodrop

commit 06986b23ad72b648a28f614ab47d8cbc727823cf
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Mon Nov 8 19:04:24 2010 -0500

    modules_k/nathelper: core sdp parser integration for nat_uac_test()

commit 6cfee82666b78400d5ff15c49aac1441cfbbaaf6
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Nov 4 17:14:56 2010 +0200

    core:forward.c Fixed small error caused by unlikely usage.

commit ef0dd4e3f0837753ac18d58606078d8595f24dc6
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Nov 4 16:11:41 2010 +0200

    core/forward.c Fixed mhomed behavior.
    
    As connect() dones't re-bound a UDP sock if the socket is already
    bound to an interface, first unbind the socket by connecting to AF_UNSPEC

commit 75fc49f74d13774f1ecc0cdd8f0adfe168915b4f
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Nov 2 19:06:12 2010 +0100

    modules_k/dialog: Enhance unref_dlg_from_cb() robustness.
    
    - Check parameter for NULL pointer.
    - Call unreference_dlg(), thus being more wrapper-ish.
    - Fix indention.

commit 49837c37aea72c1e4f0cc3290382c0adbf72e3f8
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Nov 2 11:45:15 2010 +0200

    trie API Fixed dtrie_insert OOM handling, where assert() was wrongfully used
    
    Now the function behaves as expected, freeing previous allocated resources, logging the OOM condition , and returning -1

commit a1b6e569c20b3c2a926022951e5303b7d8df2405
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Nov 1 23:00:47 2010 +0200

    modules/lcr: fixed setting of tag_avp by next_gw() function

commit 1705424e70650ae0d173227221b04d1160c3e2c4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 29 21:41:17 2010 +0200

    dialog: added missing parameter in example

commit 028e3cc1a34f1e682d604a7c0e3fb1a7da03a211
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 29 20:51:16 2010 +0200

    dialog(k): set null value parameter for get_dlg_profile() with 2 params
    
    - because of using same internal function for cfg get_dlg_profile(...),
      when only 2 params were provided, the third was unpredicted and not
      null most probably, potentially resulting in a crash
    - reported by Eugene Oden

commit 54723bfd00fdc6302802533fee8c2f0ae45c7091
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 29 18:51:14 2010 +0200

    dispatcher: docs updated - routing block types for functions

commit 8a50fa608edad91782848711c51476af01dd0392
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 29 17:09:39 2010 +0200

    sanity: docs updated with autodrop parameter

commit 39a8108c62a2beafba18417613b9660a8abef86a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 29 16:50:42 2010 +0200

    sanity: parameter to control dropping of broken messages
    
    - new modparam autodrop to be able to return to config even when the
      message is broken
    - default value is 1 - drop (return 0) - for backward compatibility
    - set it to 0 to get return -1 to config - take care in config to exit
      execution. This mode is good for logging purposes
    - autodrop=0 helps to get similar functionality for error_route in
      1.5.x, where such cases could be recorded to xlog
    - reported by Sergey Okhapkin

commit 4e196f47767dc8da8da560f57afc92add541b672
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 29 11:52:59 2010 +0200

    dialog(k): reset the pointer value after free
    
    - otherwise may result in double free, reported by Alex Balashov

commit cfc11b8892742697c9184e942ba2113f419428dd
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Oct 28 13:37:00 2010 +0300

    modules/carrierroute Improved documentation of carrierroute reply_code field
    
    The documentation didn't make it clear that regex are _not_ supported.
    Thanks go to Iaki Baz Castillo for reporting.

commit b5cc26d622f1711f6c26f50d6562c7f93d7e1ea7
Merge: e82be56 678625a
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Oct 27 13:03:59 2010 +0200

    Merge remote branch 'origin/tirpi/cfg_framework_multivalue'
    
    * origin/tirpi/cfg_framework_multivalue: (33 commits)
      cfg framework: fix uninitialized group_inst pointers
      xmlrpc: scan resets the error code
      cfg_rpc: group can be specified for cfg.list
      cfg_rpc: cfg.set and cfg.set_delayed commands added
      ctl: rpc->scan does not immediately send out errors
      cfg_rpc: documentation update - group instances
      cfg framework: multiple group instances is documented
      cfg framework: timer must reset the handles more frequently
      cfg framework: cfg_select() and cfg_reset() added
      cfg framework: group handle can be moved runtime
      cfg framework: group instance support in the script
      cfg framework: apply the values in the order they are set
      cfg framework: translate_pointer bugfix
      cfg framework: apply additional var list bugfix
      cfg framework: apply the additional variable list
      cfg framework: group instance support before forking
      cfg framework: CFG_GROUP_UNKNOWN group type
      cfg framework: cfg_commit() log message fixes
      cfg_db: updated to the cfg framework changes
      cfg_db: updated to the cfg framework changes
      ...

commit e82be561d2e7f98cb2cbd7e574873134f70b2f8a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 26 21:15:11 2010 +0200

    db_text(k): fixed db_url driver name
    
    - it has to be 'text' instead of 'dbtext'
    - db_text should work as well, according to db driver names and module
      names
    - reported by Jeremya

commit 8a2334dd758a1e9d43d1fac544f6e962960b4dcc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 26 10:25:03 2010 +0200

    sanity: update docs related to return code
    
    - sanity_check() returns false if a test fails
    - reported by Sergey Okhapkin

commit bacb5704a05dafb345221095ff194a9181394b98
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 24 23:03:59 2010 +0200

    auth_db(k): note about empty realm parameter
    
    - empty realm is no longer allowed, use $td of $fd if you have
      multi-domain

commit 7a5f0fa88564b8ccc3d710773ff5ac8a3f49cdd4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 24 23:03:45 2010 +0200

    auth: fixe typo in docs

commit 8431de384b9fb6122203ed7388a26990cd4b025c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 24 20:48:56 2010 +0200

    htable: updated example with www auth
    
    - some more details about hash tables

commit 6760745b4187c7b5af2752a82754aa0e511a38c9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Oct 24 20:33:01 2010 +0200

    auth_db(k): updated return codes meaning
    
    - authentication functions use now auth module that was inherited from
      ser for better nonce protection and performances, therefore the return
      codes have different meanings

commit 678625a48b213e5b2899ac418c6a4b3fde25750c
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri Oct 22 14:35:33 2010 +0200

    cfg framework: fix uninitialized group_inst pointers

commit 344fc0c769ce1c90da80cc511df6b0555c554782
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Thu Oct 21 10:18:39 2010 +0200

    pkg debian: Provide generic ChangeLog file
      Instead of providing  debian/changelog, the system will install the generic and much more informative ./ChangeLog in /usr/share/doc/kamailio/changelog.gz.
      debian/changelog will be installed as /usr/share/doc/kamailio/changelog.Debian.gz

commit 7faa58b0264cb77c991a21bd3b7e3d660596ad85
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 20 18:38:11 2010 +0200

    tm: fix possible uninit. use of cancel_reason
    
    In some cases  an uninitialized cancel_reason structure was used
    (e.g. fake_reply() and relay_reply() failing).
    
    Reported-by: Alex Balashov  abalashov evaristesys com

commit d85ff11cf0db4aad859f6dcfd18dfb2011e3d78a
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Oct 20 15:32:18 2010 +0200

    cfg framework: segfault during exit is fixed
    
    Verify that *cfg_global is not NULL when destroying the
    configuration.
    
    t_set_fr("@cfg_get.local.invite_timeout", "@cfg_get.local.gw_timeout");
    caused a segfault during startup when the variable was not defined.
    
    Reported by Juha Heinanen

commit 97d4e101219dbb035f2a734a2a1ddea119782f55
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 20 12:54:40 2010 +0200

    tm: fixed typo in docs
    
    - some ingeter parameters related to control of reason header for local
      cancel were provided as string values instead of integer
    - reported by Mikko Lehto

commit 6a88284a4b312baae97e431e27e4927d5023c16f
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Oct 20 09:30:46 2010 +0200

    pdbt: add another possible data source for german carrier directory

commit 741521e4dfc236934eb5f28454e49ab574f0a494
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Oct 18 17:53:06 2010 +0200

    avpops: doc fixes
    
    - remove obselete TM reference, rephrase text a bit
    - reported from Andrew Pogrebennyk, andrew dot pogrebennyk at portaone dot com

commit c437c250b34ad052ffd9fa289e1480bdc04f8585
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Oct 16 16:42:44 2010 +0300

    modules/utils: added is_int() function
    - added is_int() function that checks if its pvar argument contains
      integer value.  better place would be core, but that is out of my
      reach.

commit ad7f00d840082989132f335914aa0db223a0e46e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 15 11:51:37 2010 +0200

    auth: doc - auth_checks_* warning and better example
    
    - warn about using from_tag check for REGISTERs and out-of-dialog
      messages
    - better auth_checks_* examples (taken from sip-router-oob.cfg)
    - xml fixes

commit d34a464ba0c17f2189a20a72e95b314339ea6937
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 15 11:47:51 2010 +0200

    auth: minor log messages, comments and sanity fixes
    
    - use sizeof(nc_t) when initializing a nonce count tracking entry
     (do not assume nc_t is char). This does not affect existing code.
    - removed a debugging ERR message
    - various minor comment fixes

commit a423e3141332f40fec07da1efe9f5e227fff0061
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 15 11:19:18 2010 +0200

    core: apply all subst pre-processor directives
    
    - previously first applied subst stopped the processes
    - reported by Alex Balashov

commit 7aea949e1d1101b87d4327a86f026e119cd0ae8b
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 15 10:09:03 2010 +0200

    auth: fix pool no. when both nc and otn are enabled
    
    When both nonce_count and one_time_nonce are enabled in the same
    time, the pool number was corrupted leading to crashes.
    
    Reported-by: Alex Balashov  abalashov evaristesys com

commit 7232495e968300306a3dd2ae786f67b510c6d623
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Thu Oct 14 21:56:36 2010 +0200

    pkg: Move ser related packaging files to pkg/ser

commit b9a1a4fbf7eba29599cf53454988f1b80e25a427
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Oct 14 17:15:06 2010 +0300

    modules/lcr: replaced lcr_upgrade_from_3.0.sh with lcr_upgrade_from_3.1.sh

commit 34db55ba00bfda8d9876dc640f609dfbc0774d6a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Oct 14 16:42:59 2010 +0300

    modules/lcr: [from|to][any]_gw functions now check also transport protocol

commit d128ac966beeb2ddfd3332a20fdd93ae292d81b1
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Oct 14 11:53:11 2010 +0300

    modules_k/userblacklist: Fixed alphanum checking if number had trailing non-digit char

commit eec8da1dd1e68da07f2b313c371be702997853b9
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Oct 14 11:13:03 2010 +0300

    test/unit/25.cfg: Forgot to set match mode in test
    
    Match mode is set to alphanumerical now.

commit f7630be368c10bb1901acd6968211ee4ec41c922
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 13 13:04:14 2010 +0200

    siptrace: don't attempt to get reply reason for ack
    
    - for sl filtered ack, execution of sl callback attempted to set the len
      of reply reason, which does not exist in this case
    - reported by MSZROS Mihly

commit 62d7bf1af574e1bea650a96ec6a2b2a5fc67d883
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 13 08:13:51 2010 +0200

    auth: restore deleted nid_pool_no parameter
    
    In commit c53bc97968e4ac2ddf5b8a23af44942e8d50e7b3 the nid_pool_no
    parameter was removed by mistake.
    
    Reported-by: Alex Balashov  abalashov evaristesys com

commit 8864b0586d34c82f015efdc5e3d0b05adc87c338
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 13 08:06:10 2010 +0200

    debian: fix radius build depends

commit 50eb81b1287292238aa4b194cfcdba2afa8b4f89
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Oct 12 19:31:07 2010 +0200

    registrar(s): doc - fix reply_reason_attr name
    
    The docs used reply_code_reason_attr instead of reply_reason_attr.

commit fb021d55b09bfbb5503d5879a902f968f1bcabfd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 6 19:06:42 2010 +0200

    registrar(s): support for disabled code, reason and contact AVPs
    
    reply_code_attr, reply_reason_attr and contact_attr modparams can
    now be set to "" to disable setting the corresponding AVPs when
    a save*_noreply() is used (speed-up if not needed).

commit 5f94dececcbf709f92b9a4b022731d4ee17e7e42
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 6 18:53:14 2010 +0200

    registrar(s): support for disabled aor_attr and server_id_attr
    
    If aor_attr or server_id_attr are empty ("") don't try to use
    them.

commit 77d7e32549b46bb3a3c7d796e46cf08c0359b730
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 12 22:50:28 2010 +0200

    INSTALL: updates to reflect flavour switching

commit a2dfe0b9ed4c53cd35f62532ed451f1d347e3361
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 12 19:16:08 2010 +0200

    pv: new PV $timef(format)
    
    - print strftime() formatted time
    - e.g.,: $timef(%Y%m%d%H%M) => 201010121920
    - max internal buf for printed value is 64
    - it uses a static buffer, so clone the value if you use the PV many
      times with different formats

commit 65b0d767a13bfbba22a539a086aca8899cf57bdf
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Tue Oct 12 12:59:13 2010 -0400

    modules_k/rr: record_route_preset enahancement
    
     - record_route_preset takes a second parameter allowing
       the setting of a second Record-Route header
     - new rr param 'enable_socket_mismatch_warning': enables or
       disables a warning log
    
     - closes FS#91 - record_route_preset enhancement

commit c9bc65cc5c008a882d28cb034f6c84ce7fa8aeb5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 12 14:59:23 2010 +0200

    acc(k): update of documentation

commit e8f6a95d43b6a4340cf7e97213af5c71fa2a69e9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 12 14:52:07 2010 +0200

    acc(k): table name for db acc can be dynamic
    
    - you can include variables in table name and will be evaluated at
      runtime:
        modparam("acc", "db_table_acc", "acc_$time(year)_$time(mon)")
      will write now to table acc_2010_10
    - same can be done for missed_calls table name
    - second parameter of acc_db_request() supports as well config variables

commit d2f288a1b6a48c10f545e22eaca3cf149724e61b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 12 13:16:17 2010 +0200

    Makefile.defs: version set to 3.2.0-dev1

commit 94b1e890f5bca252130369fadec6a7b86aa3e173
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Oct 12 11:41:32 2010 +0300

    modules/lcr: forgot to increase lcr_gw table version

commit 8c0501bfaa27acab9721953e8c1551687c96edf2
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Oct 11 21:16:28 2010 +0300

    modules/lcr: changes and new features
    - New module parameter tag_avp.
    - Renamed lcr_gw table's tag field to prefix field.
    - Renamed dont_strip_or_tag_flag module parameter to
      dont_strip_or_prefix_flag.
    - Added optional tag_avp module parameter and made lcr_flags module
      parameter optional.
    - Added tag field to lcr_gw table whose value is assigned to possible
      tag_avp by next_gw() and from_gw() functions.
    - Increased lc_gw tables version number to 2.
    - load_gws() can take uri_user param, value of which is used instead of
      Request URI user part by load_gws() function.
    - Parameters of load_gw() function must be given without quotes.

===================== 2010-10-06 Version 3.1.0 Released =====================

