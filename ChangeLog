# $Id$

===================== 2010-10-20 Kamailio v3.0.4 released =====================

===================== Changes since release 3.0.3 =============================

commit bee1ef7e0b2a8a49e70f553843feb4fb271f3aea
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 20 17:13:26 2010 +0200

    Makefile: version set 3.0.4

commit 145ea7cf9f28520ada30ede689e1e5ab6d0d19ab
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Mon Oct 11 19:06:58 2010 +0200

    pkg debian
      move debian folders to pkg/kamailio/deb
      lenny and lucid are no longer symlinks

commit 47a024dacab408655a8db55aa92f9e1dfec143c9
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Sep 30 10:42:57 2010 +0200

    tm: t_save_lumps() verifies the route type
    
    Even though the t_save_lumps() function is registered only for
    request route, in some corner case, the function might be called
    from failure_route. (For example a failure route executes a request
    route block which calls this function.)
    This scenario resulted in overwriting the already cloned lump list
    which is not allowed because of the lockless read, and also
    resulted in a memory leak.
    An extra check is also added to save_msg_lumps() to catch this bug.
    (cherry picked from commit a7bbaf7cd83b5d044ff8c7fff7b19c7ff392da74)

commit 253ad295e457a85ed0c629d568bff9334115dccc
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 29 17:35:25 2010 +0200

    core: return & break are absorbed in expressions
    
    return & break inside an expression do not cause the current route
    block or while/switch statement to end.
    E.g.: $v = { return 1; }  will not end the current route, will
    only set $v to 1.
    (cherry picked from commit 65b64bca77b18f7ee964119e1b3b363d66189c3e)

commit 8eb41afc974a4bd0a1a6346240ace0ff72f89279
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 29 16:30:40 2010 +0200

    core: fix end-script commands in expr. leaks
    
    When having commands that end the script immediately in
    assignments (e.g. $foo = { drop; }) or in expressions
    (e.g. if ($v + { drop; } > 0)), the script was terminated
    immediately via longjmp. However this might leave some un-freed
    variables.
    This fix introduces a safe version of run_actions()
    (run_actions_safe()) that will not use longjmp() to immediately
    end the whole script on drop, returning instead to its caller.
    (cherry picked from commit 28a882873f8a69a189d790e33bcd2017c253a66a)

commit 61271a1ccf92eb26eb4916d05c43742f03ebe241
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 28 18:09:17 2010 +0200

    core: switch(string) break/return fix
    
    Commit 6ab93de3 (switch(string) memleak fix) broke break & return
    from switch case statements.
    
    Reported-by: Juha Heinanen  jh tutpro com
    (cherry picked from commit c9586e183f5fbde854ec8f27c38f58a7853e971a)

commit 335743621f54220e58c2f3da2712dcae837b31a0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Sep 26 21:28:47 2010 +0200

    core: switch(string) memleak fix
    
    When a switch(string) is used and one of the case blocks exits the
    script (by drop, exit or a module function that causes the script
    to end), the dynamic string rvals were not cleaned up.
    This happened because run_actions() uses longjmp() to quickly end
    the script (skipping this way over the cleanups done after the
    run_actions() call).
    
    Reported-by: Daniel-Constantin Mierla <miconda@gmail.com>
    Reported-by: César Pinto Magán  Cesar.Pinto a-e es
    (cherry picked from commit 6ab93de37f2f1991d3406f52ac9502a7c795ef55)

commit 65be1c576e31cfeb9f1a1ec0c095ddfcad303e7f
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Apr 19 18:28:07 2010 +0300

    modules/tm: fixed t_unref bug catcher
    
    - On behalf Andrei, added one more condition to t_unref bug catcher in
      order to avoid invalid BUG message.
    (cherry picked from commit 2812bd9c426d7a186bdc9b1d5fc4766315a64290)

commit 2ccea0649cf7a5be5a70d3ae0a307dfdac114e01
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 21 14:01:07 2010 +0200

    iptrtpproxy: makefile LIBS update
    
    Look for libipt_RTPPROXY first under /lib/xtables (default install
    dir) and if not found in $(iptdir)/extensions (compile dir).
    (cherry picked from commit 6b9f6a324851b87d37eaa1f576f3e88d5863ee2a)

commit e3cf8b719eb5d518ef540330254b9d4d542a05c5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 21 14:02:31 2010 +0200

    iptrtpproxy: s/cfg_parse/sr_cfg_parse/
    
    cfg_parse name changed into sr_cfg_parse (since commit 50ca02e5).
    (cherry picked from commit b5c339deff8c1b5b325cac96071902ebde341082)

commit 363b9c7e13fc23fbdd10ac32758605f4907c5dde
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 21 14:13:17 2010 +0200

    iptrtpproxy: minor doc updates
    
    - minor fixes + note about setting iptdir in Makefile
    - README regenerated
    (cherry picked from commit b0f583306656a2d4d5be1e9fd5e0189675dfd676)

commit 32361f710b1d66723a22c10bee0bb6088867c681
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 7 16:57:33 2010 +0200

    tls: fix wrong string variable length overwrite
    
    Some per-domain config string variables (cert_file, ca_file,
    pkey_file & cipher_list) had their length truncated to that of the
    corresponding variable in the parent domain.
    Mostly invisible since the string length was in general ignored
    (asciiz strings).
    (cherry picked from commit e63610186803cfcc0ff14d8871df8ae70df83103)

commit 8b4802a29d5373bcd2f9e999d1dce7267e6c790c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Aug 24 11:43:36 2010 +0200

    core: fix mod_register & dlflags
    
    dlflags changes in mod_register() functions were discarded
    resulting in modules failing to load.
    (cherry picked from commit 931bd29d504f01eeab738ee5dad72fe7be858adb)

commit b532368d655fb7b08c44120c85eb09ff545bab44
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Oct 10 01:32:45 2010 +0200

    pkg debian
    
      * Use libreadline-dev generic instead of libreadline5-dev as dependency

commit 80928443fcd9548bd2e4599e76f1c96498aed4a7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Oct 9 10:56:38 2010 +0200

    permissions(k): fixed misleading out of shm
    
    - out of shm memory was printed even when db load failed
    - some identations to reveal the inner blocks

commit a22dc9b151d44dede21e3f500455eab568d14f28
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Sep 30 01:28:00 2010 +0200

    mem: fix f_malloc big fragments search
    
    In some situation (depending on previous allocation and frees)
    trying to allocate a "big" fragment (>16k) would fail even if
    enough memory was available (the fragment search algorithm missed
    fallback to bigger buckets when using the free bitmap).
    (cherry picked from commit 1ccbd33558e7e09f36f39fd984ac99a7bfd3eba2)

commit 61f4d7f12723c4a3d989d37a414433e5ed71abff
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Sep 22 18:35:37 2010 +0300

    modules_k/regex Fixed a memory leak when using pcre regex
    
    The compiled regular expression when using pcre_match was not freed.

commit 40902d1e04afe5472ed2be14fa649694bef54142
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Sep 18 11:24:20 2010 +0200

    usrloc(k): updated index of domain column
    
    - index is 14
    - harmless case since domain value is tested against null as well
    (cherry picked from commit 390eefb442f0b3b41cf5a708270ecd98765b4a66)

commit 4971831866dba88377ebe14f7032a2966acc822b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Sep 18 11:58:21 2010 +0200

    db_postgres: reset row_buf for each row
    
    - DB1 interface was reusing local buffer to convert returned rows,
      resulting in misusage of values from previous rows for null values
    - reported by Jan Klepal
    (cherry picked from commit 63c724b42d4c4ff45eaa660508d6358f3e894d0a)

commit 191502e739dcd888177fd4653b50c76ea89603c6
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sat Sep 4 17:49:18 2010 +0200

    * debian-lenny symlink added for debian builds

commit fc67150b32deac0da3246763f4c9e32747f546d8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 3 10:14:26 2010 +0200

    core: socket_str enclose IPv6 addresses in betwen [ ]
    
    - string representation of socket string takes in consideration IPv6
      addresses
    (cherry picked from commit 426c6b7e2103d38aca47ca9728d22355bd44b7e9)
    
    Conflicts:
    
    	pkg/kamailio/debian-lenny

commit 1f11c47523449aa87c54cefc8db1489bed020bcb
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Aug 26 19:54:49 2010 +0300

    modules_k/nathelper: better add_contact_alias/handle_ruri_alias fix
    - In add_contact_alias/handle_ruri_alias functions, use ~ char both
      as port and transport protocol separator in
    (cherry picked from commit 9d80a7e32f1db5e1f166175e55e7868ee75879e7)

commit 6b7c7b41c9b02c26748fb80da434b2616268c59d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Aug 26 14:39:08 2010 +0300

    Revert "lcr: fix load_gws() 2nd param"
    
    This reverts commit 5da493e4457dd97a0d9f3e453303c0aa98cdb30c.

commit ca75bb5d4a327a0da4b720956dec3438513f2303
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Aug 25 22:52:42 2010 +0300

    modules_k/nathelper: replaced offending contact alias character
    - Changed character ':' in contact alias paramater value to '~',
      because ':' is not allowed in value field of generic contact
      parameter.
    - I first tried to cherry pick the commit for master, but it resulted
      in conflicts. So i went and edited k branch manually.

commit 5da493e4457dd97a0d9f3e453303c0aa98cdb30c
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Aug 25 22:42:33 2010 +0300

    lcr: fix load_gws() 2nd param
    
    load_gws() 2nd optional parameter was treated like a fparam
    instead of a pv_spec_t (the fixup_igp_pvar function converts the
    first parameter to a fparam and the second one to a pv_spec).
    (cherry picked from commit ef56e6bc119e982dc305bfa4b7508ca9226a1287)
    
    Conflicts:
    
    	modules/lcr/lcr_mod.c

commit 5e6a0aa429a9e12a7dd07eee042c518bd6ddaecb
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Aug 25 14:08:35 2010 +0300

    Modules_k:pv  No warning message for branch(count) if no branches
    
    Patch by Carsten Gross (carsten.gross at 1und1 dot de)
    (cherry picked from commit 54f04ae93503f1d24763b6b6cb0ceec3045b26d9)

commit 82fe7671c9c65cde0bd53bab615fa37b627fe3c2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Aug 20 12:22:56 2010 +0200

    tls: fix state change while waiting for lock return
    
    tls_h_fix_read_conn() did not return the right thing if the state
    changed while waiting for the lock (the fall-through return was
    error instead of success).
    
    Reported-by: Couprie Geoffroy  geoffroy couprie atosorigin com
    (cherry picked from commit 513c21f67f88484dd12dd6adce6d6ddc7fb60c31)

commit 938b4fac168309d4b5e774b4e3a1bc6bf1f7ae53
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Fri Aug 20 14:05:12 2010 +0200

    PKG: Debian changelog updates

===================== 2010-08-19 Kamailio v3.0.3 released =====================

===================== Changes since release 3.0.2 =============================

commit 999cc449e3b6a86e09ebfa37453b9c1f8e5be22c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 19 16:55:49 2010 +0200

    version set to 3.0.3

commit d2b602ebdc58310f69ef3e4ea932482fad874d08
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Aug 18 15:32:36 2010 +0200

    dns cache: fix manually inserted SRV record order
    
    The manually inserted SRV records thought the RPC interface
    were not ordered by their priority and weight which resulted in
    wrong SRV look-ups, i.e. not the highest priority record
    was chosen first.
    (cherry picked from commit 78beed37b8975e11851553c41c17578481772dad)

commit a1264e11d3fa77f841ff541ac7fb73956316183e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Aug 18 18:36:14 2010 +0200

    tcp: fix double increment for the established stats
    
    The counter/stats for established TCP connections were incremented
    twice in the case of accept()-ed connections: once immediately
    after the accept() and another time after the first packet
    received or sent on the connection.
    Now they are incremented only after the first successful send or
    receive.
    (cherry picked from commit 66cda7bc5f642ce892124cfb35f1e5effd78e9d6)

commit 711e02646dacba1dba16edd6eab1a573a46114e1
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Aug 18 18:39:43 2010 +0200

    tm: don't reply if the reply dest. is not yet set
    
    - relay_reply() doesn't attempt to send the reply if the reply
     destination is not yet fully set. This can happen for example
     if reply_to_via is set, Via contains a host name (and not an ip)
     and before having a chance to resolve the name a reply must be
     sent (reply for a message that hasn't been sent yet: very
     unlikely, but possible).
    
    - use a membar_write() in init_rb(), before setting the reply send
      socket (the reply send socket is also used as a flag for a fully
      initialized reply destination and the membar_write() makes sure
      that everything else was written before the send socket and no
      re-ordering will take place).
    (cherry picked from commit 96e1bc629bc7ed78dd64b221bc54b266cd45e3ca)

commit 29c162adab9a978ce189dd4c71a925490e68f960
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Aug 11 19:49:09 2010 +0200

    kamctl: fix make use and make install
    
    - use $(MAKE) instead of directly using make.
    - added targets for the install dirs (create bin_dir, cfg_dir and
      man_dirs if missing). This fixes make -C utils/kamctl install
      (allows installing only kamctl).
    (cherry picked from commit 91ce090529ac1a1c6285f387e57013cad5598def)

commit cc3351c1b9ee0df6aa43c6382cf577c382687043
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Aug 11 19:31:14 2010 +0200

    presence_dialoginfo(k): fix bsd compilation
    
    On FreeBSD don't define _XOPEN_SOURCE (define it only on linux).
    It's not needed for strptime() and worse will cause some other
    defines to be missing, like INADDR_LOOPBACK ( if_XOPEN_SOURCE
     is defined, __BSD_VISIBLE will be undefined => lots of missing
     defines).
    
    Reported-by: Reported-by: Olle E. Johansson  oej edvina net
    (cherry picked from commit 850a7b31de86056fc9223d809dfae54b0e490c5f)

commit 9d7d827f7a1d61deb6d79d421c89fd6727cc0a02
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Aug 11 18:56:57 2010 +0200

    xmlrpc: fix includes and libs
    
    Reported-by: Olle E. Johansson  oej edvina net
    (cherry picked from commit ecc9fcf9fe61cb355864bf8142e65b8dd9d8658b)

commit 3ed79ac954831d8639a80388cf02116f0d93386b
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Aug 11 18:51:09 2010 +0200

    sercmd: fix LIBS - don't link -lresolv if not needed
    
    - link with libresolv only on linux, solaris and darwin
    - on solaris link also witl -lxnet and -lnsl
    
    (bugs introduced in b0f00c3348b9)
    (cherry picked from commit e5978c182e4bd5d5c1d723d00e9f54ea958816c8)

commit f92afdbac5429538d11466123bd723044636e87f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Aug 13 22:25:34 2010 +0200

    core: fix unclosed comment
    (cherry picked from commit b4f7c405a7c15a950ce50561a5a61fb36d59bc28)

commit 5ccc5b3c51f7619b679dde4079b0b35e5f2bfeae
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Aug 13 11:45:39 2010 +0200

    core: DragonFly kqueue support enabled
    
    - fixed kqueue support check for DragonFly (seems to be always
    supported since it was forked from FreeBSD 4.8).
    - in dragonfly case define both __OS_freebsd and __OS_dragonfly so
      that we can make some exceptions for dragonfly (e.g. no >= 4.1
      version check at runtime before enabling kqueue).
    - assume SCTP in 2.6 is at least on par with SCTP in FreeBSD 7.1.
    (cherry picked from commit c07c2b5e599a2b97fc21d04731f1f9d409859d43)

commit e6a3241fc7ca837e615476579f1b4bbf2c09a78a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Aug 11 17:04:14 2010 +0200

    NEWS: notes about Dragonfly BSD support
    
    (cherry picked from commit f6b240d51684040572c75555b1f767df0100d970)

commit aabb5829213fba878df2c3836bd26a09d2a78197
Author: Vincent Stemen <vince.lists@ngtek.org>
Date:   Wed Aug 11 16:58:04 2010 +0200

    makefile: Dragonfly BSD support
    
    This also simplifies the platform directory path settings so that
    the ifeq() statements are not nested 5 levels deep.
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>
    (cherry picked from commit 7d27010d3aa8ead2d9fec4155c5146d4329b7c35)

commit 09f89961914b6461a626e9eed970bdafca9102a8
Author: Vincent Stemen <vince.lists@ngtek.org>
Date:   Wed Aug 11 16:49:40 2010 +0200

    sercmd: Patch to add Dragonfly BSD support (makefile)
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>
    (cherry picked from commit c39dd933973ba24b449c2b35756c593c093d5f4f)

commit 8bc0c9ba5dc1fd9d863cd58c54ce469a6186d81f
Author: Vincent Stemen <vince.lists@ngtek.org>
Date:   Wed Aug 11 16:45:05 2010 +0200

    db_text(k) makefile: fix make use
    
    This fixes a bug.  It called make directly which breaks on
    platforms where it is being compiled under gmake.
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>
    (cherry picked from commit 5d8552087be74332c1a7812ffb01d8298060cc62)

commit c4da41b1fce9819df15e5c5f9dafa145392af8b6
Author: Vincent Stemen <vince.lists@ngtek.org>
Date:   Wed Aug 11 16:40:41 2010 +0200

    makefile: fix $DESTDIR
    
    This fixes Makefile.defs to properly handle $DESTDIR as a base
    installation directory for packaging, etc (equivalent to BASEDIR).
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>
    (cherry picked from commit bef528185d7b2e6bfa4ae5ec4bfd4808e1dcf28f)

commit 089c773b62311b93154518bbfd8d94cf4150c092
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Aug 8 18:09:17 2010 +0200

    sercmd: fix cfg. var name completion
    
    In some rare cases cfg. variable name completion did not work properly
    (e.g. reusing a command from history, editing it, changing the
     group and attempting command completion again).
    This was due to an assumption that the state would be re-initialized
    on new commands (which is mostly not true).
    (cherry picked from commit 261d8282e6dabf73a65904e7a8413ccec9faf2fd)

commit 1ee403b74de46a14a0c9a8c2e507160c182230b1
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 18 22:22:59 2010 +0200

    core: fix selects in optimized rvalue expressions
    
    - do not attempt to resolve_select() twice the same select. This
      happened when a rve containing only a select was optimized,
      the select moved out of the rve and fix_expr() tried to "fix"
      the already resolved select later.
    - changed BUG() messages for failed resolve_select() into ERR().
    (cherry picked from commit a7fa13ed757d74cfd4486f3c282ec50259929edc)

commit 4ca0f2295fcb2b93a853edad472c5578b335e72a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Jun 20 19:40:55 2010 +0200

    tcp: force eof after read if write side hangup
    
    Even if POLLRDHUP is not supported, but we detected a write side close
    (POLLHUP) or an error (POLLERR) or such an event was previously detected by
    tcp_main (F_CONN_EOF_SEEN), force connection closing after reading all the data
    in the socket buffer. In this case we can close() after the first short read
    and we save an extra system call (a read() that returns 0).
    
    (cherry picked from commit 28e313250503d6f8d06ebab15c8421c40e7f0fe4)

commit 5b30df2dc48ce9bb31b88b523fc54ad8292e3251
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jun 19 00:21:58 2010 +0200

    tcp: more consistent IO_FD_CLOSING usage
    
    - extra safety checks before using IO_FD_CLOSING in io_watch_del()
      calls (must be used only when the fd will be close() imediately
      afterwards).
    - add IO_FD_CLOSING when POLLERR or POLLHUP is detected in
      tcp_main and the socket receive buffer is empty (in this case
      the fd will be shortly closed)
    
    (cherry picked from commit 504ef98ed34366303476032013c28a4a7d1c8131)

commit a160156bdca1708bcbca7e000c2da91c13f67336
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 7 11:59:30 2010 +0200

    tcp: fix dispatching closed connections to tcp readers
    
    Under very heavy load it is possible that send2child() might try
    to send an already closed connection/fd to a tcp reader.
    This can happen only if the tcp connection is watched for read
    (POLLIN) by tcp_main (and not by a tcp reader), the connection
    becomes available for reading (either new data received, EOF or
    RST) and tcp_main chooses a specific tcp reader to send the
    connection to while in the same time the same tcp reader tries to
    send on the same connection, fails for some reason (no more space
    for buffering, EOF, RST a.s.o) and sends a close command back to
    tcp_main. Because send2child() executes first any pending commands
    from the choosen tcp_reader, this might lead to closing the fd
    before attempting to send it to the tcp_reader.
    Under normal circumstances the impact is only an extra syscall and
    some log messages, however it is possible (but highly unlikely)
    that after sending the close command the tcp_reader opens a new
    connection for sending and sends its fd back to tcp_main. This new
    fd might get the same number as the freshly closed fd and
    send2child might send the wrong (fd, tcp connection) pair.
    
    (cherry picked from commit d89437a3d7bc25a9c098a04c6ee69fc3848ff0b5)

commit 66619631879132e3d93fd858fa81c79ac9788617
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 16 21:03:06 2010 +0200

    tcp: fix fd passing bug
    
    If connections are opened and closed very quickly when data is
    sent on them, it is possible that a connection gets closed
    (close() inside tcp_main) while a process waits for its fd, just
    before tcp_main attempts to send the fd.  In this case the fd
    sending will fail (one cannot send a closed fd) and the process
    that asked for it will remain waiting forever.
    The fix always checks before attempting to send the fd if the fd is
    still open and the connection is not in a "bad" state. If not,
     a new error response is sent (no fd and connection == NULL).
    
    (backported from 9da6fae72b9883ab8dbbb4e681c4d4e96d6549e4)

commit aed168981e6dae1333afcdaff5976b44c4fac738
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 8 15:18:52 2010 +0200

    io_wait: kqueue: use the entire array during too many errors fallback
    
    Minor fix/optimization: if there are too many errors in the
    changelist and the kevent() call has to be retried, use the entire
    array (don't rely on the current watched fd number which will be
    smaller then the array real size, since commit 996826).
    
    (only kqueue using systems are affected by this fix: *bsd and
     darwin)
     (cherry picked from commit a9cdfc2938ca73d6ba40f5896c6a8930c2e73f85)

commit 8387cdd610ad15952e7f0e7d7f9bcbfb4a5b9cfe
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jun 19 00:16:38 2010 +0200

    io_wait: kqueue: use a bigger array
    
    Use a bigger array for kevent(). Instead of the fd number, use
    2* max_fd_no (2 because read and write events are not merged) and
    with extra space for possible changelist errors.
    (minor optimization)
    (cherry picked from commit a9cdfc2938ca73d6ba40f5896c6a8930c2e73f85)

commit a95f607d8118e668dccfc0cf85520addf3326cfe
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jun 19 00:44:24 2010 +0200

    io_wait: kqueue: handle ENOENT and more robust error handling
    
    - handle also ENOENT (along EBADF) when kevent fails due to errors
      in the changelist. ENOENT can be returned in the following valid
      scenario: fd scheduled for delayed removal from the watched fd
      list, fd closed (which automatically removes the fd from the
      kqueue watched list), new opened fd which gets the same number,
      delayed changes applied (kevent()).
    - treat all the other kevent errors or EV_ERRORs in a similar way
      but log them (at BUG() level).
    - return POLLERR|POLLHUP for EV_EOF with a non-null fflags.
    
    (only kqueue, meaning *bsd and darwin are affected by this fix)
    (cherry picked from commit 8966d0a1787152fa64d1f78321ee539116bd448a)

commit 8e6609c4416dd4f1196daa793b75c305ca22155e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jun 19 00:35:47 2010 +0200

    io_wait: fix kqueue io_wait_add & POLLIN
    
    A "goto error" was placed outside the error handling "if",
    resulting in any io_watch_add(), that tried to enable write
    watching on a new FD, returning failure (fortunately this kind
    of io_watch_add() usage doesn't happen very often, usually write
    watch is enabled via io_watch_chg() on FDs already
    io_watch_add()'ed for reading).
    
    Only POLL_KQUEUE was affected by this bug, meaning the default on
    all *bsd and darwin.
    
    (cherry picked from commit e5be1a067158c8ba49d33082eb403937546e7c69)

commit bf75177d709d97d70db9ca21d4f9526bd50fbcf5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 18 09:48:21 2010 +0200

    io_wait: don't update FD watched status on error
    
    If the syscall to change the events or delete a watched FD fails,
    don't update/delete the FD status in fd_hash.
    For /dev/poll if a change fails when re-adding the FD, delete it
    from the hash (in the /dev/poll case to change the events a FD is
    watched for one has to remove it and re-add it with the new
    events).
    The syscalls should never fail in an un-handled way, but in the
    unlikely event that it happens this change will make the code more
    robust.
    
    (cherry picked from commit 2d8cd170ab867ab15296b30f0b784abe1adc1bca)

commit d3a1deaefdd0f23388fece48530a0ae1f39ad93a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jun 17 18:43:14 2010 +0200

    io_wait: fix kqueue and too many errors in changelist
    
    kevent() tries to return errors in the changelist back in the
    supplied eventlist array. However if this is not large enough, the
    whole kevent() syscall will fail.
    Now if kevent() fails with EBADF the call will be retried with a
    smaller set of changes, until the entire original changelist is
    applied.
    Fixes also kq_ev_change() flush mode: on error it will try to
    apply the changes one-by-one.
    
    (this affects only systems that have kqueue: *bsd and darwin)
    (cherry picked from commit b0bd3201826ee693d6f96c6e336477b9d9db7c32)

commit 37314964b0b8be0c560705a5a1d8cfc3db9242fd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jun 17 16:15:10 2010 +0200

    io_wait: fix: check for EV_ERROR for kqueue()
    
    Re-enabled and enhanced the check for EV_ERROR when using kqueue
    (*bsd).  This is needed to workaround errors reported by kqueue
    when trying to delete (EV_DELETE) an already closed FD (this
    can happen in the tcp code, where we try to avoid applying
    immediately changes in the set of watched FDs and instead
    collect them and apply them after all the current kqueue
    events are processed => in some corner case situations it's
    possible to try to delete the FD from kqueue after the fd
    was close()'ed).
    This fix will ignore EV_ERROR with data == EBADF. All the other
    errors will result in a POLLERR flag for the callback.
    
    It fixes crashes with *bsd under tcp stress tests (lots of very
    short lived connections).
    (cherry picked from commit 05c080a53f88babad6729f79015f555f53fdf957)

commit edde2d53d60f5174cc91a01daae92fdbb2b49d56
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Aug 18 13:45:37 2010 +0200

    pdbt: fix two bugs in debian packaging
    (cherry picked from commit cd71125fcdb434d50f6e7b5d208d260ebc49fca6)

commit d61051672432a9d323389dbf8051de83fa069189
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 12 17:14:38 2010 +0200

    presence(k): copy evs_subs_handl to presence event list
    
    - patch by Nikita Kozlov, closes FS#82
    (cherry picked from commit 9216a2ffa4c6ffd4bdd387530cad359f75acf0d7)

commit aa509c804d81f08a75a87c7083d76a3e321a042b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 30 23:29:43 2010 +0200

    presence_dialoginfo(k): don't exeed array size in error case
    
    - error handling could get to the size of array as index, resulting in
      out of bounds operation
    - patch by Marius-Ovidiu Bucur
    (cherry picked from commit 48f3159cdcc9ef06114a6d8f853687dc1338a8f0)

commit 1463ba2c10179608c72332c4fac96d0e3f4c14d1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 30 23:26:35 2010 +0200

    presence(k): set properly db updated flag
    
    - patch by Marius-Ovidiu Bucur
    (cherry picked from commit b31c53abf1c3bafafb59d3fa6456135f1da6e6c9)

commit 33dcaf08698eb1fd6ee2bedfb78380939013081a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 30 20:25:52 2010 +0200

    pua(k): use the outbound proxy on updates
    
    - patch by Alex Hermann, SF#3035780
    (cherry picked from commit f39cb1976978f0860d41a05ed181e45e14c88c58)

commit 2e9f1eee444bc4937a4de4be24343ac5cccb2c6e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 30 20:15:13 2010 +0200

    pv: fixed tobody.params transformation
    
    - len was wrong when having quoted parameters
    - patch by Alex Hermann, closes SF#3035382
    (cherry picked from commit 6cc5f8ec90db48483d644430bc2628356833fc1e)

commit 8839ee27a09ecbc37ca1a899655d76c6d4720e3a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 30 20:07:45 2010 +0200

    core: fix parsing quoted paramers in To header
    
    - fix off-by-one bug for quoted parameter values in parse_to
    - patch by Alex Hermann, SF#3035382
    (cherry picked from commit 8593bc83c748835c6132eaa678064a2466316ae7)

commit e9229ca19b4946cecda89cc3ada716ba8a506b3c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 30 19:40:50 2010 +0200

    registrar(k): reset local contact holder
    
    - when an UA fetches the bindings for a user and the user isn't
      registered, properly return an empty contact.
    - closes SF#3035778, patch by Alex Hermann
    (cherry picked from commit 776d941bef2e97089493a896bf0b57607078c52d)

commit 8672d515c263d73717503c1d4ce5499188205f16
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jul 24 08:44:56 2010 +0200

    sl(k): removed not needed var
    (cherry picked from commit 52e256540d8d2e6aa17256887fb9ff17580af3f8)

commit fa28c630360669af64bffb4ef3a8bcc12b050bbc
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Aug 5 18:17:01 2010 +0200

    modules_k/dialog: Remove trailing whitespace.
    (cherry picked from commit 3ed75d129730ffe30fb3c1d5f8fa7870c9b5516a)

commit 7dfea988c61544752b4c5fef642d9599c20f36c6
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Aug 5 18:12:17 2010 +0200

    modules_k/dialog: Provide new fix to prevent "unable to find
    dialog" WARN messages caused by accessing a dialog in the
    "deleted" state (often happens with simultaneous BYE requests when
    both UAs hang up at the same time).
    
    This commit uses a different approach where a "deleted" flag is
    set in get_dlg() and lookup_dlg() which callers may evaluate.
    Callers who only care about existing dialogs can ignore the flag
    by passing a NULL argument.
    
    The commit "replaces" 9b7f25d7 and follows up 0723496c.
    (cherry picked from commit d1693b2c64dfc44f0271bdd1c38315578ebe7135)

commit 2e570f72f82e9cf29a6e0a2b73e4019c8820847b
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Aug 5 17:23:34 2010 +0200

    modules_k/dialog: Revert "Prevent 'unable to find dialog' WARN
    messages caused by accessing a dialog in the "deleted" state".
    
    The approach chosen was incomplete as it requires extending checks
    of return values for all calls to get_dlg() and lookup_dlg()
    against POINTER_CLOSED_MARKER. Otherwise, it may lead to server
    crashes when code mistakes POINTER_CLOSED_MARKER for an existing
    dialog. However, having to check against two return values
    requires a lot of logic changes.
    
    Therefore, a better approach will be taken in a follow-up commit.
    
    This reverts commit 9b7f25d7196e41cbcc77c1d6e316cb1a8664ed81.
    (cherry picked from commit 0723496c037d8e22210861d6a0e9041351097f63)

commit b5ef768bcabf905d455ca26225c55f858cbe4c48
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Aug 5 11:31:02 2010 +0300

    modules:carrierroute Better handling of fclose

commit 821a4322a0902b827add7913705f72d5e50176b5
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Aug 5 11:02:14 2010 +0300

    modules/carrierroute: Prevent resource leak in case of error
    
    the 2 FILE* opened in file mode where not properly closed on all code paths

commit d82acc969092fa8f9ddcb88775c221aceaace4df
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Aug 2 17:26:20 2010 +0300

    modules/tm: Fixed memory leak related to several tm function exports
    
    Mk_proxy() call allocates a new proxy_t* structure. The free_proxy() call does
    not free this structure, it frees only the content. Another pkg_free is necessary
    in this case.
    (cherry picked from commit 2ae7c6779188e053aa6d1cbd891c428ccc2b63fa)

commit 0657d12cf2a1788c8d77d6495dd93e84d0f83c83
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Jul 29 19:09:51 2010 +0200

    modules_k/sst: Setting AVPs from integer values requires the
    PV_TYPE_INT flag to be set.
    (cherry picked from commit 61c4a93486fd3d215efb8d045c7415d752d3f057)

commit dadcfdb11c4c5bac986eb6fe553a615349aa72df
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 29 18:42:27 2010 +0200

    reg(k): only store path if indicated by the configuration
    (cherry picked from commit 1ede271e9b669b2f335858edb47dd260f0d28ad2)

commit 4215ccd295c1f04ce22ef043887f24f4bb686fe8
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jul 27 18:51:07 2010 +0200

    auth_db(k): proper initialization for the default column
    (cherry picked from commit 42a27402b74d44eebd702bcd5b5afa598205b520)

commit 62e4b3d0e1aef798189b50cc869e540b9deff50b
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Jul 27 14:37:06 2010 +0200

    modules_k/dialog: Prevent "unable to find dialog" WARN messages
    caused by accessing a dialog in the "deleted" state (often happens
    with simultaneous BYE requests when both UAs hang up at the same
    time).
    
    - Move POINTER_CLOSED_MARKER from dlg_cb.c into dlg_hash.h for
      common usage.
    - in lookup_dlg() and internal_get_dlg(), return
      POINTER_CLOSED_MARKER when dialog is found but in the
      DLG_STATE_DELETED state.
    - in dlg_onroute(), abort request processing if dialog is found to
      be in the "deleted" state.
    (cherry picked from commit 9b7f25d7196e41cbcc77c1d6e316cb1a8664ed81)

commit 40c00244f872e8af270cf26d4e3b9f48d3958ced
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Jul 27 14:06:11 2010 +0200

    modules_k/dialog: Move comment regarding dialog-destroying
    unreference operation to proper new location.
    (cherry picked from commit 191cc1d6437a252516d76c6249aa701a5b39b4e4)

commit c3964dbca625de202db16ae6a4f9ea91128ccb48
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Jul 26 19:02:04 2010 +0200

    Revert "db_postgres(old API) FS#77: fix BLOBs with postgres"
    
    This reverts commit a6141a32738b8610c70ba7e0a88c0d79561cb7a6.

commit 53c179bb3042bb767c43cd1a87a2cb8ab0ea92b7
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Jul 26 17:39:18 2010 +0300

    modules_k/presence and modules_k/rls Fixed parse_to() usage
    
    In case of error parse_to returns a pointer to the last parsed character. This is not a strict
    error check, as several other modules provide a relaxed way of parsing To header (the uri is still
    parseable even if the TO headers are not).

commit 06f269b9f12b1c0e3c945aa5fe8cd16b5d943a30
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jul 23 13:51:11 2010 +0200

    dialog(k): also update README after doc change
    (cherry picked from commit 3fe08c96578a49fb70af11dd869de9572057afcd)

commit 12894357413fe9fc91fc115d28d7fd523c1955f6
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Jul 23 11:32:25 2010 +0300

    modules_k/pv : Fixed a bug in pv transformation (tobody transformation), that caused a segmentation fault.
    
    The bug was caused by a incorrect error handling of the parse_to() method (defined in parser/parse_to.c).
    The function returns a char* (pointer to the last character parsed), in case of error it updates an error status.
    On incorrect to params, a segmentation fault happened after some time.(Because of a double pkg_free).
    (cherry picked from commit e7096bf24310b71623520a3b963ddc50c111827c)

commit 1eef50f9d5cf90d36c4f1cca5d87d1eb8a00a2d5
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Jul 21 16:19:06 2010 +0200

    modules_k/dialog (doc update): Be specific on the fact that only
    confirmed dialogs can be terminated by means of "dlg_end_dlg".
    (cherry picked from commit 03e20458bc83a8d918c2ea17c3f46a073ce7cdd8)

commit c72473fc34a5dd738a998ac14e73d2dd8f8446e3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 16 17:22:05 2010 +0200

    dispatcher: doc updated to reflect PV parameter options
    
    - ds_select_dst() can take PVs as parameters
    (cherry picked from commit f3d351355852c7df6582bcd7939ee3855168a60a)

commit e4b3a3df1707606d5291d3e5ddc87b16f42ef6a3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 16 17:19:48 2010 +0200

    tm: use warn to print message if load_tm is not found
    
    - in case of sl trying to import tm api for stateful reply, is not an
      error if tm is not found
    - modules importing tm api print error message if the function returns
      error code and they need the tm
    (cherry picked from commit 5a25609343f5697e6ebcf8f49e589b992a8af72e)

commit d9a4c3b4aefeb87f62b06dd2bd55f23bdb804b43
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 15 13:48:21 2010 +0200

    core: print line for include_file errors
    
    - easier to localize the error, reported by Raul Alexis Betancor Santana
    (cherry picked from commit 2b680bde0605cbc1cb4840105fafc83a2a235ec5)

commit a0c6d4b90bb972e6c56334221530ee00ed25f22f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 8 12:34:40 2010 +0200

    tmx: use TM api function to get tm table
    
    - fix missing symbol for mode=debug, reported by Santiago Gimeno
    (cherry picked from commit fb39052ff574c133c74f1f0a1c8d5f43b5bc93be)

commit f6ddf0a5e9d878b426f515ef7900ee993b6ff06b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 8 12:32:45 2010 +0200

    tm: export function to get access to tm table
    
    - to fix missing symbol in tmx for mode=debug, reported by Santiago Gimeno
    (cherry picked from commit 181f81b2458ee04241b36c65ac1d95f38003250d)

commit 87f7392cc0675ae4b5521b82820ae6dcfe1d0ad9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 5 10:36:58 2010 +0200

    core: typos in comments
    (cherry picked from commit 39ac6a5c0a7833ad0c29ae7711f37b92c5c81e95)

commit cbac69c6e52bbc855b34d62d99991a74ebd8be33
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 2 18:21:10 2010 +0200

    tm: TMCB_RESPONSE_READY executes by its own
    
    - removed the define of it to TMCB_RESPONSE_OUT
    - now this callback is executed before writing reply to network
    (cherry picked from commit f1c35c13252d3160334e9b3f56094404f06009ba)

commit f9f7bef1eac716fcc09087aa544ca8938c4b60c9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 21:03:36 2010 +0200

    msilo(k): updated readme file
    
    - documented the new parameter add_contact
    - readme file regenerated
    (cherry picked from commit 9d8c55287ea9ac93440d762c511afe531c629552)

commit cb4d9985d53a88e6c650d813fdc0e0061781c5f6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 20:56:23 2010 +0200

    msilo(k): parameter to control contact header
    
    - add_contact parameter controls whether contact header is added to
      msilo generated messages
    - default is off (no contact added, as per RFC3428), reported by Juha
      Heinanen
    (cherry picked from commit 8ffb09ce908088af89e70a5acd87a318baf5a029)

commit 56d19db4ae94d62ebc7e7590995a24eef1fd1d20
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 19:19:17 2010 +0200

    pdb: avoid child re-init
    
    - for mi cmd when used over xmlrpc module
    (cherry picked from commit bc34a82fbf5bd903cc50cb34c73afb7b685603a7)

commit b4b903e1df57d290b2fcf3b7463b863ad402e15c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 19:08:04 2010 +0200

    presence_xml: avoid re-init of db handler
    
    - safety check for usage of xmlrpc module for mi cmds
    (cherry picked from commit 098deec785ab7c4e927104e83fc84b6c1b347719)

commit ad6ae8cdc749ac7cc89f0a8b2c5fed84e427a5cb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 19:07:18 2010 +0200

    presence: avoid re-init of db handler
    
    - safety check for usage of xmlrpc for mi cmds
    (cherry picked from commit 8a1d985743fe6ec544a215b8ddb6e54adbb024d9)

commit 2b47fd2f68d1ab3fd5e378be64b8d134cd03f7af
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 19:00:51 2010 +0200

    kex: check if uptime value was initialized
    (cherry picked from commit 7537d27782b185a20d32b08f7bcb30557bb3b7ff)

commit a01e7edab700843227c4cc7fabf8b831ed0714f3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 18:57:09 2010 +0200

    userblacklist: avoid double child initialization
    
    - safety check for cases when xmlrpc module is used to run mi commands
    (cherry picked from commit 3f2ca85f4254746240177830e85a87b81d8cfd85)

commit 705a61b1b9f03c11c10b266f6743124afaf40ea4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 18:43:54 2010 +0200

    usrloc(k): avoid re-initialization of db handler
    
    - can happen if mi commands are used over rpc interface via xmlrpc
      module
    (cherry picked from commit 8948fe654b83217979b2d2154934a973aefa9ae3)

commit 7e2eaeb37c61561a9192032acfde6255ce9b595d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 18:35:27 2010 +0200

    domain(k): safety check for db handler initialization
    
    - avoid double initialization of db handler when using xmlrpc module for
      mi commands
    (cherry picked from commit c65fc04ff83c6304d5889f3426b3b96b5ac7ee69)

commit 8a9b915901a9e3fad9899cb6402f3cb1572baf37
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 18:31:14 2010 +0200

    drouting: check if db connection is initialized
    
    - applied for the case of mi reload command
    (cherry picked from commit 76266ca085d05be949ddc34df513de6810c5d65f)

commit 36b8d1a70020490a2ef0fbf5ae61550296a7befe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 18:22:15 2010 +0200

    htable: close db connection in case of mi cmd errors
    
    - in some error cases while processing mi reload command, db connection
      was left open
    (cherry picked from commit e723b2b24a87599d538b652ee60c862f769f8036)

commit 4a83157af27953f8d2fc76976e198491ccc8897d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 18:15:33 2010 +0200

    pdt(k): safety check for db handler initialization
    
    - there can be two attepts to initialize if xmlrpc module is loaded
    (cherry picked from commit 2e8d469de4253444d61cb186395d40c0fd492fe6)

commit 59d209fe33a50d2d3d841a125c9bd8f73d91a099
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 18:13:54 2010 +0200

    mi_rpc: initialize mi cmds for sip workers
    
    - xmlrpc module re-uses sip workers to process xmlrpc request which can
      execute mi commands, therefore is need to initialize mi cmds as for a
      mi process
    - initialization is done only when xmlrpc module is loaded
    (cherry picked from commit b2b2a82d497ee37428abab933f4862255bc5c4a1)

commit a6abcee6da3bf7f7c16c19bbd64aa20e4b1d3b9f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 17:40:20 2010 +0200

    permissions(k): safety check for db_handle
    
    - avoid double initialization of trusted ops db handler
    (cherry picked from commit df2d92a1f0698e0d108ec080de5fc3673d332209)

commit a92bb2ee265c6d7f44d3fe848725b458c441b207
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 12:10:34 2010 +0200

    permissions(k): reverted incomplete fix for mi cmd
    
    - the mi command execution via rpc is fixed by initialization of mi commands
      done now by mi_rpc module

commit 6028bb26af3839727db03823f4734f90ed00f85e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 12:08:42 2010 +0200

    mi_rpc: call MI init child functions
    
    - MI init child functions called for RPC processes
    - fix for several MI commands that can be executed now via RPC and they
      needed to do specific initialization for each process
    - reported by Juha Heinanen
    (cherry picked from commit af18dae034cf8836f1627929f189983ca6010428)

commit 1364efd78fbea8f9921c9a897d2fcb4310dca168
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 1 12:04:52 2010 +0200

    kmi: allow multiple initializations of mi child
    
    - safety check to detect if mi child was initialized
    - protect against multiple initializations that can occure due to
      usage from MI or RPC processes
    (cherry picked from commit 4047fc33053898d17498104b849dae9e45bee1e6)

commit 99a0c0e3c418346f6b63234fd7dc817366fe5fc1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 29 19:48:59 2010 +0200

    core: safety check for free contact
    
    - patch by Sebastian Z., checking if the content is null before freeing
      it
    (cherry picked from commit 7aed7d72c98a8228e9687773c3bab20d8934251a)

commit 134edd5fcdfffcf18299f0673a1ecb65bd8b3241
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 1 23:02:14 2010 +0200

    presence_xml: fixed log message

commit 24877089b48cdbf9389981c0e9285e6a3a1ce6c8
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Jun 28 10:50:05 2010 +0200

    modules_k/dialog: Delay dialog deletion to absorb late in-dialog
    requests
    
    - When a dialog's state transitions to DLG_STATE_DELETED, register
      a tm callback for TMCB_DESTROY to absorb late in-dialog requests
      (no more "unable to find dialog for <REQUEST TYPE>" log
      messages).
    - On callback, unreference and, in consequence, destroy the
      dialog.
    (cherry picked from commit 3537c2d8c27617023cb9f9a569435483748fef1f)

commit c074bd7c719c4e054c5a537f92467db207e42f9b
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Mon Jul 5 17:52:12 2010 +0200

    Increase failed_dlgs when a non-2xx final response has been
    received only.
    (cherry picked from commit dd9681ce5f6602c888d847a283eaaf637318994d)

commit 6e3cef5314573e56de6b7bd8f58691526101a98c
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Jul 13 14:46:54 2010 +0200

    Fix minor typo
    (cherry picked from commit d4c63b7f3e7be5a2a86c929d013f19d6c8cbb4eb)

commit 983411fa3db60fd3f5735dc026ee9bf8946e9253
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Tue Jul 13 13:21:40 2010 +0200

    modules/dialog: Do not send BYE request for non-confirmed dialogs
      (not supported).
    (cherry picked from commit 4a84c8c410ce45d9e5443eb52ac4c79e47ab5f3c)

commit 5c5cc3df5301e86ee78d79f52aa917e0f67f37e8
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Jul 7 12:39:58 2010 +0300

    Fixed a memory leak on shm memory, caused by the dtrie implementation.
    
     dtrie_destroy and dtrie_clear could leak 10 * sizeof(void*) for each node in the trie.
    Mainly affected carrierroute and userblacklist modules

commit 44aa85c78952288c4350b9e2277354e7fbf4d2b2
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Jun 30 18:25:55 2010 +0200

    Do not consider in-early-dialog BYE requests to be bogus.
    (cherry picked from commit 8bf53ec54beab825794b8345cce7fdb41c783809)

commit 37940ea09b861b18994c4243abf8c6d8e711a2ef
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 30 17:15:37 2010 +0300

    modules_k/msilo: do not include Contact header in msilo generated messages

commit a6141a32738b8610c70ba7e0a88c0d79561cb7a6
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jun 29 18:11:58 2010 +0200

    db_postgres(old API) FS#77: fix BLOBs with postgres
    
    fix BLOBs with postgres, also add a null-termination as the other
    SQL databases in order to be able to work with the presence modules
    (cherry picked from commit 2e56720769913c55cacc83fe3a31f44f072e7590)

commit 96d8f8335587d35b6a2b887f597fdc68de799875
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jun 29 12:26:30 2010 +0200

    auc(k): fix error in authentification: Digest should be compared case insensitive
    (cherry picked from commit 3f5909fd3ca55aa43148d81a8874eaeaeaf91968)

commit 3d1d941dde7a2b4a764dcfc9939501e5ddf83f04
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Jun 24 18:39:49 2010 +0200

    modules_k/dialog: Fix timer reset and improve timeout value logging
    
    - Fix a bug that caused dialog timeout values to be refreshed only
      when a custom timeout was provided by the user via AVP.
    - Do not log failure to get timeout from AVP when in fact no AVP
      was used.
    - Add missing newline character.

commit 927351a2c4bd222db8a58b877a5fb018fdce2d00
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Jun 24 15:50:52 2010 +0200

    Correct typo in comment referring to other file.

commit a5f03adcad92993e170be1d2a5dbb879b4777347
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Jun 24 15:01:13 2010 +0200

    modules_k/dialog: Reduce log verbosity for list traversal of
    expired dialogs.
    
    - Change logging of start/previous/next pointers from WARN to DBG
      when traversing the list of expired dialogs.

commit cbbc5eff256565a3eae29a9353bbb4e3064640bb
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Wed Jun 23 15:39:21 2010 +0200

    Do not consider in-early-dialog requests to be bogus.

commit 268c9e7db0fd94c94c5e4d5b28c898620f31a9f4
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Jun 16 14:11:48 2010 +0300

    Always set data payload to NULL, thus avoiding problems when root node had data associated with it
    Credits for the patch go to Henning Westerholt.
    (cherry picked from commit f05a578613ca1c9cc15e27cc01c5573e1cf0b888)

commit 3224810f6fc75b0f7a498e8bfe3947c0e05bc98f
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sun Jun 6 13:26:31 2010 +0200

    *PKG Debian
    - Mantainer header changed to $me

commit 64db1af36c67e7ecb5bc3451f94a11b69edc1fa6
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed Jun 2 00:49:56 2010 +0200

    PKG Debian: More version support
    
    - debian-squeeze added.
          Purple excluded from the compile list. Seems that purple module does not work with libpurple 2.7+
    - ubuntu-lucid added
          Universe has to be enabled in sources.list for radius and memcached module dependency matching

commit aa2526dce7e5fcade57f577de5d701c990705cee
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Tue Jun 1 23:31:14 2010 +0200

    PKG Debian version dependant changes
    
    - debian-lenny is erased and symlinks now to debian
    - debian-etch is recreated from debian. This provides consistency to all debian* folders
    - Berkeley and purple modules excluded in debian-etch to avoid dependency problems

commit 31d63323511540f9510ad9b0c7967e2f79004917
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 30 11:03:22 2010 +0200

    db_berkeley: get rid of compile warnings
    (cherry picked from commit 8b506f7d9b8eba682d180e458b0e2a278053d29a)

commit a71c4f22859c85eeca90890a9496398537cd006f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 30 11:34:47 2010 +0200

    srdb1: updated entities.xml path in db schema
    (cherry picked from commit 387e7ec22e736d1ce51f5c12d9f4e8533ead8512)

commit e0eeace9b3c0c90d390bba63dee6d161c3f34d40
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Sat May 29 22:13:26 2010 +0200

    pkg Changes to debian/control
    
    - Dependency changes to match lenny and squeeze at least. This will allow to
      drop debian-lenny folder in the future.
    - Added "Replaces" to kamailio-*-modules since the name of the modules has
      changed since kamailio-1.5 and the upgrade would not work properly.
    - VCS lines erased since the pointed to wrong URLs and we do not have a 3.0.2
      tag to point.
    - Added "Conflicts" to erase old packages that do not exist in this version and
      could cause upgrade not to work properly.

commit 754e46dd87756c0aef7046c143ff090d76299159
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Fri May 28 22:27:42 2010 +0200

    pkg: update debian changelog version for kamailio
    
    - Updated kamailio version to 3.0.2.99. This will allow development builds to
      update the stable branch and will be clear that it's an unreleased version.
      This will change just before releasing 3.0.3 and then change again to
      3.0.3.99

commit db3dc3f305409ad34dcf985c5dc63bddd4dd9e1b
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Fri May 28 21:44:39 2010 +0200

    pkg: Update debian changelog files
    
    - Update kamailio version to 3.0.2 for debian-etch and debian-lenny builds.

commit 45fb6e4f1000de253d19e08d86699ea865d120f9
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Nov 11 12:24:50 2009 +0100

    tm: TMCB_E2EACK callback fix
    
    TMCB_E2EACK_RETR_IN was called instead of TMCB_E2EACK_IN
    for the initial e2e-ACK message.
    (cherry picked from commit 3da5ebc8bdc3530d1c61b84665e4dadf6c6cb3e9)



===================== 2010-05-27 Kamailio v3.0.2 released =====================

===================== Changes since release 3.0.1 =============================


commit dea34883a9429a847ecb4437cd5ce2c982a58126
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 26 15:48:59 2010 +0200

    tls: fix unregistered rpc commands
    
    In the process of merging the tls modules with some k tls PVs the
    module interface was changed, leaving the rpc functions
    un-registered (and hence unaccessible).
    (cherry picked from commit 577ccb71e7a1e113cacd74b19c8174ea2e9bacb6)

commit 496566345b9faf263d2594445709dcd953036ac6
Merge: e556002 1c588c8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 27 11:34:27 2010 +0200

    Merge remote branch 'origin/andrei/pointer_alias_warnings' into kamailio_3.0
    
    * origin/andrei/pointer_alias_warnings:
      rr(s): fix recently introduced avp_cookie name bug
      core: avp aliasing warning fixes
      group: fix pointer aliasing warnings
      rr: pointer aliasing warning fixes
      db_postgres: pointer aliasing warnings fixes
      core: pointer aliasing warnings fixed
      cfg: fixed pointer aliasing warnings
    
    Conflicts:
    	route.c

commit e5560029f04058642bebb09a1a1b7df699c5f80b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 27 10:29:24 2010 +0200

    centos spec: version set to 3.0.2

commit a2dbcec4278631ec78944098e7b407cebd682e92
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 27 10:28:16 2010 +0200

    debian: updated changelog for 3.0.2

commit 88e2a6d4ed6fae4d5c0b9ab268e41307aea4e8a9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 27 10:27:53 2010 +0200

    - version set to 3.0.2

commit 959eb339a44ada14b2b1a7aa551b0f36a2afd523
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 7 22:56:46 2010 +0200

    topoh: free nbuf
    
    - fixed leak due to no free of new buffer
    - reported by Libor Chocholaty
    (cherry picked from commit 198e468b7d83bb62d0761dd45e5c6820bc75a61a)

commit 08d6d008af2408892a101eb932a2b93f4c9dfc47
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 20 12:24:29 2010 +0200

    perl: update the index of params in action struct
    
    - params start from 3rd position of val array
    (cherry picked from commit f624074a1680befed9328548864407c396ec196f)

commit c2256b44ba8ec4d8190aa9551bc737bd1ab62699
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 21 15:04:55 2010 +0200

    dialplan: safety check for fetch rows before data init
    (cherry picked from commit 5040ff5cc54f673af80190916de9c1ac5d4c1af9)

commit 6dc77aa8801808211b42184c15712e6adf9b443d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 13 11:41:06 2010 +0200

    registrar(k): reset dst uri in lookup
    
    - upon lookup, dst uri is reset if no new dst uri is set from received
      or path, otherwise the coordinates of selected contact are not
      effective
    - reported by Andreas Granig
    (cherry picked from commit 53bb79cef5eb70e98472903ef84b5585cc798e65)

commit fc9770f9a5f6b874680465d417d0359a19ebbad6
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 20 15:46:58 2010 +0200

    fix memset call, set the variable to zero, not to the size with length 0..
    (cherry picked from commit 355636358c07b8da9b1fcd6d04cdaf337c9f730c)

commit 16bdf9ea21b310d49d5d99dee43cfd57990eb1bb
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue May 4 13:10:03 2010 +0300

    Modules:carrierroute: Fixed a bug in carrirroute module that might cause a crash if the routing prob was larger than the number of available routes.
    
    The problem was caused by a missing else

commit a65b81983cf8ab90a4c40c8698ad1033bcdf205e
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Fri May 14 15:05:17 2010 -0400

    sdp parser: fix sdp payload attributes cloning
    
     - ptime attribute was not computed while allocating space
       for the cloned attributes
    (cherry picked from commit f1944ead66d854c349fca67da2b13d2be3c7fc33)

commit 9ba3305c3e813531200da6b03f72676c930e784d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue May 11 14:43:55 2010 +0300

    modules/mediaproxy: removed error message
    
    - Removed error message since a=rtcp line could contain the port only.
      Credits to Thomas Gelf and Saul Ibarra Corretge.

commit b0091da84ee5bbbc18cb799eefc497be707ab0f9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun May 9 15:55:22 2010 +0300

    modules_k/permissions: backported address table reload fix from master

commit 59894cc9d53b03494753a00c4057c595afc3e5c0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 6 21:09:47 2010 +0200

    avposp: use state in searching first avp in avp_copy
    
    - state parameter was missing when searching first avp, keeping it
      uninitialized when searching the next, causing a crash when flag 'g'
      was used in avp_copy
    - reported by Jon Bonilla (Manwe)
    (cherry picked from commit 027d68e9cc7afcdb3ba8922215a28e33a5225097)

commit d457367259419b776f0cde56ef35e9de9b5fffb9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 6 18:51:45 2010 +0200

    dispatcher(k): allow functions from route block
    
    - they do not depend on sip message itself, but script variables
    (cherry picked from commit 25680d4bc14a4502e118951873c6da8edfc7e9a7)

commit befd91050bf16c725076f31f71d8c083aaf482e7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Mar 19 14:47:46 2010 +0100

    core: cfg parser: allow negative numbers in modparams
    (cherry picked from commit d4b2eee2e4f0e5a1fe4b5ea17d78d51a6fab70c7)

commit 4fd1e775f701d79d1d7f5e75bd7ff621739914b5
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue May 4 17:06:47 2010 +0300

    core:sr_module.c increased number of pre-allocated static buffers in get_str_fparam()
    
    Increased the number from 3 to 6 as more are needed by modules like carrierroute when avp's are used as function parameters
    (Bug reported by Ole Kaas)

commit 79352b61841907f08bf7ca994acf814b2a5a6615
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Apr 27 15:40:10 2010 +0300

    lib/srdb1 The RES_ROW(res) was not checked to be NULL before being used
    
    This caused a crash in the case that RES_ROW_N(res) was > 0, and RES_ROW was NULL
    (like a pkg_malloc going bad in a OOM scenario).

commit 26d735b5c8b9f10d8a5d4f6a80ce12868868b187
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Apr 27 09:30:12 2010 +0300

    modules/mediaproxy: crash fix
    - Fixed crash when received reply contains more streams than the
      INVITE.  Credits to Saúl Ibarra Corretgé.

commit 51a49282b60ce7a65a86d839a3e004eab7f3540f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 23 16:44:49 2010 +0200

    core - tm: improved log messages
    
    - udp_send() prints outgoing buffer len as unsigned
    - build_uac_req() prints the size of attempted memory chunk allocation
    (cherry picked from commit 839c9509013abf77a446e1c35620a9fcd4223740)

commit 9223d7a189c64b6a3dbe8c66edf08ddc16f3fd4f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 22 10:35:33 2010 +0200

    dialog(k): populate bind addr before any error
    
    - setting bind addr attribute in populate_leg_info() takes place before
      any parsing error may occur, to be sure it is set, avoiding extra
      check for null value when updating db
    - reported by Kelvin Chua
    - credits to Timo Reimann for troubleshooting
    (cherry picked from commit fd68980dc6f3de03a432f478c124852c23a1d1b2)

commit 11837819caad6234f337ac3843d720a9b664a330
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 20 22:06:46 2010 +0200

    tm: kamailio flavour enables local-request event
    
    - will execute event_route[tm:local-request]
    - reported by Alex Balashov
    (cherry picked from commit e4bd74c1718ea2218f2ad426537641cc9ef71d7d)

commit c0f409a686b6b468b406185dd090813aef46f513
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 17 11:46:44 2010 +0200

    core: sip warning header disabled by default
    
    - do not append Warning header to local generated replies by default
    - it can be enabled from config file via sip_warning parameter
    (cherry picked from commit 258b58e29fe9e63a75d853d1826fe9c4b9a5f0ab)

commit d6a1a1ba48732d7e45115b2ada0ccdd9218cb08f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 15 11:20:52 2010 +0200

    pkg(k): extended rules for mysql depends
    
    - closes FS#65, reported by Jon Bonilla
    (cherry picked from commit edfbfab6590381872dbd0f9ea89b496cb1c911d6)

commit 45b224a69d350506cf7881a352a43eaebafb2825
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 15 11:02:06 2010 +0200

    tm: added drop functionality for branch_route
    
    - missing part of K integration
    - credits to Andreas Granig for reporting and testing
    (cherry picked from commit d592824b6e1b0d31a0d4fff28d003cc4c3c878bc)

commit 2da81aa4f591f0dfef49cd6acabd19baa7b2dd8d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Apr 14 17:17:59 2010 +0300

    modules/lcr: always use current time when loading gateways
    
    - Always use current time when deciding if a gateway is defunct or not.
      Otherwise a gateway may get used even if its defunct until time in
      database is greater than current time.
    (cherry picked from commit 0c819f3ff3d947897fa0bafbaaa0081b671bb4e4)

commit 3a25f8327c39420d99d11ba4502d31617fa743cb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 14 10:39:47 2010 +0200

    mysql: include dprint.h
    
    - several files were missing include of dprint.h
    - could be the cause for missing symbol reported by Pratab Ali for
      opensuse
    (cherry picked from commit 9c5da73226b3124c888e434e3df55cc1466b3b07)

commit 342d6eb44fe6f795d7d31fc42ec6f7942859503b
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Apr 2 15:03:09 2010 +0300

    lib/kcore/km_crc.c Fixed wrong computation of crc32
    
    The final result was not bitwise complemented, yeilding an incorrect result

commit a0fe789aa729092a7bc6e31bfd1cb73decf941e2
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Apr 3 13:20:38 2010 +0300

    modules/dialplan: fixed reloading of db data
    
    - Open and close db connection each time rules are (re)loaded from
      database.
    (cherry picked from commit 14aaf32dd20252ee92c97dc3d3811c20b615222c)

commit 6c51d903f5a314f4116df81121d1faa5ea8c95d3
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Apr 9 12:09:33 2010 +0300

    modules/carrierroute Improved usefulness of error messages in case of a incorrect AVP value

commit 2bbb798da2e332f5558646e6faa285e6377286bd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 8 23:21:53 2010 +0200

    tm: notes about avp parameters format
    
    - they can be either PV style $avp(name) for K compat mode or just the
      name of avp for S compat mode

commit 4e5748d50b6a586fb45f312ade6aa572b4044d82
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 8 22:57:48 2010 +0200

    tm: don't fix timeout AVP value for K compat mode
    
    - the avps for timeout still expect second values unlike module
      parameters that expect miliseconds
    - therefore do not adjust the value if it is too low
    - reported by Andreas Granig
    (cherry picked from commit 5aa3167b088bdf2e7a5d74fdbbd83c0e150f7741)

commit 5604e51eb8fd6502495a37c26f9c549bcd63ca8a
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Apr 8 16:54:53 2010 +0300

    modules/carrierroute In case of incorrect avp value (unknown carrier id), print the name of the avp accordinly to its type

commit 5266c7f5ed1e2f6364f646ece3828e259491a6ae
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Apr 6 16:21:35 2010 +0300

    utils/kamctl/kamctl.base added documentation of  ps command

commit f2969f4fbc8c74f46d1f43f1f8553efc2e910d1a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Apr 2 10:19:55 2010 +0300

    modules_k/nathelper: handle_ruri_alias() fix
    
    - Look for ;alias parameter in parsed_uri.sip_params field instead of
      parsed_uri.params field.
    (cherry picked from commit ba7e942b819cea6c6d71651a37cfd9f73a9ddd48)

commit 48015a8e471ecadfb571fa94daa7300992fe6674
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Wed Mar 31 14:05:51 2010 -0400

    pkg: updated kamailio spec file for CentOS
    
     - updated kamailio spec file for CentOS along with default and init scripts.
    (cherry picked from commit 0acd8963f76a4854e101210db17854ca8062ff61)

commit 3c4db3e110aae42f36e03e0d10792f4676063fa0
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Wed Mar 31 10:31:05 2010 -0400

    kamctl: fix 'kamctl cr addcarrier' command
    
     - 'COMMENT' field and 'MASK' field were mixed up causing
       'kamctl cr addcarrier' to fail.
    (cherry picked from commit 7b8b6f647365655afa210f5e95baef06398ef612)

commit 6087434f2ddfbe07767d5a4eeb739b72b7c27a93
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 26 10:48:41 2010 +0100

    kamailo.cfg: fixed typo
    
    - typo in the hints of missed_calls table update for accouting

commit 4a280caf2a8fd452f9df44ad8cf39dd40e06c1e7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Mar 25 22:04:44 2010 +0100

    core: fix return not working inside a while() loop
    
    Reported-by: Juha Heinanen  jh tutpro com
    Closes: FlySpray#46.
    (cherry picked from commit 0581efe06a8fb0ffe15542c343ae7ac0bc20cbbb)

commit cb3eb04efd0183b96b377a2a08b8db948d11255d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 24 22:44:49 2010 +0100

    makefile: presence_mwi added to excluded list
    
    - patch by Ovidiu Sas, tracker  FS#45
    - makes no sense to build it out of presence group
    - kpresence group includes it and makes easier packaging
    (cherry picked from commit d91a9b021c494678cd20bc3fd444f9d4d565ec65)

commit ae36bc7daa0da6d32b7818c2cc91dfe469233e0b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 22 16:33:04 2010 +0100

    makefile: fix install utils
    
    - previous commit broke installation of utils by a c&p error to
      non-empty test to utils variable (r => ut)
    - extra check for directory existence
    - credits to Federico M. and Nathaniel L Keeling III for reporting
    (cherry picked from commit 641a41b6e9cf1387c24dd9f863db978c8018df80)

commit cea15a4b04720154a7495a87e4d97ceaf1b8312f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Mar 16 18:15:56 2010 +0100

    makefile: fix install-cfg & install-utils on solaris
    
    Reported-by: Nathaniel L Keeling  keeling akan-tech com
    (cherry picked from commit ad57482b7d05417f7f0058cef8c698f18d6d9a39)
    (cherry picked from commit d4028e0df24a97ccaacf867ab6bfe92f270b92e0)

commit 0d4b4f187d5be683fdf8a697fea4d3ca32e69070
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Mar 16 11:34:45 2010 +0100

    tls: documented is_peer_verified()
    
    - documented is_peer_verified()
    - fixed the xmls, so that xmllint / make check does not return any
      errors
    - regenerated the README
    (cherry picked from commit f86da819836b7a8c832b4a80262d8f39a86563dd)

commit 2f900c77ba09f57217cffda8ff4ea882fbaa21e2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Mar 16 11:13:19 2010 +0100

    tls: doc: fix low_mem_treshold* name in examples
    
    The tls examples used low_memory_threshold[12] instead of
    low_mem_treshold[12].
    
    Reported-by: Jan Janak  <jan@iptel.org>
    (cherry picked from commit 915a0052092be70630f76a91c19c9a540da038df)

commit 8f218aa1bed97ecafb266373c4ae3a62254e815a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Mar 14 17:13:40 2010 +0100

    perl(k): fix mk_action call
    
    The mk_action() call used the old openser format, instead of the
    sip_router one.
    (cherry picked from commit a14aaf3f2fe11cdc0d56e1a12cb60ae0cd53b8f5)

commit ff80e418e01e1c6a92b0a5a5c74defe2a52a2e42
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Mar 12 12:16:16 2010 +0100

    mem: fix real_used stats for realloc
    
    A realloc that shrank an allocation accounted twice for the
    fragment overhead. Basically each shrinking realloc would
    introduce an error in the real_used mem stats, between 8 bytes
    (f_malloc, no debugging, 32 bits) and up to 96 bytes (q_malloc
    with debugging, 64 bits).
    This bug concerns only the accounting part. It does not cause any
    memory leak or any real runtime problem. It was introduced
    in commit fb9d6e50 (2005).
    (cherry picked from commit 75c1e9a735c693a6985a7a1786116b5fe4044fd9)

commit 2bb3d716821cf1ccfba16792c1ae168031f73fbb
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Mar 10 17:30:39 2010 +0100

    make: fix CPU reset in some conditions
    
    In some cases like trying to build a package with debug config
    (e.g. make cfg mode=debug; .... ; make deb), the CPU make variable
    was reset resulting in a build failure. This happens because in
    the debug config CPU is not set and hence is  saved as empty.
    Trying to build a package will start a sub-make which will try to
    re-do the config without debugging (make cfg), but the CPU
    variable with and empty value will be inherited from the
    environment and thus the CPU?=something lines won't have any
    effect.
    The fix replaces CPU?=something with
    $(call set_if_empty,CPU,something)
    This works around having an empty CPU in the environment.
    
    Reported-by: Jan Janak  <jan@iptel.org>
    (cherry picked from commit 0b2d2c6e99dac2bd171f1c24bfa6f285f6539273)

commit 6f8a76343d7737ab7348c27503e0670977883d0d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Mar 10 10:42:15 2010 +0100

    docbook: fix rm'ed files mentioned in .d build error
    
    When some .xml include file is deleted or removed, but the .d
    already exists, the build will fail trying to build the apparently
    missing file, requiring a make proper.
    This fix enclosed the prerequisites in $(wildcard ...), when
    generating the .d file.
    (cherry picked from commit 111a87fef0868021d6585d32b879bac6cb07b310)

commit 8b18772c4c5df2e96d89e2c56071eb5770fd7290
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Mar 10 09:45:28 2010 +0100

    cfg. parser: fix warnings
    
    - removed flex input warnings
    - workaround for bison conflicts warnings (%expect ...)
    (cherry picked from commit 0dabc34afe64672f07f572acfcd9478fc3575c9d)

commit 07681e1b6e89a902d8f9bdeba9674de6a3d353f5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Mar 10 09:25:13 2010 +0100

    make: on-the-fly dependency generation
    
    - support on-the-fly dependency file generation with gcc >=3.0
     (the dependency files are generated while compiling the object
     file, eliminating another gcc+sed invocation)
    
    - support for using makedepend -f-  for generating dependencies
     E.g.: make cfg MKDEP="makedepend -f-". In general gcc should be
     preferred if available (use this if you don't have gcc and your
     compiler doesn't generate good deps).
    (cherry picked from commit 5a9014ee4977c6afbc4b0cf65a9fad6237c2e2a6)
    (cherry picked from commit 929598a19dfb09efcfcbb1aee57a83f45b12592f)

commit ae9b1ec34994686c4d2d902582835ab0b2ed2c59
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Mar 9 21:57:25 2010 +0100

    make: depends move/rm file fix & optimization
    
    - fix for make failing if the depends were made and a *.h is moved
      or deleted
    - avoid restarting make when depends change (make the depends at
      the same moment when the .o are generated)
    (cherry picked from commit 965e651fbe84d370c05a647e022023cecf2d02bd)

commit 682ef1b6104ec62e4ec60eefa404c9403f6645c8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 17 20:00:59 2010 +0100

    nathelper(k): safety check for content length
    
    - patch by Marcus Hunger, SF#2961414
    (cherry picked from commit fb4f98a341322904a92c6f12396f5795a3275c08)

commit ccef7b8729d0beb6ac2c55b7f68bab5a8650c546
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Mar 4 09:09:22 2010 +0200

    * modules_k/permissions: subnet matching fix (credits to anonymous)
    (cherry picked from commit f5a29762b6155209721ba0dfc3f30b4a9764c191)

commit 967542011be0bf47b85abf8e627d6f43ad726e7b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 15 23:50:13 2010 +0100

    dispatcher(k): use load_tm_api
    
    - import tm module api directly
    - patch by Stephen Young (styoung)
    (cherry picked from commit fd5ddfd12c25497aa859dafc2bf65e3c07fd4529)

commit 0822a9caf751d2fb28ac398fd60cc2583308aa94
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Mar 11 21:08:20 2010 +0100

    mem: fix f_malloc big fragments bug
    
    In some situation, when dealing with several big free fragments
    (>16k) f_malloc would wrongly choose a fragment with a smaller
    size then requested. This would create the impression that someone
    arbitrarily overwrites the memory.
    
    First symptoms were some tls crashes reported by
    Klaus Darilion  klaus.darilion@nic.at.
    Reproduced using the malloc_test module.
    (cherry picked from commit c7099d0a1204120277cf662cc05ab35180d89538)


===================== 2010-03-08 Kamailio v3.0.1 released =====================

===================== Changes since release 3.0.0 =============================

commit 454a99274635eaea7ec8c8b5c4b38a0d44f24198
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 8 22:01:33 2010 +0100

    core: version set to 3.0.1

commit 1d7f450f1c22cb217e25d6c1eca158dbc52a911b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Feb 24 17:04:54 2010 +0100

    userblacklist(k): short term fix in the docs for redundant table definition
    (cherry picked from commit 2372a7d5039a72f9cdb6b8bb7acb8a5ae2cb5c5f)

commit 2fc570bbca38c634242c8fc40cfbcc06987c5b4a
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Fri Mar 5 16:54:58 2010 +0200

    modules_k/permisssions Fixed a bug that caused a segmentation fault if the mi_fifo subnet_dump was issued
    but the permissions module was not fully configured (no db url given)
    (cherry picked from commit d5da961b7ac62037fb1fb24c6ce3484584f5f972)

commit 45af92ac46a1948b65133d78baaac046e2f7eb78
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Mar 8 15:31:15 2010 +0100

    sl(k): docs extension, merge README

commit 7b18e462c759d0d1f69d37fb01a2ce482afbf9da
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jan 26 17:50:02 2010 +0100

    reg(k): fix a (probably) copy and paste error
    (cherry picked from commit bf89ebf74025597c261b5b664e29fe0ab6bcfc25)

commit de23564c9cea377e166d1fa462a5d33ab02cd7c8
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jan 21 19:26:08 2010 +0100

    ldap(k): fix ldapsearch with empty filter
    
      * fix ldapsearch with empty filter
      * When in routing script ldapsearch() is executed on LDAP query URL without
        the âfilterâ section, request forming fails:
        ERROR: ldap [ldap_api_fn.c:193]: vsnprintf failed
      * Workaround for administrators can be filling filter section with
        â(objectclass=*)â, what is anyway substituted by ldap library to request
        in case filter parameter set to NULL.
     * Please notice that va_end() call is missing in original code.
     * Patch FS#23 from andrey dot utkin at wildix dot com
    (cherry picked from commit 73655cc83851f1f406ce23b8d6130632d731ef2d)

commit 6f62f7fad5a2c726d95ac6c47129494bbabc11b1
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Jan 21 17:32:42 2010 +0200

    utils/sercmd: Fixed getopt() missing param
    
    Getopt was missing the -U param
    (cherry picked from commit 7c701df1be3d71afe49e7d017a90fa10c081b790)

commit 1cae9198b490c833a44091974811caec8d8feef5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Mar 4 13:16:06 2010 +0100

    makefile: fix modules config overwrite
    
    A config file provided by a module was installed even if a
    previous version was already installed, overwriting the old
    version. Now if a file with the same name already exists, the
    module config file will be installed with a .sample extension
    added (so only .sample will be overwritten, never an active .cfg).
    
    Reported-by: Klaus Darilion  klaus.mailinglists pernau at
    Closes FlySpray#38 .
    (cherry picked from commit 6c0de64647038072ba1959ead39dcc601fd6292c)

commit b2ee4178b4fe2d4b7385346cbc2c38f309183931
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Mar 3 19:24:08 2010 +0100

    core: parse_to display name multi-token no-quotes fix
    
    Fix for properly returning a non-quoted display name that is
    composed of several tokens (contains spaces). The previous version
    would set the display name to the first token, in this case
    (e.g. Foo Bar <sip:foo@bar> resulted in display_name="Foo" instead
     of "Foo Bar").
    
    Reported-by: Ronald Voermans  ronald voermans nu
    Closes FlySpray#39 .
    (cherry picked from commit 907686c0c4c1141af175d692251b8e1fab28b64e)

commit f9b3beab6c5066ef18ad4d0a347b7410e2c8c240
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Feb 26 15:21:50 2010 +0100

    core: msg_parse minor 64bit warning fix
    (cherry picked from commit c0e9cb82abe293937e5b95fa1347afdc118d9ac2)

commit 462dbe484d6f8d796092b1ab634caf954112d3d5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Feb 26 13:39:55 2010 +0100

    tls: TLS_MALLOC_DBG can now be set on make cfg
    
    Enabling tls extra malloc debugging info, does not require anymore
    editing tls_init.c. It can be enabled at cfg time
    (make cfg extra_defs=-DTLS_MALLOC_DBG) or at compile/re-compile
    time ( make -C modules/tls clean;
           make -C modules/tls extra_defs=-DTLS_MALLOC_DBG).
    When TLS_MALLOC_DBG is enabled, an extra warning will be printed
    at compile time. NO_TLS_MALLOC_DBG takes precedence over
    TLS_MALLOC_DBG.
    (cherry picked from commit 9bc19d4994f20aa354092aba9ae784de91547fc6)

commit 95ed848096c03dee4f9d0cf458a1d8e15e836dee
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Feb 22 18:01:26 2010 +0100

    tm: onreply_route: fix cleanup after DROP
    
    After a DROP in the onreply_route the avp lists where not restored
    to their original values and the possible msg flags changes in the
    script were dropped.
    (cherry picked from commit ba15378ef66a11d3cbd6862aa2bfb060d099ca03)

commit cee359fdc0bd85b85dc170c61ca296a3f13b0639
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Feb 24 15:13:12 2010 +0100

    cfg parser: segfault on case RE parse error fix
    
    Reported-by: Klaus Feichtinger  klaus.feichtinger gmx net
    (cherry picked from commit d2871c1190291e4b801f42e0763e5ca7ea28ee36)

commit aff7ce53ed0dc9a63143f45fa546b7e2640f82b1
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Feb 23 16:10:21 2010 +0100

    tls: disable kerberos more thoroughly [fix]
    
    Older openssl versions (< 0.9.8e release) have a bug in the
    kerberos code (it uses the wrong malloc, for more details see
    openssl bug # 1467). While there is already a workaround for this
    openssl bug in the sr code (see commits 36cb8f & 560a42), in some
    situations this workaround causes another bug (crash on connection
    opening when openssl is compiled with kerberos support and
    kerberos is enabled for key exchange).
    The current fix will disable automatically all the ciphers containing
    KRB5 if the openssl version is < 0.9.8e beta1 or it is between
    0.9.9-dev and 0.9.9-beta1.
    It iss equivalent to setting cipher_list to "<prev. value>:!KRB5".
    
    Impact: this fix is needed only if openssl is compiled with
    kerberos support and the version is < 0.9.8e. It also affects at
    least CentOS users with openssl-0.9.8e-12.el5_4.1 (in the centos
    openssl package they play some strange games with the version and
    report 0.9.8b via SSLeay).
    
    Tested-by: Klaus Darilion  klaus.mailinglists at pernau.at
    Reported-by: Klaus Darilion  klaus.mailinglists at pernau.at
    Reported-by: Andreas Rehbein  rehbein at e-technik.org
    Reported-by: Martin Koenig  koenig starface.de
    (cherry picked from commit 51ee5da9ebf09447f71d4393f7c5b703305ff46d)

commit b3e99c07b69f28d55de89b2adb96468ff71c9764
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 12 11:12:37 2010 +0100

    dialog(k): init local parameter
    
    - memset tm callback param to 0
    - safety checks for MI cmd dlg match
    - credits to Inaki Baz Castillo and Torben Friese
    (cherry picked from commit 787fabb1e0085355aa1eeb77d5f17e7940f4ed3c)

commit 832a6bf53562ca492ecbbee86b5445ffee00c883
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Feb 17 20:46:47 2010 +0100

    core: avoid non-null 0-length dst_uri,  ruris and path
    
    - a dst_uri or ruri that has 0 length should be equivalent to also
    having a null corresponding char* pointer.  sip_msg_shm_clone()
    will now clone this type of uris to (0,0).
    - set_dst_uri() called with "" (a 0-length non-zero string) is now
      equivalent to reset_dst_uri().
    - set_path_vector() called with "" is now equivalent with
      reset_path_vector().
    (cherry picked from commit feb3478b19452fe096f33364e6a59ec57c93efbe)

commit 4834519a39a406b73adf5e9c1bca3c6d2fd1e5f8
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Feb 17 20:40:46 2010 +0100

    tm: fake_req dst_uri and ruri copy fix
    
    If the uris have 0 len but no 0 value (possible at least for a
    manually set dst_uri), set the corresponding fake_req uri to 0,
    thus avoiding a potentially disastrous free in free_faked_req().
    
    Should close FS#37.
    (cherry picked from commit 583d213cb617e767f5895de18168d7516e51e5e6)

commit ef10212404b9bc5489683fc7429fee40b3495994
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Feb 11 22:22:12 2010 +0200

    modules/mediaproxy: properly fix the IP in the RTCP line
    
    - Properly fix the IP in the RTCP line (if present in the SDP). Patch
      provided by Saul Ibarra Corretge.
    (cherry picked from commit 2a95f9bf915cfc3cf11374f9b8f0f547d4eb4955)

commit d8d9165324f32e82f6e8cbb5e07f33ddd697cd1d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Feb 10 22:37:44 2010 +0200

    utils/kamctl: removed unsupported commands to manage lcr gateways and routes

commit 79583dc666ae198bbe00954c1326789be8cadbc4
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Feb 10 07:34:33 2010 +0200

    modules/lcr: added in docs missing install dependency on libpcre
    
    - Credits to Kris Amy.
    (cherry picked from commit 0c7048297f590f140ae84efdcde8a392ef23527e)
    (cherry picked from commit 9baa29e80e5aa9f5c656a32059d24901a23ef8e9)

commit 59907c49af12496af3d85e74ef52e67055cf610f
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Feb 10 07:15:24 2010 +0200

    modules_k/permissions: group identifier must be positive integer
    
    - Group Identifier in address permissions must have a positive integer
      value.
    (cherry picked from commit c67e72eb16f277eeae16182e15e0e8ebf319dce0)

commit 318ff6e6884641f3c9788b01e9ac3d859269be30
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Feb 9 11:32:02 2010 +0100

    cfg.y: fix warnings introduced in previous commit

commit dc20fc812f9b63166732f2fc0e124b793c307b38
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Feb 9 11:26:36 2010 +0100

    INSTALL: several make specific updates

commit 50237e89964b4fc8a4c8775076c1b75a05ee5e73
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Feb 9 11:23:50 2010 +0100

    core: added forward()
    
    - aliased forward() to forward(uri:host, uri:port)
    - k 1.5.x compatibility

commit a84cfc60a2b1cbbb9b0ba0a9ba80acd1e2030e25
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Feb 9 00:29:26 2010 +0100

    core: allow int parameters to module functions
    
    - sync with master branch
    - int param are converted automatically to str, therefore backward
      compatibility is ensured and module functions still get only str
      parameters

commit af6cdd413eb170ebc29f030779e002324f34d9b4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Feb 9 00:08:47 2010 +0100

    INSTALL imported from k 1.5.0
    
    - more appropriate in regard to additional tools
    - needs some updates with the new stuff that can be done with make
      (e.g., make cfg, module-list, ...)

commit 4800f80d38d34c7dc3e0216e142c286897a454a1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 8 23:16:47 2010 +0100

    Makefile: MEMDBG var to control mem debugging mode
    
    - to compile with memory debugging
    	make MEMDBG=1 cfg; make ...
    - default in release mode: MEMDBG=0

commit 65659440162e612917e8a7992b775f6e2b248734
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Feb 2 10:09:32 2010 +0200

    modules/mediaproxy: take boundary string from Content-Type header.
    (cherry picked from commit 2031721948bfa6b444d9b18f7e3f195cfd7e1427)

commit a765213ffa3769577dd7438c95737cb6b98bff74
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Feb 2 15:06:34 2010 +0100

    core: new param to give outbut buffer size
    
    - int2strbuf requires now outbut buffer size as parameter
    - safer against misuses, suggested by Andrei Pelinescu-Onciul
    - if size is less than INT2STR_MAX_LEN, return null pointer

commit 229496c7170bcc85f517a4985f7ab4bad553c8d3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Feb 2 13:23:03 2010 +0100

    core: use one buffer for int2str
    
    - static declaration inside ut.h function results in hard copy to many
      places, affecting acc detection of int to str conversions in buffer
    - reported by Alex Balashov

commit 055915a558a485cda17c9bb1c8e43aca12d116b5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 30 17:02:37 2010 +0100

    core: use dlflags to load modules
    
    - dlflags var used for dlopen function

commit 369d7598244c60c2c8e4d601e166a03cb211128c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 24 21:21:59 2010 +0100

    uac(k): use header types for detection

commit 9600b1be5136f72d567a6b579abeb96cb5928fc7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 24 21:20:02 2010 +0100

    uac(k): proper test for send failure
    (cherry picked from commit 1479cd808ea8e5025bfa8400a257e3f89db4ab68)

commit f4f9207f77883efa4dab67b3afe7c693585dc32c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 24 19:43:09 2010 +0100

    uac(k): set type for tm callback
    
    - requires to be TMCB_LOCAL_COMPLETED

commit 32d3e9c98943ad298f09d26db83ecf4ce5c2cc0e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 1 11:27:20 2010 +0100

    tm: fix setting the pre-T callbacks
    
    - introduced in the fix for uac module (affecting only uac)
    - credits to Andrei Pelinescu-Onciul

commit c2f9d800c367d614411159c599f078fbcc0e311e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 27 12:33:26 2010 +0100

    drouting: register MI commands
    
    - the module didn't register the MI commands in mod init
    - reported by Denis Putyato
    (cherry picked from commit f12562923e580644f20ae964264747be849d1ce9)

commit f572564e862a56470ccb2bc2aa2b23fcbb5dd318
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 25 10:06:41 2010 +0100

    drouting(k): Makefile updated to link libs
    
    - fixed missing core libs in Makefile
    - reported by Denis Pulyato

commit e6eceeb8ccce8b37d09f5f69cafb97e007467d78
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 18 15:43:32 2010 +0100

    registrar(k): preserve old bflags upon lookup
    
    - lookup was resetting bflags value with what was retrieved from
      location table
    - preserve now bflags set in config before
    - reported by Ricardo Martinez

commit 45f76f44abca5d049c3d289a1f9d09c6821c92d9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 18 12:35:46 2010 +0100

    pv: fixed author name
    
    - forgotten when creating readme files starting from another module
      docbook files

commit 03ab185bca42e5788eeef5f5c13e02e547c524a1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 18 11:59:19 2010 +0100

    tm: set request and reply for TMCB_RESPONSE_SENT
    
    - for some reason they were NULL
    - affected was sip_trace
    - credits to Nguyen Quang Tri fore report and troubleshooting

commit 67f65488165f67ebacfb09f43e52cf09afdd79d4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 15 22:23:52 2010 +0100

    Makefile.defs: option to enable fast malloc statistics
    
    - FMSTATS=1 will enable MALLOC_STATS
    - on by default with kamailio flavor (backward compatibility with 1.5)

commit 68d63835c6ec1a3fa4984aa3eb3fcc081a4f1f86
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 15 22:09:01 2010 +0100

    tm: run release function for tmcb parameters
    
    - allow early registration of tm cb (in use by k uac module for example,
      reported by Vulpyne)
    - release function calling was missing

commit 53d7cb1dae02e4709a10f869e8ec748df73bec37
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 15 20:29:46 2010 +0100

    tm: t_on_xyz("0") fixup updates
    
    - if parameter of t_on_reply, t_on_failure, t_on_branch is 0 do not call
      fix_routes and set the parameter value to 0
    - resets previous calls of the function with non-zero value and does not
      print warning message at startup because the route is not found

commit 6d1e9f74d658942a0a5714ae452a6231e5f831e6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 11 18:37:10 2010 +0100

    pkg: set version to 3.0.0 in debian changelog

commit 0a0bd9eb77ad08b36190ea70bc4c611d0039bfb5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 11 17:45:06 2010 +0100

    ChangeLog: imported v1.5.x file
    
    - added quite some data taken with git log, worth of commits since April
      2009

===================== 2010-01-11 Kamailio v3.0.0 released =====================

===================== Changes since release 1.5.0 =============================

*** Taken with 'git log' and not complete - commits older than April 2009
*** are not included.

commit 3cc229a3c7ba36475c3bd67e4849297f9548bf26
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 10 20:01:01 2010 +0100

    usrloc(k): rpc version for ul.dump
    
    - ul.dump is rpc alternative for MI ul_dump
    - better alternative to avoid pkg frametation in MI process

commit f0d89fb89d1b588f253f048ab8fc22e0db7fff66
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 10 19:02:42 2010 +0100

    core: init the len of sock_str attribute

commit acfc2142ed5ef3e61138792136eb32616502229d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 10 16:56:54 2010 +0100

    ctl: added parameters to control buffer size
    
    - new parameters to control binrpc buffers size:
    - binrpc_max_body_size
    - binrpc_struct_max_body_size

commit 5997048fdbefee51aebb8c996178ceb44120a482
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 10 15:56:10 2010 +0100

    htable(k): rpc commad to dump htable
    
    - htable can get big, rpc behaves better than MI

commit b69e1c96bf65a4c4f8fa6bec28699607ea03e24d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 10 14:25:54 2010 +0100

    pv(k): fixed $shv engine
    
    - shv relies on early shm initialization
    - got rid of hacks to define first in pkg and move in shm at mod_init
    - fixes 3.0 specific issues reported by Andrey 'Krieger' Utkin
    - closes FS#22

commit 836406e324036760573dd5a79a0934fabd397f50
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Jan 10 13:15:57 2010 +0100

    NEWS: notes about the shm related changes
    (cherry picked from commit 3d3d38e63a55e549e1707fce0fa1c2c189906338)

commit ecc3fd3f0599cf9fa1bb070970d730f4ab85675e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Jan 10 13:10:43 2010 +0100

    core: shm mem size can now be set in the config script
    
    shm mem size can now be set in the cfg script using
    shm=size_in_mb,  shm_mem=size_in_mb or shm_mem_size=size_in_mb.
    It must be set prior to any modparam or route block.
    Specifying the memory size on the command line (-m size_in_mb)
    will override the size from the config file.
    (cherry picked from commit 647cc9832560590adc6e20685c2d53350a932fb2)

commit 155cb4ad4642f894472e873e4a1df1872cc30474
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Jan 10 12:54:05 2010 +0100

    core: early shm init while parsing the cfg
    
     - shm memory is now initialized before the first modparam or the
       first route block. This allows using shm memory early, in
       modparam fixups or route block parsing functions.
       user and shm_force_alloc must be used _before_ any  modparam or
       route block (using them after a modparam or a route block will
       now generate an error).
     - the user in the cfg is ignored if already set from the command
       line
    (cherry picked from commit 6f72234400e119e981d5aa42e20c4432bb562524)

commit 9c657605b8b754b8d633aafb2b5ed771265b782c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Jan 10 12:50:15 2010 +0100

    core: moved shm init into separate files
    
    - shm init moved from main.c into shm_init.c and shm_init.h.
    - added a function to check if shm was already intialized
      (shm_intialized()).
    - make sure the user is set before parsing the config, if present
      on the command line (the user is needed to initialize the shared
      memory when sysv semaphores are used as the locking method).
    (cherry picked from commit 2c4ae148162c7a36f25d9a7b10fe64c7667ced31)

commit 195cdf43e8eea385330376184f8b78b7d0322780
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 10 12:09:20 2010 +0100

    sanity: print From hdr in warning message
    
    - when parsing of the header fails

commit a93f7ad1ce21413d0e2a00e4c8579f6bfe0a8a3f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 10 12:08:45 2010 +0100

    nathelper(k): print bad contact uri
    
    - help in troubleshooting bad sip clients

commit 78e8075eea603a854dcf0142dda0f1dae6c69857
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 10 12:07:34 2010 +0100

    core: more verbose when error parsing hdr
    
    - give a hint about the content parsing (max first 20 chars of attempted
      string)

commit a9e4d86edeee7b2f70b33c89c91e800aefe11da0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 8 17:16:28 2010 +0100

    kamailio.cfg: updated cfg with sample PSTN gw routing
    
    - defined within WITH_PSTN
    - calls to numbers starting with + or 00 are sent to PSTN GW
    - use of custome cfg parameter to define GW IP
    - remove preloaded Route headers for initial requests

commit 009339a4d040ca0bdc6c98441281addc523d7ba0
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jan 5 11:27:34 2010 +0100

    auth_diameter(k): remove redundant declaration of find_credentials, now in core
    (cherry picked from commit fc323d03688bc93560a56cec9b2713c57a72389c)

commit 0408f81197da38a9ab94c46698d3db10e01b39c1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 7 18:40:29 2010 +0100

    kex: aliased avp_printf to pv_printf
    
    - backward compatibility reasons
    - reported by Santiago Gimeno

commit e97f68ebe9d909f56577b3abdc305395df9db5ba
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 7 18:38:52 2010 +0100

    kex: documented missing functions
    
    - reported by Santiago Gimeno

commit 8929913f5edb519b7ed280a12728376ed872ec53
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Dec 30 15:53:12 2009 +0000

    - fix bug in encode_contact()
    - fix and extend documentation about contact encoding/decoding

commit 1e663ffa8129c4b24f21563c09a5bea4ecd65784
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Dec 30 13:51:24 2009 +0000

    - fix bug when RURI was changed before and newuri will be used

commit 9eacaacb45fe700615ac94cc3944824f1b22fdc4
Author: root <root@relay.labs.nic.at>
Date:   Wed Dec 30 13:25:01 2009 +0000

    - remove unused code
    - correct indention and make code more readable

commit 839e2fee663846f68289a519c27aef433a872afa
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 7 11:33:37 2010 +0100

    nathelper(k): fix for swap scenario
    
    A -> RTPP -> B, offer in INVITE, answer in 200 OK (SDP in INVITE+200 OK)
    A -> RTPP -> B, re-Invite on session expiry, SDP in 200 OK + ACK
    
    The from-tag and to-tag are not swapped in the ACK with
    rtpproxy_answer(). Options "sl" would do the trick also, but "s" is
    deprecated soon
    
    Patch by Walter Schober

commit 1a9f379ed66dbcc05f7750ff961c0a7a6607b0db
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 6 18:50:31 2010 +0100

    presence(k): aliased MLA to SLA
    
    - doc updated to reflect RFCs and drafts

commit 1e99795d2ddebe8a6794c3b407f96d30378b872f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 6 18:47:36 2010 +0100

    core: event parsing enahced for dialog;ma
    
    - event defined by draft-anil-sipping-bla for Multiple Line Appearances,
    folloing to Shared/Bridged Line Appearances (SLA, BLA)
    - draft is defunct but still some implementations out there

commit 7956c7387a1217016d0e5192e7583e8385b27e14
Author: Carsten Bock <lists@bock.info>
Date:   Wed Jan 6 16:53:17 2010 +0100

    Backport of the changes (see previous commits).

commit 99d5e6c0d1fa81acb0f42bae137ec256004aba5f
Author: Carsten Bock <lists@bock.info>
Date:   Wed Jan 6 16:51:59 2010 +0100

    Backport of the changes (see previous commits).

commit d8af3a4b17bf1ca71df1d977d986f407ff34cfc2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 6 15:39:46 2010 +0100

    tm: documented t_relay_to() function

commit fc59de27f87772df40a4408485a34344acbec950
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 6 14:36:55 2010 +0100

    tm: added t_relay_to(proxy, flags)
    
    - parameters compatible with t_relay() in K old version
    - proxy value can be: [proto:]host[:port]
    - flgas can be 0x01, 0x04 or 0x05, 0x02 flag not supported
    - all or any of the parameters can be omitted

commit a511ceccfb593736d44b7701fd07f3f9b5c3a104
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 6 12:32:01 2010 +0100

    tm: documented t_replicate() functions

commit 64e19a6a44a21adf6f743420a26a48cc3acd099a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 6 11:57:24 2010 +0100

    tm: added t_replicate(uri)
    
    - the parameter has to be a valid SIP uri
    - it can be given via a script variable
    - K compatibility mode
    - reported by Santiago Gimeno

commit d1e89c65a9412d2a0560c5699a34dd01e231a2d9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 5 18:40:17 2010 +0100

    db_oracle: use PARAM_TYPE_MASK when checking param type

commit 9cf36478222aaf573a6cd7b65e6a4fd6227eb8cd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 5 18:27:46 2010 +0100

    snmpstats: fix param type checking
    
    - parameter type is given from definition of params not from modparam
      value type, resulting in mismatches for parameters that have
      USE_FUNC_PARAM flag set
    - reported by Santiago Gimeno

commit d4db8304926d30a4244b9ee05d21b5614eae5f94
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 4 21:32:24 2010 +0100

    core: define module_loaded to use find_module_by_name
    
    - it was declared but not implemented
    - in use by snmpstats and perlvdb modules
    - reported by Santiago Gimeno

commit 15ece92703aa691333d06a79b7e9901bf893bf74
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 4 21:11:29 2010 +0100

    topoh: documented mask_ip parameter

commit ff748db23dfdbf022d37071181628ddf5591b58b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 4 20:15:12 2010 +0100

    topoh: new mod param mask_ip
    
    - allow to set the value of IP address used in masked URIs
    - reported by Klaus Darilion

commit af5463d865bde28d1a2f977d0c9bd9347588b6e0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 4 14:35:19 2010 +0100

    kamctl: regenerate db creation scripts

commit 700fb1a97a5c6c089fce85f547117286644872b5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 4 14:32:19 2010 +0100

    drouting: updated db schema from master

commit 0292a4b5f2cb0564649699c592e51a06edbd91a4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 3 13:31:23 2010 +0100

    kamctl: added new db table definitions
    
    - sql to create drouting tables for mysql, postgres and oracle

commit df46a824d87dfcf839c175c77addda9eed533c03
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 3 13:29:58 2010 +0100

    srdb1: version table updated

commit 53a25f097d127eea7fef3c3c32f7f24421aaad15
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 3 13:27:57 2010 +0100

    drouting: adding db table definitions
    
    - built based on readme
    - needs further updates as the code is ahead of documentation with what
      tables are used and their structure

commit 0d88fc527d5ddb90e3d52ca8f369bdcfaab63ed4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 3 13:25:51 2010 +0100

    drouting: regenerate readme
    
    - it was out of sync with docbook sources
    - use entity for application name and corrected db url

commit 94f834041eb43121e6750cf524c32225aaf1c80d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 3 12:38:48 2010 +0100

    drouting: lookup route block by name
    
    - routes are identified in 3.0 by string name
    - if name is "0", do not execute the route (this is the main one) for
      backward compatibility
    - based on patch by Andrey 'Krieger' Utkin, FS#24

commit 455cc830b07621bda68cde3689430bddcf94b3c1
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Dec 31 14:57:01 2009 +0200

    modules_k/nathelper: removed garbage from documentation (credits to Klaus)
    (cherry picked from commit c16ac01fc138b6e17b90853dc4d0b885d6970d59)

commit 5b03a409076e5ccf1b0bcf356ce7365972d134d2
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Dec 30 22:47:35 2009 +0200

    modules_k/nathelper:  improved handle_ruri_alias() documentation
    
    - Improved handle_ruri_alias() documentation based on suggestion by Klaus.
    (cherry picked from commit 7bb718bb680dd5faf398217583796247bb51813a)

commit 8bf879a1d827f6c8210e704c2f1c149e27309ef2
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Dec 30 19:22:14 2009 +0200

    modules/lcr and modules_k/nathelper: fixed compiler warnings
    
    - Fixed compiler warnings that went earlier unnoticed, because I didn't
      have -Wall gcc option.
    (cherry picked from commit 8b53323dde13c166676378f21f402a79d36b5a23)

commit 96a6391c00ab4de2c9d331dda770640554f38fe2
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Dec 30 12:19:03 2009 +0200

    modules_k/nathelper: handle_uri_alias() alias handling fix
    - handle_uri_alias() now finds ;alias r-uri param even if it is not
       the first param.
    (cherry picked from commit 9d98ca32bb131c0fb190e012ed0bff3f9a26557a)

commit accf708dc5878f387ec1f5769b83b2760a1d2539
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Nov 16 00:45:27 2009 +0200

    * modules_k/nathelper
    
    Added two new functions add_contact_alias() and handle_ruri_alias() and
    two new pseudo variables $rr_count and $rr_top_count that can be used to
    implement tcp connection sharing and produce correct Request URI for
    in-dialog requests to NATed UAs.
    (cherry picked from commit a85444180860da454831c5c0b366a6cc2f7f189f)

commit 68c73622f6ce4d5413e2b39abfb58e6af7913425
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 20 18:48:37 2009 +0100

    topoh: updated README
    (cherry picked from commit 63664db5030d1a6c5e700e645cebac9238e985ba)

commit e37d76d8958107d949f230178d79408ba35bd8e6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 20 18:44:33 2009 +0100

    topoh: update Replaces header
    
    - case when call-id is masked
    (cherry picked from commit f03706ce3b8670d052619ac4a38fda4fa35bedfd)

commit 0583dc249d72b36fe93763542e861d881fb0830f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 20 17:50:51 2009 +0100

    topoh: code to update Refer-to URI
    (cherry picked from commit e9400dba371252edef970407be7b85dbe45e1ea3)

commit aa33e011e20e5a5faa5c15d8e64eaf875aaeb788
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 20 12:49:59 2009 +0100

    topoh: callid prefix can be set via param
    (cherry picked from commit a8f1190d0a400c34809af798a482311539b15527)

commit 89c8c1733777f48a94004eedb6a891717260c0e5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 20 12:46:10 2009 +0100

    topoh: add prefix to encoded callid
    (cherry picked from commit 9d5a1ff7736d49794d5ca0f29e118d90f0ee5b68)

commit 8a43c6fcb21ff7aeb097b1d8791bfc3d8f020bcb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 24 17:11:58 2009 +0100

    core: usage of drop in onsend_route for Kamailio compatibility
    
    - in K exit and drop have different behavior in some cases
    - fr onsend_route exit means stop executing the actions and drop does in
      addition discard sending the message

commit aedb1ee1f3e43341fe507f41ca12208c2dec3cf7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 24 17:10:44 2009 +0100

    pv: completed $snd() pv with buf and len
    
    - missing parts of available info about message to be sent

commit e024da1fb6cd4b74d68760070f9e159356d93b0e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 23 22:34:28 2009 +0100

    tm: further fixes for t_drop_replies()
    
    - use a dedicated variable replies_dropped to signal that replies were
      dropped instead of using drop_replies marker

commit 6c3356b6605f4e85f0692c6194ad8a5f5ef06fa9
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 23 20:44:31 2009 +0100

    tm: safer handling for local transactions and drop_replies!=0
    
    - if all the replies are dropped in the failure route and the
      transaction is local, return the current reply. This makes the
      code more future safe (currently there is no way for the failure
      route to be executed and hence for replies to be dropped for
      local transactions).
    
    - check for FAKED_REPLY in local_reply() error path.
    (cherry picked from commit 0fe25e507eccac409f5094cff4240ee5d3224666)

commit cb1866ee7b23688d12b222d503b1709f16f75a12
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 23 17:34:09 2009 +0100

    tm: updated doc for t_drop_replies()

commit f20be7f89fe240b85fe3600bb9e32b6c996eab87
Author: Libor Chocholaty <libor@iptel.org>
Date:   Wed Dec 23 17:06:36 2009 +0100

    sctp: stats: don't increment ASSOC_SHUTDOWN on COMM_LOST
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>
    (cherry picked from commit 642ff762480e3c16ef417b106ed5a2b64d126d88)

commit 3e1130d1513ad93ed032efaccc1b810cfca5039f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 23 16:58:45 2009 +0100

    sctp: SCTP_STATS_ASSOC_SHUTDOWN
    
    Statistics placeholder for counting shutdowns.
    (cherry picked from commit 8dfdb3c7a9577438ced848cbbf5d845052ba5032)

commit bc2d3a3ad8e7cab09d57992be58c743f6e6ae4eb
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 23 16:46:18 2009 +0100

    tm doc: local_ack_mode documentation
    (cherry picked from commit c3a38caa6d669abd209b5a40260c7c13e49484a9)

commit 0f09666aa6d291cc6cba2f5047dd4ac1f4eec254
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 23 13:16:01 2009 +0100

    tm: new param: local_ack_mode
    
    local_ack_mode controls how local 200 ACKs (ACKs to 2xx replies
    for local transactions, created via t_uac*) are sent.
    There are 3 possible modes:
    - 0 (default) - ACK is sent according to the rfc (the next hop is
      found using the contact and the route set and then dns
      resolution is used on it).
    - 1 - the ACK is sent to the same address as the corresponding
      INVITE branch.
    - 2 - the ACL is sent to the same address as the source of the 2xx
      reply.
    
    Modes 1 and 2 break the rfc, but are useful to deal with
    some simple UA behind the NAT cases.
    Note that mode 1 is not similar to generating ACKs for negative
    replies. Even if the ACK will be sent to the same address as the
    INVITE, it will contain the correct route set and uri.
    (cherry picked from commit 49218e800df4a349fae240733963ca4b46bdca3a)

commit a883a0b2501ba2b25ca87994d4c211f75a556ebe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 23 17:24:30 2009 +0100

    tm: fix drop reply behavior
    
    - Kamailio default behavior after failure route was to drop previous
      received replies. However, if the failure_route didn't add a new
      branch, resulted in a 500 TM reply error
    - thanks to Ricardo Martinez for reporting
    - credits to Andrei Pelinescu-Onciul for troubleshooting and prviding
      the fix: a new default mode for Kamailio (3) which does not drop
      previous replies if no new branch was added

commit d35df0cdab10aa83b3ceedde3a8cde8baeabfc79
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Dec 19 23:26:01 2009 +0100

    pua_dialoginfo: use contact addresses in document
    
    - for local and remote targets
    - patch by Santiago Gimeno, FS#20

commit 1f64908ea0e6ad14ad6d209ba0eeb7b11c6b1e18
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Dec 19 23:02:32 2009 +0100

    dialog: new column to hold request uri
    
    - table version set to 4
    - regenerated db creation scripts

commit 09d1bdc38b51619c65c6a9ec8f293cf9c395c6c1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Dec 19 22:58:26 2009 +0100

    pua_dialoginfo: patch from FS#18
    
    - applied patch from Francisco Javier Lizaran Vilches
    - use r-uri in published document

commit df950f2a01f5f3d3da04e84a4f4a1cb810def038
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Dec 19 22:44:28 2009 +0100

    dialog(k): patch from FS#18
    
    - reworked part of patch from Francisco Javier Lizaran Vilches
    - add r-uri to dialog structure
    - r-uri value can be specified as PV via parameter, default is $ru
    - for dlg_bridge, r-uri is same as to-uri

commit 78e097fb1f185796abeff27e5978bc82bdb6526f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Dec 19 19:54:16 2009 +0100

    Makefile: fix name of cfgutils in group kstandard
    
    - wrong name having '_' caused the module not to be packaged in debs
    - reported by Klaus Darilion

commit 72ce05ee4fab38d7dd16934d93b5c05ed619b432
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Dec 15 00:58:14 2009 +0100

    makefile: fix make bin &  basedir
    
    - make bin and make sunpkg fixed (basedir was not an absolute
      path)
    - auto-transform basedir to an absolute path if it does not start
      with '/'
    - fix unexported makefile_defs, after loading the config in the
      main Makefile
    (cherry picked from commit 31442b832dd4fc606833a06fb92d90f62af9f1b0)

commit 1203f6771a08e499ad0ef39d18f6096814db537a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 15 22:58:10 2009 +0100

    kactl: cisco_restart cmd update to latest t_uac_dlg
    
    - reported by David at lublink.net

commit 7c6600c007be55263b48ea1114cbecab86347076
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 14 20:50:17 2009 +0100

    nat_traversal: link with lib kcore
    
    - include lib/kcore/statistics.h
    - fix undefined symbol for register_module_stats
    - reported by Ricardo Martinez

commit a1b15f1289db84bdf8e3da11fa33af9ae0501f3c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Dec 14 13:00:07 2009 +0100

    core: fix parsing for avps with the same name as a pv class
    
    When a pv lookup fails, sometimes the pvspec is partially filled
    which, if not clean might mess-up the avp flags in the lval union.
    E.g.: $avp="..." caused problems (avp was marked as RE name).

commit 0586447a736900832b116f3a3826ba01d9969b6a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 14 10:22:25 2009 +0100

    dbschema: regenerate db creation scripts
    
    - get the updates to permissions and lcr tables

commit 256423a131e3cf71f20591f3f9066b30bd036726
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 14 10:19:38 2009 +0100

    perl: install Perl libs along with module

commit 72692ea1af122b12e1071e364063fcc1a182cbd0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 23:09:29 2009 +0100

    debian(k): packaging for 3.0
    
    - updated deb packaging specs for 3.0
    - use SR makefile groups to build the packages
    - all module packages are named kamailio-*-modules
    - kamailio-dbg not packaged for now

commit 5b46bc809a5bc970f7ad7334be33bf0db723807b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 23:08:44 2009 +0100

    kamctl: install of berkeley and oracle tools

commit 6ecc6c13f63dab04083f61aa1b7ee767f9441ee0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 23:07:27 2009 +0100

    tls: name the certificates based on $MAIN_NAME

commit 669e52df21b5fe54d1968db94628859c5291681a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 23:06:35 2009 +0100

    db_oracle: install kamctl files

commit b3d47d4912dd8b64c5bce56be574aafe2340605b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 23:06:15 2009 +0100

    db_text: install kamctl files

commit 1daa56fbec81034affeaadcfa97a1373413c68ea
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 23:05:27 2009 +0100

    db_berkely: install kamctl files

commit 7922ddd9442e27028afae8e9d342bb31e383f624
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 23:04:49 2009 +0100

    db_postgres: install kamctl files

commit f90750795260e753051e75f1918e0fd0ede1212f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 23:03:21 2009 +0100

    db_mysql: install kamctl files
    
    - done only for kamailio flavor

commit c79057fb794171b5acb46c2811b97dc22158dbf2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 22:13:45 2009 +0100

    kamctl: mysql specific files installed by db_mysql module

commit 5ad4520bfdec47b6e3a85f9e120095b00eeb2aca
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 20:08:01 2009 +0100

    use pkg/$NAME/debian to generate deb
    
    - priority over pkg/debian
    - good for generating debs per distro name

commit ae8f695bcb0a1dca8cd55fd6fd5214d40edb7154
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 20:06:12 2009 +0100

    added groups to match kamailio packaging

commit b40bf31bcaa3c285687ce7d272f2e65810b4de9b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 14:32:09 2009 +0100

    version set to 3.0.0-rc3

commit f47abc04445c660e790a6c44f451a54601a4dbbf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 11:27:57 2009 +0100

    core: fix the fixup_spve_uint() and fixup_spve_str()
    
    - error introduced with the new design in SR of fixup functions set

commit 5ff3c06aa9c216ef9b2168c0163f00017eb4718d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 10:33:33 2009 +0100

    tm: unlock replies in case of drop
    
    - needed after yesterday fix from Andrei

commit a75b03f72e42740b410815330c895f16368895bd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 10:29:50 2009 +0100

    core: fix define of rval_get_int_handle_ret

commit e1c36fdfc9b8f30a4271ee6823a2288dcf9c3833
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 11 10:29:06 2009 +0100

    core: use NAME to build User-Agent and Server headers

commit abceaefbf4276d48478681e263da8309df8164d1
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 9 11:08:18 2009 +0100

    module groups: add k modules to the presence group
    
    - added kamailio modules to the presence group:
      presence presence_dialoginfo presence_mwi presence_xml
      pua pua_bla pua_dialoginfo pua_mi pua_usrloc pua_xmpp
      rls xcap_client.
    - removed obsoleted ser presence modules: pa rls.
    (cherry picked from commit 6eccf69de98426c55fdd3952e11357849d4973f2)

commit 9788f89cca72f2d569512c618ff845e4814faacd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 9 10:59:28 2009 +0100

    rls(s): obsoleted
    
    Moved pa to obsolete/ because it does not compile (needs upgrade
    to the current DB libs) and it does not have a maintainer.
    (cherry picked from commit 37bf1610f9a2f5e4fd40cbacaf2705f5437e9daf)

commit 628af85679da9b6d95561fd099e9ad65fcea2c86
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 9 10:53:51 2009 +0100

    pa(s): obsoleted
    
    Moved pa to obsolete/ because it does not compile (needs upgrade
    to the current DB libs) and it does not have a maintainer.
    (cherry picked from commit 32aee80a3059df17aeae1970471557e57bdba557)

commit 7d8c22046b2e9e5bc87b78a00ba7cff7390f317c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Dec 4 18:16:25 2009 +0100

    makefiles: clean-utils and proper-utils fix
    
    - clean-utils and proper-utils now work both from the main
      directory (for utils compiled by make utils or installed by make
      install-utils) and from the modules directories (for utils
      installed by a module)
    - make utils now works in module directories (compiles utils that
      would be installed by the module)
    (cherry picked from commit b8e67fd6d759b1a3a2f6acd61e0b7f8706a98d73)

commit 07b90c04d3b92e2558e61b772c7eed4e4f376ca4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Dec 10 18:35:17 2009 +0100

    tm: onreply_route executed under lock to protect the avps
    
    Quick fix for the onreply_route possible avp corruption: execute
    the onreply route under lock.

commit 346b6cc15caa05934a86be39b1c0867356439917
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Dec 9 10:19:54 2009 +0200

    modules_k/registrar: Removed tcp_persistent_flag module parameter.
    
    - Commented out tcp_persistent_flag module parameter, because sr_3.0 tm
      does not support it.
    - Removed the flags also from module README.
    (cherry picked from commit 021e8d571f81ccd212004e5efee2808bb7790c96)

commit bf31febc3f17d085dbdd78df12ac6bb01c308744
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Dec 4 17:39:46 2009 +0100

    sercmd: fix LIBS when installing from a module
    
    Don't rely on LIBS having a valid value, since we might get called
    from a module Makefile. Use needed libs in function of $(OS).
    (cherry picked from commit b0f00c3348b9c1429f6df5b39dcbd1ca939e9dfc)

commit 9fdd69e863d95757655c561cd525c42ee7570b65
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 2 20:15:36 2009 -0500

    core: pid_t warning fixes for solaris
    (cherry picked from commit ca351abe9bd52f24003a96ed4f9a420739728496)

commit 4f8610b879354f88e22aa58c8b66bfe06edf9d2e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 2 20:12:40 2009 -0500

    parser: fix for solaris yacc compatibility
    
    %prec was used in a wrong way (not at the end of the rule),
    causing problems with some yacc implementations.
    (cherry picked from commit 835c266e5a5a421fb8b65077e053e06e43fb326a)

commit ad63bc6258113fb031c888ce31c65114e3bacfa0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 2 20:14:54 2009 -0500

    ctl: fix #includes on solaris
    (cherry picked from commit 4920290b90947fa59f7e794fc92abd6796950c33)

commit 57fbd6d317c075ecabce8d082c30d7b3d027f0fc
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Dec 2 20:07:13 2009 -0500

    makefile: fix assembler detection on solaris
    
    Assembler test waited forever for input (missing /dev/null input
    redirection for as -V).
    (cherry picked from commit 0f7ec046ce88202e508ced7c1b1d544f05529758)

commit 1db01a26f04805a1a0846f1bb9f9f121f6a42cf7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Nov 30 12:02:37 2009 +0100

    sctp: fix cfg.set_delayed* setting some config options immediately
    
    - all the runtime cfg options that involve setting socket options
      are now set using a per-child cfg callback with
      CFG_CB_ONLY_ONCE and not in the value fixup function. This fixes
      cfg.set_delayed* (up until now it did set these options
      immediately and not after cfg.commit).
    - init_max_timeo valid range fixed (from 0-1024 to 0-2^30).
    (cherry picked from commit cf1ba69f5b06fda8054da75d52a1ba187f5080e8)

commit 9d1f0c69a0ac832c00245ec92c2ec431c1241e97
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Nov 16 19:41:02 2009 +0100

    script engine: verbose conversion-to-int errors
    
    - more verbose errors (all of them contain now the config file
      position for the error).
    - integer conversion errors will now by default log a warning
      message. Like before they won't cause the expression evaluation
      to fail, they'll just evaluate the failed conversion to 0.
      The behaviour can be changed using the defines at the top of
      rvalue.c. To restore the old behaviour (no int conversion error
      message and error ignored), comment out the following defines:
      RV_STR2INT_VERBOSE_ERR, RV_STRINT_ERR, EVAL_GET_INT_ERR_WARN,
      RVAL_GET_INT_ERR_IGN. For more info see the comments in the
      file.
    (cherry picked from commit c744f71c858f34d41741d90e0d5cb05e48cf8016)

commit 3ed668500c9a0f0d2f864f5a56cf7fa886f8457c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 2 19:01:09 2009 +0100

    tm: drop replies behaviour based on cfg compat mode
    
    - default behaviour for #!KAMAILIO is to drop replies after failure
      route to avoid selecting same reply during the next failure event
    - for the rest of cases all replies are kept and used to select the
      code for new failure route (SER compat mode)
    - t_drop_replies() can take one parameter
    	- 'n[one]' - do not drop any reply (good for #!KAMAILIO mode)
    	- 'l[ast]' - drop replies received during last serial forking step
    	- 'a[ll]' - drop all replies
    
    	- if the parameter is missing, then will drop all replies

commit 4ef016026292c71d0ad731a8895c6b89efe1c769
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Nov 30 12:29:20 2009 +0100

    presence(k): fix off-by-one memory allocation
    
    Due to some missing '()' ( (...)?resource.len:event.len + 1
    instead of ((...)?resource.len:event.len) + 1 ) sometimes the
    memory allocated was less with one byte then what was needed.
    The fixed version also replaces ?: with MAX_unsigned() (does the
    same thing and it's easier to read).
    
    Reported-by: Andres Moya  andres.moya.i gmail com
    (cherry picked from commit 229bd1f517cb9177dc731929c31153b2b9513215)

commit 9dca82405261dd925f845a98f2da26f7b1d12b54
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 27 14:32:29 2009 +0100

    dialog(k): avoid double free
    
    - rested current dialog pointer when distroying dialog to avoid double
      free done from post script callback
    - reported by Klaus Feichtinger

commit ee51f2f714d52d6cc36417bb65b764d718514984
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 26 21:29:45 2009 +0100

    core: set response functions list after mod init
    
    - some modules set the response function in mod_init
    - case of nathelper(k)
    - reported by Andres Moya

commit 0cab381fc93e53ca039ddbfa8ae6546fa14be066
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 25 18:21:22 2009 +0100

    tm: fix for dialog(k) module workaround
    
    - check if types!=TMCB_MAX if callback registration checks
    - TMCB_MAX is used to store pointer to dialog in order to clean it
      quickly

commit f7e79e649988c787864594092b297865b0cdfb67
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 18 08:55:49 2009 +0100

    updated debian lenny packaging files for K 3.0
    
    - credits to Jonas Bergler <jonas.bergler [at] staff.snap.net.nz>

commit 9b482424cb8aff4050426033908e7e243f03ae83
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 16 08:50:31 2009 +0100

    version set to 3.0.0-rc2

commit d0f78f622c9223f58a037c6f0dc827240ab68c6a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 12 16:29:40 2009 +0100

    sctp rpc: core.sctp_options debugging version
    
    core.sctp_options can now have 1 optional parameter. If the
    parameter is missing it works as before: displays ser's idea of
    all the sctp config options. If the parameter is present it should
    have one of the following values: "default" (default send socket),
    "first" (first sctp socket) or  addr[:port]. In this case the
    kernel sctp options for that particular socket will be displayed,
    with 0 used for the options that are userspace only.
    E.g.:  sercmd core.sctp_options 127.0.0.1
    (cherry picked from commit 44226358e60f5b69a4c383c892003ad2226c9089)

commit 306ef4698b53fcb616ef53baa7dead895771e46d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 12 17:24:27 2009 +0100

    core rpc: core.shmmem can take an optional size parameter
    
    core.shmmem can take now an optional size parameter, which can
    have one of the following values: b - bytes, k or kb - kilobytes,
    m or mb - megabytes, g or gb - gigabytes. By default (no
    parameter) the values displayed are in bytes. Note that when using
    something different from bytes the value are truncated (no
    floating point).
    The new parameter can be used as workaround on 64 bits systems
    when sr is started with more then 2Gb of memory (due to the RPC
    interface limitation to int32 in this case the values displayed
    would be negative or 0).
    E.g:
    sercmd> core.shmmem k
    (cherry picked from commit 02eec212e4eaf999de4162287232c172760ca9d4)

commit 1b83a39eafb5c2ff77f3f8028dbcb39e864f3d5e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 12 16:24:08 2009 +0100

    sctp: workaround SCTP_DELAYED_SACK lksctp typo
    
    - workaround typo in linux libsctp api: SCTP_DELAYED_ACK is
      used/defined instead of SCTP_DELAYED_SACK.
    - to support older kernels (< 2.6.27), if setting/getting the
      socket options with SCTP_DELAYED_SACK fails, fallback to
      SCTP_DELAYED_ACK_TIME for sctp sack_delay and report an error if
      the user tries to set sack_freq (not supported on older
      kernels).
    - split sctp_get_os_default() into sctp_get_os_default() and
      sctp_get_cfg_from_sock() for debugging purposes.
    (cherry picked from commit cc16495666e948f2c18dc0bacebecfac85ff59a5)

commit 42dcb074fc4d179b2e20c4abd8171833207db969
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Nov 12 08:11:57 2009 +0200

    modules/lcr: use append_branch instead of do_action for appending branch
    
    For some reason appending branch using do_action had stopped working.
    Instead of trying to find out why, replaced do_action() call with
    append_branch() call.
    (cherry picked from commit e3a8a650f6b3c7a63d200c443f82c1494f6f4e07)

commit c25d7a7a03cedee7d691196aff3549a1239d4e5a
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Nov 11 19:47:28 2009 +0100

    make: db_flatstore moved in the standard package
    
    db_flatstore was in db_modules package and ser standard package.
    I think it should be removed from db_modules packages as it does
    not have any dependencies on db-libraries.
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>
    (cherry picked from commit efaf2651e318574289579730c93d6a73d4734de4)

commit c23c5575a0019cd7ba6f44b34dfc96c8f74114c7
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Nov 11 19:52:55 2009 +0100

    deb: fix mysql scripts install path problem
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>
    (cherry picked from commit cc88ded53d3ba8e8140390f33f3759a127ad9dbd)

commit 33bfc5aeeaa55c93842635bb41da30745673854b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 15 14:32:40 2009 +0100

    print the cfg file in fixup error message
    
    - line is not enough when include_file is used

commit c92e49f3eb145c3767e996d21717d20613a899d5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 15 12:52:36 2009 +0100

    uac(k): use type to detect www/proxy_authenticate hdrs
    
    - reported by Mangust (mangust2), SF.net #2897594

commit 208e5c3d910885efc83acab4f06b66b27685332c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 15 12:51:27 2009 +0100

    print line for fixing action error
    
    - reported by Juha Heinanen

commit 99d434e5c2ff2771a5e6c486630e859d5bcc6c5f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 15 05:12:51 2009 +0100

    route(1) changed to route(RELAY)
    
    - reported by Mangust (mangust2), SF.net #2897872

commit 42d70e2e4826be99a063a3d900b167a62ae12985
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 21:51:47 2009 +0100

    xlog(k): updated log levels
    
    - new level L_BUG
    - updated the documentation to match the code
    - L_CRIT uses in the code L_CRIT2
    - L_CRIT2 can be used in config as well, detection is based on the third
      caracter
    - credits to Klaus Darilion

commit 1efaa9c19279a5dded570fb60621b45191d46027
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 13:57:22 2009 +0100

    dialog(k): set dlg context after pre script callback
    
    - applies for the case of timeout route
    - the prescript callback resets it otherwise
    - reported by Nathan Angelacos, SF svn # 5927

commit d4a1d5146773eac1d82b8abb39747cc8ec427801
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 13:45:16 2009 +0100

    pv: reset local var for tobody trans
    
    - from SF svn, #5951

commit 337b0e067dbec8965b176a469bcb2104f2bd870c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 13:35:20 2009 +0100

    pv: return transport parameter value for $rP
    
    - reported by Alex Hermann, SF.net tracker #2892560

commit 93b42945ad2a57c84626cdd08ec40aa17c06036d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 13:33:03 2009 +0100

    remove some modules from excluded_modules list
    
    - they compile and were K default

commit d49abf1ec44ca63a36ef1149622bf1b706d17b2a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 12:30:51 2009 +0100

    uac(k): set callback type for local requests
    
    - type has to be TMCB_LOCAL_COMPLETED to execute transaction callback

commit dfefc8a15e9b059cf16d4930d12437948307568a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 12:30:31 2009 +0100

    rls(k): set callback type for local requests
    
    - type has to be TMCB_LOCAL_COMPLETED to execute transaction callback

commit ab31636c85552d48610c65d65afd4eaa126cf6a0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 12:30:18 2009 +0100

    pua(k): : set callback type for local requests
    
    - type has to be TMCB_LOCAL_COMPLETED to execute transaction callback

commit 2e88092d23443985f7d8459c2815cf91f68d752e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 12:30:02 2009 +0100

    jabber(k): : set callback type for local requests
    
    - type has to be TMCB_LOCAL_COMPLETED to execute transaction callback

commit 9eb765ffc7f6e9eac99b7f998b37f56338d8c285
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 12:29:48 2009 +0100

    imc(k): : set callback type for local requests
    
    - type has to be TMCB_LOCAL_COMPLETED to execute transaction callback

commit 598aea444e9f8b2a1c610daa363723e2d38496b7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 12:29:31 2009 +0100

    presence(k): : set callback type for local requests
    
    - type has to be TMCB_LOCAL_COMPLETED to execute transaction callback

commit 0bcc7d5f76ec897f748857befbbdcdc265d0b970
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 12:29:09 2009 +0100

    dialog(k): : set callback type for local requests
    
    - type has to be TMCB_LOCAL_COMPLETED to execute transaction callback

commit 58c75326614ccc3805640c2a15d95b4ad5e8e6d4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 12:27:44 2009 +0100

    dispatcher(k): set callback type for local requests
    
    - type has to be TMCB_LOCAL_COMPLETED to execute transaction callback

commit d8dde2fe2e7004c69a6241a054c5febe73548267
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 6 11:42:35 2009 +0100

    msilo(k): set tm callback type for sent messages
    
    - it must be TMCB_LOCAL_COMPLETED
    - otherwise the callback is not executed when transaction completes
    - delivered messages were not deleted from db
    - reported by Juha Heinanen

commit 977bb6a680286eeb1eaad4d0466fdb09f5778201
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Nov 6 05:58:59 2009 +0200

    core: added id to every field of gw table schema
    (cherry picked from commit a3a3ce31042a025fe93520350e53b049d5ef850d)

commit cecadda371383083e083ecebaba4f2c456a09f4d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 16:21:35 2009 +0100

    tcp: use the forced socket ip as source
    
    - if a socket is forced always use the forced socket ip as source
     (if a connection exists with different ip as source, open a new
     one with the forced ip).
    (cherry picked from commit 6fcba958595c5189c1b9d97c8fc4c9f434a3c7ad)

commit 3509dab67e4df6d737da4f1c48e2f7d0563b2d4c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:19:29 2009 +0100

    tmx: pv_t_copy_msg: copy also the send flags
    (cherry picked from commit 2c3aaa7aad0907a23e7f5d5bb3e743d25f734faf)

commit 88372eca71900d4f3d2c1d866a65fc513862bc45
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:17:56 2009 +0100

    textops(k): msg_apply_changes: preserve the send flags
    
    - restore also the msg send flags
    (cherry picked from commit 79ba45449704df8fd21740b216fed710e1bd5101)

commit a0015a9d79a78047ce808442ad3e800b7eca1f78
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:17:15 2009 +0100

    seas: use set_force_socket()
    
    - use set_force_socket() instead of msg->force_send_socket
    (cherry picked from commit 710b07269cc63a7ddf7323d68bcb619bd4d63816)

commit a48787f281620e34b684dda1a19d7de49553d8ed
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:16:44 2009 +0100

    rr(k): use set_force_socket()
    
    - use set_force_socket() instead of msg->force_send_socket
    (cherry picked from commit bae241c28017b9a764876aee942065b941f28922)

commit f52ede274acf434b223919ef35c5e750f796ffa3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:16:05 2009 +0100

    registrar(k): use set_force_socket()
    
    - use set_force_socket() instead of msg->force_send_socket
    (cherry picked from commit f2ba4e06b008ac5fcc0c650761f2e7f980292a6e)

commit 7f416129580ded586b8d1f5ec0be2c1df7175a21
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:15:33 2009 +0100

    pv: use set_force_socket()
    
    - use set_force_socket() instead of msg->force_send_socket
    (cherry picked from commit d41be35145a2f049c574d183771ea7102563e8af)

commit 1fa3bdab6163b1301fcd6f10ffd08304b0723859
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:14:31 2009 +0100

    kex: use set_force_socket()
    
    - use set_force_socket() instead of msg->force_send_socket
    (cherry picked from commit 097bdc69d58956e1678b1d6776d60187b079b731)

commit 2c3439ade89c5cddf601653603510c0fab4be5c5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:13:36 2009 +0100

    domainpolicy: use set_force_socket()
    
    - use set_force_socket() instead of msg->force_send_socket
    (cherry picked from commit 67b7508a1c8964abbf55f3f09363a45f8aa871f8)

commit 5107ad3a9df7a644f4ec1f79cbc363208b0519d8
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:12:52 2009 +0100

    rr(s): use set_force_socket()
    
    - use set_force_socket() instead of msg->force_send_socket

commit a2af320d2e6cf177b1ba855fa9e1098c48787c09
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 15:11:53 2009 +0100

    registrar(s): use set_force_socket()
    
    - use set_force_socket() instead of msg->force_send_socket
    (cherry picked from commit 6054da6272702ce9ab3f7c48b468bf3fefe16b03)

commit 78e168c98b2bbc923bcfe7365c0343a566d557a4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 14:53:55 2009 +0100

    tm: use set_force_socket() instead of msg->force_send_socket
    (cherry picked from commit d525316e8697533bea40a0e71a150d870caa1d7a)

commit 43b0a4a3321ef8c14348b31300bd0aec15eff2be
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 14:48:41 2009 +0100

    tm: preserve forced sockets and send flags during dns failover
    
    - fix for branches introduced as a result of dns failover not
      preserving the forced send socket.
    - dns failover branches now preserve also the original branch send
      flags.
    (cherry picked from commit 35755149a5baa028e5b0e441cebebd0d25d6063b)

commit d2669142fa6ab65adebdb5f01aa71d7703ec2567
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Nov 5 14:43:38 2009 +0100

    core: extra flag when forcing a socket
    
    - when forcing a socket set an extra send flag
      (SND_F_FORCE_SOCKET), so that later we can tell if the socket in
      the dst structure was forced or not (useful for forcing a
      specific source ip on tcp or for keeping the forced socket
      during dns failover in tm).
    - added set_force_socket(msg, sock) and reset_force_socket(msg)
      macros that should be used instead of directly setting
      msg->force_send_socket (they take care of any extra work, like
      setting/resetting flags).
    (cherry picked from commit 8fb1a2121ebe5c17681e7921cd96d3fe9a5dab80)

commit dc2361c509d71d30d82ce6f268f3fd6b3fa28b44
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Nov 2 15:35:42 2009 +0100

    core: kamailio mode config parser fix
    
    - fixed bug in parsing pvars without (), when in #!KAMAILIO mode
    
    Reported-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit e494c2c2dbc750f2646f626bed95907ee91db8af
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 2 15:18:29 2009 +0100

    cfg parser update for KAMAILIO compat mode
    
    - now is same behaviour as for MAX compat mode

commit 2a34921ba091b10c201f330aa2f7bea336708231
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 2 15:16:16 2009 +0100

    tm: auto-correct timeout values in K compat mode
    
    - if the value of timer parameters is less than 120 then use T*1000
    - SR TM use mili-seconds instead of seconds like in K 1.5
    - print warning message if such case happens

commit 36c4036bbfa26f34be8c434d94b17e75bb6b2bef
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 2 14:49:06 2009 +0100

    define kamailio compatibility mode
    
    - #!KAMAILIO at the top of config file

commit ed9c6128fdd588f5d9aa19ad666db36cfc0c788d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 2 14:46:17 2009 +0100

    tm: avp style for parameters
    
    - when K config compatibility is defined, TM avp parameters use the $avp(name)
      format. e.g.:
    
    ...
    modparam("tm", "fr_timer_avp", "$avp(i:10)")

commit 78f069c3726085902101a55d3bb98f0be7549b60
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 1 14:06:04 2009 +0100

    core: PAI and PPI parsing support fixed
    
    - use a new function to identify hdr type instead of 'case' construct
    - reported by Juha Heinanen

commit bff36ca8343070fcb51ac76a6f5fa21521ffd314
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 31 10:31:18 2009 +0100

    core: dset minor cleanups
    
    - get_request_uri() is now inline and uses GET_RURI
    - DBG msg removed
    (cherry picked from commit cbf1b7793d1b3f7d44b38144608905b90568251b)

commit ce764c910789bdc977452895c9faaeea7cb8078f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 31 10:27:43 2009 +0100

    core: append_branch() sets also the send_socket, path & flags
    
    - the script append_branch() sets also the new branch send_socket
     (if forced), path vector and branch flags, making it more
     compatible with the kamailio version.
    
    Reported-by: Juha Heinanen  jh at tutpro com
    (cherry picked from commit 394e061f8c582a4e146603934ef101f3bcd479db)

commit a903310918e975c6f53f99e4d42c988baac28fae
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 31 07:44:03 2009 +0100

    core: re-initialize branch 0 flags for each new message
    
    Fixes branch 0 flags being "remembered" from previous script
    invocations.
    
    Reported-by: Juha Heinanen  jh at tutpro com
    (cherry picked from commit c6dd54e8500b131a9dd53593afe009976ff3927f)

commit f4cb4afc8173e209dbd7a6a522d3b10cc8c5c0ef
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 22:38:21 2009 +0100

    remove extra backslash in make modules-doc action

commit 9069082a2d80b436779e805ee4da9703c4672d90
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 20:58:11 2009 +0100

    config cleanup
    
    - enclose several former commented features within defines
    - enabling such a feature requires just one 'define' as opposite of sed
      command used in 1.5 config

commit cfe339e04ce21b785642a026246618cf840ecad7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 30 15:19:42 2009 +0100

    tm: fix branches clearing lumps
    
    - fix bug introduced in 610cb93
    (cherry picked from commit 6a55e42edd0cf0ac82b2099a74b4896fdc801145)

commit 393027b94e52b46131b141cbf5019c0efab3d29f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 15:05:00 2009 +0100

    sanity modules in now in modules/

commit 39ce77440b5d72a8a197ca06ff579371134bcacf
Merge: eb687b7 5d817af
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 15:01:41 2009 +0100

    Merge remote branch 'origin/sr_3.0' into kamailio_3.0
    
    * origin/sr_3.0:
      fix typo in location flags settings
      Rewritten this small helper function
      When string was in the form of 0=on\n\0 this function caused a segmentation fault(canaries where overwritten).
      Removed unused var (added last commit)
      Fixed avpops avp_db_store as before no state was used and it caused to loop endessly.
      Declared pua_send_publish ,as it was only defined (extern)
      Fixed tm_load import (It would be advisable to use tm_load_api instead )
      Fixed include guard
      Added kmi module to linkage (because of  ../../modules_k/xcap_client/xcap_client.so: undefined symbol: register_mi_mod  )
      Fixed carrierroute module exports.
      Fixed userblacklist exported function
      If the user parameter is "<null>" (e.g a empty username in the request URI), do not copy this value to the rewritten uri.
      lib/srdb1/schema/gw.xml: index changes
      modules/lcr: bug fixes
      htable(k): fix non-init act. ctx in event route execution
      tm: fix/support changing r-uris and path in branch routes
    
    Conflicts:
    	.gitignore
    	Makefile
    	Makefile.defs
    	Makefile.dirs
    	cfg.lex
    	cfg.y
    	etc/kamailio.cfg
    	events.c
    	events.h
    	forward.c
    	lib/srdb1/schema/gw.xml
    	modules/avpops/avpops_impl.c
    	modules/carrierroute/carrierroute.c
    	modules/carrierroute/cr_func.c
    	modules/carrierroute/cr_func.h
    	modules/lcr/README
    	modules/lcr/doc/lcr_admin.xml
    	modules/lcr/lcr_mod.c
    	modules/lcr/lcr_rpc.c
    	modules/tm/h_table.c
    	modules/tm/h_table.h
    	modules/tm/t_fwd.c
    	modules/tm/t_fwd.h
    	modules/tm/t_hooks.c
    	modules/tm/t_reply.c
    	modules/tm/uac.c
    	modules/utils/conf.c
    	modules_k/htable/htable.c
    	modules_k/kex/core_stats.c
    	modules_k/pua_dialoginfo/pua_dialoginfo.c
    	modules_k/pua_usrloc/pua_usrloc.c
    	modules_k/pua_usrloc/pua_usrloc.h
    	modules_k/pua_xmpp/pua_xmpp.c
    	modules_k/pv/pv.c
    	modules_k/pv/pv_branch.c
    	modules_k/pv/pv_branch.h
    	modules_k/userblacklist/userblacklist.c
    	modules_k/xcap_client/Makefile
    	modules_s/domain/domain_mod.c
    	modules_s/registrar/save.c
    	parser/msg_parser.c
    	parser/parse_uri.c
    	receive.c
    	utils/kamctl/Makefile

commit eb687b701730b48dffbd49a99103c64c0c3294da
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 13:22:27 2009 +0100

    throw error if parameters to module functions are int

commit cadda4680f475fa991a5ed98606a2ccde6b200da
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 13:04:42 2009 +0100

    added kamailio in ingnore list

commit 05f40fad3dbc15b7eb16de0f5cfc6301795fc894
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 12:58:05 2009 +0100

    pv: export new PV class $xavp(name)
    
    - import from branch daniel/xavp
    - allow management of XAVP from config file

commit 0cb4c9f4bb5399fe9b9c946a3f69c1c595ad832b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 12:56:25 2009 +0100

    core: introducing xavp (eXtended AVP)
    
    - import from branch daniel/xavp
    - design:
    	- one master list stored in core
    	- internal integer id to optimise the search in list (hash value over the string name)
    	- name stored as str and null terminated (can use regexp over it)
    	- string values stored as str and null terminated
    	- other types of value that can be used internally (not in config)
    		- long
    		- long long
    		- time
    		- xavp (or list of xavp)
    		- generic data structure
    - for more see: http://sip-router.org/wiki/devel/xavp
    - NOTE: this is not a replacement for existing AVPs, but an add-on, a new pseudo-variable class

commit a6ab14576e4ca562ea6a8f3b7c5a57a182eb3a64
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 12:55:21 2009 +0100

    tm: set/reset head of xavps on TM events
    
    - import from branch daniel/xavp

commit a8270008de45ef732f9ae57a86984845d0589fd0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 12:54:17 2009 +0100

    pv: new pv class $xavp(...)
    
    - import from branch daniel/xavp
    - access XAVPs from the config via psuedo-variables

commit bca7a6509981defde01b6df6e63e3b483062a840
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 12:53:14 2009 +0100

    core: destroy xavp list once sip msg processing is done
    
    - import from branch daniel/xavp

commit 5d817af9e4ffe674187cc757a4d5a81c9450308e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 11:47:52 2009 +0100

    fix typo in location flags settings
    
    - cflags must be used when saving branch flags
    (cherry picked from commit 7a967915ce71ab4e8b6577b4ed48e2a93ae6e96f)

commit 7a967915ce71ab4e8b6577b4ed48e2a93ae6e96f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 11:47:52 2009 +0100

    fix typo in location flags settings
    
    - cflags must be used when saving branch flags

commit 762ab0f1ce81dedaab3cc8ad20103317f06da75d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 11:46:44 2009 +0100

    set default debug level to 2
    
    - load sl after tm so it can do stateful reply via send_reply()

commit 2a67b2533742f7e969d17b027ca7dfea77701415
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 11:21:45 2009 +0100

    set branch flags before saving location
    
    - enclose parameters in double-quotes

commit 744813329639b323e77a148aebb83112ec1039d1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 30 11:05:28 2009 +0100

    support for defines
    
    - applied patch from Bogdan Harjoc
    - support for define/ifdef/ifndef
    - nicer way to build config file
    - additions to preprocessor directives, so far was 'include'
    - format is:
      #!define ID
      #!ifdef ID
      #!ifndef ID
      #!else
      #!endif

commit 895e166d730efe6a975136b69171a9f097243771
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Oct 27 13:26:55 2009 +0200

    Rewritten this small helper function
    (cherry picked from commit 4fed4c7b9db9ca8ad1b034d5afbd86fea4ebd6ba)

commit 4e49d033a49131a763b604c0d1f009d2a7c558fe
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Oct 26 17:16:37 2009 +0200

    When string was in the form of 0=on\n\0 this function caused a segmentation fault(canaries where overwritten).
    (cherry picked from commit e6f4dafdc43d90e9679ad4695e9729379245984d)

commit 0ab9d15ba34313387af9a08fdf0e233abe04089e
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Oct 26 14:23:25 2009 +0200

    Removed unused var (added last commit)
    (cherry picked from commit 60548b6b3475d82e5d4d8c9a4be53c8dfb32df5e)

commit bbf9bcd1ca6a7f75f3b9f7a82c9ed606a4b990db
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Oct 26 13:37:43 2009 +0200

    Fixed avpops avp_db_store as before no state was used and it caused to loop endessly.
    (cherry picked from commit ffca34a67b64079cf66a0d4c0cd5419fff3f2255)

commit 9cda8fa4a8d0634efc3b5933fa6eb3c18aea8e18
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Oct 22 16:32:43 2009 +0300

    Declared pua_send_publish ,as it was only defined (extern)
    (cherry picked from commit 981e9ba6cee17268ce761ee04d35b897a0fbd47e)

commit 8854c7446dc60f7133c58aa7b498c47a406d5574
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Oct 22 16:31:35 2009 +0300

    Fixed tm_load import (It would be advisable to use tm_load_api instead )
    (cherry picked from commit 12d008ca184460755f09bf4090f0298d4a092e84)

commit f53daa928b52414cd910ea32e77892ddfa4d9fcd
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Oct 22 16:14:06 2009 +0300

    Fixed include guard
    Defined pua_send_* symbols as they where not defined when module was loaded
    (cherry picked from commit 3a2477ec529f87a51a6f1c0238ab8c12790b1807)

commit 4a3712da5b3e7c8ed20748d9b57931690813af47
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Oct 22 15:20:46 2009 +0300

    Added kmi module to linkage (because of  ../../modules_k/xcap_client/xcap_client.so: undefined symbol: register_mi_mod  )
    (cherry picked from commit b5dd92caf75c3cc9076a0fc59149fbf80bcb0949)

commit 16f622e118daeffa2547243eeaf4d42c03f84b05
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Oct 19 12:46:17 2009 +0300

    Fixed carrierroute module exports.
    See http://lists.sip-router.org/pipermail/sr-dev/2009-October/004393.html thread for a complete description
    (cherry picked from commit ca28401667bcf8d65d942fdb29033eadb6bb82b2)

commit 988552519122e992911ac9e803c439fc7cbbddc5
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Oct 19 11:27:25 2009 +0300

    Fixed userblacklist exported function
    See http://lists.sip-router.org/pipermail/sr-dev/2009-October/004393.html thread for a complete description
    (cherry picked from commit ae18879b65d1a005639559ff689657b1cc2777d8)

commit 084ad8a010db913785d23ccaeba654464cfd05f7
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Oct 12 15:10:55 2009 +0300

    If the user parameter is "<null>" (e.g a empty username in the request URI), do not copy this value to the rewritten uri.
    This is the case of a REGISTER request. Added statements that the parameters to the actually_rewrite func may not be null.
    (cherry picked from commit e06a69d625d4c1293fceef13f9eca22e14662f9f)

commit 1f2388acad2f8b2e611eade1eb532d510a48985b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 29 11:49:38 2009 +0100

    tm: drop reply in onreply_route[x]
    
    - K compatible mode to drop reply in TM onreply routes by using 'drop'
      for reply status < 200

commit 062131954268d7b43bfd2544f93f46fb134e630c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 29 11:28:20 2009 +0100

    core: drop reply in K compatible style
    
    - drop reply in default onreply_route when using 'drop'

commit adef635f7568cdd66ad2a5828000578a8af7ae39
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 29 11:27:59 2009 +0100

    version set to 3.0.0-rc1

commit d2de5be7fa8436ec33eabc4ade016b1c219c408b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 29 10:39:17 2009 +0100

    Makefile: removed modules_s from default compile list

commit f82dcdb10b1867989b5a2c85a951387a2ca4f85a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Oct 29 10:38:56 2009 +0200

    lib/srdb1/schema/gw.xml: index changes
    
    - Added grp_id to existing gw_name index.
    - Added new ip_addr index.

commit a375b567c86cf1e066e7a56cce4697674aa9d1b3
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Oct 29 10:27:54 2009 +0200

    modules/lcr: bug fixes
    
    - Fixed selection of gateways's attributes when same gateway has different
      attributes in different groups.
    - Fixed printing of gateway's tag by lcr.dump_gws.

commit 1180ee4d1f5de178f1a16785c3ff573aec00bd70
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 29 00:51:44 2009 +0100

    kamctl: include core config.mak in Makefile

commit f6b97e137b44a420d13eeeb45218df1e7b618393
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 29 00:50:54 2009 +0100

    Makefile: adding data vars
    
    - they are used to install shared resources from kamctl/kamdbctl

commit 80a8fc22b8488c358fc12f0a6ce684ffe32f1d1c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 28 23:54:33 2009 +0100

    kamailio.cfg: load ctl and mi_rpc modules
    
    - enables usage of sercmd tool with default config

commit aa569991b9c184003ccfd805978930f6cf9ccf2e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 28 23:38:58 2009 +0100

    kamailio.cfg: do sanity check by default
    
    - use sanity module to catch parsing errors early in config
    - replaces error_route from kamailio 1.5

commit f771b05fe8f24bebe18962c4169176e47e099ef8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 28 23:38:07 2009 +0100

    sanity: fix include file due to previous re-location

commit 011cc3ffacfbc6faf65a879d3558cd789f101237
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 28 23:07:45 2009 +0100

    sanity: moved module from modules_s to modules
    
    - modules_k/sanity removed (it was an adapted version for k 1.5)

commit 3a7b050c9f9d71a6ab8d44eca1c50f52153d22e7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 28 22:43:14 2009 +0100

    Makefile: introducing SRC_NAME var
    
    - store the name as it is in source tree, updated by
      installation to MAIN_NAME (used for man pages install)

commit 489ddd1336d3bd703ea0b393226631469883b4f3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 28 22:07:00 2009 +0100

    kamailio.cfg: use name for routes
    
    - switched from index to names for routes
    	- 1 => RELAY
    	- 2 => PRESENCE
    	- 3 => AUTH
    	- 4 => NAT
    	- 5 => RTPPROXY
    - failure route: 1 = > FAIL_ONE
    - onreply route: 1 = > REPLY_ONE
    - branch route:  1 = > BRANCH_ONE

commit 5adb83ef2c7e6f1e07a2df1f7f26e6933f7f34ab
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 28 21:53:27 2009 +0100

    kamaili.cfg: basic updates to make it work with SR core

commit 4ac8656cb483f64e88a2a70996178ffdef85e097
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 28 16:11:22 2009 +0100

    htable(k): fix non-init act. ctx in event route execution
    
    - the event route was executed with an uninitialized run_act_ctx.

commit 610cb930bee937c744468c6781aeed8b17b4b7d0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 28 15:50:45 2009 +0100

    tm: fix/support changing r-uris and path in branch routes
    
    - changing the r-uri in a branch route is now safe and the change
      will propagate to branches created due to dns failover.
    - changing path in a branch route is now allowed and it will
      propagate to possible dns failover branches.
    - optimize the no branch route & no callback case.
    - build the branch buffer directly into shm mem.
    - s/prepare_uac_request/prepare_new_uac/
    - prepare_new_uac() takes care now also of setting the branch
      retr. buffer, uri and path (functionality moved from add_uac())

commit 44f7bf621476b18e5df5e45161305a3bce22d498
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 28 08:36:47 2009 +0100

    tm: support for changing dst_uri in branch routes
    
    - dst_uri can now be changed in branch routes, if the branch
      route is not called during dns failover (which never happens,
      but might be enabled in the future).
    - dst_uri can now be checked in branch routes. The
      dst_uri on branch route entry will be the branch next hop
      (initial next hop and not the dns resolved one) if a
      t_relay() based on uri was used, or empty if a destination was
      forced (e.g. t_relay_to_udp(127.0.0.1, 9)).
    - s/print_uac_request/prepare_uac_request to better reflect what
      is actually doing
    - prepare_uac_request() will now perform the DNS lookups and directly
      update the branch dst inside the transaction.
    - add_uac() must now be called with a special flag during DNS
      failover (UAC_DNS_FAILOVER).

commit 1bf989c36a9972389c033b87df0e88c04e56b9c3
Author: Jan Janak <jan@ryngle.com>
Date:   Mon Oct 26 16:25:02 2009 +0100

    registrar: Fix handling of cases where contacts > max_contacts
    
    Registrar should not report an error to syslog if a user exceeds the
    maximum number of allowed contacts per user. The registrar module sends
    a reply back with a description of what happened so there is no reason
    to write this to syslog, max_contacts > 0 is a configuration choice
    rather than an error.
    
    This patch also changes all affected functions in registrar module to
    indicate that the maximum number of allowed contacts was exceeded by
    returning a positive number, instead of a negative number to indicate
    that an error occurred.

commit 6186194a7e6153871d9da019e64916f6f73ec922
Author: Jan Janak <jan@ryngle.com>
Date:   Mon Oct 26 14:37:22 2009 +0100

    domain: Do not report errors when domain cannot be extracted from URI.
    
    We should not report an error to syslog when lookup_domain fails to
    parse the URI it was given as argument. That URI usually comes from
    SIP messages we received from another implementation and we cannot
    guarantee that they will always be well-formed. Generating an error
    each time we receive a malformed SIP message can easily result in
    denial of service.

commit 027c5888fcefe56006d6e6cf60335a5c35a45037
Author: Jan Janak <jan@ryngle.com>
Date:   Mon Oct 26 14:15:53 2009 +0100

    parse_sip_msg_uri: Log broken URIs only when debugging is enabled.
    
    Logging broken Request-URIs with LOG(L_ERR) generates too much traffic
    in syslog by default. Broken Request-URIs are beyond our control and
    we should not generate an error message each time we receive and parse
    one. We log them only when debugging is enabled.

commit 8c06d350a5b7f0e285bbbf3458a0855e43dfab96
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Oct 23 19:45:54 2009 +0300

    modules/lcr: documentation improvement
    
    - Added note to README about maximum number of gateways.

commit f4b64fc173c4ecc470346f05514af43adbda294a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 23 16:48:16 2009 +0200

    update drp_reqs statistics

commit 770ced39b0b749355559e2a35bedf1b9c3674adc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 23 16:39:59 2009 +0200

    update drp_rpls statistics

commit 058f978739d0642d3332301eb8f0a0cd2bc64f37
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 23 16:20:19 2009 +0200

    update fwd_rpls statistics

commit e524a9512dbd24b56713dcf8f0fce1d44b46ae0b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 23 16:08:40 2009 +0200

    update err_reqs statistics

commit b542c1c71ed132e58d0d07d5ba66a241384ae6a2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 23 16:04:21 2009 +0200

    update err_rpls statistics

commit feef8d66b067e34459660be78b1f6b2625eaa533
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 23 15:57:40 2009 +0200

    update bad_URIs statistics

commit 0c7926f1a854aed5af4541518bc0cacdf4fce7e7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 23 15:51:39 2009 +0200

    update bad_msg_hdr statistics

commit be72d02a81f4508e6666e5992c52b788422cd398
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 22 23:02:50 2009 +0200

    pv: $snd(xyz) - new pv class to handle dst filtering
    
    - return attributes of destination address, valid in onsend_route
    - woraround the DNS blacklisting from K 1.5 by using the new PVs and
      onsend_route
    - inner name can be: ip, af, proto and port

commit 6a0c4de50246063fac8c2c6085b9f8f154695d3f
Merge: 974e914 d4ff27b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 22 10:50:00 2009 +0200

    Merge commit 'origin/sr_3.0' into kamailio_3.0
    
    * commit 'origin/sr_3.0':
      sctp: count rejects sent to the remote peer (stats)
      avp_db: Removes a spurious error message.
      ctl: missing ifdef (minor)
      event parser: Add missing string boundary checks to event_parser func.
      tm: Number of fixes in code and documentation for serial forking.
      Implements function reset_path_vector.
      core: fix fixup_spve_* reuse after free
      Remove obsolete gen_ha1.
      modules_k/permissions: Increased version number of 'trusted' table
      lib/srdb1/schema/trusted.xml: forgot to increase version number
      lib/srdb1/schema/trusted.xml: increased tag length from 32 to 64 chars
      makefile: support self-installing utils, extra cfgs a.s.o.
      core: fix memleak in fixup_free*
    
    Conflicts:
    	Makefile

commit d4ff27b77a4d54be6be4cb45c7ccf0756a9f316a
Author: Libor Chocholaty <libor@iptel.org>
Date:   Wed Oct 21 10:09:01 2009 +0200

    sctp: count rejects sent to the remote peer (stats)
    
    It adds into sctp_handle_assoc_change() a call to
    SCTP_STATS_LOCAL_REJECT() if the SCTP_ABORT is successfully sent.
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>

commit 8f89b759d87ab90c94959152969fe4701e915f48
Author: Jan Janak <jan@ryngle.com>
Date:   Tue Oct 20 01:20:23 2009 +0200

    avp_db: Removes a spurious error message.

commit 803fd9a8ae07dca6672422315fb4e5ba76131a27
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 19 18:01:51 2009 +0200

    ctl: missing ifdef (minor)
    
    - missing ifdef USE_FIFO prevented compilation without fifo
      support.

commit 9cb346dec84f191a53d1dbe5895f2e4276da67fe
Author: Jan Janak <jan@ryngle.com>
Date:   Sun Oct 18 20:49:39 2009 +0200

    event parser: Add missing string boundary checks to event_parser func.
    
    The function event_parser needs to check that there is still some text
    left in the input string before it attempts to read the text.
    
    In addition to that the function also needs to skip any possible
    leading whitespace before it calls parse_params, because parse_params
    expects that there is no leading whitespace at the beginning of the
    input string.
    
    Reported by Juha Heinanen

commit 2ea8963512096cbb54e6fdf54e7b44eacc371f34
Author: Jan Janak <jan@ryngle.com>
Date:   Sun Oct 18 00:39:31 2009 +0200

    tm: Number of fixes in code and documentation for serial forking.
    
    This patch improves the serial forking related code and documentation.
    The original code suffers from shortcommits, some of which were result
    of the migration to the new core.
    
    The function that decodes destination sets encoded in AVPs has been
    improved, because the original version did not handle properly strings
    with missing elements. In such case the original implementation was
    likely to overwrite memory, because it did not check the return value
    of strchr properly. The new implementation tries to handle this
    situation. It continues parsing as long as it can, it only requires
    that the request-uri string is present, all other fields are made
    optional and their variables are properly initialized if their values
    cannot be found in the AVP.
    
    There was a bug in the implementation of fr_inv_timer_next modparam in
    the original version, changes to the parameter value were ignored by
    the serial forking code. This was reported by Andrei and is now fixed
    by this commit. The parameter fr_inv_timer_next can now be configured
    at runtime with the configuration framework. Its value is in
    milliseconds and unlike fr_inv_timer, this timer cannot be configured
    separately for individual branches.
    
    Obsolete definition of INV_FR_TIME_OUT_FIRST has been removed. That
    macro is not used anywhere in the code, thus it is not needed.
    
    There were several places where LM_DBG printed a string and relied on
    the string being zero terminated, this may or may not be true in the
    future and this patch uses the macro STR_FMT where appropriate, which
    is safer.
    
    Function t_next_contacts now checks if the function decode_branch_info
    really returned values for the dst_uri and the path vector. If not then
    it calls reset_dst_uri and reset_path_vector. Previous version of the
    code crashed sip-router, this is likely due to the merge and updates in
    the sip-router core.
    
    We now use t_set_fr in t_next_contacts for setting the fr_inv_timer
    value to fr_inv_timer_next. This is much more efficient than creating
    AVPs with new timer values. Also the new value of the timer is now
    taken from a variable in the configuration framework, instead of just a
    regular global variable configured through modparam. This way we can
    adjust the value of the timer on the fly. Configuring it through
    modparam is, of course, possible too.
    
    The value of of fr_inv_timer_next is now in milliseconds, instead of
    seconds. That's the only possibly incompatible change. However, this is
    consistent with all other timers in tm module, it is more efficient and
    it offers better granularity.
    
    A missing call to destroy_avp has been added to t_next_contacts, in the
    code which is executed when no transaction exists. There, the avp
    should also be destroyed if all values have been exhausted and none of
    them had Q_FLAG set. This is a corner case which should not happen
    under normal circumstances, because that situation only happens if all
    branches have the same q value. Such AVP would not have been created by
    t_load_contacts and therefore t_next_contacts should not be called, but
    this bug may be triggered if someone uses t_next_contacts in an
    unexpected way and it is probably better to have it fixed.
    
    Also the code which restores the value of fr_inv_timer at the end of
    t_next_contacts did not work properly. This patch fixes that. It first
    tries to retrieve a value configured with t_set_fr, but that is not
    guaranteed to succeed. After that it also tries the timer AVP and
    finally the configuration framework. The configuration framework always
    yields a value, so we can always restore the timer value, but we may
    fail to restore individual transaction timer values set by t_set_fr. If
    that fails then the global value from the configuration framework is
    used. This is documented as a shortcomming in the README and in the
    code.
    
    In addition to code changes this patch also expands documentation on
    functions t_load_contacts and t_next_contacts, describing their
    operation in more detail. Also the format of the contacts AVP is now
    documented.
    
    Finally, there is a whole new section in the README which describes
    how serial/parallel forking can be achieved with t_load_contacts and
    t_next_contacts and provides a number of examples.

commit ef2e4841537add1ef10ce93acff64c9a6a2b563b
Author: Jan Janak <jan@ryngle.com>
Date:   Sat Oct 17 19:36:20 2009 +0200

    Implements function reset_path_vector.
    
    This function can be used to reset the path_vec variable that stores
    the path vector for a SIP message. It can be used just like
    reset_dst_uri.

commit c6e33a080b218ec87184b216144e527cb41754da
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 15 17:58:05 2009 +0200

    core: fix fixup_spve_* reuse after free
    
    - fixup_spve_* functions have an optimization that checks if a
    a parsed format is a simple string and if this happens it frees
    the fixed param an re-does the fixup with type==string.
    However when freeing the result of the first fixup the original
    string was freed too and the next string fixup would be
    called with freed memory instead of a valid string.
    (this bug was hidden before the memleak fix in af8f3e1536d)

commit e79a572382aa269b25db21990faa232d07a1343c
Author: Jan Janak <jan@ryngle.com>
Date:   Thu Oct 15 12:19:29 2009 +0200

    Remove obsolete gen_ha1.
    
    The tool gen_ha1 is not needed anymore. It was used by an old version
    of the script serctl. The same functionality can be achieved by other
    means either on the command line or in MySQL with server-side commands.

commit 9af70ff505e6ea45110b7a7d5c63eafd3f5b58f8
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Oct 15 12:47:01 2009 +0300

    modules_k/permissions: Increased version number of 'trusted' table
    
    - Increased version number of 'trusted' table also in code so that it
      matches the one in db.

commit 959b95ff5490c144b726362285ae7df9ba80ab1b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Oct 14 15:39:15 2009 +0300

    lib/srdb1/schema/trusted.xml: forgot to increase version number
    
    - Forgot to increase version number of trusted table after increasing
      size of tag field.

commit 0312ea0bbb0bfd442e27e3ee791f66c4fcf68dcc
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Oct 14 15:27:00 2009 +0300

    lib/srdb1/schema/trusted.xml: increased tag length from 32 to 64 chars

commit 974e91436a5cf2bdab0f0e6d9d94d4425c2320ac
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 23:46:46 2009 +0200

    etc: add modules_k to search path of modules

commit 224faa34e6326a72cda7c9350c891abe83a587f3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 23:37:53 2009 +0200

    etc: renamed dictionary.radius to dictionary.kamailio
    
    - copes better with FLAVOUR setting
    - shows the target usage

commit 8d668ebc5328755bbcfd40c7193953d6ccd58eeb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 23:35:35 2009 +0200

    core: updated of CFG_NAME
    
    - default value set to kamailio for FLAVOUR==kamailio
    - this ensures that kamailio.cfg and kamailio radius dictionary are
      installed

commit 3259e890c5ea9e142674c2487f3e9f28c26cd1a4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 23:30:53 2009 +0200

    core: combined Makefile with sr_3.0 version
    
    - replaced previous version with sr_3.0 to install utils' tools
    - gen_ha1 still not to be installed
    - kamailio.cfg is installed as main config
    - check if cfg files to be installed exist -- $CFG_NAME-basic.cfg and
      $CFG_NAME-oob.cfg were attempted to be installed although not
      available for different flavours
    - install dictionary.kamailio used by K radius-related modules, instead
      of SR version

commit 418bbf80cfc3d4efa2334c1b3bdbfb6e91853f7a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 23:29:04 2009 +0200

    kamctl: added install-if-newer in Makefile

commit 8421aeb229ab00db385cbd2bc9fc0638303059d4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Oct 13 21:58:56 2009 +0200

    makefile: support self-installing utils, extra cfgs a.s.o.
    
    - support for self-installing utils, they just need to be added to
     C_INSTALL_UTILS
    - support for extra installed config, they just need to be added
      to C_INSTALL_CFGS. Module paths inside them will be fixed
      automatically if they are of the form /usr/*lib/modules*/.
    - utils_compile renamed into C_COMPILE_UTILS
    - utils_bin_install renamed into C_INSTALL_BIN
    - utils_script_install renamed into C_INSTALL_SCRIPTS
    - share_install renamed into C_INSTALL_SHARE

commit 6a84eeebc2575d90d5795abb95af33ab37407aef
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 21:40:04 2009 +0200

    core: update fwd_reqs stat

commit ea5ee19268c6a7e6f69df674b16fb19d2a2d6409
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 21:28:42 2009 +0200

    kex: support to update core stats via core events

commit 47c89177ce276cdf8f6a2d06fdd3359ba283fe4c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 20:47:35 2009 +0200

    core: added new event SREV_CORE_STATS
    
    - to be used by Kamailio core statistics not included in stock SR core

commit 3996abca9e4abd3b88e56c6749938dbae27a526a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 20:44:03 2009 +0200

    Makefile: tunnings for K-3.0
    
    - do not install gen_ha1 (not needed)
    - install kamctl -- reuse refurbished 'install-utils' by calling
    'make install' in tools' directory listed in utils_bin_install

commit e77ff6f4c9fa32e0bc527d72dc54317658ac448a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 20:41:38 2009 +0200

    kamctl: Makefile action for simple 'make'
    
    - avoid kamctl installation if 'make' is typed

commit af8f3e1536d1415ae757d868ff8cfcbb2578c2f5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Oct 13 20:11:25 2009 +0200

    core: fix memleak in fixup_free*
    
    fparam_free_contents() (which is what all the fixup_free* call in
    sr) did not free the original string (which in sr is kept inside
     the fixed fparam/gparam).
    It should have no impact, since at this point nobody seems to use
     any fixup_free* functions.

commit c7b6396744519541ad460634f18975b08aab0bc1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 13 17:58:37 2009 +0200

    k-3.0: creating the branch kamailio_3.0
    
    - default FLAVOUR set to kamailio
    - version set to 3.0.0pre1
    - Kamailio statistics set ON by default

commit 9d8e1c67c2c22d4e4d00480e3799c72e0f2ade41
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 21:20:02 2009 +0200

    core: fix cfg_update() on config error 2nd try
    
    The cfg framework is considered initialized only after
    the cfg_child_cb_no_init() call.
    Fixes 29e63735632a379df5d6b49130d05d47e2829a60.

commit 275899b1395c07b5ab83552a24fca06aa3835c85
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 18:08:29 2009 +0200

    userblacklist(k): gcc 2.95 compile fixes
    
    - variables must be declared at the beginning of a block

commit 3cacd9314a90bf128a93cad066b4f3db0908fc1e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 18:07:15 2009 +0200

    statistics(k): minor warning in printf fmt

commit 19bd6bd8c4cedc561497c8ff7ccd8d326ca59a2a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 18:06:35 2009 +0200

    siputils(k): gcc 2.95 compile fixes
    
    - variables must be declared at the beginning of a block

commit 744634370288693d7c2c0ea88af14aff45add729
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 18:05:33 2009 +0200

    registrar(k): gcc 2.95 compile fixes
    
    - variables must be declared at the beginning of a block

commit 18ff125720ef9265a271a1bcbc62a25d5a4064c9
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 18:04:30 2009 +0200

    pua_mi: gcc 2.95 compile fixes
    
    - variables must be declared at the beginning of a block

commit 90031b9224f2cf74c37770f6da8300969f4a63dc
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 18:03:48 2009 +0200

    cfgutils(k): gcc 2.95 compile fixes
    
    - variables must be declared at the beginning of a block

commit 663a4d47e1513296d78388ebed93a3d4d8bae8e7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 16:45:27 2009 +0200

    lcr: compile & warning fixes for gcc 2.95
    
    - variables must be declared at the beginning of a block

commit 204503d4aa5b839b596946c4edae428babfa9d41
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 16:43:33 2009 +0200

    db_postgres: compile fixes for gcc 2.95
    
    - variables must be declared at the beginning of a block
    - #ifdefs not allowed in macro arguments

commit 030ed0e68b4c4a00a9462646b969fb5c5b1fe282
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 16:41:32 2009 +0200

    db_mysql: compile fix for gcc 2.95
    
    - variables must be declared at the beginning of a block

commit 18d2bb2c8a72f508a93a0e802f439390731909a6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 12 16:39:38 2009 +0200

    compile: don't warn on old gcc versions

commit 4ab86a6203dbc354e35673442a98f95fba7eb707
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Oct 10 14:50:23 2009 +0300

    utils/sercmd: Fixed include paths also in sr_3.0 branch.

commit b9d019b864cfa12287b79d9d9b63378c8768700b
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 02:51:13 2009 +0200

    version number increased
    
    - preparing for the sr_3.0 branch

commit f5b0f1dc53bcdead5b5143d0dcb944c7c03e2dde
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 02:23:24 2009 +0200

    call_control(k): fix register_script_cb callback
    
    - sip-router script _cb take an extra parameter

commit d74483f8ef3f1465e1bd6463d39adab2a9ce107f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 02:21:59 2009 +0200

    makefile: minor makecfg.lst fix
    
    - better escaping when saving the current DEFS and INCLUDES

commit 9eceb3791197a8c31ff56c9677064482ccbdef3b
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 01:46:24 2009 +0200

    xmlrpc: moved from modules_s/ to modules/
    
    - mv modules_s/xmlrpc modules/xmlrpc
    - updated sl.h include path

commit e63f3f2a81dc202613fa5db32d39b00806a5e228
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 01:43:53 2009 +0200

    auth_identity: moved from modules_s/ to modules/

commit 6c4d575aac6d8eba36f33ad6f778172e16834ad9
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 01:39:26 2009 +0200

    iptrtpproxy: minor makefile update
    
    - use INCLUDES instead of DEFS+=-I...

commit 73324f052872fac9c3ff211fe18e2e526ffbd65c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 01:34:21 2009 +0200

    iptrtpproxy: moved from modules_s/ to modules/

commit 11f98a154892b3459da8f480b48019cd03d05011
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 01:02:31 2009 +0200

    cfg_db: moved from modules_s/ to modules/

commit bf90a8a7ef699c263d0a15a26ac9af29f072c155
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 01:01:52 2009 +0200

    cfg_rpc: moved from modules_s/ to modules/

commit d86d5777cf8aa438b68397f3c6a6e94743ec3b3d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 01:00:54 2009 +0200

    ctl: moved from modules_s/ to modules/

commit aa45b1598c32eadb66dd0142777a20535a144a2b
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 00:50:32 2009 +0200

    db_mysql makefile: example FLAVOUR support

commit caf3128c5495d4bf556af246550e0789cc795dc6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Oct 10 00:38:34 2009 +0200

    makefile: FLAVOUR support
    
    Basic support for sip-router, ser and kamailio flavours and
    install flavours, e.g.:
    make config FLAVOUR=sip-router
    make config INSTALL_FLAVOUR=kamailio; make install (will install
    only kamailio specific tools, but won't change the main name)
    make config FLAVOUR=ser; make install (will install ser tools and
    change the name to ser).
    
    Note that FLAVOUR does not influence the module list (one should
    use modules_dirs, group_include and/or modules, modules_s,
    modules_k) and that for now choosing kamailio will only change the
    name.

commit 46e13e4093f1b8f61dd34adb05e83adebff4ead1
Author: oej <oej@edvina.net>
Date:   Fri Oct 9 22:38:48 2009 +0200

    Typos and formatting

commit 86a41ff90070932ac4dbbd685382183c308aa71b
Author: oej <oej@edvina.net>
Date:   Fri Oct 9 22:34:16 2009 +0200

    Typo

commit e783a10daaa976960065b3750bdfd727676f9310
Author: oej <oej@edvina.net>
Date:   Fri Oct 9 22:33:11 2009 +0200

    Small formatting updates

commit ac4b0278d0ef00333155f804eca2cc7799e6dfbd
Author: oej <oej@edvina.net>
Date:   Fri Oct 9 22:25:34 2009 +0200

    Updating PDB readme as well...

commit ff159bb1efcb2ff5a95b4dd0c6ddf21f79270e6e
Author: oej <oej@edvina.net>
Date:   Fri Oct 9 22:20:24 2009 +0200

    Updating PDB documentation from http://sip-router.org/2009/09/11/number-portability-functionality/

commit dcf0add128aa3eaec29ae082f4b1efa78c5ff3c6
Merge: a7aaf4d a91ba01
Author: oej <oej@edvina.net>
Date:   Fri Oct 9 22:05:45 2009 +0200

    Merge branch 'master' of ssh://oej@git.sip-router.org/sip-router
    
    * 'master' of ssh://oej@git.sip-router.org/sip-router:
      makefile: even more quiet
      modules warning fixes
      * callcontrol
      makefile: quiet output support
      pike_top: moved from tools/ to utils/
      kamctl: moved from tools/ to utils/
      core ev: minor cleanups
      topoh: new module for hiding topology details
      core: new sr events system
      core: execute callbacks for NET_DATA_IN and NET_DATA_OUT

commit a7aaf4d4811228a9374215cb4dad2cf2719b4fdd
Author: oej <oej@edvina.net>
Date:   Fri Oct 9 22:04:36 2009 +0200

    Updating README files
    - total restart for the README-MODULES
    
    Need help updating the list of current modules.

commit a91ba01fc9abbd737e560704e4620370a4e1c08a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 9 21:03:03 2009 +0200

    makefile: even more quiet

commit 8830e341eaa524675d7bf309f900c75eab251916
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 9 20:59:18 2009 +0200

    modules warning fixes

commit 66b8b7d0942ff68ae83a34a2c69d5259e0677da3
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Fri Oct 9 19:20:41 2009 +0100

    * callcontrol
    
    	- Ported r6149 from OpenSips:
    	  	added support for customizing call-control messages from the script
    	- Ported r6236 from OpenSips:
    	  	fixed incorrect release of memory

commit e37e8d6a6158d49aa5fa1092d91b595cf0d91e2d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 9 15:30:02 2009 +0200

    makefile: quiet output support
    
    Support for quiet output (without all the flags and compile
    options): make Q=1 or make QUIET=1.
    It can be saved in the config (e.g. make config Q=1) and it can be
    overridden any time (e.g. make utils Q=0).
    Compilation is a little faster in quiet mode and the same speed as
    before in normal mode.
    
    Example module output:
    CC (gcc) [M tm.so]              uac.o
    LD (gcc) [M tm.so]              tm.so
    
    Lib example:
    LD (gcc) [L libbinrpc.so.0.1]           libbinrpc.so.0.1

commit e57768f78261efa068b4de2b4fc8b01811765d48
Merge: 21e69f5 da5d964
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 9 14:16:41 2009 +0200

    Merge remote branch 'origin/tmp/core_events'
    
    * origin/tmp/core_events:
      core ev: minor cleanups
      topoh: new module for hiding topology details
      core: new sr events system
      core: execute callbacks for NET_DATA_IN and NET_DATA_OUT

commit 21e69f544001fac0363d6a12ace881870127de4e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 9 14:09:17 2009 +0200

    pike_top: moved from tools/ to utils/

commit 9df9c6e10ffe0851b7f4f2f00697c5644aaf9faa
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Oct 9 14:05:15 2009 +0200

    kamctl: moved from tools/ to utils/
    
    - mv tools/kamctl utils/kamctl
    - updated srdb1 Makefile and test/unit/include/common with the new
      kamctl path

commit df0c82a0c0a18eb195c03b1b0e55c0624da8a7e6
Author: oej <oej@edvina.net>
Date:   Fri Oct 9 11:23:20 2009 +0200

    Updating INSTALL - mostly formatting

commit 89d400689357f919ed0cd200e3b0576ffa79d1c3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 8 17:45:44 2009 +0200

    makefile: use separate CFLAGS & LDFLAGS for utils
    
    - added UTILS_CFLAGS and UTILS_LDFLAGS (Makefile.defs and saved in
      the config)
    - use UTILS_CFLAGS and UTILS_LDFLAGS when compiling the utils
    (fixes a bug when an util compiled by a module will be compiled
     with the module flags)

commit e362e2298ea19d4f5bffa305a31722cdb1dba7ee
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 8 16:13:43 2009 +0200

    unit test: also test for memcache value deletion

commit 56e0b7d4127525250a885815e26f8d05f8281d30
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 8 16:12:52 2009 +0200

    memcached(sr): fix docs for value deletion

commit bba1990c3fe72aa73ca4ff5519be76234885d78f
Merge: ad51cad 0f4c425
Author: oej <oej@edvina.net>
Date:   Thu Oct 8 15:29:07 2009 +0200

    Merge branch 'master' of ssh://oej@git.sip-router.org/sip-router
    
    * 'master' of ssh://oej@git.sip-router.org/sip-router:
      pdb(sr): add missing doc Makefile, fix include for pdb_admin.xml, regenerate docs

commit ad51cad095d2181a16b3a734926614e84adf6081
Author: oej <oej@edvina.net>
Date:   Thu Oct 8 15:10:48 2009 +0200

    Updating LDAP readme

commit 0f4c425c133dbec19386e73be43bdccdbc77f256
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 8 14:50:31 2009 +0200

    pdb(sr): add missing doc Makefile, fix include for pdb_admin.xml, regenerate docs

commit 8c3a715892421cdbc309ab37b16dcf349078f487
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 8 12:14:29 2009 +0200

    pv: added init and working destroy functions
    
    - added init and destroy functions (declared in pvapi_init.h)
    - fixed pv_table_free() and tr_table_free() bug

commit 0b79ce29dadb655301490724f360c9ae7055edeb
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 8 12:11:39 2009 +0200

    mem: nicer fm_status() & fm_sums() output
    
    Removed useless and confusing current file location information
    (we are interested where the fragment was allocated from, and not
    where the information is printed).

commit 220ac6e202bd7bbd69989bc812465cb4173831a6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 8 11:33:25 2009 +0200

    mem: include the module name in the debugging info
    
    - use <module_name: file> when recording the filename information
      for debugging (DBQ_QM_MALLOC defined)
    - added a new file that should define in a portable way the
      various location info (file, function, a.s.o.)

commit 29e63735632a379df5d6b49130d05d47e2829a60
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 8 00:14:32 2009 +0200

    core: fix cfg_update() on config error
    
    Don't try to use the cfg framework if it was not initialized (it
    could happen if for example config parsing fails and shutdown is
    triggered before the cfg framework is initialized).

commit e0d9b790d1971995823020777525cda63638973c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 8 00:03:25 2009 +0200

    pv(k): removed $rc and $retcode (they are now in core)

commit 0c73dfed30960affda3a096f07f9679f18527585
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 7 23:57:45 2009 +0200

    core: core pvars added for $?/$retcode/$rc
    
    - added core pvars (registered before script parsing) for the
      return code ($?, $retcode, $rc). This solves script conflicts
      between the different return code handling (kamailio - pvars and
       ser built-in expr. elem).
    - removed ser expr. elem for retcode (not needed anymore)
    - added '?' as a valid pvar char (needed so that $? will be
      accepted)

commit e36890e2b6a8deb678c7b24f3701d63ba8c449c5
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Oct 7 18:37:55 2009 +0200

    unit test(sr): fix debug setting and a bunch of paths

commit e9a6621bd51f4cec0a74fcc0ce5706953d4da4ce
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Oct 7 18:35:51 2009 +0200

    unit test(sr): fix location of kamailio ctl tool

commit da3327522527211fcd76aba394de9f2f538d8b9d
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Oct 7 18:35:00 2009 +0200

    unit test(sr): add initial small test for memcache module

commit f3528b2e48a8dca862f61ebef2dd2eb2bd843234
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Oct 7 18:31:08 2009 +0200

    memcached(sr): add support for setting of value expiration - $mctex(key)
    
    - add support for setting of value expiration. As the memcache library
      don't provide functions to later change the expire value of an existing
      key we need to fetch the value and then store it again with the given
      time. This should be changed with a different (improved) library
    - refactor functions a bit, use a helper method instead of duplicating
      the cache access functions
    - update documentation

commit da5d964be8818cadad03a637223257824bf3d031
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Oct 6 14:53:26 2009 +0200

    core ev: minor cleanups
    
    - use if (unlikely(...)) when executing the callbacks (optimize
      for the case where there are no callbacks)
    - debugging info printed only #if EXTRA_DEBUG

commit 5c323052cc0a84d8a7c98ffe0354071dc00be23f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Oct 6 12:47:14 2009 +0200

    cfg framework: fix shutdown crash for non registered modules
    
    Added cfg_update_no_cbs() which partially updates (no per-child
     callbacks are called) the local config.
    It's needed for config update on exit (SIGTERM) for modules that
    do not register as cfg users and when the code is compiled with
    SIG_DEBUG.

commit 18a91e776b9a99de46eb637caee860c0bcd6b117
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Oct 6 12:41:59 2009 +0300

    Changes to documentation of carrierroute module:
    changed cr_route usage in example as it didn't matched the actual interface
    by removing the crc32 parameter.

commit 8459110abc3e0241e7b8a028e0252c97c8a5d9b5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 5 16:15:30 2009 +0200

    sctp: linux kernel obsolete api bug workaround
    
    set SPP_PMTUD_ENABLE when changing pathmaxrxt on linux. This was
    required on older versions of the api draft (<=14, most likely a
    draft bug) and is still required on linux.
    
    Reported-by: Libor Chocholaty  libor at iptel org

commit 64e15b63e449d26e9c56ee28b3fde22d069e03e6
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Oct 5 15:13:56 2009 +0300

    modules_k/msilo: send composed body only if content type is text/plain

commit ceaf70375ee1a597478119380c4f677cdcf3c948
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Oct 5 13:04:54 2009 +0200

    db schemes(k): related to commit 8eb5c7071b79, fix Makefile variable

commit d953ef7a6060793aebb06fedc986cd88acb194e4
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Oct 5 13:03:52 2009 +0200

    db schemes(k): fix loading of DTD from internet, reported from Juha

commit 39a927e9d0103414806efcb6a66f2e2cc6265443
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 5 13:08:05 2009 +0200

    db_mysql: fix install instead of compile bug
    
    Fix for trying to install the extra utils instead of compiling bug
    (introduced in the last commit).

commit b7a06e40596e98f7c44d7166fe72845fde3106e4
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Oct 2 16:37:17 2009 +0300

    * modules_k/permissions: fixed checking of db connection
    
    - In allow_trusted(), check existence of db connection only when in
      non-caching mode.

commit f26601329fd510bff08f684b3e445cc0c4a9995b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Oct 2 12:00:58 2009 +0300

    modules_k/permissions: fixed handling of db connection
    
    * Do not close db connection if query fails.
    * Check that db connection exists before making a query

commit e09ace60ef5b9db270e25e6b27d27e894a71d338
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 1 18:42:54 2009 +0200

    lcr: regenerate database tables

commit 72f1a207344cd5fab981086a2c7bb0aef6883304
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 1 18:41:57 2009 +0200

    dialog(k): use the version from (old) trunk, the ones from 1.5 is also old

commit 677f0b3e53cc5fa26d332144b87098fc3c1da215
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 1 18:40:07 2009 +0200

    db docs(k): better to place this in the existing dir 'databases'

commit 9113fae618d347a8b1689e14dd94a1e7d314d85a
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 1 18:33:20 2009 +0200

    db schema(k): add XSL files, as the ones from sr not work for us (extensions etc..)

commit 1f36a7beaaac6eacdc5bebd76e0830aba9af7f55
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 1 18:32:34 2009 +0200

    sr: add 'make dbschema' target, compatibility to kamailio

commit 2bd1d39b5c1d77da40ad0debb414de0eacba944c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 1 18:27:15 2009 +0200

    purple(k): add missing purple xml db scheme sources

commit d0b60d5b967e9ea8df5c911c606ae1ddad490379
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Oct 1 18:26:17 2009 +0200

    dialog(k): copy dialog table from 1.5 branch, the version in this tree is older

commit 04424443dc83e18bf75cdcf5e04aa23b44ed2ce3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 16:52:17 2009 +0200

    makefile: mysql shared *.sql removed
    
    mysql shared *.sql files are no longer installed by the main
    makefile, but by the db_mysql module.

commit c7683811e99d30c95b0dfeaeeeee446cb6533d78
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 16:51:36 2009 +0200

    db_mysql: install shared *.sql files

commit 80c36172af7040d9d1da75121dda90abcc640ce4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 16:48:30 2009 +0200

    makefile: per modules arch. indep. files install support
    
    Support for easily adding arch. independent files that should be
    installed along a module.
    The following new module makefile variable is supported:
    
    MOD_INSTALL_SHARE - list of files to install into the
    arch-independent shared directory (by default
    /usr/local/share/$(MAIN_NAME)).

commit aae2c1f4b05b297bc4e459cc91cc9f57485e5f94
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 16:29:14 2009 +0200

    doc: serdoc2man.xsl revived
    
    serdoc2man.xsl is still needed for the ser modules that have
    manpages.

commit 6f7433d3d0f493e0ea65e4fe64e4f0d6a1c29420
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 16:05:02 2009 +0200

    makefile: doc update for Makefile.utils

commit 48dd70783900038f379a35817df942dc59d5e646
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 16:02:51 2009 +0200

    makefile:  utils and cfg cleanup
    
    Moved sercmd, sip-router_mysql.sh and tls.cfg install to their
    respective modules.

commit ce383454955291178e9fd097711ca28a11363009
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 16:01:34 2009 +0200

    tls: updated to the new auto install cfg makefile

commit 14122925eb86238b8bae707776fba0ef283b8dd7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 15:57:33 2009 +0200

    db_mysql: automatically install sip-router_mysql.sh

commit 9e4c500f6e6e6ad0725316968878d3ae661ace8c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 15:56:56 2009 +0200

    ctl(s): automatically install sercmd

commit 6bfac69a5b6e4672ae24e51903612e09662ca36d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 15:51:47 2009 +0200

    makefile: per module extra utils and cfgs install
    
    Support for easy adding per module extra scripts, utils (require
    compile) or configs.
    The following new module makefile variables are supported:
    
     MOD_INSTALL_UTILS - list of utils directories that should be
     compiled and installed along the module. The utils must know how
     to install themselves (make install).
     E.g.: MOD_INSTALL_UTILS=../../utils/sercmd
    
     MOD_INSTALL_SCRIPTS - list of scripts (complete path including
     the file name) that should be installed along the module.
     E.g.: MOD_INSTALL_SCRIPTS=../../scripts/foo/foo.sh
    
     MOD_INSTALL_CFGS - list of extra config files that should be
     installed in the main config directory.
    
    They should be set before including Makefile.modules.

commit 1b5b2a85d3ca43ff7302dc4f04ea64dc9792b6ee
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 13:47:05 2009 +0200

    makefile: libs install-if-newer minor fix
    
    - install-if-newer did re-install the library every time

commit f37495005e66e8f7ff0a6bf94bc9d25e437b2d9a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 13:45:15 2009 +0200

    makefile: modules install obeys $(err_fail)
    
    - if err_fail is 1 and a library fails to install the whole make
      install will fail

commit 911f3742596a127913e6033cf1ad52d5084ad0dd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 13:42:36 2009 +0200

    makefile: make install for utils
    
    - make install for utils
    - various small Makefile.utils fixes

commit 4ef2fe37b80d26f34a656daeb890825e4e21f5fc
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 11:28:02 2009 +0200

    makefile: use -fsigned-char on some archs
    
    Use -fsigned-char for gcc on ppc, ppc64, arm and armv6 to avoid
    possible bugs (most people assume char is signed).

commit a5af9eccf88a7696a5b3519da4651859f4a354f9
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 11:25:43 2009 +0200

    uac: use signed char (minor fix)
    
    On some platform/compiler combination char can be unsigned by
    default (e.g. gcc arm and ppc) => use signed char when comparing
    it with 0.

commit 64e3977d3b6b605711f68ea8bd820c16e5bdd7c2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 30 20:28:03 2009 +0200

    libsrdb1: fix bad include
    
    Removed unneeded #include </usr/include/limits.h> which breaks
    cross-compiling (#include <limits.h> is enough).

commit 4cd5605bb9b28e6ffb872068d0aab833ea3d8811
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 01:26:52 2009 +0200

    usrloc(s): gcc 2.9x var decls. fixes
    
    variable declarations must be at the beginning of the function and
    not intercalated in the code.

commit c60ba81953e59f57ad3d11f4ec2918120f7b924e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 01:26:13 2009 +0200

    pike(s): gcc 2.9x var decls. fixes
    
    variable declarations must be at the beginning of the function and
    not intercalated in the code.

commit 19cb04ddf374356fcd90f244bcdb86bde45d530f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 01:16:08 2009 +0200

    permissions(s): gcc 2.9x fixes: 0-len arrays & anonymous unions
    
    - replaced flexible arrays (array[]) in structs with 0 length
      arrays (array[0]). Flexible array members are supported in C99,
      but not by gcc 2.9x.
    - anonymous union members cannot be accessed when compiling with
      gcc 2.9x.

commit 142eae1df4416122dc9e81c97d1fd4634e446a68
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 01:14:58 2009 +0200

    avp_db(s): gcc 2.9x var decls. fixes
    
    variable declarations must be at the beginning of the function and
    not intercalated in the code.

commit 91eadbeda403afefdb26ab94d79ed58ea78779d2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 01:13:57 2009 +0200

    avp(s): tm: gcc-2.9x warning fixes (%zd)
    
    - %zd is not supported in the format string for gcc < 3.0

commit b57080326a9215461a789323021d062b1a12c17f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 01:11:48 2009 +0200

    libsrdb1: gcc 2.9x var decls. fixes
    
    variable declarations must be at the beginning of the function and
    not intercalated in the code.

commit cb6fd5e3e98c2982774058059b333f6e1d90b8d3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 01:09:39 2009 +0200

    tm: gcc-2.9x warning fixes (%zd)
    
    - %zd is not supported in the format string for gcc < 3.0
    - fixed %.*s with non int length warnings (gcc 2.9x)

commit b0c1c3fb3bd53b65022fd1e2d6d34023db9043c6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 01:06:03 2009 +0200

    core: fix gcc 2.9x #ifdef in macro args
    
    gcc version < 3.0 do not support compile directives in macro
    arguments.

commit 20ce876472b6216207ec2e75aff2434097a835a8
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 00:58:15 2009 +0200

    core: LOG() gcc 2.9x fixes
    
    In gcc versions older then 3.0  ## before a variable argument
    when the argument is empty will "eat" the _entire_ preceding
    sequence of non-whitespace characters (not only the ',').
    The fix just adds a space in front of ',' in all the macros calls
    that use var args and ##.

commit a22f9ee5231623236574d7728905940e72fdb7b9
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 00:56:49 2009 +0200

    compiler_opts: __builtin_prefetch supported from gcc 3.1

commit c69ee0ff5ea74d3f8d028635ae03dc33f2d72c3c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Oct 1 00:54:32 2009 +0200

    makefile: -m32/-m64 fixes
    
    - gcc supports -m32/-m64 only from version 3.2 on x86/x86_64 and
      from version 3.0 on sparc/sparc64.

commit c46e79709216c4975abc83869fbce9fa696eac74
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 30 20:18:23 2009 +0200

    makefile: arch detection uses gcc
    
    Target architecture detection switched from using the host to
    using the target architecture of the compiler, if the compiler is
    gcc.
    Extra options (CC_EXTRA_OPTS) are taken into account
    (e.g. make config CC_EXTRA_OPTS=-m32 will result in i386 on a gcc
    configured with default x86_64 arch.).
    This should make cross-compiling much easier and should also fix
    problems with systems with 64-bit kernels and 32-bits userland or
    vice versa (e.g. snow leopard which by default boots a 32-bit
    kernel, but its gcc produces only 64-bit binaries).

commit 00634dc0869c2e65a6626b8ad2408cd9a2b3598a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Sep 30 16:33:05 2009 +0300

    * modules/lcr: gw table db schema fixes
    
    - Added missing defunct column.
    - Replaced index lcr_id_idx with index lcr_id_gw_name_idx.

commit 873d03503afa2059f4b1d6ca3903b1a2a6428d1f
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Sep 26 11:50:10 2009 +0300

    * Fixed to_any_gw() example.

commit 7362f8245bf66205c4720f65cf07c0db8039f191
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 17:22:01 2009 +0200

    core: use current config for the attendant process
    
    Changes in relevant config variables at runtime are now visible in
    the attendant process (e.g. debug, memlog, mem_summary).
    
    Signed-off-by: Miklos Tirpak <miklos@iptel.org>

commit 4a9a969de84eef3aac616d49ec02c25aceff2a68
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 17:18:37 2009 +0200

    cfg framework: support for no per-child callbacks procs
    
    Support for using the config framework from processes that
    cannot or do not need to execute cfg per-child callbacks.
    For example a process that only monitors some cfg values that do
    not involve per-child callbacks, does not ever need to execute
    one.
    
    Signed-off-by: Miklos Tirpak <miklos@iptel.org>

commit f2e2f898112ed402147cd2072a4bfae3d864a925
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 20:06:06 2009 +0200

    registrar(k): missing include

commit 820c58ec91c147548bcfcaca1a2786f46a1e7456
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 20:05:24 2009 +0200

    exec(k): append_branch() api changes

commit 140d0a351d8dd0779610f53ec97809b1edacfb52
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 20:04:32 2009 +0200

    drouting(k): typo fix

commit 94ec0ae08c85a1d84e05a5689c8bfcd13652d5a4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 20:04:02 2009 +0200

    dispatcher(k): append_branch() api changes

commit 2a791567ae8697c171a9584c2a10e7d6a16253c5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 20:03:35 2009 +0200

    cpl-c(k): append_branch() api changes

commit b23a7ab13046347a70ffb1be19a9896d0ff3fc61
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 20:02:09 2009 +0200

    alias_db(k): append_branch() api changes

commit 9558980b9087ce3ff227941d33e7e5224568226e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 18:38:32 2009 +0200

    makefile: use -fno_strict-overflow on gcc 4.2+
    
    For gcc versions >= 4.2, use the -fno_strict_overflow compile
    option. This is needed to avoid gcc optimizations that assume
    signed overflow is undefined and does not wrap around (some parts
    of the code assume using two complement arithmetic and
    -fstrict-overflow might break them).

commit e4f42ce1ded4bc0b6b7142f496119178f8cba15a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 15:25:50 2009 +0200

    core: mem dbg options updates + cleanups
    
    - memlog and memdbg can now be changed at runtime
    - double define warning fix for fm_malloc (when compiled with -DF_MALLOC)
    - nicer qm_status() & qm_sums() output
    - BSD licence for mem/*

commit f92113d8e16d6e59c170dfa703d9db30980b6877
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Mar 17 13:24:42 2009 +0100

    core: remove VQ_MALLOC memory manager
    
    attached patch removes the VQ_MALLOC memory manager from the
    sip-router core.  As discussed some time ago, this memory manager
    doesn't provide a realloc implementation, and is thus not really
    usable for the modules, as some of them needs this. We removed
    this in kamailio in the last year, so far nobody missed it.
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>

commit d740c34e417acd84d0ccad47fc65af2668d09654
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 29 13:32:48 2009 +0200

    core: added mem_summary config option
    
    - added mem_summary which controls  the memory debugging info
      logged on exit or on SIGUSR1.  Its value is a combination of
      flags: 0 - off, 1 - dump all used memory blocks and some
      statistics (lots of output), 2 - dump a summary of the used
      memory blocks (works only if compiled with DBG_QM_MALLOC or
      DBG_F_MALLOC).
      The default value is 1 (same behaviour as older versions).
    
    - fix: don't call the memory status/summary functions if
      memlog > debug level (since nothing will be logged anyway).

commit ed20ee1dd197ecaead7549f762e5d331a14db34e
Author: Dragos Vingarzan <dragos.vingarzan@gmail.com>
Date:   Mon Sep 28 22:01:17 2009 +0200

    mem: summarize in-use memory on exit
    
    Additional qm_sums and fm_sums as extension to qm_status/fm_status, with
    summarized values per allocation source.
    Slightly modified SER-224 patch version (no locking, sr changes --andrei).
    
    Closes SER-224.
    
    Signed-off-by: Andrei Pelinescu-Onciul <andrei@iptel.org>

commit 4490351bdea670fe407f67649fba4f900110c56f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 28 21:42:28 2009 +0200

    snmpstats(k): updated enterprise number
    
    - IANA assignment for kamailio.org is 34352

commit 2a25dc596fd202e7836f51a0cc5b0740aaaa53fd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 28 21:29:55 2009 +0200

    snmpstats(k): updated file names in include

commit bc5277f65e53c3dc0ffaa29b9925701992097cf0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 28 21:08:24 2009 +0200

    snmpstats (k): renamed files - openser* to snmp*

commit cf593d2fd64bcc6a04526beaa228b028e065d304
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Sep 24 18:20:54 2009 +0200

    mi_rpc: doc update
    
    - async mi commands supported
    - added the list of the various rpc mi commands versions (mi,
      mi_dg, mi_xmlrpc and mi_fifo).

commit 244d4d4729b295be999acb3a4ca4cf156a9bfbbf
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Sep 24 18:06:22 2009 +0200

    mi_rpc: support for async mi commands
    
    async mi commands can now be executed, if the underlying rpc
    transport module supports it (e.g. xmlrpc).

commit 4d5abbd5a1070ce45f5c7f31d758a70df686296c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Sep 24 17:58:38 2009 +0200

    tm: t_uac_wait rpc error path fixes
    
    - fix no reply sent on t_uac() failure
    - free "delayed" context on t_uac() failure

commit 0d6fcb8e786c89e25ac0ac11eab59ab108b97ab6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 23 22:21:07 2009 +0200

    tm: fixed empty sl reply warning

commit 33c8757246f5a775f6b918f4e629e3c645ad1345
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 23 21:48:32 2009 +0200

    tcp: killed warning
    
    Killed warning for the case when a connection is force closed on
    purpose (via set_reply_close()).

commit 3cf20fed4d75797eec1ae820da8d8ab9abcdc668
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 23 20:59:40 2009 +0200

    tm: set T before entering local-request route

commit 07599b8befbc37f37372c64b83e84bbc1164e1cd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 23 16:19:11 2009 +0200

    xmlrpc(s): doc updated
    
    - escape_cr and double_lf_to_crlf documented

commit da2a085760f30c8b0afb72555871465e551f0060
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 23 14:12:50 2009 +0200

    xmlrpc(s): option for replacing double lf  with crlf
    
    Added "double_lf_to_crlf" config parameter. When set double LFs in
    the input xmlrpc strings are replaced with CR LF. This is needed
    to work around some xmlrpc buggy clients that don't escape CR
    ('\r' should be escaped to &#xD; ). When using one of those buggy
    clients, use double LF as an escape for CR LF and turn this
     option on.Turning this option on makes it also more compatible with
    kamailio tools (kamailio mi xmlrpc always converts double LF to CR
    LF).
    Note that when double_lf_to_crlf is on it's not possible to send
    a double lf.
    
    Here is what the xmlrpc modules sees for various combinations of
    CR and LF in the input, when CR is _not_ escaped:
             0        1      (double_lf_to_crlf)
    \n   -> \r       \r
    \r   -> \r       \r
    \r\r -> \n\n     \r\n
    \n\n -> \n\n     \r\n
    \r\n -> \n !!!   \n !!!
    \n\r -> \n\n     \r\n
    
    Note that when double_lf_to_crlf is 0, the xmlrpc module behaves
    correctly according to the xml specs.

commit 238635d54eff8a176cfaf1fe26322b7de86fdac1
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Sep 23 12:59:56 2009 +0200

    xmlrpc(s): escape CR in replies
    
    - escape CR ('\r') in replies: each '\r' is replaced with &xD;
    - added new parameter: escape_cr which controls CR escaping: if on
      (default) CR in replies are escaped (according to the xml spec),
      if off, they are not (which in most cases would result in the
      xmlrpc client ignoring them).

commit d9100ccaadbb3d6cb6696ac6919d8dce163f5abd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 22 19:27:16 2009 +0200

    tm docs update
    
    Added disable_6xx_block, ruri_matching, via1_matching,
    pass_provisional_replies, default_code, default_reason,
    t_set_disable_6xx(), t_set_disable_failover().

commit cfa35518d7517092efef75d2d296f4340f1dfb53
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 22 16:34:04 2009 +0200

    core: minor macro fix

commit 4f03bb4d8f3d274f2a1f123dc527d2b702b6ad7c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 22 16:27:16 2009 +0200

    tm: disable 6xx or failover on a per message basis
    
    Added support for disabling 6xx special handling and dns failover
    on a per transaction basis:
    
    - t_set_disable_6xx(0|1): disable(1)/enable(0) 6xx rfc special handling.
    - t_set_disable_failover(0|1): disable/enable dns failover.
    
    They both work either on the current transaction (if it was
    already created) or on the next transaction that will be created
    (e.g. t_set_disable_6xx(1); t_relay()  works).

commit 700002804c7438c6b7f35572d4b5854bdb203389
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 22 15:37:52 2009 +0200

    perl(k): makefile vars use '_' instead of '-'

commit 45e905059a12f242abd84e0adf2a5afa613da145
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 22 14:20:54 2009 +0200

    tm: more cfg framework parameters marked as ATOMIC

commit 77e7d5164dde66d3ec5dd7b86c3cbd586e9e25d7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 22 13:07:14 2009 +0200

    tm: support for disabling 6xx special handling
    
    Added disable_6xx_block (same name as in kamailio), which when set
    will cause the 6xx to be treated like a normal reply (breaking the
    rfc). Default is off.
    It can be set also at runtime, e.g.:
    sercmd cfg.set_now_int tm disable_6xx_block 1

commit 10f862b37d9ffa8776f80dd9f2e952c8d9a00913
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 22 12:47:19 2009 +0200

    kamctl: Makefile to install the tool

commit f6f895e95d3274c5f872f81a83dbbc71fe7623fb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 22 11:29:22 2009 +0200

    kamctl: files moved in tools/kamctl/
    
    - second stange of moving files in own directory
    - renamed tmp dir: tools/kamctl1 => tools/kamctl

commit 04a0e7f4c8ea05641029060c92313f1c4b3ca7bd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 22 11:27:49 2009 +0200

    kamctl: moved files in own directory
    
    - tools/* => tools/kamctl1/*
    - avoid the mixture of kamctl and pike_top tools

commit 68e94429aed653c73f80db1a742e291ffd6e3384
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Sep 21 18:43:37 2009 +0200

    tls: tls state is now separate from tcp state
    
    - tls connection state is now kept separately from the tcp state.
    - update tls_h_fix_read_conn() to what tcp expects now.
    
    Closes: FlySpray#14.

commit c390fed30a67655a8d45c7210b06d82bde9f3820
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Sep 21 18:41:26 2009 +0200

    tcp: tls fix_read_con hook return changes
    
    tls_fix_read_con doesn't change the tcp connection state any
    longer, relying instead on different return codes.

commit 6d263c0c6152fea5991f02a26f24a6488e94c73b
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Sep 21 18:39:41 2009 +0200

    tcp: remember which connections were accepted
    
    Use a new flag to remember which connection were passively opened
    (accept()) and which were locally initiated (connect).

commit 58e87237864ceee603f6f0273019296208542153
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Sep 21 18:37:14 2009 +0200

    script paser: snd_proto names not recognized fix
    
    - if (snd_proto==...) did not work anymore when used with proto
      names instead of numbers.

commit d29c959ab97d4f51975401b85b0bb84f85589e12
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Sep 21 10:06:11 2009 +0200

    script paser: proto names not recognized fix
    
    - if (proto==...) did not work anymore when used with proto names
      instead of numbers.
    
    Reported-by: Nils Ohlmeier  nils at iptel org.
    Closes FlySpray#15.

commit ba3d64ff8d1ec6904df906012d1e9f89e5abdc8a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Sep 21 09:17:04 2009 +0200

    tls: makefile fix
    
    - wrong order (extra rules should be placed after include
      Makefile.modules)
    
    Closes FlySpray#17.

commit 8205f043c43282a209673364961d23c6b74cee72
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Sep 21 09:16:14 2009 +0200

    tls mk cert script: typo fix

commit b2ba3a96b33e4bac14a9de6b615665af9f598c78
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 18 23:56:08 2009 +0200

    xmlrpc doc: use set_reply_close()
    
    Updated doc & examples to use set_reply_close() and
    set_reply_no_connect() in the XMLRPC route instead of return -1.
    (this allows using rpc async commands with the broken python
    xmlrpclib).

commit cc256eba86a81f61ead4e00c39d81858b5e5e56c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 18 21:03:26 2009 +0200

    tm: send_flags can be used in branch & reply routes
    
    Forwarding send flags can now be used in branch routes (and they
    will affect only the current branch) and in reply routes (if the
    reply will be forwarded, either as provisional or final reply, the
    send_flags will affect it, but they will not affect other
    replies).

commit 8ed9165103cfe93172ee18904a2f210674edfdce
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 18 20:58:20 2009 +0200

    core: send_flags support in the onsend_route
    
    send_flags can now be set also in the onsend_route
    (via set_forward_no_connect() or set_forward_close()).
    
    E.g.:
    onsend_route{
    	if (dsp_ip!=10.0.0.0/8)
    		set_forward_no_connect(); # don't open new connection,
    		                          # only reuse
    }

commit b8d528b657bd52fce0b342e01380001b4ffa15fe
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 18 20:52:37 2009 +0200

    tcp: fix fd leak on async error or quick connect
    
    In some error cases (from which the most likely to appear in
    real-life would be maximum global send queue size exceeded),
    the fd for a new created connection (in tcp_send()) was not closed
    when the connection was destroyed.
    Same thing happened in the case of a "quick" connect (connect & send
    finish immediately, this happens in general only on localhost) for
    a connection marked as close-after-send (via the new msg
    send_flags).

commit 0fa4b2d5a4d9700eed970d36ed1bb803c1f07d21
Merge: 5b1cd71 3c7744d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 18 13:36:33 2009 +0200

    Merge commit 'origin/andrei/path'
    
    * commit 'origin/andrei/path':
      core: add path route headers after local via
      core: path support when forwarding
      tm: path support
      xlog(s): updated to the new next_branch()
      registrar(s): updated to the new append_branch()
      permissions(s): updated to the new next_branch()
      osp(s): updated to the new append_branch()
      exec(s): use ser_append_branch() instead of append_branch()
      cpl-c(s): updated to the new append_branch()
      tm: updated to the new append_branch() & next_branch()
      enum: s/km_append_brach/append_branch/
      avpops: updated to the new append_branch()
      core: append_branch & next_branch api changes
    
    Conflicts:
    	modules/tm/sip_msg.c
    	modules/tm/t_fwd.c

commit 5b1cd719918a51ca8f4b4a05dbc34e27fd1ae58c
Merge: 643491d d12ab18
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 18 13:16:26 2009 +0200

    Merge branch 'rpc_async'
    
    * rpc_async:
      tm: async t_uac (t_uac_wait) support
      xmlrpc(s): basic support for delayed replies
      core: rpc capabilities and delayed reply api
      core+tm: moved sip msg clone functions to the core

commit 643491da0b3cb9a87d278c08ed5e0879511ddfc1
Merge: 43d869c 51205ff
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 18 12:57:42 2009 +0200

    Merge commit 'origin/andrei/send_flags'
    
    * commit 'origin/andrei/send_flags':
      NEWS: update
      core: new close after send and reuse only script functions
      tcp: send_flags support
      sl: use the msg reply send_flags
      tm: support for send_flags
      core: send flags support

commit 43d869ccd2ae997338e4009aa760862589feca3d
Merge: d36cf00 ac7dd1c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 18 12:54:50 2009 +0200

    Merge commit 'origin/andrei/to_parser_fix'
    
    * commit 'origin/andrei/to_parser_fix':
      core: to parser fix

commit d36cf0094b7bc5c11e2c1f6aa26a0e8af79ed746
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Sep 17 21:10:26 2009 +0200

    iptrtpproxy doc: regenerated README

commit 4c46434cd34b01eb01c5f2cd03505112e4cc07d9
Merge: 54ec528 bff30ca
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Sep 17 21:07:54 2009 +0200

    Merge commit 'origin/ser_modules'
    
    * commit 'origin/ser_modules':
      cfg framework: fix the initialization of child processes
      - iptrtpproxy.cfg support (share config data between iptables and ser module)

commit bff30ca30dcda56130c780af63089327cc8dfaaa
Merge: 8e1f906 c76cffa
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Sep 17 21:05:45 2009 +0200

    Merge branch 'cvs-head' of ssh://git.sip-router.org/ser_modules into ser_modules
    
    * 'cvs-head' of ssh://git.sip-router.org/ser_modules:
      cfg framework: fix the initialization of child processes
      - iptrtpproxy.cfg support (share config data between iptables and ser module)

commit 51205ff5d47a04a8a4f89ac18b45b3c05f02ec1f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 15 17:51:40 2009 +0200

    NEWS: update

commit 58cbf7f7e13fa383a76d9f67d38a686ae5e8babe
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 15 17:47:33 2009 +0200

    core: new close after send and reuse only script functions
    
    Added new script functions for setting send options for the
    current message or its replies:
    
    - set_forward_no_connect() - the message will be forwarded only if
      there is already an open connection to the destination.
    - set_reply_no_connect() - like above but for replies to the
      current message.
    - set_forward_close() - hint that after forwarding the current
      message the connection should be closed.
    - set reply_close() - like above but for replies.

commit 340ce466abb2938ba9db1d3cb1d8b10819c1e2aa
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 15 17:45:41 2009 +0200

    tcp: send_flags support
    
    Support for SND_F_FORCE_CON_REUSE and SND_F_CON_CLOSE added to the
    tcp code.

commit c055af91592c671f6a97f23c0c11dcf8d73f3010
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 15 17:44:50 2009 +0200

    sl: use the msg reply send_flags

commit bf0a0d42e810f6f8c3999b7f3f2b668ae0bad1d6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 15 17:43:24 2009 +0200

    tm: support for send_flags
    
    The send_flags are taken from the current message and added to the
    retr_bufs (for branch uacs and replies).

commit 67c9277aaa07fb6b8c91fc38e761d30426ded8b5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 15 17:38:06 2009 +0200

    core: send flags support
    
    Added support for send flags and per message send flags.
    Right now there are 2 flags defined:
     - SND_F_FORCE_CON_REUSE (forces connection reuse, send will fail if
       a connection does not already exist to the destination)
     - SND_F_CON_CLOSE (hint that after the send completes the
       connection should be closed).
    The send flags can be passed directly to msg_send() via
    dest_info.send_flags or they can be set for each sip_msg, in which
    case forward_request() and forward_reply() will obey them.
    The sip_msg flags can be set for replies or for forwarding.

commit 54ec52858d97a416d3927b1ea2f58e7ebe46af46
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Sep 14 17:57:40 2009 +0200

    tm: callback param free functions can use shm_free()
    
    The release function of the callback parameters is
    called outside of the shared memory lock to make the
    implementation of such functions easier.

commit 3c7744da21a2c2cb82dfdfc28f43f65e139b91cf
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Sep 14 13:32:08 2009 +0200

    core: add path route headers after local via
    
    - minor header order fix: route header generated from recorded
      path are added after the local via if no other route headers are
      present in the message (they were added in front of the local
      via until now).

commit 821fd05f219b677e08173c5aeb1c1456118b6200
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Sep 14 10:16:24 2009 +0200

    imc(k): fix copy&paste error in example

commit d22073013189ded58fffe3aad4ef65b9085bc99a
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri Sep 11 12:54:19 2009 +0200

    cfg framework: CFG_CB_ONLY_ONCE documented
    
    CFG_CB_ONLY_ONCE has been documented

commit ceef844014b6e4d93e319a3ff8ecf70983bdc30f
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri Sep 11 12:08:13 2009 +0200

    cfg framework: CFG_CB_ONLY_ONCE flag
    
    CFG_CB_ONLY_ONCE flag indicates that the per-child
    process callback is called only once after the changes
    to the global config have been committed.
    (The first child process that updates its local
    config calls the callback, and no other child
    process does so.)
    The per-child process cb is intended to be used to
    update the config variables that are stored outside
    of the cfg framework. By default this callback is called
    by all the child processes separately, this can be change
    with this flag.

commit 170ad2a01ec5047a05222dab115955e2544e5845
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Sep 10 19:32:41 2009 +0200

    pdbt: add one helper script, protocol and input data documentation

commit d32fa103f1ddad5f44d986dd0b148d110ed3033c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Sep 10 18:35:05 2009 +0200

    pdb: add daemon 'pdb_server' and optimising data compiler 'pdbt'
    
    - add number portability database daemon and optimizing data compiler
    - add debian packaging scripts for tool and daemon as well
    - TODO:
      - add documentation (run binaries with '-h' for now to get help)
      - fix this redundant declaration of trie (dt* files) and logging (log*).
        There exists already an implementation that uses the sr core parts for
        this, but we import the proven implementation for now.
      - add data helper scripts as well, they need some cleanup first
    - initial implementation was done from Hardy Kahl @ 1&1 Internet Ag
    - further bug fixes from Timo Reimann, timo dot reimann at 1und1 dot de

commit 72c4ec9e940d635684b4963ea5175292caa9604e
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Sep 10 18:23:21 2009 +0200

    test: fix path in test 2, add pdb module

commit 008e40a3c1e948f2af213489a9eefd95ea3f51eb
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Sep 10 18:22:07 2009 +0200

    add pdb module to the 'stable, but for special use' group in Makefile

commit 2ea97b8a9a65aaceba8e19fbfc043924a4a82038
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Sep 10 18:11:56 2009 +0200

    tm: mem leak correction #2
    
    - shm_free() needs to be used instead of shm_free_unsafe()
    - The callback params may have a release function

commit 05af490239a5556704999d613e140e25425b0888
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Sep 10 17:50:57 2009 +0200

    tm: minor mem leak corrected
    
    After the memory of a cell is allocated other modules
    immediately have a chance to register transaction callbacks,
    and they may also allocate additional memory for
    the callback parameters. When sip_msg_cloner()
    failed, the memory allocated for the callback
    list was not freed. This happend only when the available
    shm memory was already very low which caused sip_msg_cloner()
    to fail.

commit 0e24d9be231fc54e13fd069ae28cc050cc708664
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 10 16:22:08 2009 +0200

    textops(k): new function - msg_apply_changes()
    
    - apply changes done to SIP request content (e.g., via subst(),
      append_hf(), remove_hf(), etc.)
    - after using this function, the content of SIP message buffer is
      updated and the initially recevied content is lost
    - function can be used in request route blocks
    - be careful when used since:
    	- it changes the way you're used so far
    	- not much tested with various modules

commit e265d13757b57e88c53bfdbb9f6d3580383d3788
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 10 14:51:08 2009 +0200

    imc(k): return code classes per command
    
    - for each imc command a range of negative numbers is reserved to signal
      errors to config file
    - example enhanced to replect the need of sending replies from config
      file

commit 3c807bd3a4428566ad00e12fb0155b04fe636403
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Sep 9 12:12:58 2009 +0300

    modules_k/imc: fixed typo in #help reply

commit f884abbb574bdbfee99e234d0d3876f589c8d9dd
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Sep 9 09:54:38 2009 +0300

    modules_k/imc: added "extra_hdrs" module variable
    
    Added "extra_hdrs" module variable that can be used to inject extra
    headers to messages send out from IMC server.

commit d64d6bb9dd10499b83aa811557beb77714b74c5f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 8 19:21:49 2009 +0200

    core: path support when forwarding
    
    Path support compatible with kamailio (although there might be
    differences in the added Route header position).

commit 7d242ad8e9070724e7e4b0eedf1576d53b1b2aa7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 8 19:20:00 2009 +0200

    tm: path support
    
    Path support compatible with kamailio.

commit e6cb84bec9a11cafc2283e4c89089c5efd280156
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Sep 8 19:14:01 2009 +0200

    new module: connector to Portability number DataBase daemon
    
    - new module, connector to portable number database daemon, pdbd
    - the daemon implements a custom UDP protocol that allows the query of a custom
      number portability database optimized for speed and memory efficieny based
      on the 'cr' trie datastructure
    - the daemon allows the storage of a number to carrier mapping for e.g. whole
      germany in a few hundred megabytes of RAM, and their efficient retrival
    - the connector module supports aggressive time outs to keep the post dial
      delay low, it will return then a failure and default routing is possible
    - TODO: port daemon and optimizing compiler as well, extend README
    - this daemon (in its OpenSER version) has been used in production, but some
      bugs could be slipped in the porting process
    - credits for implementation: Hardy Kahl @ 1&1 Internet AG

commit 4fece01ed8687e1be8678dd4de63cebd2095d95b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Sep 8 18:03:50 2009 +0200

    cr: bug fix in new introduced function, cr_nofallback_routing

commit cb632b338cad0e7229372bec7eb1cd0d97a63014
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Sep 8 17:42:14 2009 +0200

    cr: protect against user error when backup is the same as initial host, port from r5924

commit c576a5a2e638aa05d31305d11ec05994af7584d9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Sep 7 13:15:44 2009 +0300

    modules_k/imc: degraded log message
    
    * Degraded log message from info to dbg in imc_parse_cmd function.

commit 8dc53feb5a6b72d9f3ebf934fed9564d4e884ed5
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 7 10:34:58 2009 +0200

    cr: new function 'cr_nofallback_route'
    
    - add new function 'cr_nofallback_route' which behaves exactly like
      the existing 'cr_prime_route' function but uses the standard CRC32
      hash instead of this prime function to provide an path away from
      this function
    - mark 'cr_prime_route' function as obselete in docs
    - patch from Carsten Gross, carsten dot gross at 1und1 dot de

commit 3b70140725f180026e30d327a0fb81b3e8902905
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Sep 7 10:19:38 2009 +0200

    cr: add random distribution function
    
    - add a random distribution function to cr
    - patch from Marius Zbihlei, marius dot zbihlei at 1and1 dot ro

commit f0a71b9957f94715c5cf7c25a7265e19ff1e277c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Sep 4 18:14:11 2009 +0200

    registrar(k): port from r5923: information leak bug in registrar

commit 9566b04be793c5a4219cd0ebb55f95b7659d2e41
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Sep 4 17:56:31 2009 +0200

    userblacklist(k): fix error in check_user_blacklist DB code
    
    - fix an error in the check_user_blacklist DB code, we need to return
      the WHITELIST node when we found a value != zero
    - reported from Alexandr Dubovikov, Alexandr dot Dubovikov at qsc dot de

commit 9a0b182593cd4709cc73c463a916de6a78aa7ccc
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Sep 4 17:44:43 2009 +0200

    userblacklist(k): add new function 'check_user_whitelist'
    
    - add new function 'check_user whitelist'
    - patch from Alexandr Dubovikov, Alexandr dot Dubovikov at qsc dot de
    - works like the existing check_user_blacklist, but return -1 when not
      the user is not found

commit 858f5afd22ee01a4b476f47474314ee4735467c3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:24:16 2009 +0200

    xlog(s): updated to the new next_branch()

commit d9ebb640e2d659aa5d76809b18c9b1241f69525c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:23:44 2009 +0200

    registrar(s): updated to the new append_branch()

commit 8a9b30a1ddef464ac1f0f5759528f79e65597e14
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:23:17 2009 +0200

    permissions(s): updated to the new next_branch()

commit bf527133f33fdeb09dfbd4525fedf33a32a821cd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:22:38 2009 +0200

    osp(s): updated to the new append_branch()

commit 71cd365421f6ee1ac302e2c1d3473f71bb74dd30
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:22:07 2009 +0200

    exec(s): use ser_append_branch() instead of append_branch()

commit dda1de2cad624c351b252f02829314f0130c8f0f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:21:26 2009 +0200

    cpl-c(s): updated to the new append_branch()

commit c667a8c4af42fb4291d37809e721cc3bd811027c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:19:27 2009 +0200

    tm: updated to the new append_branch() & next_branch()

commit 92b49b268e31a6a3e154e03aff671dc828a89e42
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:18:17 2009 +0200

    enum: s/km_append_brach/append_branch/

commit 47e589e01fb9f927b135c41a0fcc1caadbd6fef7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:16:58 2009 +0200

    avpops: updated to the new append_branch()
    
    - fixed swapped params in append_branch() call
    - updated to the new append_branch()

commit c43dc0cd35eff000a2eb7e40c65d85367c58e412
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Sep 4 15:09:08 2009 +0200

    core: append_branch & next_branch api changes
    
    - added path, branch flags support and switched the parameters to
      str for append_branch and next_branch. append_branch is now
      exactly the same as km_append_branch.
    - added ser_append_branch for compatibility with ser modules which
      don't need the extra parameters.
    - updated core code to use the modified api.

commit 3e493f4d363966db93bc32bca62c10ca6a14b927
Author: Nils Ohlmeier <lando@bespin.rfc3261.net>
Date:   Thu Sep 3 16:22:48 2009 +0200

    oob cfg: merged changes from last SIPit
    
    This version of sip-router-oob.cfg was successfully tested at
    SIPit 24. The changes are:
    - re-organzied the NAT detection
    - added lots of comments about NAT detection
    - renamed the record- and loose-routes
    - added an inactive ENUM route
    - activated DNS NAPTR and SRV options
    - disabled TCP async to allow usage of TLS
    - disabled the files limit as this prevents the usage of the config as non-root
    user on most systems

commit c92d65efc7ea5abb4c4a718ff5e90e2ec7ad6cb3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 3 14:43:29 2009 +0200

    domain(k): regenerated readme
    
    - include new parameter 'register_myself'

commit 1c9c433f7be395652bb28c5af61d2f64f33da926
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 3 13:18:31 2009 +0300

    core: include replaced with include_file
    
    - due to opinions expressed on mailing list suggesting it reflects
      better the meaning

commit 3653a528efc6f9f760ec31f506b37e567c6ed275
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 3 13:16:27 2009 +0300

    domain(k): new module parameter - register_myself
    
    - cotrol registration of domain list to 'myself' check callbacks
    - disabled by default (requested by Juha Heinanen for backward
      compatibility)

commit c76cffae64d8f1711f776de2bf23f64265b1a432
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Sep 3 09:56:18 2009 +0000

    cfg framework: fix the initialization of child processes
    (backport from sip-router)
    
    The number of child processes that keep updating their
    local configuration needs to be known before any child
    process is forked.
    Before this the child processes increased the reference
    counter of the callback function list items after forking.
    If a child process was forked "too fast" then it freed the list
    before the other processes had a chance to refer to the list
    item. The result was that some child processes missed
    the initial configuration changes. (Those changes that
    had per-child process callback defined.)

commit d12ab1890360072e6b1658b3f738f56a9590f872
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Sep 1 18:44:36 2009 +0200

    tm: async t_uac (t_uac_wait) support
    
    t_uac_wait implemented using the new rpc "wait" support.
    For now the implementation is just the fifo uac updated to use
    rpcs.
    The result of the rpc call is the reply code (int) followed by a
    list of strings:
    reason phrase,
    request uri,
    next hop uri,
    dialog routes list (one string with all of them),
    rest of the reply (everything except the first line in one
    string).
    
    Missing parts are represented by empty strings.
    The current format is not yet final. It might make sense to switch
    to a structure if there is no backwards compatibility problem.

commit 4dc222c20c93899a35046c1559a94618fb01e84d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 30 15:45:11 2009 +0200

    xmlrpc(s): basic support for delayed replies
    
    Support for delaying replies with a few caveats:
    - a special delayed reply context must be created first (via the
      new rpc hooks).
    - a function using this context does not have any access to the
      original rpc message (so if it needs any parameters from the
      original rpc request it must pass them somehow to the function
      that will use the delayed reply context).
    - a delayed reply context can  be used _only_ from one process (is
      not possible to add part of the reply from one process and
      another part from another process).
    - when finished the delayed reply context _must_ be closed (using
      the new rpc hook). This must be done from the same process in
      which the delayed reply context was used.

commit e256ce91db53172264a6e42cfd5040b30dada526
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 30 15:40:42 2009 +0200

    core: rpc capabilities and delayed reply api
    
    - added a new rpc function for interrogating the current rpc
      transport capabilities (for now the only extra capability is
      RPC_DELAYED_REPLY).
    - added a new special delayed reply rpc context and  rpc functions hooks for
      creating and closing it.

commit 81860287cd49b762eafb49a50a0345fc89be2b93
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 30 15:35:37 2009 +0200

    core+tm: moved sip msg clone functions to the core
    
    - moved all sip msg clone related functions to the core, since the
    xmlrpc modules will need them too.
    - renamed sip_msg_cloner() to sip_msg_shm_clone().
    - msg_lump_cloner() is no longer static and returns 1 for no
      change, 0 for successful cloning and -1 on error.

commit 5322385b2238c1cff272a42b8fa7e234f36a6f0b
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Sep 2 17:03:57 2009 +0200

    cfg framework: fix the initialization of child processes
    
    The number of child processes that keep updating their
    local configuration needs to be known before any child
    process is forked.
    Before this the child processes increased the reference
    counter of the callback function list items after forking.
    If a child process was forked "too fast" then it freed the list
    before the other processes had a chance to refer to the list
    item. The result was that some child processes missed
    the initial configuration changes. (Those changes that
    had per-child process callback defined.)

commit ef2cebf7ac61e36c7cb0f3b01853e8560cd3bf86
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Sep 2 18:02:20 2009 +0300

    modules_k/htable - documentation clarification
    
    * Clarified meaning of "size" parameter in htable definition.

commit 67ae0865fbdc175b0e72eadb6a098325e9168a70
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 31 13:01:46 2009 +0300

    core & avpops: fix overlapping avp flag
    
    - k avpops uses a flag to mark whether a loaded avp from db has changed,
      in order to decide if worth to update db
    - the value was overlapping with flags defined in sr core
    - reported by Juha Heinanen

commit b1a941a21c7404c6a21df45b988b40695efcb347
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Aug 28 20:40:05 2009 +0300

    modules/lcr: added checks on validity of lcr_id parameter.

commit c29222b15340f6b86b839811b322e4953b020041
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 28 11:46:31 2009 +0300

    modules_s: include sr_module.h
    
    - some modules updated to include sr_module.h as they need access to
      fparam_t
    - previously that was inherited from modules_s/sl/sl_funcs.h which was
      included by modules_s/sl/sl.h
    - modules_s/sl/sl.h became simple API definition being included by
      modules_k/sl/sl.h in order to export same API in K version

commit 0658a37570683eaec57f138e5a07feb59f4bfbaf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 28 11:44:37 2009 +0300

    xmlrpc(s): remove the K sl define
    
    - no more needed - the modules should work the same with any version
      of sl module

commit 91c1f6c8b9731d0c6d760e93cd5477f7b4cf938a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 28 11:40:35 2009 +0300

    sl(k): implement ser-like SL api
    
    - SER modules dependent of sl module can work now with k-sl
    - exported sl_send_reply() ser function takes the reason as charz while k version is str
    - conflict was resolved since SER does the export via sl_api_t structure
      and bind_sl() function, kamailio does via sl_binds structure and
      load_sl() function - both are now included in k-sl module

commit 974722abe961b7833ca06292f8032737fe2a479e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 28 11:38:14 2009 +0300

    sl(s): move typedef of sl_send_reply_f in sl.h
    
    - modules_s/sl/sl.h is included by modules_k/sl/sl.h to export ser-like
      SL API in kamailio sl module
    - allow using ser modules dependent of sl with k-sl module

commit 0fa738b70e8978587f0a1ca7e5db54b12ece4e43
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 27 11:28:33 2009 +0300

    core: use count() for 'include' directive

commit 1dfc197d38672eac079ad2a93238cb5642c6c253
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 27 11:22:10 2009 +0300

    core: callback function support for myself check
    
    - modules can register callback functions for myself check condition
    - domain module is one candidate, resulting in coherent handling of
      local domains via check myself operation
    - callback functions must have same prototype and return codes as
      check_self(...) function from core

commit a9f1019eea67956117677bb2566106db07128c86
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 27 11:20:29 2009 +0300

    domain(k): register check self function
    
    - list of domains handled by module match now the 'myself' condition
    - the module register a callback function for 'myself' checks
    - port and proto are ignored since it has only domain names

commit b3368c5296efeba88b4823fa50903e2d4f9a975d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 26 20:23:03 2009 +0200

    perl: use C append_branch() in Perl function
    
    - perviously mk_action() was used resulting in lot of pkg operations at
      runtime
    - fixes the memory leak reported by James Pucket

commit eb31249895a52c351529c05ce7622b6382c87d83
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 26 13:19:36 2009 +0300

    core: included file name must be between double quotes
    
    - better suggestion that is a static string value (Jan Janak)
    - new syntax:
    include "file_name"
    - inside double quotes, following escape are allowed for now
    	- \t - tab
    	- \w - white space
    	- \r - CR
    	- \n - LF

commit eac773a6d4701391739a61e7eca8c23b80e1e429
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 26 11:51:51 2009 +0300

    core: action struct holds cfg file name and line
    
    - useful to print cfg file position for runtime action errors

commit 8c69c5036d520d9b846f0a9fc0c8d20e686cdcb8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 26 11:50:25 2009 +0300

    core: print cfg position for action's runtime error

commit 7484db5b7d25b10c3603a6676c66232f430fc863
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Tue Aug 25 19:30:14 2009 +0000

    - iptrtpproxy.cfg support (share config data between iptables and ser module)

commit d20565193c1176312a29d75710d494707abdf6a5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 25 19:27:01 2009 +0300

    core: support for include file in cfg
    
    - syntax:
    include path/to/file
    - example:
    include checks.cfg
    - path can be absolute or relative
    - if path is relative:
    	- first attempt is to open the file relative to current directory
    	- second attempt is to open the file relative to the directory
    	of the file including it
    - if include file fails, then print error and exit
    - cfg syntax error messages print file name
    - there is no restriction where 'include' can be used, can have
    global parameters, module configs or entire/parts of route blocks

commit 778c4352f2cbbc572a001e7ef9f2bf18d453a302
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Tue Aug 25 11:36:59 2009 +0300

    rls: memory leak fix
    
    - port of K #5909

commit a3b0f700d10d0b310766a34ec6e7390455e5ba64
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Tue Aug 25 11:16:53 2009 +0300

    rls: fixed supported header name
    
    - port of K #5908

commit 6dac6b618015314811b94127490e906d535f44fd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 20 16:12:35 2009 +0300

    pv: new pv class $sel(name)
    
    - access select (ser cfg variables) values via PV framework
    - read-only PV
    - examples: $sel(@ruri), $sel(@via[2].host)

commit c37c22b4af29fed88c5655a5405876ffc640e5b2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 20 12:57:01 2009 +0300

    core: support to add rport parameter to local via hdr
    
    - new cfg function - add_local_rport() - to add rport parameter to local
      via header (rfc3581)

commit c745469fb8af0101b26de8bee82c4314dfcafab9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 20 11:49:14 2009 +0300

    core: server signature value can be set via param
    
    - server and user agent signature were only defines so far
    - two new parameters server_header and user_agent_header allow
    to define them via cfg parameters
    - default values are the same so far

commit d3be842237ba670d671b8af0f59a39dda7503545
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 20 11:48:35 2009 +0300

    tm: use server signature from config var

commit 95bf86454e277a7a0ef1c41c2995806f65eda17b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 20 10:41:02 2009 +0300

    core: added log_name config parameter
    
    - log_name allows to set app name to be used when printing to syslog
    - useful to filter log messages when running many instance on same server

commit bb0fac6ac04af672dceca9ae1f4ca43106fb56d1
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Aug 19 16:54:53 2009 +0200

    auth(k): fix proxy/ www_challenge function, extends docs a bit (port r5874)
    
     - proxy_challenge / www_challenge was not sending any reply, in case
        the nonce could not be created (with nonce_reuse = 0, default since 1.4)
     - added a note to the docs about return-values from the auth-module
     - regenerate README file

commit c742ca80bcdfdd844a0dd03138b1c67c6995be57
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Aug 19 16:51:44 2009 +0200

    lib kmi: fix double allocation length calculation in mi_add_attr function
    
    - patch from marius zbihlei, marius dot zbihlei at 1and1 dot ro, port from r5882

commit 1a0c0dd44a6d45d6193d7adb487a2d7665474d2f
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Aug 19 16:44:48 2009 +0200

    cr: small fix in doxygen, fix obselete function description (port from r5897)

commit 5ec9f271fad97a4abbf151e55eaf509c3d9f5722
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Aug 19 16:40:04 2009 +0200

    cr: documentation extension related to the prime route behaviour (port r5898)

commit 91d2ed7e550aee380a03333abff557cb427bf03d
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Aug 19 16:37:10 2009 +0200

    auth_db(k): fix error in auth_db documentation for calc_ha1 (port from r5910)

commit 21775b41536b6d623e3bd750feb015b13b423fcf
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Aug 19 16:35:06 2009 +0200

    cr: fix stupid bug related to the (legacy..) prime_route function (port from r5911)

commit 20747a3a7ce264b8f6bef5e79d2d49ba107c6259
Author: Jan Janak <jan@iptel.org>
Date:   Fri Aug 7 14:19:36 2009 +0200

    auth_identity: Add -lrt and -ldap to the list of libraries
    
    Two more libraries are needed when compiling auth_identity module
    statically, -lrt and -lldap.
    
    Reported by MÃSZÃROS MihÃ¡ly <misi@niif.hu>

commit a2bae03c1760ea5764728e3611ee82161270bedd
Author: Jan Janak <jan@iptel.org>
Date:   Fri Aug 7 13:35:39 2009 +0200

    tls: Set internal module name to "tls".
    
    Set module name to "tls", not "tlsops".
    Reported by MÃSZÃROS MihÃ¡ly <misi@niif.hu>

commit b16b129457bb7f1198fab78bea367e5c19ea8ca7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 4 16:53:44 2009 +0200

    topoh: new module for hiding topology details
    
    - transparent for script writer and processing type (stateless,
      stateful)
    - it is not affected by server restart
    - can handle cloud deployments by using same secret key

commit 85acffe10f182c5d0cfb382f33ff5a2d1203524a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 4 16:47:10 2009 +0200

    core: new sr events system
    
    - designed to have small footprint in core
    - the goal is to execute a event manager function during core processing
    - event managers can be implemented in modules or elsewhere
    - two event types added: SREV_NET_DATA_IN and SREV_NET_DATA_OUT (see the
      other commit)

commit 88b792e4932b33700f5240be3923c19394c8e4d0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 4 16:43:30 2009 +0200

    core: execute callbacks for NET_DATA_IN and NET_DATA_OUT
    
    - NET_DATA_IN is executed when a sip message is received. The callback
      may replace the content of incoming buffer, assuming BUF_SIZE for its
      size
    - NET_DATA_OUT is executed when a sip message is sent. The callback may
      replace the output buffer content with a new pkg location

commit cabd988384344a485377b817da4dc49ab0151a91
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 3 15:54:54 2009 +0200

    presence_xml: define _DARWIN_C_SOURCE 1
    
    - compile the module on darwin, workaround for strptime

commit b1336a679ad482b67e0373ac71744c18cbbd3942
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 30 15:57:27 2009 +0200

    core: script parsing avp flags fix
    
    Fix bug when parsing attr_id_any_str used by the avp flags
    script functions (setavpflag(), resetavpflag(), isavpflagset()).
    
    Closes: SR #11.
    Reported-by: Greger Viken Teigre  gregert at teigre com.

commit 46b785247c6d9c4c96fca25ad3ad66312933aa48
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 29 16:39:07 2009 +0200

    ignore auto-generated files on mac os x

commit d34c702efad58d158c01aca988c006227292488f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 29 11:20:59 2009 +0200

    registrar(k): local send_reply() renamed
    
    - new name reg_send_reply()
    - symbol conflict with sl module version on darwinos

commit ba2df49a2b69c1fd13cf579a79747188bd77d596
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 29 11:13:05 2009 +0200

    rls(k): include lib/kcore/hash_func.h
    
    - fix warning for using core_hash() function

commit 0899e739f510fde20ff0705076aeb6e3ee57a2ce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 29 11:08:39 2009 +0200

    modules_s: destroy() function set to static
    
    - fix namespace conflicts on darwinos

commit 81fad30ac1b1e0674442e1651d20dd7ffceac19e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 29 10:41:25 2009 +0200

    modules_k: destroy() functions set to static
    
    - fix namespacing conflicts in darwinos

commit 1ba4916a601b9be89507b7b1d3f3f583ca40a6eb
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Jul 24 19:10:23 2009 +0300

    modules/utils: added check on size of http_query reply
    
    - Added check on actual size of http_query reply body that fixes possible
      crash if body does not contain a linefeed.
    - If body does not contain a linefeed, return whole body as result.

commit 934de3e13e2d37ef7d820fbba80264de7cb1fd9e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 21 01:18:38 2009 +0200

    tm: dialog send_socket support
    
    t_uac()/t_uac_prepare() use now the dialog->send_sock if set
    (fixes rpc t_uac_* and mi_t_uac_dlg not obeying the send socket
    parameter).

commit ded509e08679fe9f836386badca21c0fe3170de1
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 21 01:15:02 2009 +0200

    tm: new uri2dst() version
    
    - new uri2dst2() function which can have the send_socket passed
    directly to it.
    - uri2dst() is now a wrapper over uri2dst2().

commit bc71de00c3e8cddf76044180315f5ce8c93495f4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 21 01:10:05 2009 +0200

    core: get_send_socket fix for tcp or tls forced socket
    
    One of the get_send_socket() sanity tests, checks if ser really
    listens on the forced socket. For tcp and tls this test should not
    be performed (the sockets are closed for the processes that do not
    need them => cannot test by looking at the fd).

commit 9981e48a4f9517c016402897e6b90916d5f64eb2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 20 23:51:27 2009 +0200

    core: enhanced get_send_socket() version
    
    get_send_socket2() added.

commit 4bc6bf9e8469ffc67dc1e19f1695125180b40f9d
Merge: f90cfa1 6be3dfe
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 21 14:53:26 2009 +0200

    Merge commit 'origin/tmp/build_local'
    
    * commit 'origin/tmp/build_local':
      core: init via_len to cope with no via update flag
      tm: local req. route: do not save/restore the avps
      tm: local req. route: cache route id
      tm: local req. route: always free the tmp sip msg
      tm: local req. route rcv init fix
      tm: updated execution of event route
      core: build_req_buf_from_sip_req() has a new parameter
      tm: update to new signature of build_req_buf_from_sip_req()
      tm: execute event_route[tm:local-request] if defined

commit 6be3dfe5d0ae5f05fd5acb2e1b8858fa658044ed
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jul 21 13:49:36 2009 +0200

    core: init via_len to cope with no via update flag

commit fa699018d34721c79426fa657a68ca46ed0293b7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 21 12:20:16 2009 +0200

    tm: local req. route: do not save/restore the avps
    
    - reset_avps() moved after running the local req. route so at
      least there is a chance that some avps could be used (although
       it's unclear what non-global  avps could have made it so far
       so it's probably safer to say that in general no defined avps
       should be expected).
    - no need to save or restore the avps after running the local req.
      route (they are reset anyway).

commit 5c037f80bd047518c6bc879f33acad611014143a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 21 11:58:51 2009 +0200

    tm: local req. route: cache route id
    
    - resolve the route name only once, at startup (mod_init since
      this route name is fixed) and cache it.
    - more likely()/unlikely() added to the ifs (optimizing for no
      local req. route and local req. route not changing the message).

commit 0f6dc007f9454ed000df5b6601961950e0b72367
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 21 11:25:39 2009 +0200

    tm: local req. route: always free the tmp sip msg

commit ef6fed5b07e4f199974e2236d1f44526d487559c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 21 11:10:48 2009 +0200

    tm: local req. route rcv init fix
    
    - dialog->send_sock can be null and should not be used (switched
      to dst.send_sock which is guaranteed to be non-null at that
      point)
    
    - initialize also the other members of the msg rcv structure:
      dst_ip, dst_port, src_su, bind_address and dst.comp.
      Note: the rcv structure is initialized as if the message
      originated from the dst.send_sock, so in the script src_ip &
      friends will be the send ip. This is different from on_send
      route, were src_ip is the original forwarded message source and
      snd_ip is the send ip.

commit f90cfa15340ad74737cc3b2cc67f08347e7fbacc
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 20 18:28:03 2009 +0200

    tmx(k): mi_tm_uac_dlg  uris fix
    
    Replaced dlg.hooks.request_uri  with dlg.rem_uri and
    dlg.hooks.next_hop with dlg.rem_target.
    [ In sr tm the dialog hooks should not be changed, they are only
    used for internal caching. Any change to the hooks will be lost
    immediately after t_uac() is called (t_uac() re-calculates the
    hooks each time it is called). One should use instead the
    correspondent dlg structure members. ]

commit d6f5b4b05166f3124379337ca3c0e28c54b7ab09
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 20 17:21:25 2009 +0200

    tm: rpc_uac*  support
    
    fifo/unixsock uac revived in rpc form and updated to the latest
    tm:
     - tm.t_uac_start  - fifo_uac rpc equivalent with the following
       differences:
        * extra send_socket parameter for kamailio compatibility.
        * empty parameters can be specified either by '.' (backwards
           compatibility) or by "" (empty string).
        * it doesn't wait for the final reply and it doesn't include
          the sip reply in the rpc reply (it sends immediately an
          empty reply indicating only success or failure)
     - tm.t_uac_wait - like above, but it's supposed to wait and
       return the final reply. However right now it will only return
       an error (it's not yet fully implemented).

commit df088fb86adaf8f10bbdfebd5502ea9590341bc8
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 20 13:00:37 2009 +0200

    core: parse_phostport split for k compatibility
    
    parse_phostport in sr and ser returned a list of pkg_malloc'ed
    addresses belonging to the same multi-homed "group". For example
    sctp:(1.2.3.4, 5.6.7.8):5080 is a valid address and it means
    that this sctp listening socket must use multi-homing on the 2
    IPs. However several kamailio modules use parse_phostport and
    expect the old integer returning version. In this case it was
    easier to split the function in the core into parse_phostport()
    (old behaviour) and  parse_phostport_mh() (returns list of MH
    addresses) and make the core command line parser use the MH
    supporting version.

commit beb71da826ed6e8b533bb1c62b7e5ff179ed5e6f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 20 10:21:36 2009 +0200

    tmx(k): missing type for mi_tm_uac_dlg callback
    
    sr tm t_uac() does not automatically register any transaction
    callback (unlike old ser or kamailio versions). If a callback is
    desired, besides the callback pointer, the callback type mask must
    also be specified (in this case TMCB_LOCAL_COMPLETED).

commit f0ab0db3b66fcc7912065ee960aff71615e9ce3e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 20 10:16:10 2009 +0200

    tm: AS added needed membar
    
    When compiled with -DWITH_AS_SUPPORT build_local_ack() needed
    a membar_write_atomic_op() before setting the new local ack retr.
    buf pointer (this will force the local_ack content to be fully
    written before replacing the pointer and it's need on some non-x86
    archs.).

commit 311d365b18fca29379e57e02855fd71b325fb7eb
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 20 10:13:47 2009 +0200

    tm: AS - fixed onsend callbacks invocation
    
    When compiled with WITH_AS_SUPPORT and TMCB_ONSEND,
    ack_local_uac() used a wrong way for calling the onsend callbacks
    (compile error).

commit 1ff6c9a7fbbc9369d0d240587b21857a4888c47a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jul 19 17:37:22 2009 +0200

    dispatcher(k): safety checks for duri
    
    - due to usage of SR append_branch() instead of km_append_branch(), duri
      has to be checked before giving inner fields as parameters

commit fd5621f188d23d89bc4e475e3bc1e7964a065a90
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jul 19 17:19:25 2009 +0200

    dialog(k): fixed db initialization
    
    - child init DB initialization condition properly tests the db mode
    - reported by Juha Heinanen

commit 3390d4cf787b58f440ecd46dcb05910b060f8dc4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jul 18 11:24:19 2009 +0200

    makefile: don't install tls certs & cfg by default
    
    Install tls certs & cfg only if the tls module is installed (moved
    certs & cfg installation from the main Makefile to the tls module
    Makefile).

commit aa9fa735a88363d9a452a4b84dcd25b516d731cd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jul 18 11:05:05 2009 +0200

    core: script engine cleanups
    
    Use named enums for action types, expression types, expressions
    left operands, expression right operands and action parameter
    types. This should avoid future type mismatching bugs (like trying
     to compare a left expr. operand type with a type that can exist
     only on the right part) by triggering compile time warnings.
    For extra protection the expression left operands and right
    operands possible value do not overlap anymore.

commit 009a8756c1accb2406adecf3e1b20f315f51a24d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sat Jul 18 10:05:16 2009 +0200

    core: expr string length fixup fix
    
    - moved the string length fixup before the rve/rval optimisations:
      the string length fixup was executed after the rve/rval
      optimisations and would try to re-calculate the length of the
      string (which was already filled in by the optimizer). However
      the rval optimizer did not 0-terminate strings => this second
      re-calculation was wrong.
    
    - the rve/rval optimiser 0 terminates strings (although not
      strictly needed it's better for debugging and would avoid
      problems similar to the above one).
    
    - don't try to fix a string in the left side of an expression,
      there can be no strings there (and by chance
      METHOD_O==STRING_ST).
    
    Reported-by: Juha Heinanen  jh at tutpro com

commit c5e8ac5603f5a770b2306cd0d574c20586d788ad
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jul 17 18:15:44 2009 +0200

    core: config parser minor fix
    
    - use a pkg_malloc'ed copy of yy_number_str for host_if_id
    - always free ID/NUM_ID/host_if_id after copying them (bug
      introduced in the last merge)

commit 4d601c6d0b41eb26cc3a89ae3661b8be555f8dad
Merge: 98c5d63 f9276a5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jul 17 18:09:01 2009 +0200

    Merge commit 'origin/ser_core_cvs'
    
    * commit 'origin/ser_core_cvs':
      core: config parser listen if names fix
      core: config parser listen fix
      core: interface names in socket list port fix
      core: startup socket list fix
      core: parse_headers flags fix
      tm: fifo access From fix
      cfg framework: fix the group handles in the main process
    
    Conflicts:
    	cfg.lex
    	cfg.y

commit 98c5d63ebb246b1c640f228dcf0035e957246dd0
Merge: dba9e85 8e1f906
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jul 17 17:45:40 2009 +0200

    Merge commit 'origin/ser_modules'
    
    * commit 'origin/ser_modules':
      - socket support
      - more -h messages
      - minor ERR message improvment
      presence_b2b: fix from & to header access
      rr: fix from header access

commit 8e1f906e8dee090025f82e5c76355b75f7919d66
Merge: b9ec929 36e77b3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jul 17 17:37:32 2009 +0200

    Merge branch 'cvs-head' of ssh://git.sip-router.org/ser_modules into ser_modules
    
    * 'cvs-head' of ssh://git.sip-router.org/ser_modules:
      - socket support
      - more -h messages
      - minor ERR message improvment
      presence_b2b: fix from & to header access
      rr: fix from header access

commit dba9e85e137cc3818a01cccb2930e7580564ecd1
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jul 17 17:10:07 2009 +0200

    core: expr =~  fixup order fix
    
    The fixup for built-in expressions were in the wrong order: first
    RE and then RVE/RVALs, but a RVE/RVALs could be optimized away to
    a string => because of the wrong order at runtime the match
    operator might end up being used with a normal string instead of a
    RE.
    Now the order is RVE/RVALs fixup & optimisations, string fixups
    (len) and then RE fixups (so that by the time the RE fixup is run
     we know the final type of its operand).
    
    Reported-by: Nils Ohlmeier  nils at iptel org

commit f9276a5b4875a1e3ecda29d50013725642cc8af2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jul 17 13:37:11 2009 +0000

    core: config parser listen if names fix
    
    If no quotes were used in listen=x, it was assumed that x was an
    ip or a valid hostname (each domain part starts with a letter,
    numbers and '_' are not allowed as first chars). However this
    assumption failed when interface names were used, e.g. eth0.1 is a
    valid interface name, but listen=eth0.1 resulted in error (it
    worked only if quotes were used, e.g. listen="eth0.1").

commit 06020e851fcab3b4cdec6b613170214606fbbfb0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jul 17 13:37:01 2009 +0000

    core: config parser listen fix
    
    - do not crash when the listen=host line contains an invalid host (e.g. foo.1)
    - more null checks
    
    Reported-by: Cristian Constantin  cristian.constantin at iptel org

commit c4dbb39571c5e8d801956d8afc5134387de1a59a
Author: Jan Janak <jan@iptel.org>
Date:   Fri Jul 17 11:34:24 2009 +0200

    domain: Documentation of internal API
    
    Add docbook documentation for the internal API of domain module.

commit d8fdebf9c589516185d5c6a4ff9453148f1b76f2
Author: Jan Janak <jan@iptel.org>
Date:   Fri Jul 17 11:10:51 2009 +0200

    domain: Add internal function is_domain_local
    
    Add internal function is_domain_local that can be used to determine if
    the domain name given in parameter is on the list of local domains. The
    comparison of the domain name is always case insensitive.
    
    There already is is_local function that does something similar, so we
    can reuse the code from that function. is_domain_local takes a pointer
    to str as parameter and this function is then called by is_local which
    takes all the usual parameters that function which can be called from
    the script take.
    
    Finally, is_domain_local is exported through the internal API of the
    domain module.
    
    Function is_domain_local is now located in file domain.c and because of
    db_get_did was also moved to file domain.c

commit dd5490500f006f86e520958c5ca2646a1e3a96b7
Author: Jan Janak <jan@iptel.org>
Date:   Fri Jul 17 00:15:39 2009 +0200

    domain: API framework to be used by other modules
    
    Add a new data structure and function bind_domain that can be used by
    other modules to gain access to internal functions of domain module.
    
    Implement inline function load_domain_api that does everything that
    is necessary to make the API of the domain module available to the
    caller.

commit bc807b614be48f959419d98ec0befe09a795d72a
Author: Jan Janak <jan@iptel.org>
Date:   Thu Jul 16 23:46:27 2009 +0200

    domain: Source cleanup
    
    Cleanup of source files:
     * Wrap long lines
     * Fix wrong indentations
     * Update logging macros to the current calling convention

commit aa4e8fb0969a839b25b1d6081fb638159f5a28e8
Author: Jan Janak <jan@iptel.org>
Date:   Wed Jul 15 15:44:56 2009 +0200

    domain: Boilerplace cleanup
    
    Remove the reference to proprietary license from iptel.org, rename ser
    to sip-router, remove cvs $Id$ tag, wrap the license text to 78
    characters wide lines.

commit 04938dc72661dfe0c8954f392558812f7aa3da78
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 16 14:05:50 2009 +0200

    core: futexlock include hack for older futex.h
    
    Older non-fixed linux/futex.h version (<2.6.20) cannot be included from
    userspace without additional type declarations (which otherwise
    are included only if __KERNEL__ is defined).
    Note that most distribution fix this problem by distributing a
    modified /usr/include/linux/futex.h and not the default kernel
    one. However there are other distributions (like CentOS 5) for
    which this hack is needed.

commit 5ca1a775f63f2b5f905fd89cafb0b614ee44b522
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 16 10:45:41 2009 +0200

    ctl(s) doc: added the autoconversion parameter
    
    - info about the new autoconversion parameter
    - README re-generated

commit 9216f8c4005dc3e8ef9e31b9a3eb0bd9dc3840e9
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 16 10:43:40 2009 +0200

    xmlrpc(s): removed the introspection parameter
    
    Removed the enable_introspection parameter. It's hard-wired to on
    and cannot be changed (the methods needed are always exported by
    the core).

commit b15f37fc1eb2fceaf8ea04e35e94850164f06cf5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 16 10:39:36 2009 +0200

    xmlrpc(s) doc: note about xmlrpclib bug
    
    - added note about xmlrpclib bug (waiting for connection closing)
      and workarounds (use a different transport class or make ser
      close the tcp connection after each answer).
    - list examples/xmlrpc_test.{pl,py} among the client examples
    - updated & fixed some links
    - README re-generated

commit d6e8fdb3a06aab44c01ce5e5a2ca4f2d43117676
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 16 10:38:14 2009 +0200

    xmlrpc(s) doc: added the autoconversion parameter

commit 46fb4917c2163fd5c8bd01fdd866813211cd6ec7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 16 09:36:22 2009 +0200

    doc: rpc api documentation updated: the '.' modifier

commit 36e77b35c20518c84f169a4092ca34c4908e81da
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Wed Jul 15 23:02:15 2009 +0000

    - socket support

commit 47cca1121e45d6c99375cfe80b63cbf634e05bd0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 15 22:55:28 2009 +0200

    mi_rpc: use autoconversion to string
    
    Because mi doesn't understand anything else besides strings, use
    the new auto-convert modifier when reading the mi commands
    parameters.

commit 1f7b7e075d35d0ca00fb943795f74af99fce06a1
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 15 22:49:23 2009 +0200

    core: rpc more verbose when duplicates found
    
    When duplicate rpc names are detected, print them (WARN(..)).

commit aafc8ea72a36be3ac9bd6115cd492a68e4166e85
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 15 22:46:07 2009 +0200

    core: new debug core rpcs
    
    - added core.printi that expects integer parameters and prints
      them back in the reply (works with variable numbers of params.)
    - added core.echo that echoes back its parameters (works with
      variable number of parameters and with any type, it
      auto-converts all of them to string).
    - changed core.prints to work with variable number of parameters.

commit 07276eb9a1173b4e58d14aa82a7b81e5f2dca824
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 15 22:39:20 2009 +0200

    ctl(s): support for '.' and type autoconversion
    
    - support for the new '.' rpc->scan modifier (when used it
      turns auto-conversion on for the next input parameter, e.g.:
       rpc->scan(".s", &str))
    
    - new module "autoconversion" module parameter that enables
      auto-conversion globally
    
    - fixed minor parameter number bug in binrpc faults, when the
     '*' modifier was used in rpc->scan()
    
    - added binrpc context garbage collection supports (needed to
      track memory allocation used in type conversions)

commit 6f38c000cc3b5c76c99904fa7d5ab244aaa774f4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 15 20:32:53 2009 +0200

    xmlrpc(s): type autoconversion support
    
    - added a new module parameter ("autoconversion") that when enabled
      will try to autoconvert the xmlrpc  parameters types into what
      the rpc method expects (e.g. if the method expects a string, but
      receives an int, convert the int to string). By default it's
      off.
    
    - support for a new modifier: '.' for rpc_scan. When used it turns
      auto-conversion on for the next input.
      E.g. rpc->scan(".s", &string) will work even if the next input
       is an int (it will convert it to string).
      More complex example:
       while((rpc->scan(c, "*.s", &p)>0)) rpc->add(c, "s", p);
      (work with any number of inputs/parameters, convert all of
       them to string and echo them back in the reply)

commit 7a1676e337f40c286735060394963436854e999e
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jul 15 15:06:25 2009 +0200

    fix error in cr dump command, reported from Edson 4lists at gmail dot com

commit e437fdeacce0b07180b4d445a2eb2e920731fcb0
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Jul 15 14:50:02 2009 +0200

    bugfix in cr and userblacklist modules (kamailio r5894)
    - fix error in module initialization which happened if a custom table name was
      configured in carrierroute and also userblacklist
    - it was reported as table version mismatch, which was of course really misleading
    - many thanks to Uriel Rozenbaum (uriel dot rozenbaum at gmail dot com) for his
      help in debugging this problem with a sample cfg and a binary build

commit ad2df476fc2010c30a18a35551caebf87bba1c08
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Wed Jul 15 10:45:37 2009 +0000

    - more -h messages

commit 5e06f219ce6d3c0572c31cd5fe0efff004e596fb
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 15 00:12:03 2009 +0000

    core: interface names in socket list port fix
    
    Due to an unfortunate typo, the port number was always set to 5060
    for a listen address containing an interface name (e.g.
    -l eth0:5070  or -l udp:eth1:5062).

commit 786670ec30e349f79a4237a5bdcd0edc513ac234
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 15 00:11:40 2009 +0000

    core: startup socket list fix
    
    Fix crash on startup when dealing with consecutive duplicate
    socket  ("listen") addresses.

commit c13d686fb4b289968c707a1f45fc648f9773eaee
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Tue Jul 14 16:56:23 2009 +0000

    - minor ERR message improvment
    - new clean_rtpproxy_attrs script

commit 51aeea7d5197ca44d5aabd46085c6c1661a98d73
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 14 18:18:02 2009 +0200

    tmx(k): remove unnecessary reply locking
    
    - reply locking is not needed around prepare_to_cancel() (former
      which_cancel()).

commit 95a1194f97e74effbdf557e7fcc5db69c26ea1d7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 14 18:13:26 2009 +0200

    tm: remove unnecessary locking around prepare_to_cancel()
    
    - prepare_to_cancel() is lockless, doesn't need the reply lock
      anymore (_reply_light() and rpc_cancel()).
    - _reply_light() minor fix: don't run prepare_to_cancel() if
      the reply is not a final reply (might affect latter cancel
      generation)

commit f7d892e55753f84461bbadd661ac8a4482137d6a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 14 15:00:36 2009 +0200

    tm: minor improvement
    
    - killed an if in prepare_to_cancel

commit d71043e8b74d5a4c30c7553d6722ec5d336c0d8d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Jul 14 17:48:14 2009 +0300

    modules_k/permissions: fixed child initialization
    
    - Database was not initialized for all necessary children, which caused
      trusted_reload and trusted_dump mi commands to fail.

commit 1a43484b132393a10f1530f7e71cc190eacaf56a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 14 14:49:05 2009 +0200

    tmx(k): updated to the which_cancel change
    
    - updated to the which_cancel name change
    - use the new prepare_to_cancel skip_branches parameter to skip
      the current branch when generating the CANCEL, instead of the
      previous unsafe way (in sr which_cancel/prepare_to_cancel is
      lockless and so it's not safe to directly manipulate the cancel
      buffers even if the reply lock is held).

commit 79edcdf278ff95b17b08f44affa636ec7a40aa40
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 14 14:44:21 2009 +0200

    tm: which_cancel renamed and takes more parameters
    
    - which_cancel() renamed to prepare_to_cancel() to better reflect
      its real purpose.
    - which_cancel_f renamed to prepare_to_cancel_f
    - tm_binds which_cancel member renamed to prepare_to_cancel
    - should_cancel_branch() renamed to prepare_cancel_branch().
    - prepare_to_cancel() takes now an extra parameter (skip_branches)
      which contains a bitmap of the branches that should be skipped
      (not canceled).

commit 418a2312875436ca0402f9b0b39831c6353f8403
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 14 07:40:17 2009 +0000

    core: parse_headers flags fix
    
    Restore original flags after parse_headers was called with "next"
    (without restoring them, if parse_headers doesn't find again all
    the requested headers it will leave their flags cleared although
    they might be present in the message).

commit 2b038252c53ebf3e149249037983c4bad6827a04
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 14 07:38:32 2009 +0000

    tm: fifo access From fix
    
    Access the From header contents only if non-null.

commit ee6eee271dceec6e1d4d581edd389687697ccdc7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 14 07:36:51 2009 +0000

    presence_b2b: fix from & to header access
    
    Access the parsed part of a From or To header only if non-zero
    and/or parse_from_header() returned success.

commit 6fcd5e9fd6944e8e8ddac718c8f9ad51dcb46b7b
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Jul 14 07:36:19 2009 +0000

    rr: fix from header access
    
    get_from() can be used _only_ if parse_from_header() returned
    success or if msg->from!=0.

commit ad12d90508ef5f896ef0327362971cd9afba81f2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 13 22:40:33 2009 +0200

    sercmd: updated to the new mi_rpc format
    
    - updated to the new mi output format
    - support for tab completion for mi_dg, mi_fifo and mi_xmlrpc

commit 1e1cc81d8f7c18615b78335f889c8a3de21dac24
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 13 22:35:34 2009 +0200

    mi_rpc: support for different "modes"
    
    Added more rpc commands:
    mi_fifo - output compatible with the k mi_fifo module, when using
              with sercmd (e.g. sercmd -f "%v" mi_fifo which)
    mi_dg - output compatible with the k mi_datagram module, when
             using with sermcd (e.g. sercmd -f "%v" mi_dg which)
    mi_xmlrpc - output compatible with the k mi_xmlrpc module
             (should be used with the xmlrpc module)
    
    The "mi" command was changed too: it doesn't output a  leading '+'
    anymore on each line and it doesn't print the result code (the
    result code is embedded in the rpc reply, there no need to print
    it).

commit 4903fc5f9b5fa2b6047780dc192d6b41fd746d68
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 13 19:04:52 2009 +0200

    xmlrpc(s): added rpc client examples
    
    Added rpc client examples/test scripts in perl and python. The
    python script has 2 versions: one with re-defined transport (that
    works properly without expecting the server side to immediately
    close the connection after answering) and one using the default
    xmlrpclib transport (which requires closing the connection from
    the ser xmlrpc route).

commit 7dced0f9e7f8315c7a39b46e38a488cff105de7e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 13 18:03:47 2009 +0200

    mi_rpc: mi returns always an array
    
    Try returning always an array: it makes no difference for sercmd,
    but it helps for xmlrpc.

commit e792b7614aaa57ddf4482a23e21c959dd2f45f98
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 13 18:00:40 2009 +0200

    xmlrpc(s): fix '*' rpc_scan  handling
    
    The '*' modifier (marking the next parameters as optional) was not
    properly handled (the current input parameter was "eaten").
    
    Reported-by: Juha Heinanen  jh at tutpro com

commit c0f12714391fa6b359cceaed22ed238ba5387457
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jul 13 15:13:12 2009 +0000

    cfg framework: fix the group handles in the main process
    (backport from GIT)
    
        The main process does not have a local configuration,
        it has access only to the config values that were set before
        forking. As a result, the group handles cannot ponint to
        the shared memory address because the shared memory block
        may be freed later by one of the child processes. This problem
        resulted sometimes in a core dump after the processes were killed
        when the main process tried to access a variable from shared mem
        which was no longer available.

commit f38774811308f3e33984fd1e7d1375f00202572f
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jul 13 16:58:22 2009 +0200

    cfg framework: readme correction
    
    Documentation about how to read "foreign" config values is
    corrected.

commit df8b1cf011e0ecf4c9f06578ddc6b991fd1444c4
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jul 13 16:36:36 2009 +0200

    cfg framework: fix the group handles in the main process
    
    The main process does not have a local configuration,
    it has access only to the config values that were set before
    forking. As a result, the group handles cannot ponint to
    the shared memory address because the shared memory block
    may be freed later by one of the child processes. This problem
    resulted sometimes in a core dump after the processes were killed
    when the main process tried to access a variable from shared mem
    which was no longer available.

commit e12cf4810aa16da679bdad77359d7a29ed4225eb
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 13 15:29:55 2009 +0200

    core: deleted test.c.bak
    
    test.c.bak was one of the first files in the ser repository.
    test.c was used to test the first version of the sip parser and
    test.c.bak made it by mistake into the first cvs repository.

commit e10380691300bcf5c88d1393d3b05f32657525a0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 13 15:26:30 2009 +0200

    seas: use TMCB_DESTROY tm callback

commit 543f9a533699b1d963ee42c4e94f608082a3367c
Author: darilion <darilion@flunder.lan>
Date:   Mon Jul 13 13:39:47 2009 +0200

    Makefile: fix module names
    
    - radius_... --> misc_radius

commit 462acb9bf0864bbb18f1a0683869cce8e35aafe0
Author: darilion <darilion@flunder.lan>
Date:   Mon Jul 13 13:36:53 2009 +0200

    debian: fix rules file
    - fix postgress typo
    - remove non-existing modules
    - fix list of broken modules, and activate it, so that beta-users can make debian packages without errors

commit a86fdc96c147c584836d44fb41c92176338bfa8d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Jul 13 15:28:59 2009 +0300

    modules_s/domain: is_local can now be called from BRANCH_ROUTE
    
    - Added BRANCH_ROUTE to list of routes for is_local function after
      no one answered to my question on if it would cause any trouble.

commit 5775f9b86b14ef5887112a12d098d38e283b47c0
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri Jul 10 16:02:14 2009 +0200

    tm: reason phrase of 100 is corrected in t_suspend()
    
    - t_suspend() now uses the tm_auto_inv_100_r config option to
    form the 100 reply message.

commit a3fe154263bd4c94e53c55ea7af42cf6e1952cd5
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri Jul 10 15:58:17 2009 +0200

    tm: check whether or not 100 response has already been sent
    
    - Do not send the 100 Trying response when it has already been sent
    The script writer can do it for example before t_relay().

commit cd0ce113e857289f2b0e964a43abfa57ac3be707
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 10 00:23:58 2009 +0200

    siptrace: removed trailing whitespaces
    
    - makes git happy, avoiding warning messages

commit 94393b2da7e7922458653d8fa7f413a673383de1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 10 00:18:42 2009 +0200

    siptrace: module facelift
    
    - better structured traced data
    - more modularity to avoid duplicity

commit bce53e2a14c07203e5914fdb41ca887765a28799
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 10 00:17:54 2009 +0200

    tm: enabbled TMCB_ONSEND
    
    - used by siptrace module

commit 53413e1f7ba0388fcaf7b2ed24e25067785f16ed
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 9 21:51:03 2009 +0200

    debian: various fixes and cleanups
    
    - fixed duplicate libraries
    - fixed wrong config install path
    - added a ser-db-modules package containing db dependent modules
    - debian rules major cleanup

commit 2af7504fe4be356b59a53f7cb65311f433d107f3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 9 21:47:26 2009 +0200

    makefile: fix group_include
    
    fix recently introduced group_include bug

commit de9ef971f95fbc086eb68be63864934ae8d608b2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 9 19:05:16 2009 +0200

    siptrace(k): some updates to work with sip-router core
    
    - module not completely ready
    - prepared to enable sip_trace() in onsend route to be able to store
      stateless forwarded messages

commit d908ca84a6a6d0216ae53486f71221a21cfd53ae
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 9 17:18:13 2009 +0200

    nat_traversal(k): module compiles with sip-router core

commit 8d26ed40d5646b410928ce44d85201a6b57a5ebb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 9 16:47:49 2009 +0200

    core: temporary sip_msg flags reserved for K moved to end of bitmask
    
    - respective modules updated

commit 56a54e9431ae76e676f2e8b93da9fefdf75894ec
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jul 9 13:52:53 2009 +0200

    makefile: dbtext(s) removed from the db group
    
    dbtext(s) is not yet migrated to the current db interfaces.

commit 40a285274bbec1d9d56eae00f8ccd7d1a0751f36
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 9 12:35:13 2009 +0200

    core: backup/restore script flags
    
    - safe usage of script flags in nested top routes

commit 3734194dfe4b3e81c49119508ff9aa3dd4682978
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 9 12:30:48 2009 +0200

    table: drop in event_route[htable:mod-init]
    
    - usage of drop in event_route[htable:mod-init] causes failure of
      child_init(), stopping the start process

commit e17e027c920235fe0726b8948f647d76afb86ac7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 9 11:56:26 2009 +0200

    tm: updated execution of event route
    
    - use the new run_top_route() signature

commit b70792cb874fd6193023838d2d38fa9c7a99420a
Merge: 61f8641 4ce1715
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 9 11:54:35 2009 +0200

    Merge branch 'master' of ssh://daniel@git.sip-router.org/sip-router
    
    * 'master' of ssh://daniel@git.sip-router.org/sip-router:
      core: run_top_route() can be give action context
      core: internal difference between cfg drop and exit
      kex: several K core stats implemented in callbacks
      makefile: more modules groups and make modules-all
      prefix_route(s): fix: the lock should be in shm
      prefix_route(s): fix mod_destroy/tree_close()
      debian: updated debian spec for sip-router
      makefile: fix make cfg when the cfg vars are already exported
      core: derive default config name from -DNAME

commit 4ce1715db779ce1c805cbaa257a99e14adc44056
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 9 11:23:14 2009 +0200

    core: run_top_route() can be give action context
    
    - functions calling run_top_route() can get access to context fields if
      they need
    - modules updated to new function signature

commit 8ebb586dc492cb8c214c1aef9c14eab0110583b3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 8 23:24:52 2009 +0200

    core: internal difference between cfg drop and exit
    
    - drop sets the flag for exit and one extra: EXIT_R_F and DROP_R_F
    - no difference in processing right now (DROP_R_F not tested anywhere
      yet)

commit ade0f159ac0aa28006c12b6116d5d7a69aa62488
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 8 22:55:14 2009 +0200

    kex: several K core stats implemented in callbacks

commit 380398ad08e1080ea3a2f7d521aeb4c8aa04bef6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 8 18:41:38 2009 +0200

    makefile: more modules groups and make modules-all
    
    - added more module groups (db, mysql_driver, postgres_driver)
    - cleaned up module groups usage (replaced a lot of ifs with a
      foreach)
    - modules-all is now a synonym for every-module

commit 17b8e2fc2858e2f5578ad7374a36d22f82f2233f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 8 18:03:40 2009 +0200

    prefix_route(s): fix: the lock should be in shm
    
    The shared_tree_lock was not in shared memory.

commit 7fc0ed074caa98f1542a5b741f00b01078c730fc
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 8 17:54:46 2009 +0200

    prefix_route(s): fix mod_destroy/tree_close()
    
    tree_close(), called from mod_destroy did not take into account
    the possibility of mod_init not being run (e.g. startup error).
    
    Reported-by: Klaus Darilion  klaus.mailinglists pernau at

commit a506fcc07a9c30f7f0e79c1ba858444d8a81e395
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 8 17:36:38 2009 +0200

    debian: updated debian spec for sip-router
    
    - fixed & cleaned "rules", they now use make cfg and are generally simpler
    - added a ser-tls package
    - re-enabled the ser-postgres package
    
    Note: right now the packages being built  will be called "ser*",
    but they do include all the modules.

commit b5cb01a366c63dd1e3cbf1f488f38a5dd61c8f7d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 8 17:31:56 2009 +0200

    makefile: fix make cfg when the cfg vars are already exported
    
    - when make cfg was called with the cfg vars already exported it
      failed to generate a proper config.mak (e.g. called from
      make deb)
    - extra config sanity check
    - s/mysql/db_mysql in the mysql module group
    -  added "deb" to the list of targets that don't need dependencies
       (minor optimization)

commit 4c969ea99ac8a986fd7f5a4381bcd0fca0963770
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jul 8 15:42:47 2009 +0200

    core: derive default config name from -DNAME
    
    The default config name was hard-wired to sip-router.cfg.
    
    Reported-by: Klaus Darilion  klaus.mailinglists at pernau at

commit 61f864106e136ab3100717f35511a0a82bcf9668
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 8 13:10:37 2009 +0200

    core: build_req_buf_from_sip_req() has a new parameter
    
    - mode - a set of flags that define how the sip request is printed to buffer
    	- BUILD_NO_LOCAL_VIA (1<<0) - skip adding local via
    	- BUILD_NO_VIA1_UPDATE (1<<1) - skip updating top most via
    	- BUILD_IN_SHM (1<<2) - output buffer allocated in memory
    - new function inc_msg_no() - increment and return msg_no
    - new function build_sip_msg_from_buf(...) to parse and partially fill
      sip_msg structure from a buffer

commit fda26842518a286471ce27b5a74699dc798f64ab
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 8 13:09:50 2009 +0200

    tm: update to new signature of build_req_buf_from_sip_req()

commit 8bae6347fdc3957110ae562e443f63dd8fd598a5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 8 13:08:30 2009 +0200

    tm: execute event_route[tm:local-request] if defined
    
    - call event_route[tm:local-request] if defined and local requests are
      sent by tm (similar to K local_route)

commit 94ed30477687aa255a5b022eafe3aec8811c8214
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Tue Jul 7 19:43:48 2009 +0100

    drouting: Updated documentation
    
    - Erased references to blacklist management

commit dd0874121b2bc8c0a2a76a4cd3238e1a8e720be2
Merge: 78120e1 4df07e0
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Tue Jul 7 19:41:39 2009 +0100

    Merge commit 'origin/rbetancor/drouting'
    
    * commit 'origin/rbetancor/drouting':
      drouting: blacklist functions remove
      drouting: Now the module compiles, but it's not tested
      drouting:
      drouting:
      drouting:
      drouting: Module for more flexible dynamic routing rules
      drouting: Documentation updated
      drouting: Updated all Copyright notices
      drouting: Makefile fixed to compile with OPENSER_MOD_INTERFACE
      drouting: new module to support Dynamic Routing

commit 4df07e0bc7f8ac71dd788bf4d4b79072e7ea7d42
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Tue Jul 7 17:48:39 2009 +0100

    drouting: blacklist functions remove
    
    - All blacklist management functions removed, core take cares of BL when
      sending out request as we only rewrite uri's

commit 78120e1cad5769d18899e77f1583b863a03ecbea
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 6 22:58:19 2009 +0200

    xmlrpc: propagate route error exit
    
    If the xmlrpc route exits with error, propagate the error
    downwards (return NONSIP_MSG_ERROR instead of NONSIP_MSG_DROP).

commit 471589c5c0ae27e9d3937e3b9318982a8ec96fc7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 6 22:54:52 2009 +0200

    core: error handling for non-sip hooks
    
    receive_msg will exit with error if a non-sip msg hook returns
    NONSIP_MSG_ERROR.

commit ed6838004eef2734a1a9667bbe56526de1463bf2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 6 12:36:22 2009 +0200

    tm: t_reply() first param. can be any var. type
    
    Switched first param. fixup to fixup_var_int_12(), thus allowing
     it to be a pvar.

commit b25e31aaab556941d4f3057d7f6b106b2ed749bb
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jul 6 12:26:19 2009 +0200

    core: pvars support in ser *var fixups
    
    - all ser generic fixups (fixup_var_{int,str}_*) work with pvars
      (e.g. the fallback order for str is: pvar->avp->select->str).
    - fixed FPARAM_* definitions to allow better fallback for
      fix_param_types (int->select->pvar->avp->str)
    - fix_param() does not print anymore error messages for invalid
      pvars or avps, to allow fallback

commit 537fbbea7382d6a47d41e6789dd84428f9b1e1ef
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Jul 6 13:06:35 2009 +0300

    modules_s/domain: log message level changes
    
    - Made module less noisy by turning INFOs to DBGs.
    - Print error instead of debug message if domain name to be looked for
      cannot be accessed.

commit 2d14c2a6cf212743b49ed07e76241ea5d3186c55
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun Jul 5 10:55:48 2009 +0300

    scripts/mysql: updated 'gw' and 'lcr' table definitions
    
    - Updated 'gw' and 'lcr' MySQL table definitions.
    - No idea if a schema exists somewhere where sr tables are
      auto-generated.
    - The tables are assumed to have versions 10 and 3, respectively
      although there is no 'version' table in sr database.

commit cd18b51a0676abcd0732acb25495b322bb76df40
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun Jul 5 10:52:47 2009 +0300

    modules/lcr: added 'defunct' column to 'gw' table
    
    - Added 'defunct' column to 'gw' table that can be used to defunct
      a gateway until the given time.

commit f90164d0f430ab891f29e82125a56eddc3cf319a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Jul 4 22:36:41 2009 +0300

    * modules_s/xmlrpc: allow use of k ls module api
    
    - Added Makefile #define for choosing between s and k sl API.

commit d9d008e34130f2e85e3df78580e589f98f8c447a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jul 4 21:10:36 2009 +0200

    tm: fix cloning parsed uri for to/from headers
    
    - parsed structure was not cloned
    - several fields in struct uri were not cloned

commit f717262c67a45419d457989cf408fd81264ba900
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Jul 4 15:17:58 2009 +0300

    modules_s/xmlrpc: fixed typo in name of module parameter
    
    - enable_instrospection => enable_introspection.

commit 9c77d5329b45a493b741527bc8902456dbf51e7e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 3 20:19:47 2009 +0200

    core: km_parse_avp_spec() update
    
    - fallback to ser style of avp name in $avp(id) if 'id' has no ':' and
      there is no avp alias defined
    - behavior was changed when I added support for K compatible avp aliases
      in pv module
    - issue reported by Andrei Pelinscu-Onciul

commit db2eed950c3eba36f14ec5bc256120098fe3c024
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 3 20:18:26 2009 +0200

    makefile: removed avpops from exclude modules
    
    - it compiles fine after removing ser version and moving the module in
      'modules' folder

commit b078383c95ebf4f3a3ee17b000e8c957c45278f9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Jul 3 19:50:00 2009 +0300

    lib/srdb2: marked four db flags as "reserved"
    
    - Marked last four db flags as "reserved" for private use.

commit 7249f49dd59cdef9302ecbe2ceaa5965ba27e35f
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jul 1 16:38:35 2009 +0300

    man pages: editorial changes
    
    - In sip-router.cfg 5 changed reference to "Sip Express Router" to "SIP
      Router" and changed reference to documentation page.

commit e06c100b976cfec7c5b2976a88e9706be4aacf81
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jul 3 18:28:38 2009 +0200

    cfg framework: fix sanity checks (again)
    
    The previous sanity check fix wrongly assumed that CFG_VAR_MASK
    would return 1<<type and not type.

commit 03bb546da525c01552c7da5d84a66624919b6e5b
Author: Jan Janak <jan@iptel.org>
Date:   Fri Jul 3 17:15:05 2009 +0200

    domain: Documentation update
    
    Update domain module documentation. Now it describes all functions
    and parameters and also contains description of some of the concepts,
    such as virtual domains and domain-level attributes.

commit 6c019568ad63476909d4af534238e567f7a49f33
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Fri Jul 3 15:57:36 2009 +0200

    - tm: document the unmatched_cancel parameter

commit d738d2a722446d1606a420da16d381f3fd93d8cb
Merge: 05914c3 e2f4753
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Fri Jul 3 15:06:53 2009 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    * 'master' of ssh://git.sip-router.org/sip-router:
      mangler(s): fixed missing var. definitions
      test: fix test 13, avp name for domain
      core: add openser database URL for compatibility, used with OPENSER_MOD_INTERFACE
      test: fix ctl and dbctl script path after import

commit e2f4753b2591a8564907f09531ce44c0c397cc65
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jul 3 14:46:31 2009 +0200

    mangler(s): fixed missing var. definitions
    
    ipExpression and portExpression were only declared as extern,
    they had no definition in sdp_mangler.c.
    
    Reported-by: Klaus Darilion klaus.mailinglists at pernau at

commit 24a521c6e5da3256b51aa94533026aba0245de75
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jul 3 14:46:41 2009 +0200

    test: fix test 13, avp name for domain

commit 146264f95b4e6523409ab4cf6db8785b44b33c91
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jul 3 14:34:41 2009 +0200

    core: add openser database URL for compatibility, used with OPENSER_MOD_INTERFACE

commit 6f8c21bb608dd471bc7327433f01502ad0f6bad6
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Fri Jul 3 14:32:44 2009 +0200

    test: fix ctl and dbctl script path after import

commit 05914c3f4b6f3e7c31712285fd44584003a8ec8b
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Fri Jul 3 14:40:57 2009 +0200

    Revert "according to Di-Shi are K's and ser's osp module more or less the same, whereas Kamailio's osp module should be more up2date than ser's module. Thus, ser's osp module will be removed and K's osp module will be used as common OSP module."
    
    This reverts commit 6bdbd8e2ab1ec15695cc156ff74f20af799a947b.

commit b48a399e12719878a52a307154d22e048dfbcd5c
Author: sobomax <sobomax@sippysoft.com>
Date:   Thu Jul 2 15:07:14 2009 -0700

    FORCE_RTP_PROXY_ERET -> FORCE_RTP_PROXY_RET for clarity.

commit e79dd5d9649f02909e6a87dadba952d44a81e04a
Author: sobomax <sobomax@sippysoft.com>
Date:   Thu Jul 2 15:06:25 2009 -0700

    Forgot to update parameters of the send_rtpp_command() in the last
    checkin.

commit 10250c1255a2c25f828726d01cfc64ad6a2906ef
Author: sobomax <sobomax@sippysoft.com>
Date:   Thu Jul 2 15:02:44 2009 -0700

    Rework fix for the static buffer overflow with the content of the overly long payload types list. Instead of silently truncating the list, use dynamic buffer allocated on heap to keep that list growing it if necessary.

commit c5927189da3f7c4b7b736b24d8a9258c1a5ccaa3
Author: sobomax <sobomax@sippysoft.com>
Date:   Thu Jul 2 14:12:45 2009 -0700

    Rework fix for the static buffer overflow with the content of
    the overly long payload types list. Instead of silently
    truncating the list, use dynamic buffer allocated on heap to
    keep that list growing it if necessary.

commit 75837023e6793499720e06cff4a867633e8f21e5
Merge: 1ea464a 0902435
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Thu Jul 2 21:14:37 2009 +0100

    Merge branch 'master' into drouting
    
    * master: (728 commits)
      tm: suspended transaction was not always replied and freed
      core: fix EXTRA_DEBUG information about second via in parse_msg
      nathelper(k): fix for very long payload-type
      nathelper (k): fix for flag 'l'
      avpops: merge avpops modules
      according to Di-Shi are K's and ser's osp module more or less the same, whereas Kamailio's osp module should be more up2date than ser's module. Thus, ser's osp module will be removed and K's osp module will be used as common OSP module.
      remove shm_str_dup() from tls_util.[c|h] as it breaks compilation and is not used at all
      cfg framework: documentation for cfg_read_var*
      Add missed <sys/select.h> include.
      cfg framework: read variables by name with a handle
      domain: init db connection for RPC process
      presence: use event name from parsed structure
      core: parse_event - skip first ; for parameters
      select_core: fix @ruri.rn_user moving parsed ptr
      modules/lcr: fixed printing of lcr_id by lcr.dump_lcrs
      carrierroute: port from 1.5 branch, r5885
      siputils(k): port from 1.5 branch, r5880
      carrierroute: port from 1.5 branch, r5877
      carrierroute: port from 1.5 branch, r5876, remove dead code (double return)
      registrar(k): port from 1.5 branch, r5873
      ...

commit 1ea464a3ee271810a560ca3c4cee0e96d8790027
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Thu Jul 2 18:08:52 2009 +0100

    drouting: Now the module compiles, but it's not tested
    
    - fixed call to sip_resolvehost

commit 9b675c5a60ebb7c7a747312c0f3928eff9c2a966
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Thu Jul 2 17:45:43 2009 +0100

    drouting:
    
    - fixed access to rlist

commit 090243564b4d54be19991457f7e014c46a131e06
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Jul 2 18:37:56 2009 +0200

    tm: suspended transaction was not always replied and freed
    
    - When the suspended transaction continued but no new UAC
    was added to the transaction, for example all the new branches
    tried to reach a blacklisted destination, then there was no
    error message returned and the transaction was never freed.

commit 854020b243c1c608324c41621da583ca5ad30a7b
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Thu Jul 2 16:29:58 2009 +0100

    drouting:
    
    - fixed do_action calls

commit 4f3dbdd89505497b78ce7ce005f2e3a41923955e
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Thu Jul 2 15:53:08 2009 +0100

    drouting:
    
    - changed db support to db1_k calls

commit e90d502b2620391047b04c670c6c408b75d362f6
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Thu Jul 2 15:42:11 2009 +0100

    drouting: Module for more flexible dynamic routing rules
    
    - disabled blacklisting support till reviewed sr bl support

commit da589b753539ebecfc2294b86bdcfe4bd09d64fb
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Jul 2 12:38:48 2009 +0200

    core: fix EXTRA_DEBUG information about second via in parse_msg

commit 8c97cfc35fcaf17f67810f98725bb636601bb38b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 2 11:47:29 2009 +0200

    nathelper(k): fix for very long payload-type
    
    - fix SF: #2813924: publishing very long payload-type to the rtp-proxy
      overflows a buffer
    - patch by Marcus Hunger

commit d4796d9a04562e3bc9d45acd68393eb418828e98
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 2 11:44:58 2009 +0200

    nathelper (k): fix for flag 'l'
    
    - fix SF: #2814137 - handle re-invite with force_rtp_proxy("l");
    - patch by Marcus Hunger

commit 90d2ba0236c7cb4a72ba074fbec7a86a89024e37
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Thu Jul 2 11:35:22 2009 +0200

    avpops: merge avpops modules
    
    - delete ser's avpops module (does not compile anyway)
    - use K's avpops module as common avpops module
    - Note: probably many of the avpops commands are not needed anymore as AVPs can be used directly in config script

commit 6bdbd8e2ab1ec15695cc156ff74f20af799a947b
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Thu Jul 2 10:34:13 2009 +0200

    according to Di-Shi are K's and ser's osp module more or less the same, whereas Kamailio's osp module should be more up2date than ser's module. Thus, ser's osp module will be removed and K's osp module will be used as common OSP module.

commit 07afde0840cb537b281c250b34f0fd9e9576410c
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Jul 1 14:36:11 2009 +0200

    remove shm_str_dup() from tls_util.[c|h] as it breaks compilation and is not used at all

commit 249df0253d2ef8fa3948ce50a4a76ba8f256fd1e
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Jul 1 14:23:09 2009 +0200

    cfg framework: documentation for cfg_read_var*
    
    - How to read the variables of another module, core, or
    the script is documented.
    - cfg_read_var() fixed -- it did not allow reading the variables
    that had a fixup function.

commit bdec66211cb75de63ee63b29ee3372739f4d283e
Author: sobomax <sobomax@sippysoft.com>
Date:   Wed Jul 1 02:47:01 2009 -0700

    Add missed <sys/select.h> include.

commit bcf3fff9389fc06a0fcc92f7e9875b185929987f
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Tue Jun 30 17:33:52 2009 +0200

    cfg framework: read variables by name with a handle
    
    - read_cfg_var() is introduced which allows reading
    even the custom declared variables from the modules.
    It requires a handle returned by read_cfg_var_fixup()
    - read_cfg_var_int() and read_cfg_var_str() are wrapper functions

commit d60f872ac4ae3b656585ceac69c15d536131ec92
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 1 00:10:22 2009 +0200

    domain: init db connection for RPC process
    
    - make mi commands to work properly via RPC interface
    - reported by Juha Heinanen

commit 602552de12720c9ab57eea1b33958953f1dfd336
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 30 22:26:32 2009 +0200

    presence: use event name from parsed structure
    
    - event name is taken from event_t as the given value might have
      parameters
    - wipeer search uses above mentioned name
    - fill given parameter in contains_event() instead of local var and then copy

commit 10e82c040dbf2ca5a3b200b2b232b9c362092706
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 30 22:18:52 2009 +0200

    core: parse_event - skip first ; for parameters
    
    - skip ; after event body
    - event debug function prints to stderr since stdout is closed

commit b7d3c7eafb994c768f4b7768b3e3f2fa93550819
Merge: 21ba29a d99a410
Author: Michal Matyska <michal.matyska@iptel.org>
Date:   Tue Jun 30 17:53:50 2009 +0200

    Merge branch 'master' of ssh://mma@git.sip-router.org/sip-router

commit 21ba29a12f505b107ef4fb70d74bff6df02acc7b
Author: Michal Matyska <michal.matyska@iptel.org>
Date:   Tue Jun 30 17:44:54 2009 +0200

    select_core: fix @ruri.rn_user moving parsed ptr
    
    - changed str* to str parameter type in search_param function to keep value
      of the parameter intact upon function return, otherwise the function moved
      the ptr to the beginning of the rn parameter or at the end of the pameters string.

commit d99a4102bc1314e45185f84bd0daecd7d73c8dc3
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Jun 30 17:41:22 2009 +0300

    modules/lcr: fixed printing of lcr_id by lcr.dump_lcrs
    
    - Fixed printing of lcr_id by lcr.dump_lcrs command.

commit 68b6d2a99475cc0fdff9093d7212e91d4227c72f
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jun 30 14:19:52 2009 +0200

    carrierroute: port from 1.5 branch, r5885
    
    - apparently its not possible to use ID 0 with autoincrement columns, so we
      should start the example domain with id '1'

commit 0c5cd640fa89038338555d69eec6496222e2e31c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jun 30 14:17:26 2009 +0200

    siputils(k): port from 1.5 branch, r5880
    
    fix a bunch of docs errors, wrong module name in modparam

commit 72b7c0f963a46d36cccca961d04f1c0a0655f937
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jun 30 14:14:59 2009 +0200

    carrierroute: port from 1.5 branch, r5877
    
    fix error behaviour for cr_dump_routes MI command, e.g. in OOM conditions

commit a06115db66feb2aa2b70afe5f98e02d7ba3b51d0
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jun 30 14:12:28 2009 +0200

    carrierroute: port from 1.5 branch, r5876, remove dead code (double return)

commit 37bf92a82b5ff14d38cc22d7d30cc09fd537b98f
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jun 30 14:09:53 2009 +0200

    registrar(k): port from 1.5 branch, r5873
    
    "match_callid" should be initialized properly, otherwise "registered"
    may return false in some cases.

commit 1a1ec3377814512dc7704ad381243faf24f40ef3
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Jun 30 11:46:30 2009 +0200

    memcached: fix error in docs, reported from Alex Balashov

commit 6c6e272929fe211467f894fd7bcdcb2dc1327552
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 29 20:50:47 2009 +0200

    xmlrpc(s): support for the "*" modifier
    
    rpc_scan supports now the "*" modifier for marking optional
    parameters.

commit eb367fc968ca3e9644e3fdfaf25ff13d776c4777
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 29 20:46:47 2009 +0200

    ctl: fix rpc_scan return when "*" is used
    
    - the rpc_scan function (both for binrpc and fifo) did return the
      wrong number of parameters when the newly introduced "*"
      modifier was used.
    - for binrpcs, "*" switches to "nofault" mode only if the error is
      E_BINRPC_MORE_DATA or E_BINRPC_EOP (meaning no more data to read
      parameters from). All the other errors will generate faults,
      even with "*" in the format strings (e.g. parameter type
      mismatch, invalid value a.s.o.).

commit 32c1a13ef4b1395cb891289af9b854f5686178d2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 29 20:30:44 2009 +0200

    rpc doc: added "*" and some minor fixes
    
    - documented the newly introduced "*" modifier for optional
      parameters.
    - fixed return value description for rpc->scan and
      rpc->struct_scan (these function always return the number of
      parameters read on success and - number of parameters read so
      far on failure and not 0/-1).
    - changed ctl and xmlrpc links to point to the auto-generated html
      files on sip-router.org/docbook/.
    - re-generated ser_rpc.txt

commit d803b87b0f2ecf8da3954c28ad8af72000e862ce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 29 17:54:26 2009 +0200

    kmi: added missing file mi_mem.h

commit 85f2302e8448ee20edb12bc3b4e2911ca3b111ec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 29 12:34:08 2009 +0200

    lib/kmi: option to build it with system malloc
    
    - MI lib can be built independently of core with system malloc for pkg
      memory (see Makefile)

commit 5caeeb1266d5541bfe0437dcefba3d96d4ee03eb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 29 12:32:17 2009 +0200

    tmx: t_hash MI command fixes
    
    - return 500 if TM_HASH_STATS is not defined
    - print only nodes corresponding to entries that have cur_entries or
      acc_entries != 0, otherwise is a huge list (2^16) of useless values

commit 17ce4b4f36122b515efc7d62f70b55cb0cb17675
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 29 11:03:46 2009 +0200

    sercmd: tab completion support for mi commands
    
    - tab completion is now supported for mi commands.
      E.g.:
        sercmd> mi p<TAB><TAB>
        ps   pwd
        sercmd> mi  pw<TAB>
        sercmd> mi  pwd

commit 72a573889c0126fedee20e80ff0fb5cf9f772a49
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 29 00:59:17 2009 +0200

    sercmd: tab completion support for cfg. vars & groups
    
    - tab completion is now supported for cfg. groups and variables
      parameters for the following rpc commands: cfg.help, cfg,get,
      cfg.set_now_int, cfg.set_now_string, cfg.set_delayed_int,
      cfg.set_delayed_int.
      E.g.:
      sercmd> cfg.help t<TAB>
      tcp tm
      sercmd> cfg.help tm fr_<TAB>
      fr_inv_timer  fr_timer
      sercmd> cfg.help tm fr_i<TAB>
      sercmd> cfg.help tm fr_inv_timer
    
    - tab completion fixed when spaces are in front of the command
      name (e.g. sercmd>         wh<TAB>   works now).

commit 1f0341882763c34493f0ff5e6ab7dd4f5b4ff992
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 28 12:53:27 2009 +0200

    mi_rpc: new module - rpc command to execute MI commands
    
    - 'mi' rpc command can be used to execute K MI commands
    - example using sercmd:
    sercmd> mi uptime
    200 OK
    
    + Now:: Sun Jun 28 12:45:37 2009
    + Up since:: Sun Jun 28 12:24:27 2009
    + Up time:: 1270 [sec]

commit 13d7e923c4bb9b9a58371deb81727d2a10d13ef8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 28 12:28:41 2009 +0200

    ctl: '*' optional scan modifier
    
    - '*' can be used in rpc scan to mark the start of optional parameter
      reading
    - example: 'Sd*Sb' - mandatory str, mandatory int, optional str, optional
      bool
    - if optinal modifier is used, then scan does not call rpc_fault, so
      execution of rpc command can continue
    - to be used by rpc command 'mi' - execute K MI commands

commit 282a314fca125783803ac67dc926519fb2ecb8df
Merge: 220f00d f836b64
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Jun 28 11:52:24 2009 +0200

    Merge commit 'origin/ser_core_cvs'
    
    * commit 'origin/ser_core_cvs':
      core: compile io_wait support even if -DUSE_TCP is not set
      tcp: compile fix if -DUSE_TCP is not defined
      sctp: compile fix if -DUSE_SCTP is not defined

commit f836b647ba8ef0bff1f7041c4cc6c9d6e41abff7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Jun 28 09:23:12 2009 +0000

    core: compile io_wait support even if -DUSE_TCP is not set
    
    io_wait is needed now also by the ctl module, so it should be
    compiled even if no tcp support is desired.
    Its compilation can be turned off if NO_IO_WAIT is defined
    (but in this case one must make sure so no other piece of code
    using it will be compiled).

commit 2e8c0383eb7ac0d58ecb34e53a261e52b7b2edd3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Jun 28 09:23:02 2009 +0000

    tcp: compile fix if -DUSE_TCP is not defined
    
    Don't try to use tcp_max_connections if tcp support is not
    compiled-in.

commit 650b96b5764db2196e2afeaf49bd7ff34fea72e8
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun Jun 28 09:22:38 2009 +0000

    sctp: compile fix if -DUSE_SCTP is not defined
    
    If -DUSE_SCTP is not defined don't try to use sctp library
    includes.

commit 220f00d67cb8eac370aeb97b763f9236e0d3cb5f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 27 23:05:13 2009 +0200

    kex: init uptime value for mi cmd

commit 721d126145538a9291a384c0b116a33b38674296
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jun 27 21:26:13 2009 +0200

    pdt: fixed rank testing in child init

commit 64321a99fa882dd60a473dbfb3cc8e589a1c139b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Jun 27 17:13:30 2009 +0300

    * modules/lcr: check that r-uri user exists
    
    * Added check to load_gws() function that Request-URI user exists.
      Credits to Andrew Pogrebennyk.

commit fbf689cce16836c91f684bca59ac2e6cd90a7fac
Author: Andrei Pelinescu - Onciul <andrei@sfantu-petru.ultima>
Date:   Sat Jun 27 14:35:59 2009 +0200

    sctp cfg: fix -1 not allowed in some cfg options
    
    -1 is now allowed in sctp_hbinterval and sctp_max_assocs.

commit a9529ef43640621ecced53c8fe9374f5b0c12fca
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Jun 27 14:50:40 2009 +0300

    * modules/utils: xcap table used already in child_init function
    
    * Optimization: moved use of xcap table from get_rules_doc function to
      child_init function.

commit f3a1c116d430ed8de9081e9f605e5060a99e86f4
Merge: 12e2827 f5863aa
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 26 20:25:09 2009 +0200

    Merge commit 'origin/ser_core_cvs'
    
    * commit 'origin/ser_core_cvs': (22 commits)
      sctp: sctp_max_assocs support from the script
      sctp: core.sctp_options shows now also sctp_max_assocs
      sctp: max_assocs options
      sctp: sctp_assoc_tracking support from the script
      sctp: core.sctp_options shows now also sctp_assoc_tracking
      sctp:  assoc_tracking option
      sctp: SCTP_PEER_ADDR_PARAMS fix for older kernels
      sctp: assoc_reuse option
      core: cfg vars for the new sctp options
      core: sctp_options rpc updated
      sctp: more config variables
      tcp: remove unused var. decls
      dns: fix missing out-of-memory check
      - @next_hop.src_ip: source ip of outgoing message
      sctp: retransmission options
      sctp: sctp autoclose can now be changed at runtime
      sctp: enable runtime changing for some of the cfg vars
      tcp: minor fix: TCP_EV_IDLE_CONN_CLOSED
      tcp: minor fix: TCP_EV_CONNECT_RST() not always called
      sctp: compatibility with older linux kernels
      ...

commit 12e28271dd9af2bd1cdedd6d9930b2159bafca90
Merge: bad3c06 b9ec929
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 26 20:24:24 2009 +0200

    Merge commit 'origin/ser_modules'
    
    * commit 'origin/ser_modules':
      - iptrtpproxy_adjust_timeout() function

commit bad3c064285bb56cb367081c268d4ea7a47b927e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jun 25 16:54:45 2009 +0200

    gitignore: ignore autover.h

commit b9ec92931879ddc30bf149d5187bb15ef4c58329
Merge: 35ce882 6ff8e1d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 26 20:14:00 2009 +0200

    Merge branch 'cvs-head' of git://git.sip-router.org/ser_modules into ser_modules
    
    * 'cvs-head' of git://git.sip-router.org/ser_modules:
      - iptrtpproxy_adjust_timeout() function

commit f5863aa01d653c652854dbbd3000531e8a0388ac
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 26 17:59:09 2009 +0000

    sctp: sctp_max_assocs support from the script

commit 847fdfa493ecab48d3287287133141ff4705a1c0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 26 17:57:06 2009 +0000

    sctp: core.sctp_options shows now also sctp_max_assocs

commit 92b6de79c7734da50dbc23c05e116a5259171806
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 26 17:56:44 2009 +0000

    sctp: max_assocs options
    
    Added a new option controlling the maximum number of open
    associations allowed. When exceeded new associations will be
    immediately closed (using ABORT).
    If connection tracking is used (default) trying to open new
    associations will gracefully fail before actually opening them. If
    no connection tracking is used, the associations will first be
    opened and then immediately closed. In this case the packet
    triggering the active open will be sent (as part of the initial
    4-way handshake), before the association is closed.

commit 42e3dc75f49dab19f22a14c8d9620d2d9ab57b18
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 26 17:56:25 2009 +0000

    sctp: sctp_assoc_tracking support from the script

commit 49e4784a3bf57989645592cb481cdd299c9e5c46
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 26 17:56:04 2009 +0000

    sctp: core.sctp_options shows now also sctp_assoc_tracking

commit 709fb806388cc9c31f94e0cc4b6cdccb8da1c1c6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 26 17:55:05 2009 +0000

    sctp:  assoc_tracking option
    
    Association tracking can now be turned on/off at runtime.
    Turning it off saves some memory and gives slightly better
    performance at the cost of having to turn off some other features
    that depend on it (right now that will be sctp_assoc_reuse).

commit b9117ecdc8f1c122fc472fc5c9c18c0473e8d357
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Jun 25 19:00:57 2009 +0300

    * modules/utils: fixed type of DB query string
    
    * In xcap doc query, user and domain query parameters are of type
      DB1_STR instead of DB1_STRING.

commit 277225d51277d62063071e5b615dc83d8c409503
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jun 25 12:56:06 2009 +0200

    makefile: better "dirty" local copy detection
    
    Better detection for local changes, when re-generating autover.h.

commit 1849815b51ad28a86e8af72c36930474f89ae948
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jun 25 12:21:35 2009 +0200

    makefile: minor fixes
    
    - main.d and core_cmd.d  generation failed on clean sources,
      because of missing autover.h
    - make tar excludes now .git*, *.swo and includes autover.h

commit 5c00f5c2987b9cbdae7734db89019f6ef1d3f815
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 24 23:55:16 2009 +0200

    makefile: MAIN_NAME reverted
    
    MAIN_NAME reverted to ser (should be changed _only_ when we agree
    on the short name).

commit 6f816e54bf008059dded804c0e55e2e3ce60d358
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 24 23:38:19 2009 +0200

    makefile: added CFG_NAME and SCR_NAME
    
    CFG_NAME and SCR_NAME are used now to hold the name or prefix for
    the config and scripts _in_ the repository. All this configs and
    scripts will be installed using MAIN_NAME
    (e.g.  $(CFG_NAME)-basic.cfg is installed into
           etc/$(MAIN_NAME)/$(MAIN_NAME)-basic.cfg).
    This was needed to allow installing using different names, without
    having to revert the recent mass re-naming of man, config and
    scripts.

commit 1af00fc924116ca97b7acd42ed8640712fcd33f0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 24 22:30:55 2009 +0200

    version number changed to 2.99.0-dev-01-serk

commit a868066e82310eef6f7e00d3b4e941ed50e7dc6f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 24 22:25:33 2009 +0200

    makefile: REPO_VER: try to detect dirty local repo
    
    - add -dirty to the git sha if when autover.h is generated the local
    repository contains locally modified files.
    - make tar forces autover.h generation

commit 92721dc19c76b91e0e24683a9b2b47e2e40aefb8
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 24 21:15:06 2009 +0200

    core: the version contains now the git sha if known
    
    The version numbers displayed by ser -V or sercmd core.version
    contain now the git sha.

commit 51690b9e45be569ca87e6d0af9e288a3656249f3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 24 21:11:24 2009 +0200

    makefile: auto-generate autover.h based on the git sha
    
    Automatically re-generate autover.h each time some change in the
    repository happens. The file will contain a macro (REPO_VER) set
    to the first 6 letters of the git sha. This allows unique
    identification for the git branch and commits from which the code
    was generated.
    If the code is not compiled from a git repository, use "unknown"
    for the REPO_VER.

commit 4d106ce392b94295d983f9188d73937ac5f80e24
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 24 22:42:47 2009 +0200

    tmx: new pseudo-variable $T_inv(pv)
    
    - access the INVITE request while processing the CANCEL
    - flags, parts of INVITE can be now used during CANCEL handling in
      config

commit 9a9627a248e751700d4392cf7a45a2b00cf939cd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 23 17:22:08 2009 +0200

    tm: t_lookupOriginalT() added to TM API structure

commit 527ba6b4bc9c1af245a19968b864491ff55dace0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 23 17:15:25 2009 +0200

    tmx: grouped pv static variables in a structure
    
    - cleaner representation of $T_{req,rpl} contexts

commit 91ced80144bb3d570c55547e2d5c7cd79003d738
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 24 22:49:26 2009 +0300

    * Core: Changed sip-router to $(MAIN_NAME) in Makefile.

commit 4cf1ce0e147162f458c5534ea978acb81055e3c2
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 24 22:10:57 2009 +0300

    * Scripts: Renamed ser_mysql.sh -> sip-router_mysql.sh.

commit a0ce24fed910050ea3210ded0cc94c9c059e6b55
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 24 22:01:55 2009 +0300

    * Core: ser -> sip-router changes
    
    * Changed ser to sip-router.
    * Updated mailing lists and URLs.

commit cdc6a4091763fe5731d6af94c60a817b0828fb9b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 24 21:57:20 2009 +0300

    Core: Renamed ser.cfg.5 to sip-router.cfg.5

commit 5623ef894a6e15818de87a4a2b2fc95ede3972ef
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 24 21:25:58 2009 +0300

    * Core: Renamed ser.8 to sip-router.8
    
    * Renamed ser.8 to sip-router.8.
    * Small edits in sip-router.8.

commit 8632598cac189adb557ad0c65f15744ef4256e45
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 24 20:01:46 2009 +0200

    tm: safety checks for possible escaped neg. ACKs
    
    In normal operation looking up a transaction corresponding to an ACK to a
    neg. reply or to a local transaction should end up in script
    termination, so when t_relay_to() is called for a neg. ACK, the
    transaction should not have been looked up previously. If this
    assumption fails, the ACK will be processed normally (resulting at
    worst in calling the TMCB_ACK_NEG_IN callback multiple times for
    the same ACK) and a warning message will be logged.

commit 4e4228db232201f2921152303e969240d4f68c49
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 24 19:50:06 2009 +0200

    make: excluded more modules by default
    
    Excluded more modules which either require external libraries or
    external includes to compile.
    New modules on the exclude_modules list: perl, dialplan, lcr,
    utils, presence, presence_dialoginfo, presence_xml, pua, pua_bla,
    pua_dialoginfo, pua_usrloc, pua_xmpp, regex, xcap_client, h350.

commit 16121d4615bd20baee32337958f0f42ee5a42f20
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 24 20:49:10 2009 +0300

    * modules/tls: ser to sip-router renaming
    
    * Renamed ser files to sip-router files and updated README.

commit 30ea1726754fdc12646e35a6ec49a636a57ab7f0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 24 15:06:26 2009 +0200

    tm: fix t_check messing up replies branch
    
    - when t_check was called twice for a reply (e.g. t_check_trans() in
      script in the main onreply_route and then internally in tm
      reply_received), the second call did return an invalid branch.
      Now the current branch is remembered along T so t_check will
      always return a valid branch.
    
    - added T_branch, a new global variable that holds the current
      branch corresponding to T (is valid only if T is valid).
    
    - set_t() takes now 2 parameters: a transaction and the current
      branch for the transaction. If the current branch does not make
      sense (e.g. for requests), T_BR_UNDEFINED must be used.
      This change ensures that every time T is set or changed, the
      current branch is also updated.
    
    - more comments added

commit f9477aa2bec8508197837875ebc199f1bf569fa4
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 24 16:08:09 2009 +0300

    * modules/lcr: fixed crash when module initialization failed
    
    * Added checks that shared memory has been really allocated before
      trying to free it.  Fixes crash when during failed module
      initialization.

commit 5d1a75a61b349690125db87c1e48b3de580613e6
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 24 15:44:10 2009 +0300

    * Core, etc, documentation: renamed ser to sip-router
    
    * Renamed ser to sip-router in Makefile, etc files and some core files.
    * Renamed some etc files from ser based name to  sip-router based name.

commit 4743d4995809198166cf9067a68a018a1b87bd0e
Merge: f01d125 b98da5f
Author: Jan Janak <jan@iptel.org>
Date:   Wed Jun 24 13:36:56 2009 +0200

    Merge branch 'missing_imports'
    
    Add various tools and scripts from Kamailio svn repository to
    the shared sip-router git repository.
    
    * missing_imports: (628 commits)
      - updated email address
      - fix kamctl for cr after table changes for 1.5.x, bug #2794168
      - 2 fixes in commented examples
      - call nat detection route (reported by Mark Sidell)
      - set 0 default values for the new columns
      - small rephrasing, extend man page a bit
      - layout fix in man page for kamdbctl
      - Fixed "kamctl ping": From and Contact in generated OPTIONS didn't contain "sip:"
      - build memcached module as own debian package
      - Added libmemcache-dev to "control" files for deb packages (patch by Andreas Heise)
      - Improved RR section in default config file: record_route() just for INVITE and SUBSCRIBE (credits to Jon Bonilla)
      - Improved Debian init script:
      - remove debian-sarge, etch is now oldstable
      - increment debian packaging version for trunk
      - add missing libpcre3-dev depencency
      - fix purple table name for non mysql databases setup
      - small spelling fix
      - remove purple module from sarge packaging
      - updated with more examples
      - regenerated db table creation for dialog and purplemap
      ...

commit f01d1251f12325b777a7af980fa1d5c2be2caabf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 23 12:46:21 2009 +0200

    tmx: added K compatible tm statistics

commit a98476c55ffdce59bff96ac63d00fad0c337b70b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 23 12:44:39 2009 +0200

    tm: small wrapper to get TM stats via API
    
    - used for K style statistics

commit a0993fbf1d35b27644c6837eff3832c1e12d2495
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 23 11:58:26 2009 +0200

    nathelper(k): fixed content type check
    
    - mistakenly introduced with multipart body support
    - reported by Pascal Maugeri

commit b98da5f7ef6ca30679a24b2c9762873e16a612b2
Merge: 8c187e7 12239ae
Author: Jan Janak <jan@iptel.org>
Date:   Mon Jun 22 18:22:13 2009 +0200

    Merge 'utils/profile' of kamailio svn into sip-router/utils
    
    * 'utils/profile' of kamailio svn:
      Initial revision

commit 8c187e76a2c517b4accd49ac55df148647015cc6
Merge: f2bdb5d 3372a27
Author: Jan Janak <jan@iptel.org>
Date:   Mon Jun 22 18:20:46 2009 +0200

    Merge 'utils/kamunix' of kamailio svn into sip-router/utils
    
    * 'utils/kamunix' of kamailio svn:
      - fix another linking error on solaris
      - fix linking errors on solaris, this needs lresolv, reported
      - don't link with unnecessary libs, related to bug #1855859
      - renamed: openserunix -> kamunix

commit f2bdb5deaa668078f7142c3c0a5cca3e0bff04bd
Merge: 879424b d53150f
Author: Jan Janak <jan@iptel.org>
Date:   Mon Jun 22 18:19:55 2009 +0200

    Merge 'utils/db_oracle' of kamailio svn into sip-router/utils
    
    * 'utils/db_oracle' of kamailio svn:
      - renamed: openserunix -> kamunix
      Add db_oracle module and toolses for it

commit 879424b0adf74d4d0360c3905a6302510d10834a
Merge: 427dfb2 d336a86
Author: Jan Janak <jan@iptel.org>
Date:   Mon Jun 22 18:18:49 2009 +0200

    Merge 'utils/db_berkeley' of kamailio svn into sip-router/utils
    
    * 'utils/db_berkeley' of kamailio svn:
      - fix compilation on OpenBSD, related to missing includes paths and wrong
      - port from opensips r4574, credits goes to Bogdan
      - renamed: bdb_recover -> kambdb_recover
      - renamed: bdb_recover -> kambdb_recover
      - fix missing variable if compiled with EXTRA_DEBUG
      - change name in copyright headers
      - fix LIBS, don't link with unnecessary libraries, related to #1855859
      -fix memory leak in 'bdb_insert'
      - don't try to install the openserctl.db_berkeley, this is not available for now
      - disabled the utility compiling as it requires external libs.
      - import berkeley database module into trunk

commit 427dfb25f555ed98d6c9ce37d056e190aef060c0
Merge: 5c4cc07 bbd176f
Author: Jan Janak <jan@iptel.org>
Date:   Mon Jun 22 18:17:41 2009 +0200

    Merge '/scripts' of kamailio svn into sip-router/tools
    
    * 'scripts' of kamailio svn: (389 commits)
      - fix kamctl for cr after table changes for 1.5.x, bug #2794168
      - set 0 default values for the new columns
      - small rephrasing, extend man page a bit
      - layout fix in man page for kamdbctl
      - Fixed "kamctl ping": From and Contact in generated OPTIONS didn't contain "sip:"
      - fix purple table name for non mysql databases setup
      - regenerated db table creation for dialog and purplemap
      provided db schemes for purple module
      - update man pages date
      - small layout fix in man pages
      - add man page for kamdbctl command, credits to Frederick Bullik
      - update man page to actual kamctl help text, closes #2009848
      - sync database files with xml source (gw change, r5478)
      fix error introduced by previous commit (dump option for lcr)
      kamctl lcr: new option: dump
      * Fixed errors in 'lcr addgw' parameter handling.
      fix addgw for lcr
      - new column to dispatcher table to hold priority
      - update database schemes after recent lcr extension (ping functionality)
      * Introduced optional aliveness checking of gateways.  Contributed by
      ...

commit 5c4cc0750b46e3abb148796dd1751c97d1b41483
Merge: 9bd59c5 18ce720
Author: Jan Janak <jan@iptel.org>
Date:   Mon Jun 22 18:16:47 2009 +0200

    Merge 'pkg' of kamailio svn into sip-router/pkg/kamailio
    
    * 'pkg' of kamailio svn: (166 commits)
      - updated email address
      - build memcached module as own debian package
      - Added libmemcache-dev to "control" files for deb packages (patch by Andreas Heise)
      - Improved Debian init script:
      - remove debian-sarge, etch is now oldstable
      - increment debian packaging version for trunk
      - add missing libpcre3-dev depencency
      - remove purple module from sarge packaging
      - fix description, debian radius packages also contains the peering module
      - add purple module to debian packaging
      - fix packaging for utils module, wrong directory name
      - add utils module to packaging
      - activate module man page building for debian packages
      Add RLS to the debian-presence-package.
      - update port for OpenBSD (created for 1.4.2)
      * LCR module is now using Perl compatible PCRE regular expression
      - add modules for dialog-info support to pua and presence module
      - add manifest file to start/ stop/ restart kamailio/ openser with Solaris 10
      * Packaging changes related to new misc_radius module
      - fix e-mail address
      ...

commit 9bd59c5647f323e81e041b696ccb25b361c33eda
Merge: 9687fb8 f41e32d
Author: Jan Janak <jan@iptel.org>
Date:   Mon Jun 22 18:14:07 2009 +0200

    Merge '/examples' of kamailio svn into sip-router/examples
    
    * '/examples' of kamailio svn:
      - renaming: openser -> kamailio
      - doubled $ sign for the env variables, otherwise they would be considered openser PVs
      - fix extra acc mysql example table
      - fix several errors in example configuration
      set proper SVN properties
      - send Message and click-to-dial scripts updated to current IM fifo syntax
      - fix for handling \r\n
      - ctd.sh version for 1.2.0+
      - added sample config to do accounting to MySQL based on default config file
      - examples updated
      - config scripts updated to reflect latest changes (mainly FIFO related)
      - 'break' replaced with 'return' in default config and example files
      Initial revision

commit 9687fb8134fff30237facbe9e3271eea299902a5
Merge: e5cf7a1 436bfbf
Author: Jan Janak <jan@iptel.org>
Date:   Mon Jun 22 18:13:05 2009 +0200

    Merge etc/ of kamailio svn into sip-router/etc
    
    * '/etc' of kamailio svn: (42 commits)
      - 2 fixes in commented examples
      - call nat detection route (reported by Mark Sidell)
      - Improved RR section in default config file: record_route() just for INVITE and SUBSCRIBE (credits to Jon Bonilla)
      - small spelling fix
      - updated with more examples
      - the example of arming other event routes for INVITE commentted
      - uri module has been merged in siputils
      - default config also need pv
      - renaming
      - rename openser.cfg -> kamailio.cfg
      - renaming scripts part 1
      - revert commit as this don't work for installation where radius is
      - disable radius support in the default config for the acc module, as
      - spelling fix, accouting -> accounting
      - examples set to default values
      - update default config after db name change
      - turn debugging off
      - fix ACK handling
      - fix in-dialog SUBSCRIBE routing
      - fix error in default config that prevents the server start
      ...

commit e5cf7a1831e380cd6bd43e5a36dfd6d04625bc41
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 22 17:32:44 2009 +0200

    tm doc: README re-generated

commit c263b1a7a83f7143093e699754b377647d54496d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 22 17:26:47 2009 +0200

    tm doc: t_check_trans and note about fr_timer_avp
    
    - added missing t_check_trans docs
    - added fr_timer_avp and fr_inv_timer_avp notes about new empty/zero
      avp value handling (use default value) and about using seconds
      instead of milliseconds.

commit bcc993680ca2722aec2e4f240569cb7979808e18
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 22 16:00:10 2009 +0200

    tm: ignore avp timers with 0 or empty value
    
    Kamailio compatibility: If an avp timer (fr_timer_avp or
    fr_inv_timer_avp) is empty ("") or 0, use the default timer
    value (fr_timer or fr_inv_timer).
    
    Reported-by: Juha Heinanen  jh at tutpro com.

commit caef5ace2026fcb2a9dffb471e2cec6d843082f8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 22 17:25:18 2009 +0200

    nathelper(k): skip trailing whitespaces and crlf
    
    - was affecting multipart bodies, causing nortpproxy string to be placed
      in the wrong position
    - reported by Pascal Maugeri

commit adc19f419c86897ff73934ea3791dcf4da564061
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Jun 22 17:36:59 2009 +0300

    * core
    
    * Updated gw and lcr table schemas.

commit a141107dda2d65892b175c160af9101d161b2a73
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Jun 22 17:19:53 2009 +0300

    * modules: lcr
    
    * New version of lcr module that adds support for multiple LCR instances
      and possibility to defunct unresponsive gateways.

commit 6387ae76ce94f2fb8cc74f458c1761b3fe13c24d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Jun 22 17:02:01 2009 +0300

    * Core (documentation)
    
    * Added some SIP Router entities.

commit e4fc24fe3c350a231cf00b74c05c3c05c2a1e289
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 22 11:17:58 2009 +0200

    kex: fix in mi debug command with no parameter
    
    - reported by Juha Heinanen

commit 998ac3c6efcf30fadd3c5b5c80fdbdf3ca4f2e90
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 22 00:25:50 2009 +0200

    msilo(k): check_message_support() only for REGISTER
    
    - it verifies if the contact has a non-zero expires value
    - look first at contact parameters then Expires header

commit 1f41271e1c1b879217835b8b3fdbdc2680138f25
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 21 23:31:43 2009 +0200

    nathelper(k): support for multipart/mixed body

commit e45ac57e67a4e858c24fbb53d6d41f7ea01b3730
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jun 21 23:25:16 2009 +0200

    registrar(k): different return codes for successful save
    
    - save(...) returns different return codes
    	- -1: error
    	-  1: insert
    	-  2: update
    	-  3: delete
    	-  4: contacts list replied

commit 9d8cb1917800e096d8a34232e63fb01ca83855d7
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Sat Jun 20 00:58:32 2009 +0100

    drouting: Documentation updated
    
    - entities.xml path fixed
    - &osips references changed to &kamailio references
    - README regenated

commit 0fbd2328d880d54cc2e4c68d09c7f5d52f4f6820
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Sat Jun 20 00:49:23 2009 +0100

    drouting: Updated all Copyright notices

commit c4f2871cd47376ee1c5131dbbf5c8151753ff905
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Sat Jun 20 00:45:02 2009 +0100

    drouting: Makefile fixed to compile with OPENSER_MOD_INTERFACE

commit 08e1be29be51ca720be5b796baa40ef4b786ef54
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Fri Jun 19 23:36:43 2009 +0100

    drouting: new module to support Dynamic Routing
    
    -Adapted from OpenSips drouting module rev. #5770

commit 1c5d19277a14e71167c81665d6de8173e61a2ccb
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Jun 19 16:40:24 2009 +0300

    * core
    
    * Added fixup_igp_pvar and fixup_free_igp_pvar fixup functions.

commit af0d2038a36502e0d786aa62dbb8ae7378e1f5e6
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 17 21:37:36 2009 +0300

    * Small clarification in filter_body text.

commit b3e2889f22db199c04e9d32999d143cefad37b2a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 17 21:23:57 2009 +0300

    * modules_k/textops
    
    * filter_body function now takes multipart/mixed boundary string
      from Content-Type ;boundary parameter.

commit bc18eab9c61678de1e7a58ffd5aca55ecadacf95
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 17 11:09:19 2009 +0200

    kex: implemented mi debug command
    
    - MI command to change the debug level at runtime
    - uses same signature as previous Kamailio versions

commit 6deb1c538b11a63533f38c684083fd9d0a5f6a5c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 17 09:12:08 2009 +0000

    sctp: SCTP_PEER_ADDR_PARAMS fix for older kernels
    
    On older kernels (< 2.6.27) one has to set the AF when setting a
    SCTP_PEER_ADDR_PARAMS socket option even if the address is the
    wildcard (INADDR_ANY).
    This affects the sctp_hbinterval and sctp_pathmaxrxt config
    options.
    
    Reported-by: Cristian Constantin <cristian.constantin@iptel.org>

commit 61d0ee551872fc55c0f70ba8d4f9a5ab0c1d0e87
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 15 22:34:55 2009 +0000

    sctp: assoc_reuse option
    
    Association reuse for replies can now be turned off (the default
    is on). Config name: sctp_assoc_reuse, real time name: assoc_reuse
    (sercmd cfg.set_now_int sctp assoc_reuse 0).

commit 80a6149e604ad663580551efd80d77068a22e6f5
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Fri Jun 12 13:03:00 2009 +0300

    htable: more match ops in counting items with $shtcn and $shtcv

commit b9aa4016c76434204692d4a2dc97aed5b5c9f239
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Fri Jun 12 13:01:48 2009 +0300

    htable: delete item when assigning $null
    
    - compatibility with K style of removing item

commit d0809a64c34389d82ed1e023aa79372f721a6bbe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 12 11:24:39 2009 +0300

    presence_xml: documentation for xml_ns parameter
    
    - parameter that allow registering namespace prefixes for XPath handling

commit 30e285d05fe32235c0befde9573fafd8a162a974
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 12 11:19:37 2009 +0300

    presence_xml: support to handle namespace prefixes

commit 5605e1fc7d0dab50f444d9c24edc8d50d8ae3eb4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 12 00:31:39 2009 +0300

    presence_xml: safety checks for null node set
    
    - print string reprezentation of the node if it has no cdata value

commit 986c26b70e4733172b6b0038494fd81eb983bb48
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jun 11 22:21:28 2009 +0300

    presence_xml: readme updated
    
    - documented passive_mode parameter and mentioned $xml(...) PV

commit 22f9bd6620b851848853befc677ce6b6b318c483
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Jun 11 20:25:47 2009 +0200

    tm: t_check_trans ends script on neg. or local ACK
    
    - t_check_trans will now end the script if the message is an ACK
      to an existing transaction ended with a negative reply or an ACK
      to a local transaction (as opposed to a normal proxied one).
      Before ending the script it will process the ACK in the same way
      t_newtran would, including calling the appropriate callbacks.
      t_check_trans behaviour for other requests (e.g. retransmissions,
      cancels, e2e ACK) remains unchanged.
    
    - added missing callbacks for the retransmitted request case.
    
    Reported-and-tested-by: Juha Heinanen jh at tutpro com.

commit 6e729562274f7b5ec5230a7df2764f36ddb0f39f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jun 11 21:02:47 2009 +0300

    presence_xml: implementation of pv $xml(...)
    
    - handling of xml docs using xpath
    - $xml(name=>doc) - get/set an xml doc under 'name'
    - $xml(name=>xpath:xpath-expression) - evaluate/update xpath extension
    - example:
    	$xml(x=>doc) = '<?xml version="1.0" encoding="UTF-8"?><a><b>test</b></a>';
    	xlog("content of node b: $xml(a=>xpath:/a/b/text())\n");
    	$xml(a=>xpath:/a/b) = "1234";
    
    - TODO list:
    	- extend presence modules to work also with xml documents from $xml() PV
    	- support to set node content to an xml tree
    
    - usage:
    	- do routing decisions based on content of xml documents comming
    	  with SIP messages (such as PUBLISH)
    	- update xml document content
    	- evaluate XPath-allowed expressions and functions, see:
    		http://www.w3.org/TR/xpath

commit df5b7ebf3f91ab4335fe3c390a521cbb7b15e2f7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jun 11 20:12:35 2009 +0300

    presence_xml: new pv $xml(...)
    
    - $xml(...) can be used to handle xml documents
    - xpath access and set of content
    - module can act in passive mode by settin 'passive_mode' parameter to 1
      (no bind to presence module, no connection to database)

commit 0a9e22751e3f9c85d81a974ae5c06107f45650a4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jun 11 20:10:57 2009 +0300

    core: pvapi - be consistent in pv_printf_s()
    
    - there were cases when no copy was done, therefore no ending '\0'

commit 09b7b0b356153335bcbb17220397f2a20801d4a2
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Jun 11 16:53:59 2009 +0200

    tm: callbacks: obsolate description is removed.
    
    The description about the callback insertion was
    confusing because no locking is necessary to insert
    new callbacks.

commit 3ac29ef0133bf29047c4bcd414e246791e164744
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Thu Jun 11 15:07:21 2009 +0100

    call_control: changed LM_ macro calls
    
    	- LM_ macro call changed to LOG calls

commit b8d12a322f17aa302f21ee9fb2068400586bace3
Author: Raul Alexis Betancor Santana <rabs@dimension-virtual.com>
Date:   Thu Jun 11 13:01:15 2009 +0100

    * Just the call-control module from OpenSIPS ported to Sip-Router

commit c8586f86b34945cdb0b30655b2ae655d9ceb7740
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 10 23:24:42 2009 +0000

    core: cfg vars for the new sctp options
    
    - new script vars: sctp_asocmaxrxt,
    sctp_init_max_attempts, sctp_init_max_timeo, sctp_hbinterval,
    sctp_pathmaxrxt, sctp_sack_delay, sctp_sack_freq, sctp_max_burst.
    - updated NEWS

commit 617dda5c7cf4fda589ffb7666f281a073f17adec
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 10 23:23:52 2009 +0000

    core: sctp_options rpc updated
    
    Updated sctp_options with the new options (asocmaxrxt,
    init_max_attempts, init_max_timeo, hbinterval, pathmaxrxt,
    sack_delay, sack_freq, max_burst).
    
    E.g.:
    $ sercmd core.sctp_options
    {
    	sctp_socket_rcvbuf: 54784
    	sctp_socket_sndbuf: 54784
    	sctp_autoclose: 180
    	sctp_send_ttl: 32000
    	sctp_send_retries: 0
    	sctp_srto_initial: 3000
    	sctp_srto_max: 60000
    	sctp_srto_min: 1000
    	sctp_asocmaxrxt: 10
    	sctp_init_max_attempts: 8
    	sctp_init_max_timeo: 60000
    	sctp_hbinterval: 30000
    	sctp_pathmaxrxt: 5
    	sctp_sack_delay: 200
    	sctp_sack_freq: 0
    	sctp_max_burst: 4
    }

commit 2c552c8d6e9ce21a7f1e6a9b71b904a68bdf0ebe
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Jun 10 23:21:25 2009 +0000

    sctp: more config variables
    
    Added more config variables for various sctp protocol specific
    parameters:
     asocmaxrxt - maximum retransmissions attempts per association
     init_max_attempts - maximum INIT retransmission attempts
     init_max_timeo - maximum INIT retransmission timeout (RTO max for
                      INIT)
     hbinterval - sctp heartbeat interval, -1 for disable
     pathmaxrxt - maximum retransmission attempts per path
     sack_delay - delay until an ACK is generated after receiving a
                  packet.
     sack_freq  - number of packets received before an ACK is sent
     max_burst  - maximum burst of packets that can be emitted by an
                  association
    
    All of them can be changed at runtime (e.g.
     $ sercmd cfg.set_now_int sctp hbinterval -1 ), but the changes
     will affect only new associations (they will not affect the
     already established ones).

commit 82a5ef65ffe69b33accecc67b24376307aa46812
Author: Jan Janak <jan@iptel.org>
Date:   Wed Jun 10 22:41:27 2009 +0200

    db: Fixing problem with incorrect initialization of db connections
    
    The sip-router core is based on the ser core and thus has a slightly
    different initialization sequence of the main sr process. Namely we
    also call the child_init function of all modules in the main process
    with rank PROC_INIT. This is a kind of delayed initialization (called
    after all mod_init functions have finished but before the main
    process started forking children).
    
    There should be no database connections opened in child_init called
    with PROC_INIT parameter. This would result in database connections
    opened in the main process and inherited by all children. Such
    connections could then be used from multiple processes simultaneously
    and that can cause race conditions.
    
    This change checks for the value of the rank parameter in child_init
    functions and skips database initialization if the value is PROC_INIT,
    PROC_MAIN, or PROC_TCP_MAIN.
    
    The problem was reported by Juha and he deserves the credit for helping to
    investigate the issue.

commit 2e51695a7e26ad0e2dabd6dc44787b41862164fc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 9 18:34:35 2009 +0300

    xcap_client: proper return code in child init function when all is ok
    
    - introduced by previous commit, reported by Pascal Maugeri

commit f3e18e3885eff64d5808ede28a12210a4ad4ae19
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Jun 9 15:54:42 2009 +0300

    * Closed database connection after two error case.  Thanks to Jan for
      pointing out the bug.

commit 7e2bf0f1c1a7a84e2b4fb33f2175d7bc0d057c10
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 9 14:47:15 2009 +0300

    xcap_client: init db con per process
    
    - introduced child_init function to init db connection per process
    - db connection closed in destroy function
    - reported and credits to Pascal Maugeri and Inaki Baz Castillo

commit 33e4b20ffeb6a26f49080f701dc03e35498ac221
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 9 12:02:22 2009 +0300

    htable: replace PV_NAME_PVAR with PV_NAME_OTHER
    
    - forgotten to be updated when PV_NAME_OTHER was introduced to get rid
      of PVAR type hack
    - name of $sht is a custom structure, not a PV
    - reported by Christian Koch

commit a93f14f36e007741ba2c531ae4d15170a449deca
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 9 11:59:53 2009 +0300

    core: fixed pv_get_spec_name()
    
    - check for PV_NAME_PVAR was wrongly used with PV_NAME_INTSTR
    - reported and credits to Christian Koch

commit 05eb09c1d7bdada655bd29137e2cfe8d1563e689
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Tue Jun 9 10:20:51 2009 +0300

    xlog(k): readme updated

commit 0911088466011cde4ba9104c301a744b67bf4d9c
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Tue Jun 9 10:10:15 2009 +0300

    xlog(k): replaced LM_GEN1 with LOG_
    
    - do not print file name and line
    - printed prefix defaulted to "<script>: "
    - value of prefix can be set by module parameter
    - reported and credits to Juha Heinanen and Andrei Pelinescu-Onciul

commit 950e17ad49e6b1f64df6ac00a15c6d51a3ae9020
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 8 08:50:40 2009 +0000

    tcp: remove unused var. decls
    
    Removed tcp_new_conn_alias_flags and tcp_alias_flags declaration,
    since they have been replaced by runtime cfg. equivalents
    (tcp alias_flags and new_conn_alias_flags).
    
    Reported-by: Libor Chocholaty <libor@iptel.org>

commit e380cc17d6d6b1fe812992d871182297b564b348
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 8 08:50:07 2009 +0000

    dns: fix missing out-of-memory check
    
    - fix missing out-of-memory check when creating a negative cache
      entry
    - minor optimizations (likely)

commit 478a38bbf71574253811e35ff340bc89018d0235
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Jun 6 18:20:15 2009 +0300

    * Slit db query result check to query check and result check in order to
      get error message if query fails.
    * Added check that db handle exists.

commit d777926f7abf3e1b723030d6371e46ea394c3dba
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Jun 6 13:02:42 2009 +0300

    * Database query result was not freed when there was error in getting
      extra_hdrs pv value.

commit 15d47d5cb04ef51d5050b7235b8a187bcd606d04
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Jun 5 15:19:59 2009 +0200

    core: regex fixup fix for k modules
    
    k modules that use the core regex fixup functions expect a pointer
    to a regex, but got instead a double pointer to a regex.

commit 903503806eed8cbcc0ad0ade24446c876e2733a4
Author: Jan Janak <jan@iptel.org>
Date:   Thu Jun 4 15:19:17 2009 +0200

    tm: Document fr_timer_avp and fr_inv_timer_avp
    
    This patch adds docbook documentation for fr_timer_avp and
    fr_inv_timer_avp parameters of tm module and updates the
    module README.

commit ec78863207a3ecc3a081f43264fd041d88181663
Merge: 4b7ad0e 333a333
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Jun 4 09:46:59 2009 +0200

    Merge branch 'master' of ssh://tirpi@git.sip-router.org/sip-router
    
    * 'master' of ssh://tirpi@git.sip-router.org/sip-router:
      core: added modulo operation
      * Improved presence database handling.
      * Introduced new function xcap_auth_status that is a standalone version
      pv: added new PV: $bs
      core: set 'fixed' shortcut to the value for fixup_uint...
      core: added shortcut to fixed value in fparam_t

commit 4b7ad0ea5dcc7c6621fd28b812fd27de5b523fde
Merge: d14f231 593513f
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Jun 4 09:35:00 2009 +0200

    Merge branch 'master' into script_callbacks
    
    * master:
      route_type: branch and onsend route bugs corrected
      * Commented out warning about deprecated avp name syntax.  I suggest to
      sl(k) - use load_tm_api()
      * modules_k/textops
      core: added km_parse_avp_spec()
      pv: parse K-style AVP aliases
      docbook: Generate TOC for root-level section elements
      make: required version is now 3.81
      test: gcc version test scripts
      tm: doc - added note about tmx module
      pua: use load_tm_api() instead of find_export()/load_tm()
      kex: added K pv_printf() function
      kex: added K dst uri related functions
      makefile: fix last commit
      * modules_k/acc: included Makefile.radius
      makefile: gcc version detection fix
    
    Conflicts:
    
    	onsend.h

commit 333a3335217ece2e3d2f8089d854ba347f36b9af
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jun 4 09:59:59 2009 +0300

    core: added modulo operation
    
    - a mod b - return the modulo result

commit 17bc823ded7489543686c1bae4253dadf96408d9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 3 22:39:04 2009 +0300

    * Improved presence database handling.

commit b64b67df7d1fbac13646c47fd5a3f09498e3c799
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 3 18:54:03 2009 +0300

    * Introduced new function xcap_auth_status that is a standalone version
      of modules_k/presence pres_auth_status function.  This allows checking
      of presence authorization status from a sip proxy that does not include
      an integrated presence server.

commit b70650026f280a9d989cc4f6290d6d93a80df058
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 3 14:00:34 2009 +0300

    pv: added new PV: $bs
    
    - return body size computed from structure, not from Content Lenght
    - $cl stays shortcut to $hdr(Content-Lenght) for backward compatibility

commit 235a9c07e8527efbe36e88363fca5399ff45ff21
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 3 13:02:45 2009 +0300

    core: set 'fixed' shortcut to the value for fixup_uint...
    
    - K module expect the uint value instead of pointer to it
    - reported by Juha Heinannen for nathelper module

commit d64c1c71e8c688b4e0e2f3c92702f143972ab806
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 3 12:11:27 2009 +0300

    core: added shortcut to fixed value in fparam_t
    
    - required for PVAR fixups in K modules

commit 593513f8e03096319dc0ec4f2fa9752e31b0686c
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Jun 3 10:38:42 2009 +0200

    route_type: branch and onsend route bugs corrected
    
    - Branch and onsend routes did not restore the original
    route_type after they have finished the execution,
    so subsequent functions that need the route_type failed.
    (For example t_relay() in the second branch did not work
    if branch or onsend routes of the first branch were executed.)
    - get_route_type() macro added.

commit 3d55e464984488a932b05ce4abdd0d8a534e7005
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Tue Jun 2 20:46:05 2009 +0000

    - @next_hop.src_ip: source ip of outgoing message

commit 6ff8e1d62b7858bd1c9a56ad6e230cb510e8db64
Author: Tomas Mandys <tomas.mandys@iptel.org>
Date:   Tue Jun 2 20:05:44 2009 +0000

    - iptrtpproxy_adjust_timeout() function
    - ringing_timeout
    - iptrtpproxy_find() function

commit 94cd6af2a0ba0deb82851983f97bb52cf2e152e1
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Jun 2 11:17:54 2009 +0300

    * Commented out warning about deprecated avp name syntax.  I suggest to
      uncomment it, when sip-router itself doesn't anymore depend on integer
      named AVPs and it is truly possible to get rid of them.

commit 18ce720d5ec21b202b4c0a8af64dc13a5688cdb1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 1 22:17:22 2009 +0000

    - updated email address
    
    
    git-svn-id: https://openser.svn.sourceforge.net/svnroot/openser/trunk@5866 689a6050-402a-0410-94f2-e92a70836424

commit 60aee183d5a11e73187476acd51a8fef0c939b9e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 1 20:47:36 2009 +0300

    sl(k) - use load_tm_api()
    
    - better way to load the tm api as SR TM exports functions with
      NO_SCRIPT flag
    - reported by Juha Heinanen

commit dc40d6122850463aee6c777fa1b3e190a9dbdc14
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Jun 1 20:45:18 2009 +0300

    * modules_k/textops
    
    * Changed "using hdr type" messages from INFO level to DBG level.

commit 34b688d7ecba60268bae2a24e62dcc4a0d80c91f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 1 20:36:54 2009 +0300

    core: added km_parse_avp_spec()
    
    - K compatible avp spec parser

commit f2a2c54faf21bde2e4418b2590458c009e7e8ba9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 1 20:36:07 2009 +0300

    pv: parse K-style AVP aliases

commit d14f231501cedebd1d9c5956a98aec5f01b6413c
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jun 1 17:33:38 2009 +0200

    script callbacks: corrections
    
    - callbacks have been tested, bugs found have
    been corrected.

commit 229fd4f9d5685e1f41c790b7e6b69533d2d9e8f0
Author: Jan Janak <jan@iptel.org>
Date:   Mon Jun 1 17:30:37 2009 +0200

    docbook: Generate TOC for root-level section elements
    
    Change the configuration of docbook XSL stylesheet so that they
    generate the table of contents even for documents whose root-level
    element is <section>. This is needed for docbook documentation in
    modules that originate from SER.

commit 6a690d16f8ba2db8ae4123248589128ddfb25bf1
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jun 1 16:33:59 2009 +0200

    script callbacks: onsend_route correction
    
    - The pre-script callbacks are executed only
    if the onsend_route is defined.
    - The callbacks can access the socket info.

commit 6d3d94baa88351df76600d3c832dd0aca9ad3e2c
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jun 1 15:50:37 2009 +0200

    script callbacks: onsend route
    
    - pre- and post-script callbacks are executed also
    for onsend route

commit 61d41e8473a3e74b5e9fde5cdaa5ce9951629722
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jun 1 15:19:07 2009 +0200

    script callbacks: typo correction: s/pre/post

commit b9ed8d84b2eb5a9af8b1980cea772c0290611513
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jun 1 15:11:41 2009 +0200

    script callbacks: support for failure and branch routes
    
    - Executing pre- and post-script callbacks for failure
    routes and branch routes.

commit 8216129fc2bacc2ce82158f315313d8f17a1ca4a
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jun 1 14:38:45 2009 +0200

    script callback: modules updated to the new API

commit 0a99f1b390d57e236f989b8a496f751b9d5d26a6
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Mon Jun 1 13:13:45 2009 +0200

    script callbacks: support for all kind of route blocks
    
    - Added pre- and post-script callback support
    for all kind of route blocks.
    - req/rpl is changed to be a flag, so more callback types
    can be registered at once this way. The flag is passed to
    the callback function.

commit e2a88d5b3a00bab7994174b7f37569d85774d997
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 1 12:41:01 2009 +0200

    make: required version is now 3.81
    
    Updated required gnu make version from 3.80 to 3.81, because 3.80
    has a bug when dealing with eval inside ifeq/endif
    (see
    https://savannah.gnu.org/bugs/index.php?func=detailitem&item_id=1516)).
    It can be reverted back to 3.80, once workarounds are in place.

commit 7ac811b4fda52b4294fe740d24cf71e321fc707a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Jun 1 12:36:05 2009 +0200

    test: gcc version test scripts
    
    Test if gcc version is correctly detected with a large collection
    of gcc version strings. To be used each time the gcc version
    detection is changed.

commit bb8a054005373f8c78ca480435b7db2a7a8b3676
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat May 30 17:40:17 2009 +0300

    tm: doc - added note about tmx module
    
    - indication that some functionalities of K tm are now in tmx

commit d961145661f0ea20ae799b5cb667d25fe9791a42
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 29 22:05:03 2009 +0300

    pua: use load_tm_api() instead of find_export()/load_tm()

commit f5cff79c5d6fa7270c56b1a7ca6e2d6902999c8c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 29 21:21:08 2009 +0300

    kex: added K pv_printf() function

commit 6b9d28ee105960c790dae46119430764c1241b3d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 29 20:03:57 2009 +0300

    kex: added K dst uri related functions
    
    - setdsturi(uri)/resetdsturi()/isdsturiset()

commit ca492cdd50807cf50072d9a510156860b1139467
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri May 29 18:41:45 2009 +0200

    makefile: fix last commit
    
    - workaround make not escaping a ')'.

commit 42b8c977416847c50f2937f987bcc06d73ed4ae4
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri May 29 18:50:20 2009 +0300

    * modules_k/acc: included Makefile.radius
    
    * Included Makefile.radius if RADIUS accounting is enabled.

commit 0f72c774f7835155cd055c45530022febffeb30c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri May 29 16:52:43 2009 +0200

    makefile: gcc version detection fix
    
    The gcc version detection got confused by spaces within (),
    resulting in a compilation error on SUSE gcc 4.3.2.
    
    Reported-by: Edson 4lists at gmail dot com

commit b73d58cf3d57a539eebf85a5ef09555dcac5038e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri May 29 12:24:58 2009 +0000

    sctp: retransmission options
    
    - added new config and runtime options for controlling the
      retransmissions at the sctp protocol level:
        sctp_srto_initial - initial value of the retr. timeout used in
                            RTO calculations.
        sctp_srto_max - maximum value of the retr. timeout (RTO).
        sctp_srto_min - minimum value of the retr. timeout (RTO).
    - on startup get the OS defaults for the sctp options so that
      sercmd core.sctp_options always displays the options in use
      (even if they haven't been "manually").

commit c9c181f8b5ee63f176fad577bc89314ffd261d8e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 29 14:02:20 2009 +0300

    core: load_module - updated function docs

commit 8d503e9e3d3758ce0234b28c6d05e49f0e2d91e9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 29 13:22:44 2009 +0300

    core: mpath aliased to loadpath (for K compatibility)
    
    - accepts now loadpath="searchpath" (K stype)

commit b27dfba5097af7e497c0177dd57f476f0b089ab4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 29 13:08:05 2009 +0300

    - core: load_module - compatibility with K mod paths
    
    - preservation of SER and Kamailio module loading styles
    - loadmodule accepts "modname.so"
    
    loadpath "searchpath"
    loadmodule "modpath"
    
    - when modpath is modname or modname.so, search module at:
    	- searchpath/modname.so
    	- searchpath/modname/modname.so
    - if modpath does not start with '/', search module at:
    	- modpath
    	- searchpath/modpath

commit 08605a1c050b0dbc58d683ea8a76bbae364067d3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 29 13:02:34 2009 +0300

    core: load_module - do not free 'path'
    
    - it is stored by register_module and printed later for modparam

commit 3ccb9c819ba1c54601eafebed434e550cb39c1dc
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri May 29 11:07:20 2009 +0200

    core: destroy_rpcs fix: don't try to free unalloc. data
    
    destroy_rpcs() can be called without  init_rpcs() being called
    first (e.g. unknown command line param) => don't blindly free
    everything, check first if the arrays were allocated.

commit 5b4d228889174a738d9aa0d14ba61b5cafdd53b7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri May 29 08:42:28 2009 +0000

    sctp: sctp autoclose can now be changed at runtime
    
    sctp_autoclose can now be changed at runtime, but it will affect
    only new associations (autoclose for the  pre-existing ones will
    not be changed).
    E.g.:
    $ sercmd cfg.set_now_int sctp autoclose 120

commit b306eb10e6943e7ab9b973f18734b9c9c719fcad
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 28 15:32:00 2009 +0300

    kex: implemented shmem:* K statistics
    
    - shared memory related statistics are now implemented in kex module

commit 6343018d50f9b88024ccf64729185d6ffd49e621
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 28 15:30:54 2009 +0300

    makefile: enable K STATISTICS def if KMSTATS=1

commit a6e3cd19e5bad2b819a7584dabe5f03f7a8fad0b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 28 15:29:57 2009 +0300

    core: remove compile-time warning about K statistics
    
    - all statistics but core:* from K are now available

commit 2d278ad3bb3a70cb4ff00648254e8786c5f72015
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 28 15:29:24 2009 +0300

    uac_redirect: module compiles now with sr

commit 7718bd4d601526179fc82df683d1e2b0af0b837b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 28 15:26:36 2009 +0300

    tm: mark first branch in a fwd step
    
    - a flag is used to mark the uac_client that is first in current
      destination set

commit 9de27eba9c93eb924a8960e3abc6a787220a7267
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri May 29 09:39:30 2009 +0300

    * tls_config.c didn't compile due to extra }.

commit ecdcd5fabcfb5c6dada2ca3ee2acb1c92ba21c91
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri May 29 09:23:09 2009 +0300

    * Fixed Makefiles of Radius related modules, which did not include
      Makefile.radius.

commit d4fc2324bde2fbbdac7ffa3d484a175dbc107bcd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 28 20:56:18 2009 +0200

    tls: warning fix
    
    - tls_h_nonblocking_write() commented out for now.

commit 443c6e55197c12e868e64fd87c29b03ecce2783d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 28 20:53:56 2009 +0200

    tls: minor fix: obey USE_IPV6
    
    - if USE_IPV6 is not defined, don't try to parse/use ipv6
      addresses.
    
    Reported-by: Juha Heinanen <jh@tutpro.com>

commit ac7dd1cc97757e60d3d8e0b52767e89e2caa61be
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 28 20:38:37 2009 +0200

    core: to parser fix
    
    - parse parameters without value in To/From headers (e.g.:
      To: <sip:nils@invalid.com>;foo or
      To: <sip:nils@invalid.com>;foo= ). Parameters with an empty
      value ('=' followed by nothing) will have their value field
      pointing to en empty string (len==0, but s non-null), while
      parameters without a value (no '=') will point to a null
       string (len==0, s==0).
    - better handling of parameters at the end of the string
    
    Reported-and-tested-by: Nils Ohlmeier <nils@iptel.org>

commit 14a7d974e047ec6d45f65f7705a6c69079ac5689
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu May 28 16:20:53 2009 +0300

    * Changed hardcoded string "ser" in paths to "$(MAIN_NAME)".

commit 0e8978b8853d44f6de3fb0a2bfcf9eef2d543372
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 28 12:31:10 2009 +0300

    dialog (k): safety check of main_rt list boundaries

commit a4c2f8086781f27648b6796ed10a93b91103f6e9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 28 12:26:13 2009 +0300

    dialog (k): lookup the index of timeout route
    
    - sr can have str name for routes, therefore K mode is no longer valid

commit 7d33b8097711d2ac70e3b160dab17b93aab4b39d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu May 28 09:30:59 2009 +0300

    * User-Agent and Server headers now contain string "SIP Router".

commit 9f6ac8e61b433fc81cd923e43e819c628be6ce88
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed May 27 19:13:29 2009 +0300

    * Ported xmlrpc server blocking fix from OpenSIPS.

commit e3c45d02763b7869bb7a206a3310ee8f2441991b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue May 26 20:22:44 2009 +0300

    * Case of proto argument of allow_trusted function is now ignored.

commit 57f57a4336dd514db4e3b80e55ae2a3d2c3839d9
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue May 26 17:20:12 2009 +0000

    sctp: enable runtime changing for some of the cfg vars
    
    Migrated sctp to the cfg. framework.
    All config variables can be interrogated at runtime using the
    cfg.get rpc (e.g. $ sercmd cfg.get sctp send_ttl) and some of
    them can also be changed (send_ttl and send_retries for now).

commit 299ca7ce7443a48f5d60af98150989092ca5a3a0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue May 26 15:41:30 2009 +0000

    tcp: minor fix: TCP_EV_IDLE_CONN_CLOSED
    
    TCP_EV_IDLE_CONN_CLOSED was called also on connect and send timeout (along
    with TCP_EV_CONNECT_TIMEOUT and TCP_EV_SEND_TIMEOUT). Same for the
    corresponding statistics.
    
    Reported-and-tested-by: Libor Chocholaty <libor@iptel.org>
    Reported-and-tested-by: Jan Pewner <jpewner@iptel.org>

commit 30f92c68ca0a7ad3f8bd2754bff8474df981e7d4
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Tue May 26 16:47:51 2009 +0200

    rr:force_send_socket has been documented
    
    - force_send_socket module parameter has been documented
    - readme file has been regenerated

commit d31d39fcfdf252d91c71c0a2b2388c8c4da99737
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Tue May 26 16:36:00 2009 +0200

    rr:force_send_socket parameter is added.
    
    When force_send_socket is set to 1 (default),
    the module forces the outgoing socket if two
    Route headers are present in the request pointing to SER.

commit 8984eb5e4a1f3ba205830a89202200ee2ec8d029
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 25 18:20:11 2009 +0000

    tcp: minor fix: TCP_EV_CONNECT_RST() not always called
    
    The TCP_EV_CONNECT_RST() macro was not called, when a received RST
    was "signaled" by a poll/epoll/.. error, because the tcp
    connection state was destroyed before it was checked.
    (minor impact, only logging was affected)
    
    Reported-and-tested-by: Libor Chocholaty <libor@iptel.org>
    Reported-and-tested-by: Jan Pewner <jpewner@iptel.org>

commit bdf815954ed5c08ee7ebe7df4fe479fe65dacaad
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon May 25 10:41:13 2009 +0200

    cr: add a few missing line breaks in init logs, port from k, r5853

commit a5891c2ebd356efe5b234fdc8e06490cd785a7e0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 22 19:53:38 2009 +0300

    tmx: propagate flags to $T_req/$T_rpl

commit eb34a47fc344984cbc47bf04c4c38fc70f24bbd1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 22 19:50:23 2009 +0300

    tmx: fixes for $T_req/$T_rpl
    
    - free the buffer if parsing fails for $T_req/$T_rpl
    - credits to Ovidiu Sas

commit 241112547835aef3f95f0bfeefcbaa6f22ddd3bc
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri May 22 13:51:34 2009 +0200

    makefile: fix new libs compilation on Mac OS X
    
    Some of the new libraries (e.g. srdb*) use symbols from ser and on
    Mac OS X / Darwin some special linker options are needed for this
    to work.
    
    Reported-by: Nils Ohlmeier <nils@iptel.org>

commit 97ce716082af99f49ba68bbfc97a8d8c17fbef56
Author: Andrei <andrei@eagain.office.iptelorg.de>
Date:   Fri May 22 12:50:40 2009 +0200

    runtime cfg: fix sanity check on 64 bits
    
    The sanity check for registered cfg_group_* structures and
    cfg_defs was wrong on 64 bits systems when the structures
    contained pointers (the possible structure padding was not taken
    into account).
    Fix: if the structure contains strings (CFG_VAR_STR or
    CFG_VAR_STRING) or pointers (CFG_VAR_POINTER), round-up the
    computed size to sizeof(pointer), before performing the sanity
    check.

commit 83acd618e20e6ee82ed8ab1b2554ac3e496ca67c
Author: Nils Ohlmeier <nils@iptel.org>
Date:   Fri May 22 01:23:14 2009 +0200

    tm: allow transport=tls parameter for SIPS URIs
    
    - for backward compatibility reason allow all transport parameters
      except transport=udp for SIPS URIs (which needs to be allowed as well
      for DTLS dupport :-) )

commit e5064a814654a71dc2aa28c5fe2bd6fbba76e62c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 21 15:41:16 2009 +0000

    sctp: compatibility with older linux kernels
    
    - try hard to workaround compatibility problems between lksctp
      userspace (sctp.h) and kernel side: older kernelsi (<2.6.26)
      expect a certain size for the sctp_event_subscribe structure
      (SCTP_EVENTS sock. opt), leading to problems when using newer
      lksctp userspace (>=1.0.9) which adds an additional member to
      the structure => if the SCTP_EVENTS setsockopt() fails, try with
      different sizes (since we don't care about authentication events
      anyway).
    - failure to enable SCTP_EVENTS upgraded to critical: ser will not
      start.

commit f9437a7d00b7eb8fcfa7facec9a3c90555fc7901
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 21 15:24:57 2009 +0000

    sctp: fix partial delivery point setting on linux
    
    To disable partial delivery, the partial delivery point should be
    set to the socket receive buffer size. However on linux SO_RCVBUF
    will return twice the value (the "real" value, which is twice the
    value used when setting SO_RCVBUF) and SCTP_PARTIAL_DELIVERY_POINT
    expects value/2.

commit 71eae780d57f486e27fa946ff603da1e89fb2839
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 21 15:24:15 2009 +0000

    tcp: typo fixes when blacklisting on error
    
    - because of a '=' instead of a '==' a tcp connection that failed
      after some time was always blacklisted with BLST_ERR_CONNECT
      (even in cases when BLST_ERR_SEND should have been used).
    - same thing for blacklisting on read failure.
    
    Reported-by: Libor Chocholaty <libor@iptel.org>

commit 6f22852feb1afa87a520b97f456e14cb3c254736
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 20 21:08:56 2009 +0300

    htable: document event_route[htable:mod-init]

commit f3bda7478c760f01009180e7416cbd2c9d4eebba
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 20 19:06:43 2009 +0200

    core: parse_cseq wrong use of parse_method fix
    
    - parse_method renamed to parse_method_advance(), made static and
      changed to check if the method name ends with a non-token char.
    - added parse_method_name() for parsing a single method name with
      known length (no leading or trailing whitespace).
    - changed parse_cseq() to use parse_method_name()
      (it's previous use of parse_method() had the side effect of
      setting the method name to "").
    
    Reported-by: Henning Westerholt <henning.westerholt@1und1.de>

commit 80d8cc1c42bb8bae7dfb477bf6157dcbda33c129
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 20 16:08:50 2009 +0200

    test: commit preliminary changes for tm+cr debugging

commit 7c9393307fed500f2d24139405d829491c98885e
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Wed May 20 15:02:58 2009 +0300

    htable: documented sht_dump MI command

commit bbd176ff131f910eb0d3b2ff872166cb282f68a2
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 20 08:47:30 2009 +0000

    - fix kamctl for cr after table changes for 1.5.x, bug #2794168
      (committed to trunk, because scripts are not yet ported to sr)
    
    
    git-svn-id: https://openser.svn.sourceforge.net/svnroot/openser/trunk@5844 689a6050-402a-0410-94f2-e92a70836424

commit 6a24f519e43e4d31156e086f5c17aa00681322da
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 20 10:17:35 2009 +0200

    carrierroute: fix an error in the domain_name table example, port from k r5843

commit ba906b6272446d4622167f8d95e7ad6a13eca034
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Tue May 19 23:33:15 2009 +0300

    htable: new MI command dht_dump
    
    - list content of a hash table via MI

commit 763a138ce92010fadab58972a52bfc02572f7dc8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue May 19 20:09:16 2009 +0300

    htable: check if event route is defined and has a list of actions
    
    - adding in the to-do list for event_route
    	- check if the event is exported by core or modules

commit 31b5e3d0e7812bc008a05311c213848b55fd9387
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue May 19 19:55:12 2009 +0300

    core: support for event_route
    
    - a new type of route available in config
    - prototye: event_route[groupid:eventid]
    	- groupid should be the name of the module that triggers the event
    	- eventid some meaningful short text describing the event
    - the route is not executed from other routes, but internally when some
      events happen
    - to be used to get error_route and local_route K functionalities
    	- ex: event_route[core:request-parse-error]
    	- ex: event_route[tm:local-request]
    	- note: those are not implemented yet
    - the approach has the benefit of not needing to alter the grammer if
      new routes need to be defined
    - still to-do:
    	- module that executes the event should export contraints of what
    	  route type the functions must obey if used inside (for now
    	  REQUEST_ROUTE functions can be used)
    - first implementation is in htable module
    	- event route after all modules are initialized

commit a18160c8f5979464bd808af4c1f565b428d2e9ac
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue May 19 19:44:00 2009 +0300

    htable: execute event_route[htable:mod-init] if idefined
    
    - the module will execute the event route just after modules have been
      initialized
    - a typical use case could be the initialization of some values in hash
      tables
    - example:
    
    modparam("htable", "htable", "a=>size=4;")
    
    event_route[htable:mod-init] {
    	$sht(a=>calls-to::10.10.10.10) = 0;
    	$sht(a=>max-calls-to::10.10.10.10) = 100;
    	$sht(a=>calls-to::10.10.10.11) = 0;
    	$sht(a=>max-calls-to::10.10.10.11) = 10;
    }
    
    route {
    	if(is_method("INVITE") && !has_totag())
    	{
    		switch($rd) {
    			case "10.10.10.10":
    				lock("calls-to::10.10.10.10");
    				$sht(a=>calls-to::10.10.10.10) =
    					$sht(a=>calls-to::10.10.10.10) + 1;
    				unlock("calls-to::10.10.10.10");
    				if($sht(a=>calls-to::10.10.10.10)>$sht(a=>max-calls-to::10.10.10.10))
    				{
    					sl_send_reply("500", "To many calls to .10");
    					exit;
    				}
    			break;
    			case "10.10.10.11":
    				...
    			break;
    		}
    	}
    }

commit 8f2817965f28c05947484023c324866288d7abb1
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue May 19 18:20:59 2009 +0200

    core: PV printing, revert 103ffecf7, add the proper fix from kamailio
    
    revert not needed commit 103ffecf7, add the proper fix from kamailio for this
    problem. Now its possible to print and use more then one pseudo-variable at a time.
    The old implementation used only one static buffer, so in subsequent calls to the
    function the previous printed variable was overwritten.

commit 80d83c2ed559eecad361b9ac59f5697f5dacf286
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue May 19 17:50:21 2009 +0300

    - Fixed a race condition that caused using the same E-tag twice (credits
      to Anca Vamanu)

commit e65f0b69d2ea832d5ff0878c0d78758e88f3fe27
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Tue May 19 11:13:00 2009 +0300

    htable: added pv to count items by value matching regexp
    
    - $shtcv(ht=>regexp) - to count items in ht matching regexp

commit 21698992bf3e046e4bd127cb0f02a7be4390ecfc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue May 19 10:42:38 2009 +0300

    benchmark: scalars converted to unsigned long long
    
    - should fix issue with printing negative values

commit 3a0e8503d3abd1bb320e76b694280efd7a8d3db6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue May 19 09:24:11 2009 +0300

    presence: fixes related to f2db mode
    
    - reported by Juha Heinanen

commit 8416baf77f30258f34d2de0aa169ad5bb8841561
Author: Nils Ohlmeier <nils@iptel.org>
Date:   Tue May 19 02:18:59 2009 +0200

    core: increased verbosity of error log message
    
    - added size information to an error log message of the config
      framework

commit 61ecd1118194f5cdbf718fb6072498cabd7bbcd2
Author: Nils Ohlmeier <nils@iptel.org>
Date:   Tue May 19 02:07:13 2009 +0200

    make: excluded modules with radius dependency
    
    - excluded and moved misc_radius and peering modules to the radius
      module group to allow to build the basic set of modules without
      dependency on radius library being installed.

commit 103ffecf7e6a7bf84da10a3917e3df81b6964e4b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon May 18 19:29:30 2009 +0200

    core: bug fix in PV printing related to static buffer
    
    fix a bug in the PV printing (for k). The code allocated a static buffer, but
    failed to proper initialize it with zero. Thus in certain cases old data from
    previous PV evaluation is returned.
    is returned

commit 19f5d9800f49c47de0a83cf9bc4fbadb1643d78c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon May 18 15:41:29 2009 +0200

    test: further portings to sr and small extensions

commit 33c24da95f38c5fee6b8ad129c953a6a924064cb
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 14 16:51:40 2009 +0200

    test: port dbtext default modules load and cr on postgres

commit 44056bf12de08624ef57812b36d12c055cd7f0b9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 15 14:57:31 2009 +0300

    pv: propagation of assignment with $null

commit e6fef16a0438edbb00b88a752f0f340e2d6b9e52
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 15 14:42:21 2009 +0300

    pv: assignment with $null deletes the avp
    
    - $avp(x) = $null; - equivalent of $avp(x) = null; in K
    - $(avp(x)[*]) = $null; - equivalent of $avp(x) := null; in K

commit 3e004ccaddd1d9a671dac012021116c7bda2c733
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri May 15 10:04:50 2009 +0200

    @ruri forces parsing the URI.
    
    The entire RURI value is rearly used as it is,
    rather its subparts are important. The result of this
    patch is that for example @ruri.user and @ruri.host
    cause one parsing instead of two when the RURI has
    not been parsed yet.

commit 8321667b05da5c3f71b9835f993efcea66e88147
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Fri May 15 09:42:29 2009 +0200

    Avoid parsing the Request URI when it is not necessary.
    
    When @ruri.user was executed, the first select call set
    the value of the URI in str format regardless of whether
    or not it had already been parsed. The second function call
    took the str value, and parsed the URI to get its user part.
    
    This patch introduces a global pointer variable that can be set
    to the already parsed URI being processed. Any nested select
    function can check this pointer and access the parsed URI if
    possible.

commit 904d8378c9c3f1b8b564cd7ae11bed1cd79116c7
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri May 15 10:35:41 2009 +0300

    * Added missing "goto err;" in a mod_init() error case.

commit 2ce347b890d6bb9291e774c30a34e43818476876
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 15 10:25:58 2009 +0300

    pv: assignment to an avp with index '*'
    
    - $(avp(name)[*]) = val; - overwrites all avps with same name
    - equivalent of $avp(name) := val; in K

commit ee308afd99cfb80d8a9787f6dfe7fb0935cdb386
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 14 21:42:46 2009 +0200

    core script engine: support for rval expr. in return/drop

commit 6c51c69fc131d4fc30562b7990bc9c3458c2ec4d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 14 21:36:59 2009 +0200

    core script parser: allow expressions in return/drop
    
    Changed drop and return to allow expressions.
    E.g.: return $foo+2

commit 84d5835727f9483b7173574390ff955ba575afcf
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 14 18:10:37 2009 +0200

    core script parsing: better error & warning for while() & switch()
    
    - while() checks in-line with the if() checks (warnings on
      non-int, parse error on invalid expression).
    - switch() - throw a parse error if the switch() expression or
      body is invalid (type-wise)

commit 658010d634f520d250978ee57839bdfc5f03f6eb
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 14 16:25:59 2009 +0200

    test: port carrierroute config load test to sr, add missing tmx mod to test 13

commit a093e8ec5f454af62ff1c72356748af69153d0d4
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 14 16:24:57 2009 +0200

    test: port carrierroute DB load test to sr

commit d1fe91745ef9517629e01c2ae38a8742d8a8899f
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 14 13:04:26 2009 +0200

    test: further adaptions for sr, test 12 still not work, missing return support

commit dd3bc4d940bea59c49a5270be3dce71cda689f65
Author: Jan Janak <jan@iptel.org>
Date:   Thu May 14 01:46:24 2009 +0200

    docbook: Update the path to some modules.
    
    This document includes some module documentation, but those particular
    modules currenly live in modules_s directory.

commit b245ada5562e8fb4f7a832c9765c6ea28e980f60
Author: Jan Janak <jan@iptel.org>
Date:   Thu May 14 01:44:10 2009 +0200

    docbook: Update and add missing docbook Makefiles
    
    This change updates all the Makefiles used to process docbook documents
    so that they work with the new docbook build system. It also adds some
    missing Makefiles. Every directory containing docbook documentation
    should have a Makefile so that it can be processed independently.

commit d5ceae609414dbbc81052abdc1f4b74066d84b98
Author: Jan Janak <jan@iptel.org>
Date:   Wed May 13 22:11:18 2009 +0200

    docbook: Fixed docbook dependency generator
    
    Previous version of the XSL stylesheet that is used to generate dependencies
    for docbook documents did not work properly with docbook files included from
    other directories, it did not make dependencies relative to the top-level
    file being processed, resulting in dependency files that cannot be satisfied.
    
    This change fixes the stylesheet and makes all the depedendencies generated
    by the stylesheet relative to the directory of the top-level docbook document
    being processed.
    
    In addition to that it fixes a small typo in the main docbook Makefile.

commit b974149715b5f1a5ce9e36a5b795162965276e20
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 13 19:15:24 2009 +0200

    lcr: fix double free on error
    
    On mod_init() error the lcr module did attempt to free twice all
    the shared memory allocated vars (free_shared_memory() is called
    twice on error, once when mod_init() fails and once when the
    module destroy function is called).

commit 56131033611eefc37155cd3bd509fc5167c2b7e5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 13 19:14:57 2009 +0200

    core: destroy RPCs on exit

commit 3c03f2280ceb7d54c81eb7d3d5bbb71866012fc2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 13 13:59:53 2009 +0200

    lcr doc: re-gerenarated README

commit f7246ca139a6b3437b91ad5cf0eca8662a4888a2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 13 13:59:25 2009 +0200

    lcr doc: added RPC commands section

commit 826d4a56f2ffb95bb7d23886e3e4248eee9147fa
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 13 13:52:51 2009 +0200

    lcr: added ser RPC support
    
    - copied & adapted lcr_rpc.[ch] from the ser version of lcr.
    - register the rpc array from mod_init if RPC_SUPPORT is defined
     (defined by default in lcr_rpc.h unless lcr is compiled with
      -DNO_RPC_SUPPORT).
    - init db for all the children if RPC_SUPPORT is defined
     (needed for xmlrpc which does not run in a separate process)
    - moved some defines, structs and typedefs from lcr_mod.c to lcr_mod.h.

commit 412bfde5e10fdb14d73bcb6482a23d741db0932a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 13 13:49:51 2009 +0200

    doc: rpc doc updated
    
    - added rpc_register_array(rpc_export_array)
    - added rpc_register(rcp_export)
    - regenerated ser_rpc.txt

commit 5099fd64fb8dcf6445c77bbefda8764c7edf457f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue May 12 00:39:03 2009 +0200

    rpc: added register function and switched to hash table
    
    - rpc switched to hashtable
    - added rpc register function, that can be called from modules not
      using ser module interface (e.g. kamailio or future sip-router
      module interface).

commit 5268631faf47a858ff7bc5b7e7c7b952b28218f9
Merge: c98100c db9c2d1
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed May 13 17:05:31 2009 +0200

    Merge branch 'master' of ssh://tirpi@git.sip-router.org/sip-router
    
    * 'master' of ssh://tirpi@git.sip-router.org/sip-router:
      refine registrar tests, bug #2790184, port from kamailio r5837

commit c98100c76d257308bf6ad600a6e48604ed85efe1
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed May 13 16:59:39 2009 +0200

    @ruri.rn_user is introduced.
    
    - The select call returns the value of "rn" parameter if exists, otherwise the user name of the URI. Visual separators are removed from
    the user name if needed, and they are always removed from the "rn" parameter value.
    - Nested function call, it works with any URI.

commit db9c2d1d90db2e031692c6645aef5ac8aa916ddb
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 13 15:25:52 2009 +0200

    refine registrar tests, bug #2790184, port from kamailio r5837

commit a2ad989437a015a6e90a6f3b9bb81b4f7d20a32d
Merge: 948e083 2544686
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed May 13 15:06:07 2009 +0200

    Merge branch 'master' of ssh://tirpi@git.sip-router.org/sip-router
    
    * 'master' of ssh://tirpi@git.sip-router.org/sip-router:
      * Fixed pua module memory leak.  Credits to Anca Vamanu.
      fix k bug #2790184, crash related to uninitialized match_callid parameter

commit 948e083f7c681b9aaa8729aea019ebea3ee1ac2c
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed May 13 14:57:26 2009 +0200

    @ruri.params["foo"] checks also the original sip: URI parameters
    
    This patch increases the compatibility with non-standard implementations when the parameters are added to the end of the sip: URI
    instead of the userinfo part in case of a tel: URI embedded in a sip: URI.
    For example:
    sip:123@domain;foo=bar;user=phone
    instead of
    sip:123;foo=bar@domain;user=phone

commit 254468611e043f3bfd8fcc88155fab87ff4a5bde
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed May 13 15:39:09 2009 +0300

    * Fixed pua module memory leak.  Credits to Anca Vamanu.

commit 3f9ed10dc5a589605dfd6212ec835032cbfa5af3
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 13 13:03:30 2009 +0200

    fix k bug #2790184, crash related to uninitialized match_callid parameter
    
    - reported from Inaki, port from kamailio r5835

commit 205c28ae0de03703fedf235d27f5244a45e3b1d1
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed May 13 08:51:27 2009 +0200

    typo correction

commit b24ce7c29876f747c35b185233de70115c0a03cd
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon May 11 18:17:17 2009 +0300

    * Moved modules_k/utils to modules (it does not exist in s and contains
      functions that don't exist in s).

commit 48a578874677e62af9fa0039decc738f14ac9ae7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 11 17:12:16 2009 +0200

    doc: rpc struct_scan and struct_add example fixes

commit 68d84c0c2584404dca59882f047d70be1b131901
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 11 16:51:42 2009 +0200

    doc: rpc txt version added
    
    ser_rpc.txt generated from ser_rpc.xml added.

commit 2f5b7adc2a83c5903e95e64019cbacf82555a9de
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 11 16:51:05 2009 +0200

    doc: xmlrpc README added

commit a23b076fff03adc14dfb366b2827d304c43fb623
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 11 16:50:15 2009 +0200

    doc: xmlrpc functions and params added

commit e9ad62bff43409a249649892e182e8b34c5f2700
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 11 15:59:54 2009 +0200

    doc: rpc docs split into rpc api and xmlrpc modules docs
    
    - doc/rpc/ser_rpc.xml split into ser_rpc.xml (that contains now
      only generic RPC documentation) and
      modules_s/xmlrpc/doc/xmlrpc.xml (that contains xmlrpc specific
      stuff).
    - slight updates and fixes

commit ae4856f3db1f4a82a23eaa9c9f305d8f6924bb48
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon May 11 14:15:12 2009 +0300

    * Fixed bug in computing expires value for subscription dialogs.
      Credits to Anca Vamanu.

commit 83d732f025fb4db086449e095b1c91e8fefaa754
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Sun May 10 10:56:45 2009 +0200

    doc: rpc makefile migrated to the new doc make system

commit 4fdd0730d17b5770995817a50750897f1e0ab108
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat May 9 19:14:18 2009 +0300

    * Moved lcr module from modules_k to modules and removed it from modules_s.

commit d7d561c3c485699d34143b285801b73a98419051
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon May 11 11:29:56 2009 +0300

    mi_xmlrpc: use PROC_NOCHLDINIT to fork process instead of 100
    
    - do not run modules' child init, MI commands register own proc init
      funtion

commit d8c11d48aa6f3e36b2ae7b5b8f802961a8cc08d3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon May 11 11:28:39 2009 +0300

    mi_datagram: use PROC_NOCHLDINIT to fork process instead of 100
    
    - do not run modules' child init, MI commands register own proc init
      funtion

commit a0da9a80aa1aa99c03c2f8e910f5403d1f65d8d0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon May 11 11:26:43 2009 +0300

    mi_fifo: fork process using PROC_NOCHLDINIT instead of 100
    
    - do not call modules' child init, MI commands register own proc init
      function

commit 32076aefe5c4e58c75d44ea97bfd0a70f92f5573
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun May 10 12:40:06 2009 +0300

    Revert "* Moved lcr module from modules_k to modules and removed it from modules_s."
    
    This reverts commit a3f16850cd2a897710cb0a56174e9f64dcc77653.

commit bcc002cb9cb1fef569357695ee073d7f531af3c9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun May 10 11:37:40 2009 +0300

    * Added note on how to generate README of a module.

commit a3f16850cd2a897710cb0a56174e9f64dcc77653
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat May 9 19:14:18 2009 +0300

    * Moved lcr module from modules_k to modules and removed it from modules_s.

commit 4c8c5a7c091ea7213819d24b762affef69f4a0f0
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat May 9 19:03:52 2009 +0300

    * Added support for adding extra headers into MESSAGEs sent out from
      silo by m_dump().

commit ac41ee015d26335986596eec1c8b28d8719f776a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 8 18:31:35 2009 +0200

    rtimer: update to use the new sr core routes list

commit a8e660b62bf6b6ca10d63078d6574ebdffc61fe2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 8 08:15:12 2009 +0200

    statistics: use fixup_pvar_null()
    
    - fixup_pvar() replaced by fixup_pvar_null()

commit d3c7fc1ef2d1e6b3078755c84b0c6f3ca302141d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 8 08:14:47 2009 +0200

    utils: use fixup_pvar_null()
    
    - fixup_pvar() replaced by fixup_pvar_null()

commit efa24adc02e16933c0d0b2c16d68a631032add00
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 8 08:13:47 2009 +0200

    dialog: use fixup_pvar_null()
    
    - fixup_pvar() replaced by fixup_pvar_null()

commit e6949b5adb486ea2f14ab44c2af4c1ea9f4d127b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 8 08:12:18 2009 +0200

    core: removed fixup_pvar(param) prototype
    
    - no longer implemented as standalone function
    - use fixup_pvar_null(param, 1) instead

commit b477f413dd740862de642790f6b3d80acc61dae0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 7 22:23:12 2009 +0200

    sercmd: doc added (README)

commit 61721cae91354f0a635a8ce369729b28118b265d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu May 7 20:29:07 2009 +0300

    * Forward ported DB_CAP_FETCH usage from k 1.5.

commit ed28ad4af408aa4a47e7b6b41b10fe6e093d7911
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 7 18:48:34 2009 +0200

    ctl(s): documentation added

commit 030e80b538e6ec3f29a73fcc5660af86cb385926
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 7 18:09:11 2009 +0200

    test: port r5833 from kamailio

commit 7c79fc7a29d4a9509f69f7aca55a992c6b4cbff7
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 7 15:26:38 2009 +0200

    dialog(k): refine change ffcf29e66d, we need to take care only of PROC_MAIN

commit ffcf29e66d0e78fed90d25fb70425c8ad002d6c0
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu May 7 15:09:09 2009 +0200

    dialog(k): port db setup to different child_init behaviour on sr
    
    - port db setup to different child_init behaviour on sr, here child_init
      is called two times for PROC_MAIN
    - don't open a DB connection in PROC_MAIN in DB_MODE_DELAYED
    - don't close the connection during mod_destroy if nothing was opened

commit 271bfb0e8f48fbc171f4ff04dbf092ace8f980c3
Merge: 8b52126 54dc330
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 7 14:55:01 2009 +0200

    Merge commit 'origin/ser_core_cvs'
    
    * commit 'origin/ser_core_cvs':
      core: log L_CRIT fix
      sctp: internal macro/hooks for sctp events
      sctp: internal macro-hooks for stats
    
    Conflicts:
    	dprint.c
    	dprint.h

commit 54dc33029c49da6f0ab28545c80a5aa99483ce42
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu May 7 11:50:41 2009 +0000

    core: log L_CRIT fix
    
    - don't add a "BUG" prefix to L_CRIT log messages (there are many
      L_CRIT messages that are not bugs, e.g. parse errors).
    - added a new level L_BUG, special for BUG use (automatically adds
      a "BUG" prefix).

commit 8b5212639540cb5cc85e648fb2e59d43714fecdb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 6 20:53:56 2009 +0200

    core: PUBLISH and REFER recognized by first line parser
    
    - still duplicity of getting the method - parse_metod() and macro by
      parsing first line

commit aeb3faa191f3cad69b1f4179889279dc19aa4bd6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 6 20:52:32 2009 +0200

    presence: fixed bug in taking the parsed event structure

commit 582d58306bbd4ce00a24f37099fff14aaaef87f0
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 6 18:55:33 2009 +0200

    test: port all registrar based tests (mysql, postgres, unixodbc) to sr

commit 1d166493996698771a54daa1e7e788c2ee3d2749
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 6 18:52:36 2009 +0200

    test: small fix in module check, return success when found in the first dir

commit f2379c23397cda41a571587a8e2220627cbbadfe
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 6 18:35:38 2009 +0200

    test: small fixes for test 2, port test 1 and 4

commit f84c93b38220f1480bd16fa30d1e3ffbb39d0c5d
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 6 18:32:46 2009 +0200

    core script parsing: minor fix: " at the end of file
    
    Having a closing quote at the end of file generated a parse error.
    
    Reported-by: Henning Westerholt <henning.westerholt@1und1.de>

commit a9f51d5565f5bd13f2f88bebb6c4874703e0324f
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 6 18:26:49 2009 +0200

    test: port test 2 to sr, comment non-working modules out

commit 2e561ecaed74fb53e1ff3c5e671348b2f516cbcf
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 6 18:16:28 2009 +0200

    dispatcher(k): add 'struct tmb' to fix module loading after change 441ab3c9f2ca

commit 9227fc8228064b789eaf66e939b8009333be1be0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 6 17:57:25 2009 +0200

    doc: config migration
    
    Added a config migration guide for ser 2.1 to sip-router.
    The kamailio part is empty for now.

commit ec8e49e8b6b8cc8d5fe06bf2797c36f9671f7c9e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 6 17:50:53 2009 +0200

    cfg: example  configs migrated to sip-router
    
    Ported ser example configs to sip-router:
    - updated module path (now using loadpath)
    - changed mysql module name to db_mysql
    - replaced max_len in msg:len comparisons with 4096
    - updated avp and selects non-empty checks:
      if($v)  -> if ($v!="")
      if(!$v) -> if (strempty($v)) or if ($v=="")

commit a88b7d6f18d98ed877b6295dbc9526155dbd688e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 6 17:48:05 2009 +0200

    make: fix the module path in installed cfg
    
    - fix: the module path is updated in the installed cfg and man
      pages (broken when the multiple modules were added).

commit b269c881615482456499488484ef2b380be25423
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed May 6 16:45:04 2009 +0200

    core script parsing: various small fixes
    
    - fix: allow "default" in a config var id (e.g. session_timer.default).
      It stopped working after default became a keyword (switch()).
    - fix: allow negative number in selects (e.g. @eval.pop[-1])
    - fix: allow negative number in function parameters
    - fix setavpflag, resetavpflag, isavpflag and "simple" avp names

commit 21ac862fd73687d469f3e0ef9e535c521cfc3e75
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 6 17:12:17 2009 +0200

    test: adaption of kamailio specific scripts to sr, more generalization

commit 5dbe4f22ddc81c67cebe89c072cbffc0daf3aecd
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 6 15:04:34 2009 +0200

    port from k r5751, fscanf can fail, fix warning related to recent glibc versions

commit 778362943cce3c1d27c8e1afac25bfceeb4aa0fd
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed May 6 14:31:33 2009 +0200

    refine 15e2e89e5d1e7f9dc6265c270153088596159ee5, remove instead comment out

commit 47945782e1459935b1f327abb92fbc1a3ffcd86f
Author: Jan Janak <jan@iptel.org>
Date:   Wed May 6 14:47:14 2009 +0200

    core: Consolidate append_str macro usage
    
    The definition of append_str macro was scattered across the source tree,
    there were multiple definition of the macro, some of them with different
    parameters.
    
    This patch brings the definition of append_str macro into ut.h header
    file and removes all other definitions from core and modules.
    
    We chose the version with three parameters where the pointer and the
    length of the source string are passed separately to the macro. This is
    more flexible than passing both of them within one parameter as str
    structure.
    
    All references to append_mem_block have been removed because the same
    operation can now be achieved with append_str. In addition to that we
    updated parameters passed to append_str where needed, converting one
    str parameter to <pointer,len> pair of parameters.
    
    Some modules had yet another version of append_str defined, there we
    renamed the macro to some other name to make sure that the local
    definition does not conflict with the definition on ut.h

commit dd78db27471fb2cdd266ffd5e70c6d71b321467b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 6 14:09:47 2009 +0200

    presence_xml: disable bla support
    
    - needs review with latest spec updates
    - potential issues with merging need to be reviewed as well

commit aa639c4d02faeb945776d7cdf686d5ee365b0cf3
Merge: 00f54c0 64d5ac2
Author: Jan Janak <jan@iptel.org>
Date:   Wed May 6 12:08:08 2009 +0200

    Merge unit tests from kamailio trunk.
    
    * trunk: (126 commits)
      - extend test with one non-digit URI (bug #2694633)
      - fix isql function, remove column delimiter
      - add missing check for kamailio binary on start
      - fix NULL behaviour for db_unixodbc in module
      - add functionality for runtime message forwarding, this is useful
      - remove a few modules that need (now) external libraries
      - change functionality in cr_route, cr_prime_route to not store information
      - improve tests a bit for flags and mask matching
      - fix test description
      - move encode_contact, decode_contact and decode_contact_header function
      - add a new test for carrierroute, non-numerical matching mode
      - fix tests after removal of the uri module and the moving of the $shv vars
      - fix tests, add pv loadmodule..
      - remove options module from test after removal in the tree
      - add missing module and compile checks on start
      - add new utils module to test
      - finish renaming, fix module name in test
      - add new module 'utils', to hold various SIP message related functionality
      - extend registrar test for db_mysql and db_postgres: test also for contact
      - finish refactoring of carrierroute module
      ...

commit 00f54c06f2f6d4e4c8a5a004eb07367c93b82329
Author: Jan Janak <jan@iptel.org>
Date:   Wed May 6 11:17:17 2009 +0200

    Serial forking functions.
    
    This patch adds two new functions to tm module, t_load_contacts and
    t_next_contacts which can be used to implement serial forking.
    
    There are also two new parameters, fr_inv_timer_next and contacts_avp.
    Parameter fr_inv_timer_next is similar to fr_inv_timer, the value
    of this parameter is used for subsequent branches during serial forking.
    
    The value of contacts_avp is the identifier of the AVP which contains
    the list of contacts to be used for serial forking.
    
    The serial forking functions originate from Kamailio where they were
    implemented by Juha Heinanen.

commit 14839e8ff8da792974058779dc0cf4daf4181ac5
Author: Jan Janak <jan@iptel.org>
Date:   Wed May 6 11:10:48 2009 +0200

    Splitting fix_sock_str into socket2str and fix_sock_str
    
    This patch splits fix_sock_str into two function, socket2str and
    fix_sock_str. The function socket2str is exported and can be used
    to print the socket into a pre-allocated memory buffer. Function
    fix_sock_str allocates the memory buffer and calls socket2str
    internally.
    
    The primary consumer of this change is the serial forking code in
    tm module.
    
    This patch also defines a new macro called MAX_SOCKET_STR which
    evaluates to the maximum size of textual representation of any
    socket.

commit 420a756d6bee00d2ad039f68e9689b42eee9240f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue May 5 21:04:02 2009 +0200

    core: better config parsing error messages
    
    - on expression parsing error try to keep the number of parsing
      error messages low
    - better if parse error reporting

commit e41bc0575e8a4c22dfd7fbd2b6ae923f3c634a85
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue May 5 19:43:18 2009 +0200

    core: type casts support in the script
    
    Support for casts added: (int) and (str).
    E.g.: (int)$v ; (str)$v+"test".

commit 7f2853ad287f90736dba35d6bc370922a77fbac7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue May 5 19:19:54 2009 +0200

    script parsing: if (non-int) not any longer an error
    
    An if expression that does not evaluate to int is not any longer
    considered a parse error. It will generate a warning, but sr will
    start.
    This allows backward compatible if (@select) or if($avp).

commit dae8ea836d838279dcb5be69c0e1eec7e9409129
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue May 5 19:17:12 2009 +0200

    core expr eval: string == fix
    
    - fixed typo which made == the same as != for strings
    - minor optimizations debugging messages fixes

commit 9c3327d5742b1f8280b159c7ea228b95bb2e8f35
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue May 5 16:15:01 2009 +0200

    core expr:  optimizations fixes for $v op 0|1 -> $v
    
    - fix missing cast for the  $v <op> c -> $v optimizations
      (e.g. $v - 0 -> $v, 1 * $v -> $v): instead of replacing
      $v <op> c with $v use (type_of(<op>)) $v.  $v without the cast
      to the type produced by the operator is used now only when
      type_of($v)==type_of(<op>).
      E.g.: 1 * $v -> (int)$v
            1 * ($v/$w) -> $v/$w  ($v/$w produces always an int, so no
                                   need for the cast)
      Bug example:  1*"2"+3 was optimized to "2"+3 == "23" instead of
      (int)"2"+3 == 5.
    
    - better debugging messages

commit 0b3019f699dfb999be04572d4c35a613b6032435
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue May 5 13:51:40 2009 +0200

    core expr. eval: support for int & str casts
    
    - new internal operators for force-casting to int or str
    - fix int conversion failure for v1 str_concat v2

commit c1111cb2ca9f5782c06158c8d57884ef65dfef38
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 4 22:23:59 2009 +0200

    core expr. eval: fix fixup/optimization bug
    
    In some cases some ref'ed rvals were replaced in-place, messing up
    the refcnt.

commit 087be8daf0bc279450732973618cec7fa719efde
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 4 22:02:49 2009 +0200

    core expr. eval: added bug catcher
    
    Added code for catching an easy to overlook bug (replacing in-line
    a referenced rval during optimizing).

commit 8637f3408456dcc4e2df2cf6b2530cc7f1588042
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 4 21:58:40 2009 +0200

    core script engine: if switched to rval_expr
    
    - switched if to use directly rval_expr
    - warn on startup if "if" expression is constant
    - fail to start if "if" expression evaluates to non-int

commit bd5099b65baa2e57afa299e8fc6a5f758763d650
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 4 21:09:23 2009 +0200

    core expr. eval: support for =~
    
    The match regular expression operator (=~) is now supported in
    rval_exprs.

commit c5e6955692fb6f7803fa7550a92a7e727cabf31f
Merge: 80d27be 36d4ed7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 4 23:38:12 2009 +0200

    Merge commit 'origin/andrei/type_conversion'
    
    * commit 'origin/andrei/type_conversion':
      script parsing: fix bug in expression error checking
      core expr eval: various fixes
      news: update (new operators, expr. eval behaviour a.s.o.)
      core: new script operators: eq, ne, ieq, ine
      core expr eval: fix assoc., commut and 0 adding for +, ==
      core expr eval: minor ==/!= optimization
      core expr eval: internal == & != int and str only versions
      core expr eval: special handling for undef cmp expr
      core eval expr: cache undefined results too
      core expr eval:  str automatic conversion to int
      core expr eval: undef conversion to int and str
      core expr eval: defined @select

commit 80d27be832ff175e31257c612f5b51ce643d4437
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Sun May 3 23:25:05 2009 +0200

    a bunch of small refactorings in the dialog module
    
    - move populate_leg_info declaration to the proper header file
     - unify mostly identical dlg_seq_up_onreply, dlg_seq_down_onreply functions
     - make unref_new_dialog static, this is not used outside the implementation file
     - compact variable declarations in dlg_onroute and a few other functions
     - the get_dlg_tl_payload macro is only used once, integrate it into the code

commit f7aa0a8984868a4e5f48d034cdb2b275cc374389
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Sun May 3 22:54:24 2009 +0200

    add complete doxygen documentation for dlg_handlers.{c,h} in dialog module

commit 020559fd87eca6605371be4e9d21778b6285f6f6
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Sun May 3 20:07:53 2009 +0200

    small refactoring to decrease exported symbols signature
    
    - move unlink_unsafe_dlg function to header file, make them static
    - move unref_dlg_unsafe, ref_dlg_unsafe macros to implementation file

commit f666a4e53f79843f82b867c5dd4ce64e100feb82
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Sun May 3 20:02:10 2009 +0200

    complete doxygen documentation for dlg_hash header and implementation

commit 26fa3cf1464b0cddb67be64cd30918b9c2965c13
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Sun May 3 19:23:22 2009 +0200

    spelling fix in documentation

commit be8fd54a6b59210a7d426f64530ebf5902a61a68
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 23:09:50 2009 +0200

    add more doxygen documentation for dialog module

commit 15e2e89e5d1e7f9dc6265c270153088596159ee5
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 20:32:26 2009 +0200

    don't include and link with database API, this is not needed

commit 247a71839a3112aac26ce0ac27e0507664bfe810
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 19:58:20 2009 +0200

    spelling fixes in documentation

commit a8539942044b15eef743b28380fa25aefaec0721
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 18:58:11 2009 +0200

    generate README for the cfg_rpc module

commit a13da049257f5c6b9a5da52ac1a55f25e6dadfe5
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 18:55:41 2009 +0200

    generate README for blst module

commit c90d02e608c048a3bbcf263daadb024c829bded2
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 18:54:26 2009 +0200

    generate README for bdb module

commit 69f6036c2ee649a4ce2e85234e1ff027dec47c9c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 18:37:04 2009 +0200

    generate and add README for auth_identity module

commit 45974eba796c4cf5d3b0888ce51634fe4109ed92
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 18:20:23 2009 +0200

    small spelling fix in docs and comment

commit 4f6c9ff9acb7c0564c380940d91f42241b5682b0
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 18:16:10 2009 +0200

    documentation fix, acc_syslog contains no parameter 'secret'

commit f8a33b329085731db4a00aead676f044cd27b939
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon May 4 10:41:07 2009 +0200

    core expr eval: fix script functions failure check
    
    script/module functions integer/boolean evaluation did not respect
    the module return convention (>0 success, <0 failure).
    
    Reported-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit 87d5961121ade01714ac9717caa9691f6b6a9e9c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 3 15:39:05 2009 +0200

    tmx: doc updated

commit a6c25ed122ea00542af390a7b9222700c7846a14
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 3 15:19:25 2009 +0200

    tmx: added t_cancel_branches()

commit d8d0b92dfed5e41b8952325da1509d91bfa611cf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 3 15:18:21 2009 +0200

    tm: which cancel exported via TM API

commit 941c2ca3e031a1ad100ed92ce4e7447c0dfe3ea1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 3 14:47:21 2009 +0200

    pv: doc updated

commit 4fd57899f54333e729c41fae9187142bf25a7fac
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 3 13:42:56 2009 +0200

    pv: avp_aliases parameter
    
    - avp_aliases parameter from K core
    - pv module is the only one exporting $avp(...) PV, so without it this
      parameter makes no sense

commit bb4cd6b04928615d02ec9b1c6f8c64a157e1fe3d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 3 13:04:49 2009 +0200

    core: auto_aliases to control rev DNS aliases
    
    - parameter takes boolean value
    - if set, rev dns results are added to aliases list
    - default is set

commit 5ace95bfa7746c6b78627adc44bec87beec91c61
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 1 23:23:51 2009 +0200

    presence_xml: link to kmi lib

commit 436bfbf4c1481a9a52ded48eddc5ab696ae079f6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 1 15:01:26 2009 +0000

    - 2 fixes in commented examples
    
    
    git-svn-id: https://openser.svn.sourceforge.net/svnroot/openser/trunk@5830 689a6050-402a-0410-94f2-e92a70836424

commit 06a6a733216fe865aed03840d787c3098ad67278
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 1 15:14:37 2009 +0200

    tmx: new module to collect K TM extensions
    
    - includes:
    	- pseudo-variables
    	- MI commands
    	- statistics (only register them now, no update)

commit 61ad14ac452293d45944f6de7dbccb7a9835d71e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 1 14:58:49 2009 +0200

    tm: unref_cell(t) added to tm api
    
    - wrapper to UNREF(T) define
    - used by K extensions (tmx module)

commit 1828803fc36c1f4dc6f6de4e14362b89ad360812
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 1 14:52:58 2009 +0200

    registrar: declare usrloc_api_t variable

commit c40ade61c41e33db7e7038a255a9561b60cd1693
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 1 14:01:26 2009 +0200

    tm: define tm_ctx_get() to NULL if no WITH_TM_CTX

commit 41ee132aa1f2a900e281e2458b76fcaf781a79da
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 1 13:55:06 2009 +0200

    tm: free dst_uri.s in fake_req if failure
    
    - free fake_req->dst_uri.s if no more pkg for fake_req->new_uri.s

commit ded63f919ba33f6ddc6c4170166e247bd52cf96a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 1 13:40:33 2009 +0200

    tm: added tm_ctx to collect K extension requirements
    
    - it holds now branch index value used by $T_branch_index
    - added function in TM API to access tm_ctx

commit 9874877e47e7aec1c1a77696acb71cb94ad94228
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 1 12:35:01 2009 +0200

    tm: exported more functions via TM API
    
    - t_lookup_callid, generate_callid, generate_fromtag, t_lookup_request,
      t_check are now available via API

commit e11d7294437cee6544fb04c2394a6f31be09c4b2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 30 16:39:10 2009 +0000

    sctp: internal macro/hooks for sctp events
    
    Added macros for sctp events (for now empty, or defined to simple
     example DBG()):
    
    SCTP_EV_ASSOC_CHANGE
    SCTP_EV_PEER_ADDR_CHANGE
    SCTP_EV_REMOTE_ERROR
    SCTP_EV_SEND_FAILED
    SCTP_EV_SHUTDOWN_EVENT
    SCTP_EV_SENDER_DRY_EVENT

commit 7a66235b9f972d735575ebb839f87f2eaa1b0c61
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 30 16:38:54 2009 +0000

    sctp: internal macro-hooks for stats
    
    Added macros for sctp statistics.  (for now empty, keeping
    more statistics will only involve redefining them):
    
    SCTP_STATS_ESTABLISHED() - new association is opened successfully
    SCTP_STATS_CONNECT_FAILED() - attempt to open new assoc. failed
    SCTP_STATS_LOCAL_REJECT() - local reject of a "connect" attempt
                                (unused for now)
    SCTP_STATS_REMOTE_SHUTDOWN()
    SCTP_STATS_COMM_LOST() - error on open association
    SCTP_STATS_SENDQ_FULL() - send failed due to full buffers (kernel)
    SCTP_STATS_SEND_FAILED() - send failed for some other reason
    SCTP_STATS_SEND_FORCE_RETRY() - send failed and retried
                                    (sctp_send_retries!=0)

commit 443ec921ff1a6a6a42bb0267d24c8267773afd24
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 30 11:15:05 2009 +0200

    fix lib/binrpc compilation (include path, s/modules/modules_s/)

commit cb247f058a2c5617edcecb57d111431716dfb4c7
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:35:39 2009 +0200

    sms(s): sms_report_type & tmb declared in multiple places

commit abf23e8a75880e0f6f024abfb606e7809c0d54fe
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:34:57 2009 +0200

    rr(s): missing extern for avp_flag_dialog

commit bc0a1dab6aacd35e74bef1f6818b240e09289307
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:34:20 2009 +0200

    mangler(s): missing extern

commit a3088112a2f689d240be1506a5d6a3499e8703b5
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:33:19 2009 +0200

    sms(k): sms_report_type & tmb declared in multiple places

commit 611b511e251a85cf837300df77e323f3a1eff155
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:31:57 2009 +0200

    registrar(k): missing extern for ul

commit 67b6c6fffaf16d5843be23b3372ecb8aa7a7037e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:31:15 2009 +0200

    pua_usrloc(k): missing extern for pua_send_publish & pua_send_subscribe

commit bf06ff14f4c1a2718312de33a132f54c9eb36eda
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:30:32 2009 +0200

    pua_dialoginfo(k): missing extern for pua_send_publish

commit 441ab3c9f2caf393474c1460153ec27d9177e387
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:29:48 2009 +0200

    dispatcher(k): missing extern for tmb

commit a80b7ab7c8c2baab77db2568b76e3d680c691fe4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:27:58 2009 +0200

    auth_diameter(k): missing extern for sockfd & use_domain

commit ea982a3a4dad156143c35e9d1c6f32d3f5f8de9c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:25:56 2009 +0200

    tm: missing extern for rpc_cancel_doc[]

commit efbb8d1d0fc0f9a560d085a133699a9b23bd075f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 17:24:08 2009 +0200

    tm:  _tm_table should be extern
    
    - _tm_table was declared in h_table.h without "extern", causing a
      _tm_table symbol to be created in each module including
      h_table.h.
    
    Reported-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit 773f8568be5594674a982a981c4bc4b7a6d4eef1
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Wed Apr 29 15:55:13 2009 +0200

    RURI manipulating functions have been fixed to preserve
    tel: URI parameters
    
    - parameters of a tel: URI embedded in a sip URI had been lost
    when SET_USER_T action was called for instance.
    ("sip:123;param=val@foo.com;user=phone"
    became
    "sip:456@foo.com;user=phone"
    after rewriting the user name.)
    - sip_params variable is added to sip_uri structure to
    store the original sip: URI parameters.

commit 36d4ed7ce18f025bc69fb24e1820bcb8ec56984f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 14:02:16 2009 +0200

    script parsing: fix bug in expression error checking
    
    - fixed core dump when attempting to continuing script checking
      after an expression parse error.

commit e9249a149a3dca35c8f7f0b3c1f72343cd1a9c30
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 29 13:55:01 2009 +0200

    core expr eval: various fixes
    
    - fix pvars type evaluated to STRING almost always (when they had
      PV_VAL_STR).
    - fix undefined not properly propagated for avps (typo) which caused
      some comparsion to behave in unexpected way (e.g.
      $undef_avp != $undef_avp was true).
    - fix <undef>+something (used to produce an error, now is
      equivalent to "" + something).

commit cd9460b0d8023c43348bce58fe38ef3ce9a686cc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 20:40:26 2009 +0200

    tm: handling of branch flags
    
    - save/restore branch upon execution of tm specific routes

commit 764bac17b074714c651d71654c6e7276a58ca5e4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 20:38:09 2009 +0200

    core: wrapper to return branch iterator position

commit bb4d414574c35b1ba2c0497e19313b4cd000f775
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 19:54:03 2009 +0200

    news: update (new operators, expr. eval behaviour a.s.o.)

commit 298512a2b79ff3bd9405a63c5d05030b5ec21de3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 19:48:11 2009 +0200

    core: new script operators: eq, ne, ieq, ine
    
    Added operators for: - string == and string != : eq, ne
                         - integer == and integer!= : ieq, ine
    They are almost equivalent to == or !=, but they force the
    conversion of their operands (eq to string and ieq to int),
    allowing among other things better type checking on startup
    and more optimizations.
    Non equiv. examples: 0 == "" (true) is not equivalent to 0 eq ""
    (false: it evaluates to "0" eq ""). "a" ieq "b" (true: (int)"a" is
    0 and (int)"b" is 0) is not equivalent to "a" == "b" (false).
    
    Note: the names are not final, they are mostly for testing.
    Future releases might replace ==/!= with ieq/ine and use eq/ne for
    strings.

commit 5b04225bf842ce2354ce17cd50ca3c808617bbdb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 19:34:29 2009 +0200

    kex: documentation for km_append_branch()

commit 8cf72b2de1ca86cafe7203433ff411e837d26dfa
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 19:23:23 2009 +0200

    kex: added km_append_branch
    
    - K compatible append_branch() function

commit fd4baa2b0cc91d215f9460ea91d369fb0febc344
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 19:22:41 2009 +0200

    registrar: update for getblagsval

commit 52d3321b989c95c4f9f10693e1f77a5d18a58f18
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 19:22:23 2009 +0200

    pv: update for getbflagsval

commit d02a166db83db71b587cd1252db0b4d4954e8c93
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 19:21:04 2009 +0200

    core: renamed getbflsgs to getblagsval
    
    - match the template of counterpart setblagsval
    - swapped the parameters

commit 3c8fc182ae386713f15e6a0362924e72b257c31e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 18:34:03 2009 +0200

    core expr eval: fix assoc., commut and 0 adding for +, ==
    
    - fix associativity for the generic plus: because of the non-fixed
      argument types (can work with strings integers or both in the
      same type), RVE_PLUS_OP is associative _only_ if the operand
      types match.
      Non-assoc. example: "a" + 1 + "2"  (can be "a12" or "a3").
      Instead of adding extra checks for the same type, rely on the
      optimizer having already replaced RVE_PLUS_OP with RVE_IPLUS_OP
      or RVE_CONCAT_OP => RVE_PLUS_OP will be used only when the
      operands types are mixed or cannot be determined (e.g. AVP), or
      when script optimizations are turned off (-O0).
    - fix commutativity for the generic plus. Similar to the above.
      Non-commut. example: 1 + "2" == 3, but  "2" + 1 == "21".
    - fix commutativity for the generic == and !=.
      Non. commut. example:  0 == "" , but  "" != 0.
      Similar fix as above, relying on the optimizer and the type specific
      operators: RVE_IEQ_OP, RVE_IDIFF_OP, RVE_STREQ_OP and
      RVE_STRDIFF_OP.
    - fix $v + 0 / 0 + $v -> $v optimizations. Because of the generic
      plus and recent changes that allow int + str, even if the result
      is an int (left side operant is integer), 0 + $v can be
      different from $v. E.g.: 0+"1" == 1, which is different from
      "1".

commit 04ff69818798e2330587c4109a69d8974908b158
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 17:49:54 2009 +0200

    core expr eval: minor ==/!= optimization
    
    - replace the generic RVE_EQ_OP/RVE_DIFF_OP with the type specific
      version (RVE_IEQ_OP/RVE_STREQ_OP...), if the type is known.

commit 783ad9b3e0ebdee05a8e1f710c0e14da777c9ada
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 17:39:35 2009 +0200

    core expr eval: internal == & != int and str only versions
    
    - added RVE_IEQ_OP and RVE_IDIFF_OP - internal integer only
      (force argument conversion to int)  operators
    - added RVE_STREQ and RVE_STRDIFF_OP - internal string only
      (force argument conversion to str) operators

commit 313f52655841f1abf4c0db585699cd31e9494a3f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 16:35:28 2009 +0200

    kex: script and branch flags operations
    
    - K script and branch flags operations included in kex module
    - the parameters must be now enclosed in quotes
    - the parameters can be now integer value or Pseudo-Variable with
      integer value
    - the optional 'branch' parameter for branch flags parameters is now the
      second, for a more logical parameter mapping with the version without
      this parameter

commit f9f5c079fb86378d9a665e7bfb7a902ac28fe398
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 16:34:21 2009 +0200

    kex: doxumentation for script and branch flags operations

commit ab736da560c93b707653d342f7932f8b677e08fc
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 16:07:23 2009 +0200

    core expr eval: special handling for undef cmp expr
    
    undef == expression is evaluated in the following way:
     - default:
               (type_of(expression))(undef) == expression.
       If the expression is undef too, the whole comparison it's
       evaluated to true (internally it's evaluated to
       (str) undef == (str) undef =>    "" == "" => true).
       E.g.:  undef == 0   -> (int)undef == 0   -> 0 == 0  -> true
              undef == "a" -> (str)undef == "a" -> ""=="a" -> false
              undef == undef -> true
     - if UNDEF_EQ_UNDEF_TRUE is defined, the == comparison is always
       false except for undef == undef which is true.
       E.g.:  undef == 0 -> false ; undef == "" false
     - if UNDEF_EQ_ALWAY_FALSE is defined, the result is always false
    
    != is always the reverse of ==.
    
    Note: this covers only the case when undef is on the _left_ side
     (the case in which we do not know what to convert undef to). If
     the undef is on the right side, it will work like for any other
     comparison: expr == undef => expr == (type_of(expr)) undef.

commit a554337202cd05cd4b2c69177f9c42c9aca7ff9b
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 15:08:35 2009 +0200

    core eval expr: cache undefined results too
    
    - internally cache undefined results of avp and pvar evaluations
     (using RV_NONE for the val_type), between calls.
    - fix wrong cache check for defined(pvar) (not used yet)

commit fab99dce51ef9674c1bb4c50c0c1fefd47cc2d7e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 28 14:54:58 2009 +0200

    pv: fix of tobody.params transformation
    
    - reported by Alex Hermann

commit 54b54c1fcf1f5f6967859890cf345a70cc0aab7f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 12:00:04 2009 +0200

    core expr eval:  str automatic conversion to int
    
    (int)"" = 0
    (int)"<number>" = <number>  (e.g. (int)"123" = 123)
    (int)"<non-numeric>" = 0    (e.g. (int)"abc" = 0)

commit e9cb7f9402fc044eb877d2fea2dc59bac2c290a2
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 10:50:56 2009 +0200

    core expr eval: undef conversion to int and str
    
    (int)(undef)=0
    (str)(undef)=""

commit 970e1f64e93410101a3dcf8914151388991ba800
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Apr 28 09:50:07 2009 +0200

    core expr eval: defined @select
    
    - a select can now be undefined (defined @select when run_select
     returns >0 or error => true)
    - RV_CACHE_SELECT introduced

commit 019f41eba69e8f5f7a80cd8882b87b0d6f0a183b
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Mon Apr 27 17:42:32 2009 +0200

    use pcre-config when available, based on patch #2781237 from Jinke Jiang

commit f6a66b4266af7811520c4cc6300a0d9d30411ee5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 27 17:30:33 2009 +0200

    dialog: fixes for sip-router
    
    - use TMCB structures for temporary workaround of missing dialog_ctx
      field (hint by Andrei Pelinescu-Onciul). To be replaced by something
      more generic and not bound to a specific implementation.
    - check uac flags for RR

commit 388683b5ccc232066e13bb7a2504f1fb3c86a126
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 27 16:50:54 2009 +0200

    tm: new flags field in ua_client structure
    
    - if enabled, it stores various states of the uac, for now: RR and
      double RR indicators

commit d4c72479d57911da6f7fca32cd8054b320a54e48
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 27 16:12:40 2009 +0200

    tm: aliased TMCB_RESPONSE_READY to TMCB_RESPONSE_OUT

commit b05f7d8fac58035cddfea6341d4317c1bc26b0e6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 27 14:25:31 2009 +0200

    core: added function to count applied lumps
    
    - new defines to set/test lump flag

commit 643189177d93b5036beda2481457e079a451c512
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 23 13:45:56 2009 +0200

    port from branch 1.5, r5802
    
    fix crash when no content-length is present, related to bug #2753152

commit 12a8f3f8fcd8956ec7c968d7a1e2895035d05cba
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 27 13:15:22 2009 +0200

    pv: regenerate readme

commit 858146a9910ae2e434fb1de3840678cf8b684ce2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 27 13:04:04 2009 +0200

    core: pv - added wrapper to set function
    
    - wrapper for PV set function that takes in consideration cases of
      altering the msg context

commit 63be47a2d29d36408c42c7dc2d077865c2d19b98
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 27 13:01:33 2009 +0200

    added pv_isset() and pv_unset()
    
    - functions to test and unset PV, aiming for K compatibility with null
      keyword

commit 16b47a9a8830fc5c9d2b310536a7a881e233b9ac
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 27 13:00:44 2009 +0200

    define ANY_ROUTE
    
    - defined as 0xffffffff to match any route type

commit 371332203b371aedd28c6611a00ea8355bc0d6b3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 27 11:57:05 2009 +0200

    added $null
    
    - PV representation of K 'null' keyword
    - can be used for assignemts to unset the PV (for easier K-compatibility
      reason, e.g., $ru = $null)
    - do not use it in logical expressions (avoid: if($avp(abc)==$null) ; use
      instead: if(! defined $avp(abc))

commit 89bfe93c18d4ec77ff8c1819d365bda2a85613fe
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 24 10:52:46 2009 +0200

    tm: hooks comments update
    
    - updated description for TMCB_RESPONSE_OUT and
      TMCB_LOCAL_RESPONSE_OUT.

commit 98bfba70b755c1ea3844ecfbce35bd9b7f0b11a9
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 24 09:55:01 2009 +0200

    tm: TMCB_RESPONSE_OUT (callback) minor fix
    
    - for local generated reply (via t_reply*()) call the
      TMCB_RESPONSE_OUT callback only if the send was successful
      (this brings it in-line with the proxied reply behaviour).
    
    Reported-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit 0789fd246548cb8287777bbe9f8322cffedc8ad4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 24 21:40:26 2009 +0200

    core: avp & pvars assignment fixes & changes
    
    - fix: delete avps after finding their new value and not before
      (fixes $v=$v or $v=$avp(v) deleting $v's value)
    
    - when assigning something undefined (like a non-existing avp),
      delete the lvalue.
      E.g.:  $v=$foo  and $ foo undefined => delete/undefine $v
      An expr is undefined only if it consists only on an undefined
      avp or pvar. If it contains more elements it's always defined
      (even if all the elements are undefined).
      E.g: $foo and $bar are undefined => defined $foo == 0, defined
      $bar == 0, but defined ($foo+$bar) == 1.
      An avp is undefined if it doesn't exist or there is some error
      accessing it.
      A pvar is undefined if it's PV_VAL_NULL or there is an error
      getting it's value.

commit d47990275e5f604560d7ef6d93e8f2056110d7c8
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 24 21:02:05 2009 +0200

    core: new script operators: defined, strlen, strempty
    
    Support for 3 new operators:
    
    defined expr - returns true if expr is defined, and false if not.
                   Note: only a standalone avp or pvar can be
                   undefined, everything else is defined.
    
    strlen(expr) - returns the lenght of expr evaluated as string.
    
    strempty(expr) - returns true if expr evaluates to the empty
                     string (equivalent to expr=="").
    
    Example:
     if (defined $v)  $len=strlen($v);
     else $len=0;

commit 644f19d3722faef5928344c7dfbdd4c8fd512823
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 24 19:42:09 2009 +0200

    core expr: fix invalid pvar string conversions
    
    - in some cases pvars where converted in a wrong way to string (an
      uninitialized value was used).

commit cbba772cadfb6cdd79e09db8cb2c36a1fe3dc216
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 24 19:39:51 2009 +0200

    core expr: fixes fo RVE_STRLEN/STREMPTY/DEFINED
    
    - wrong return fixed
    - missing fixups added

commit fe8ef674f5c5bdc72ecb1616537750d9a791854f
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 24 15:35:17 2009 +0200

    core expr: optimize $v==""
    
    - optimize $v="" to strempty($v) (slightly faster)

commit ea1babd9d9e6e90629ad4ad091b1ab90241332fd
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 24 14:45:36 2009 +0200

    core expr:  new internal operators
    
    - added RVE_STRLEN_OP, RVE_STREMPTY_OP and RVE_DEFINED_OP

commit e6a0d577ca753e6d4948f127f1c1c3c83fa1bbd4
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Apr 24 16:58:36 2009 +0300

    Modules: presence
    
    Generated README using the new documentation system.

commit 33d03d8dadcd89997c6c7ade2ea2d43671f92d0c
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 24 03:18:58 2009 +0200

    Updating docbook sources for the new processing system.
    
    All files now use xi:include to include external files, this mechanism
    replaces the entity based inclusion mechanism. It is no longer necessary
    to define a new SGML entity to include an external file. External XML
    files can be included with:
      <xi:include href="filename.xml"/>
    
    External data files (i.e. files that should not be parsed by the XML
    parser) can be included with:
      <xi:include href="cfg_file.txt" parse="text"/>
    
    The toplevel element of all docbook documents that use the inclusion
    mechanism described above must have the following attribute:
      xmlns:xi="http://www.w3.org/2001/XIinclude"
    
    XML files included with XInclude must be complete, that means we need to
    add the XML header and DOCTYPE to all documents that did not have such
    header before (typically docbook files included into other docbook
    files).
    
    And finally, all files include the merged entity file in
    docbok/entities.xml, this file contains SGML entities from both SER and
    kamailio.

commit 18062708802467b6406effea4d6faff469c5aa5e
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 24 03:15:21 2009 +0200

    New makefiles for module documentation of ser modules
    
    The new docbook processing system needs new makefiles in directories
    with docbook documentation.

commit c04b411ce79f59e683d4a7db4191fad1e436fac0
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 24 03:13:30 2009 +0200

    New makefiles for module documentation in k. modules
    
    The new docbook processing system needs new makefiles in directories
    with docbook documentation.

commit 37979b9491c9bd2f9e2abb06d839e55242f08187
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 24 03:09:32 2009 +0200

    New makefiles for module documentation
    
    The new docbook processing system needs new makefiles in directories
    with docbook documentation.

commit 5bc53be47a8c33a5b135154e3a6da8834df1914f
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 24 02:13:45 2009 +0200

    New Docbook processing system.
    
    This is the new and improved version of the docbook build system that
    was present in ser and kamailio. It consists of Makefiles, xslt
    stylesheets, css stylesheets, and other auxiliary files that are needed
    to convert documentation stored in docbook xml format to various output
    formats. We currently support the following outputs: HTML, plain-text,
    and module README. Other formats (man pages, chunked HTML and possibly
    PDF) will be added later.
    
    First of all, we are moving all files that are part of the docbook
    processing system into one directory "docbook". Those files were
    previously scaterred across multiple directories in the repository and
    having them all at one place make the system less error-prone.
    
    We have merged files containing SGML entity definitions from both
    projects into a single file. The file is stored in docbook/entities.xml
    and this is the file that should be included by all docbook documents
    (we will need to update all such files in all modules).
    
    The Kamailio CSS style sheet for module documentation is now becoming
    the main CSS stylesheet for HTML documentation generated from docbook
    sources. The new stylesheet is stored in docbook/sr-doc.css. The
    contents of the file was slighlty updated to make sure that the styles
    in the file match HTML elements in XHTML output. With the new system
    the default output HTML flavor is XHTML.
    
    The toplevel Makefile.doc is gone. It is being replaced by file
    docbook/Makefile. The new makefile has been extensively polished and
    improved. This also requires new Makefiles in modules. All the targets
    and references that were used to generate the PDF output in SER are
    gone, we were using proprietary FOP processor which is not generally
    available. All configuration options that can be overriden from
    module/doc Makefiles are extensively commented. The new Makefile can
    save the  output being generated into a directory specified on the
    command line:
      $ output_dir=/html make html
    The default target of the Makefile is HTML. There is a new target that
    can be used generate module README:
      $ make readme
    
    The file that should be included from module Makefiles is
    docbook/Makefile.modules. At present the file only includes the main
    Makefile, but in the future some of the targets that are particular
    to module documentation will be moved to this file.
    
    The XML catalog received a small facelift, too. By default the catalog
    references /etc/xml/catalog. References to dbschema DTD and XSL files
    (dbschema is the scripting system used to generate SQL files in SER)
    are gone. They do not belong into this file.
    
    All references to Drupal and drupal related xsl stylesheets are gone.
    Those files were used to generate HTML files suitable for inclusion
    into Drupal pages at iptel.org.
    
    File doc/kam_module_faq.xml has also been removed, this file was empty,
    it was probably added because it was included by far too many docbook
    documents in modules. Since I wrote a script to do some compatibility
    changes in module docbook files, I taught it to remove the reference
    to the file from all docbook files and then deleted the file.
    
    All files in directory "docbook" are briefly described in
    docbook/README.
    
    The new system adopted Kamailio costumizations of the docbook stylesheet
    that is used to generate READMEs. There is a new stylesheet called
    readme.xsl that contains all options that should only be applied when
    READMEs are being generated.
    
    The stylesheet that generates man pages from docbook has been moved
    from doc/stylesheets to docbook/man.xsl. We do not have yet support for
    man pages in the docbook Makefile, this feature will be added later.
    
    New features:
      * Automatic dependency calculation. We have a XSL stylesheet which
        traverses the source docbook document and produces a list of files
        included in the document. This list is then included in the main
        Makefile to calculate dependencies. That means you can split your
        document into multiple files and the system will always correctly
        rebuild the file.
    
      * Support for document inclusion with xi:include. All source docbook
        files are processed with the support for xi:include enabled which
        makes it possible to include other documents without the need to
        use SGML entities to include external files.
    
      * Improved top level make file, among other things the makefile is now
        much more flexible, the module can specify different source document
        for each type of produced output. The makefile can generate module
        READMEs. The output directory is configurable, which is useful if you
        need to build a collection of html pages to be uploaded to a server.
    
      * Separate stylesheet to customize the format of module README files.
    
      * Supported output formats:
        README
        XHTML (single file)
        XHTML (multiple files)
        Plain-text
    
      * Normalized screens: There is no longer the need to pay attention to
        the leading and trailing white space in data of <screen> (and similar)
        elements. Stylesheet common.xsl contains a template that does that
        automatically (this isn't really a new feature, is was present in
        the original ser docbook processing system).

commit 1b7b3f92c502ebea91a1a36356dc4aada751de0e
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 24 01:25:33 2009 +0200

    Removing flatstore module from modules_s
    
    The module has already been merged with kamailio db_flatstore and the new
    module is in modules directory

commit 92414af97afb0f7652209b28e506f83ad01ba76c
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 24 01:25:01 2009 +0200

    Removing postgres module from modules_s
    
    The module has already been merged with kamailio db_postgres and the new
    module is in modules directory

commit 0ff99279dda4f2cb69745dcf4fd1594d2a241ee2
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 24 01:24:24 2009 +0200

    Removing mysql modules from modules_s
    
    The module has already been merged with kamailio db_mysql and the new
    module is in modules directory

commit 9c73b883ea0d30cd1f51933179404c5123b5429f
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Apr 23 20:12:57 2009 +0300

    * Modules: presence
    
    Changed an INFO log into DBG log and improved logged information.

commit 3514d04ce924dbb536ddd598f4df0c81cd561dec
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 23 15:45:39 2009 +0200

    makefiles: minor COREPATH fixes
    
    - COREPATH must now be always defined because of the longer makefile
      include chain.

commit c6f75a7e56f02abd271649797d2fa1db91ee1b16
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 23 15:44:41 2009 +0200

    makefiles: added Makefile.utils
    
    - added Makefile.utils
    - updated utils/{gen_ha1,sercmd} to use it

commit 69f3a24eea65fb7663a0910f63239787327c3488
Merge: 0705191 fb751cb
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 23 14:33:37 2009 +0200

    Merge commit 'origin/ser_core_cvs'
    
    * commit 'origin/ser_core_cvs':
      tcp: added missing blacklist on write pollerr
      makefiles: minor fix (use COREPATH in Makefile.targets)
      makefile: config and modules.lst minor fixes
      makefile.doc: support all targets and dep. fixes
      doc (INSTALL): minor make update
      makefiles: fixes and speed-ups
      makefiles: typo fixed
    
    Conflicts:
    	Makefile.doc
    	Makefile.rules
    	Makefile.targets

commit 0705191bec675f931a7a906dffcac6c2b7d25c75
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 23 13:35:42 2009 +0200

    tls (common): don't use TLS servername if openssl < 1.0.0
    
    - TLS extensions and more specifically server_name support have
      appeared between openssl 0.9.8l and 1.0.0.

commit 024a23ebba44e94f2e6fe588bb06ef5a84740304
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Apr 20 14:22:54 2009 +0000

    tls: don't start if tcp is in async mode
    
    - added check for tcp async mode on startup. If tcp is in async
      mode and tls_force_run is not set, refuse to start and print an
      error message (tls does not support yet tcp async mode).

commit b8c2f391dad82675340b99df64ab9c10e67ac003
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Apr 20 14:16:02 2009 +0000

    tls: fixed missing TCP_BUF_SIZE
    
    - updated to the dynamic buffers used now for the tcp connections
    
    Reported-by: Alfred E. Heggestad, aeh at db org

commit 8843ff67a4714b735fd8d00a770671a5e7f950c3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Apr 3 13:37:27 2009 +0000

    tls: ser_cert.sh portability fixes
    
    - check if hostname supports -f, before trying it (else fallback to
      hostname without parameters).
    - check if getops supports long options (bsd and darwin versions do not).
      If not use only short options.

commit dcf7195d5dc28097f88b0e6841aa7c805244c22b
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 23 13:09:40 2009 +0200

    tls (common):Revert "Replace TCP_BUF_SIZE with a cfg_get(..)."
    
    This reverts commit 29b0138a7ce09cab1024e25ac457cb8915a973da.
    (bad fix)

commit 61fad306dab7aef72a1a7b976e33054fa17964dd
Merge: 9ce2960 74c805d
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Thu Apr 23 14:22:37 2009 +0300

    Merge branch 'master' of ssh://ramona@git.sip-router.org/sip-router
    
    * 'master' of ssh://ramona@git.sip-router.org/sip-router:
      tls: don't start if tcp is in async mode
      tls: fixed missing TCP_BUF_SIZE

commit 9ce2960f2b76372eae40813b0be640c6f3fbd7da
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Thu Apr 23 14:19:03 2009 +0300

    sst(k): register exported statistics from mod_init
    
    - k statistics API is now in kcore library, SR core doesn't register
      stats from module_exports

commit 5019d45b6713fdfb1ab96509e0673782d889415a
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Thu Apr 23 14:17:01 2009 +0300

    sl(k): register exported statistics from mod_init
    
    - k statistics API is now in kcore library, SR core doesn't register
      stats from module_exports

commit 29494fc266fc36959e0ef560e3d05bd4e827d644
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Thu Apr 23 14:00:08 2009 +0300

    usrloc(k): register exported statistics from mod_init
    
    - k statistics API is now in kcore library, SR core doesn't register
      stats from module_exports

commit 74c805dddd14420a0e5858214232a106dae7f5ea
Merge: 51f0810 35ce882
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 23 12:54:09 2009 +0200

    Merge commit 'origin/ser_modules'
    
    * commit 'origin/ser_modules':
      tls: don't start if tcp is in async mode
      tls: fixed missing TCP_BUF_SIZE

commit 51c1fe92ea71db3e418e146fe48fe9c93f18181f
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Thu Apr 23 13:53:31 2009 +0300

    siptrace(k): register exported statistics from mod_init
    
    - k statistics API is now in kcore library, SR core doesn't register
      stats from module_exports

commit 93154d273d234a2958a364faa8fcfe546daf5c28
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Thu Apr 23 13:50:34 2009 +0300

    registrar(k): register exported statistics from mod_init
    
    - k statistics API is now in kcore library, SR core doesn't register
      stats from module_exports

commit 35ce8821dd8065830ac14939fa562ab5e658247a
Merge: 410bd8e d9b7afa
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 23 12:48:41 2009 +0200

    Merge branch 'cvs-head' of git://git.sip-router.org/ser_modules into ser_modules
    
    * 'cvs-head' of git://git.sip-router.org/ser_modules:
      tls: don't start if tcp is in async mode
      tls: fixed missing TCP_BUF_SIZE

commit 3fc1c9220318757a31ba073aed6e68bea977623f
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Thu Apr 23 13:42:51 2009 +0300

    dialog(k): register exported statistics from mod_init
    
    - k statistics API is now in kcore library, SR core doesn't register
      stats from module_exports

commit 755c3f6dc84a664321ad34eeedc55a5b27fd23ce
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Thu Apr 23 13:36:52 2009 +0300

    imc(k): register exported statistics from mod_init
    
    - k statistics API is now in kcore library, SR core doesn't register
      stats from module_exports

commit 1cf2769a9a72ff4688e46afd8f0b7567eb5da289
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Thu Apr 23 13:22:07 2009 +0300

    msilo(k): register exported statistics from mod_init
    
    - k statistics API is now in kcore library, SR core doesn't register
      stats from module_exports

commit fb751cbfd2713f9d36156d4fc30f4499022a1390
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 23 08:56:00 2009 +0000

    tcp: added missing blacklist on write pollerr
    
    Reported-and-tested-by: Vladimir Marek <vlada@iptel.org>

commit 7d07255cf1b5bb363342225101b10720d2681922
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 23 07:56:42 2009 +0000

    makefiles: minor fix (use COREPATH in Makefile.targets)

commit 51f0810da46d1afe962d2478964fce1afedadd0e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 22 23:29:24 2009 +0200

    tm: added t_check_trans() script function
    
    Added t_check_trans() for compatibility with kamailio scripts.
    For replies it's equivalent with ser/sr t_lookup_reply().
    For CANCELs it's equivalent with t_lookup_cancel().
    For  normal request and ACK to negatives replies is equivalent to
    the following script snippet:
    
    route["t_check_req"]{
    	if (t_lookup_request()){
    		if (method=="ACK") # catch ACK to neg. repl.
    			return 1;
    		t_retransmit_reply();
    		drop;
    	}
    	return 0;
    }
    
    There is no equivalent for e2e ACK matching, but note that this is
    not safe anyway (a delayed e2e ACK might arrive after the
    transaction wait time elapses => it will not be matched). Note
    also that tm matches e2e ACK to proxied transaction only in
    special cases. It's only safe for e2e ACKs to local transaction.
    
    In cooperation with: Daniel-Constantin Mierla <miconda@gmail.com>.

commit 85529b2064727b60bddd0eeaecea12f949c0bfad
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 22 22:47:05 2009 +0200

    tm: t_check() split into t_check() and t_check_msg()
    
    - split t_check() into t_check() and t_check_msg() (new version,
       e2e ack detection and different return convention)
    - w_t_check() updated to use t_check_nmsg()

commit 5b905363fcdef865b70b80eea237ffa1f7087ba6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 22 18:28:31 2009 +0200

    core: print 'udp' in process description for UDP listeners
    
    - transport protocol is already printed for tcp, sctp

commit 84cad0184db30583c428503a5b8a2d83c6378aa8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 22 18:27:22 2009 +0200

    kex: enable MI command 'ps'
    
    - 'ps' prints SR process table

commit 37b96e540e1c9d96db1659504ffe5cbd5d3fc5c1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 22 18:26:11 2009 +0200

    libkcore: use atomic_add instead of atomic_sub
    
    - swap parameters of atomic_add to match SR prototype

commit 4330d7116162d4ad7389f4bab18e7b52f8fce116
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 22 17:52:24 2009 +0200

    perlvdb(k): makefile fix

commit bd3e028334907c3622e1537d337a9938ed355060
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 22 17:42:47 2009 +0200

    perl(k): fixed makefile

commit 4568924a49062d998cad865ce92b223df3e1f58a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 22 17:14:00 2009 +0200

    kex: added implementation of core stats and mi stats
    
    - code for specific implementations of statistics API moved here from
      libkcore
    - k statistics API use now atomic ops for SR core

commit 1f01639cb73a6757eab5ef4059241d9cffdbe926
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 22 17:11:05 2009 +0200

    core: statistics.h only includes lib/kcore/statistics.h
    
    - this should be removed in the future
    - mi and statistics API are libraries, initialization is done from
      modules, the fields in module_exports are not used by core

commit 3f52ab26d1bcdbb6c03e1ba94b5b48b8880404e8
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 22 15:09:13 2009 +0000

    makefile: config and modules.lst minor fixes
    
    - don't build the config on clean (even if not present)
    - don't build the modules.lst unless needed (don't build it on
      clean, core only make a.s.o)

commit b00b771318bf0cc379649ad535b48970c5cf37a0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 22 17:08:12 2009 +0200

    libkcore: moved core stats and mi stats to kex module
    
    - core specific implementation for statistics api moved to kex module
    - initialization of statistics collector is done while adding a
      new statistic if not done before
    - destroying the stats collector is done in mod_destroy from kex module

commit 7b3e3db2f2e88e5f86f4988cada5c293e83e12ec
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 22 13:48:36 2009 +0000

    makefile.doc: support all targets and dep. fixes
    
    - support all the *clean and *proper targets
    - include dependencies only if needed

commit ad9c95e3dd5ef93bd1cb734235c0eb267ed8c67e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 22 13:46:56 2009 +0000

    doc (INSTALL): minor make update

commit 8ca5d8dda4250da35e041833d4427ea8cfd28bfa
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 22 13:46:30 2009 +0000

    makefiles: fixes and speed-ups
    
    - make clean, proper, realclean, distclean and maintainer-clean
      will work on all the libs in the lib/ directory.
    - clean, proper, realclean, distclean and maintainer-clean targets
      split into more specific targets: local-clean, clean-modules,
      clean-libs, clean-utils (and the same for the others) => make
      proper & friends depend now only on the really needed parts =>
      much faster.
    - doc directories are entered only if a Makefile is present.
    - make maintainer-clean properly deletes the config and the
      modules list at the end (it doesn't recreate it).

commit 1279cdf4c01baade62fc01e030cb1b0d2b82c6bd
Merge: a99baf2 59f30b6
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Apr 22 15:00:41 2009 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    * 'master' of ssh://git.sip-router.org/sip-router:
      * Modules: presence

commit a99baf2b9aad42d01b2bdef0dca8365d7b31c627
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Apr 22 14:59:59 2009 +0200

    fix parameter name and doxygen comments for the description AVP

commit 59f30b6cbcf25d0ef0f517dad21fa8e711732293
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Apr 22 14:08:51 2009 +0300

    * Modules: presence
    
    * Changed name of auth_status function to pres_auth_status.
    * Fixed and improved example (don't know how to generate new README).

commit 3375ff25bc672fc198fffa99bb23f59877031cd0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 22 09:00:37 2009 +0000

    makefiles: typo fixed
    
    s/mantainer/maintainer/

commit 50ca02e5e68d7ea44609d50e8e3fb38babe77424
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Apr 22 10:41:55 2009 +0200

    fix overlapping symbols of libconfuse and sr core cfg parser
    
    - fix overlapping symbols for the libconfuse library used from carrierroute,
      added 'sr_' prefix to cfg_init and cfg_parse core functions
    - fix all modules that called this functions

commit a477fdfb940e86aca763e505c67ffa4af7c1e8ea
Merge: 7028d27 50c8333
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 21:57:58 2009 +0200

    Merge branch 'master' of ssh://daniel@git.sip-router.org/sip-router
    
    * 'master' of ssh://daniel@git.sip-router.org/sip-router:
      * Module: presence

commit 7028d27fd0d1f6802326ac78a1be5909f7ac7a68
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 21:56:18 2009 +0200

    alias_db: added doc/Makefile
    
    - makefile rules to generate documentation
    - entities.xml => kam_entities.xml
    - module_faq.xml => kam_module_faq.xml

commit 11e41144f5e558bd2764372f2c61a915e10d5a20
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 21:55:30 2009 +0200

    auth: added doc/Makefile
    
    - makefile rules to generate documentation
    - entities.xml => kam_entities.xml
    - module_faq.xml => kam_module_faq.xml

commit 54bbef24c78c8ac3359bc174d8d3e0786bd53160
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 21:55:04 2009 +0200

    acc: added doc/Makefile
    
    - makefile rules to generate documentation
    - entities.xml => kam_entities.xml
    - module_faq.xml => kam_module_faq.xml

commit bd7a3be954280b0f580063cc43f10c7dd3330bc7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 21:53:06 2009 +0200

    dispatcher: added doc/Makefile
    
    - makefile rules to generate documentation
    - entities.xml => kam_entities.xml
    - module_faq.xml => kam_module_faq.xml

commit 55447c0be3ca1ecefb1e2136904e53f8aac27ab6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 21:49:16 2009 +0200

    docbook: added files used by K modules' docbook files

commit 371312a736015cd3ca654b72729d3385e56fcc69
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 21:47:10 2009 +0200

    makefile: K mode for documentation generation
    
    - K has some extra parameters to XSLTPROC
    - new option to be able to set the path for css file used inside generated html

commit 8c6e0b056196c94aa957f95736dc7fcad83a1f16
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 21:45:49 2009 +0200

    makefile: make README removes the txt from doc/
    
    - generation of README file for modules removes the txt file from doc/
      directory

commit 50c83331d15723022e758984b01fd5edb7e11d17
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Apr 21 21:38:26 2009 +0300

    * Module: presence
    
    Fixed wrong error message.

commit 4dce83ec72e26a2ce3b705fa8a59878d2bea5b65
Merge: c737bb2 6fc8414
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Apr 21 19:33:11 2009 +0300

    Merge branch 'master' of ssh://jh@git.sip-router.org/sip-router
    
    * 'master' of ssh://jh@git.sip-router.org/sip-router:
      fix crash in carrierroute related to failed config file loading

commit c737bb20f2ce9158bfce6f175c02907acd8b0617
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Apr 21 19:30:43 2009 +0300

    * Module: presence
    
    Introduced a dew function auth_status() that can be used to check from
    script if a watcher is allowed to subscriber event 'presence' of a
    presentity.

commit 6fc84149d62956192257c0fe9af728121f5d71e9
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Apr 21 18:23:51 2009 +0200

    fix crash in carrierroute related to failed config file loading

commit 0f229592a9a3606b853b564b8c40aae133c9131a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 14:40:34 2009 +0200

    dialplan: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit e772f6ad260575c8f821aeeb1bda5f6b09ef04b3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 14:40:19 2009 +0200

    db_flatstore: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit aa9c7d330ff47a2cf0c1ca751c3795f756ebb4b8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 14:39:58 2009 +0200

    db_flatstore: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 04f66b6921415384c345da9420ee69f4113e20d6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 14:39:09 2009 +0200

    carrierroute: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit fe64f7f4f454c801ed1c0aac7e516eed3f9e43e8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:46:05 2009 +0200

    utils: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit f9fe1066c2768617a2f075e9fd289dd064d3463b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:45:21 2009 +0200

    xcap_client: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 212e75b5e451a23892694373750e3cb3b3f51739
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:45:05 2009 +0200

    usrloc: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 571bc6e4fe072d023bbb71d287676a5900778675
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:44:52 2009 +0200

    userblacklist: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit e8b35ce3d71e9f0c731ab1e67fa4ee266fb41a23
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:44:37 2009 +0200

    siptrace: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit b821393bc3c64c10c7440d7830e3eba1e3a4d1eb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:44:11 2009 +0200

    regexp: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 74e308702634cf167d37d4151f6b515ad2f5fe87
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:43:03 2009 +0200

    ratelimit: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit ba94f02fd0fc4a85b15ff2ba6a75c27ec8a63c19
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:42:46 2009 +0200

    pv: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit adf4a917161827cee69120aec8553676a5594b66
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:42:24 2009 +0200

    pua_mi: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 9d5361ebc1cdb382bb43f39d1185dbe4936fe3bb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:41:59 2009 +0200

    presence_xml: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 6b55446803ec64b2027f0a8c13de9e7199cafdb2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:41:45 2009 +0200

    presence: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 6635cb9f7027f96d8e419c064bdb9d9b3b925247
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:41:34 2009 +0200

    pike: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 00c0a17048c4576919a62fc32d8924a1d6f3450a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:41:15 2009 +0200

    permissions: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 16310fdcd252e0243521383c0d2a6c36f946ac92
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:40:56 2009 +0200

    perl: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit b30d226e1518965a38d5987834586e6c6b9b92cb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:40:42 2009 +0200

    pdt: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 120e0328f6790421794ca0f6eb232b313a794fbc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:40:20 2009 +0200

    nathelper: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 60b34eb4ed8fa6a283a16210a67ca23ce42e461b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:40:01 2009 +0200

    lcr: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 700e6f7dd1eb8e2d037e009719eda7cd7f7e3083
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:39:45 2009 +0200

    imc: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 8e47fc63b33c412ced391a28d457d56c8bc8d22b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:39:26 2009 +0200

    htable: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit fa126698470251cba4a2fd2610bb02bf5c6a1f06
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:39:04 2009 +0200

    domain: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit f07cb986b69eb4141471be221d74bdc076a25f9b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:38:35 2009 +0200

    cpl-c: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 9f8d47c3db6cfc688763f8658f60460db9190125
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:38:00 2009 +0200

    dialog: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 2633b5adf2145f96b4f73cf578a6354a8dfc0038
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:37:22 2009 +0200

    cfgutils: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit cdcc7ced9bd0de23063bc7d1231559d0299880c1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 13:36:37 2009 +0200

    benchmark: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit 9bdaf1a820719b9431382cfa79cc0af36f0d9a3b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 12:46:44 2009 +0200

    dispatcher: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

commit d9b7afae582a4d497eddc6eacbbc1690d030cbb4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Apr 20 14:22:54 2009 +0000

    tls: don't start if tcp is in async mode
    
    - added check for tcp async mode on startup. If tcp is in async
      mode and tls_force_run is not set, refuse to start and print an
      error message (tls does not support yet tcp async mode).

commit 5c0cb12bf52adf2847a1c2e894a8c5e944485c21
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Apr 20 14:16:02 2009 +0000

    tls: fixed missing TCP_BUF_SIZE
    
    - updated to the dynamic buffers used now for the tcp connections
    
    Reported-by: Alfred E. Heggestad, aeh at db org

commit 2e7b362675129b3b7fb54f7e7bd76619916719e3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 20 10:59:14 2009 +0000

    - call nat detection route (reported by Mark Sidell)
    
    
    git-svn-id: https://openser.svn.sourceforge.net/svnroot/openser/trunk@5799 689a6050-402a-0410-94f2-e92a70836424

commit 5d131fe7d5ca78526372bab26af27c7501326f57
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 20 12:23:06 2009 +0200

    dialog: fix dlg flags and profile issues
    
    - reported by Alex Balasov and Inaki Baz Castillo
    - flags operations were not taken in account
    - profiles without name were buggy

commit c14314a41793c03c0e9b348845b403c27875e85a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Apr 20 10:56:11 2009 +0200

    presence_xml(k): futex warning fix
    
    - added _BSD_SOURCE define if _XOPEN_SOURCE is manually defined
      (the _XOPEN_SOURCE define in pidf.c caused _BSD_SOURCE to be no
       longer defined in features.h => _USE_MISC not defined =>
       syscall() not declared in unistd.h.)

commit aa416e89057be4112fe0ba40aa24c14e9a5d9f82
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Apr 20 10:47:34 2009 +0200

    presence_dialoginfo(k): futex warning fix
    
    - added _BSD_SOURCE define if _XOPEN_SOURCE is manually defined
      (the _XOPEN_SOURCE define in pidf.c caused _BSD_SOURCE to be no
       longer defined in features.h => _USE_MISC not defined =>
       syscall() not declared in unistd.h.)

commit ab40d3447b6e0501e3882a04d533f550e8a54453
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Apr 20 09:36:55 2009 +0300

    * Fixed reference to TXT record string value.

commit 5a311129d392f9ac90690306b20cd5af32c356c2
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Apr 20 08:58:44 2009 +0300

    * Modules: auth_radius, mediaproxy
    
    Changed auth and dialog module includes to point to corresponding k
    modules.
    
    TODO: Integrate k and s auth and dialog modules.

commit 456c3c137e9abcf687413f9675fe0f1761ce820d
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Apr 20 08:47:28 2009 +0300

    * Modules: auth_radius, misc_radius
    
    Moved modules_k/auth_radius and modules_k/misc_radius to modules and
    removed modules_s/auth_radius, modules_s/avp_radius, and modules_s/uri_radius.

commit ee7c37af07d920486dd958ca30f06510239e983c
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Apr 20 08:42:45 2009 +0300

    * Module: mediaproxy
    
    Moved modules_k/mediaproxy to modules and removed modules_s/mediaproxy.

commit 81198ed38e7271f9298650f90ed1776c64e924fe
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Apr 20 08:39:53 2009 +0300

    * Modules: enum
    
    Moved modules_k/enum to modules and removed modules_s/enum.

commit d78800223909dd0c458defbb304f7c56821d1bc0
Author: Elena-Ramona Modroiu <ramona@rosdev.ro>
Date:   Sat Apr 18 22:53:08 2009 +0300

    htable: new pv counting items matching key by a regexp
    
    - $shtcn(ht->regexp) to return number of items that match the key by
      regexp

commit 75b58438e024da69d41712e7eb05062214b09614
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 18 19:23:05 2009 +0200

    core: pvapi uses get_hash1_raw()
    
    - removed core_hash define to get_hash1_raw()

commit a752507c7806c0297aa48b3a8a53825c6ff5b871
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 18 18:34:48 2009 +0200

    mi_xmlrpc: start xmlrpc listeners using SR interface
    
    - xmlrpc process started from PROC_MAIN

commit b29f52c3f69d71ce1663df309cb421248e2e50d2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 18 18:33:59 2009 +0200

    mi_datagram: incremental rank for datagram listeners

commit a3aa242c94be4c37f1589422634925c1b60eab05
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Apr 18 18:10:13 2009 +0200

    mi_datagram: start extra processes using SR mode
    
    - datagram listeners started in PROC_MAIN

commit 886cf4bfafb0b1d20f9ffadf0350961b07b37a45
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Apr 18 15:53:54 2009 +0300

    * modules: presence_mwi, presence_xml, pua, pua_mi
    
    Moved back to modules_k presence related modules, because they include
    stuff from sl module that does not exist in modules yet.

commit 6f2663935df7487162d5f46c636d0bba8d04a3c1
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Apr 18 15:50:45 2009 +0300

    * Moved back presence module

commit 302b623d8b54b11c33dd7ec6ec6716289c160c50
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Apr 18 15:29:07 2009 +0300

    * modules: peering, pua, pua_mi, presence, presence_xml, presence_mwi
    
    Moved some k modules that don't exist in s from modules_k to modules.

commit 904ed822481e11087275aca036e61b7e46506773
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Apr 18 15:02:58 2009 +0300

    * module: dialplan
    
    Moved from modules_k to modules.

commit 2058f9802c7c9f9a53107635c7b181bafdb83c8c
Merge: 34df941 bd00293
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Apr 17 12:17:37 2009 +0300

    Merge branch 'master' of ssh://jh@git.sip-router.org/sip-router
    
    * 'master' of ssh://jh@git.sip-router.org/sip-router:
      parser: added METHOD_PUBLISH
      registrar: included missing lib/kcore/km_ut.h
      textops: added implementation of free_/fixup_regexp_none()
      core: commented prototype of free_/fixup_regexp_none()
      kex: added module documentation
      kex: set dependency on kmi and kcore libs
      kex: new module - kamailio extensions
      libkmi: moved mi core commands to kex module
      mi_fifo: start FIFO listener process using SR interface

commit 34df941208059d3e09c641672b7d6c55bf740729
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Apr 17 10:03:00 2009 +0300

    * Any pending string after the last \n token was ignored.  Port
      from Kamailio 1.5 branch.

commit bd0029313d302677fe1663eea4fa43b133f4620f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 17 00:33:43 2009 +0200

    parser: added METHOD_PUBLISH
    
    - new bit flag allocated for PUBLISH
    - parse_method() supports now METHOD_PUBLISH
    - parse_methods() returns 0 on success and -1 on error as it is expected
      by all use cases

commit 5b171d6b96f39b1d27f2f8cc1541510fa480723e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 17 00:32:03 2009 +0200

    registrar: included missing lib/kcore/km_ut.h

commit 290e94777e85eae44c170f3a70271e58e35bcd7c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 17 00:30:14 2009 +0200

    textops: added implementation of free_/fixup_regexp_none()

commit 8708160fe82b0886d3a3e014450c2a112b4aa150
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 17 00:27:37 2009 +0200

    core: commented prototype of free_/fixup_regexp_none()
    
    - these functions are used only by textops module
    - implementation of these functions added to textops

commit 618be5d48b24b62575ca9c5f0b2f10af4bd17c71
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 16 22:08:04 2009 +0200

    kex: added module documentation
    
    - added source XML files and generated README

commit fd6b2964d77974668c960ebe7b295c893a3c6cd9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 16 22:06:42 2009 +0200

    kex: set dependency on kmi and kcore libs
    
    - added paths to libs in Makefile

commit 2ca10ea1f1d30b728678f28099b99e0735f9dc15
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 16 20:56:13 2009 +0200

    kex: new module - kamailio extensions
    
    - the module collects kamailio core extensions
    - K core mi commands included in the module

commit 5df5700d88060d932d8becace3fc805c36014fe8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 16 20:49:34 2009 +0200

    libkmi: moved mi core commands to kex module
    
    - implementation of MI commands in core moved to kex module
    - mi commands are added in mod init function
    - 'ps' and 'debug' functions still are disabled

commit 90c2431e4c98bce05e59d8ee8421c0db3d16fefb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 16 18:16:04 2009 +0200

    mi_fifo: start FIFO listener process using SR interface
    
    - register one extra process to SR core
    - start the extra process from child PROC_MAIN

commit 4ae3936acf4cf24fd28abcf46826277cb85c3a8a
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 16 14:11:04 2009 +0200

    port from kamailio 1.5 branch r5795, related to bug #2416621

commit fa35f54d24d75902b21203da47a51f5e07d467bb
Merge: 90506c1 1615574
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Thu Apr 16 13:31:43 2009 +0200

    Merge commit 'origin/ser_core_cvs'
    
    * commit 'origin/ser_core_cvs':
      make: use C_INCLUDES for includes
      tcp: stun fixes
      tcp: tcp_blocking_connect timeout fix
      tcp: stats: added init & destroy macros
      tcp: minor stats fixes
      tcp: internal macro-hooks for stats & events
      tcp: helper internal macros
      Do not try to backlist and do not try DNS failover for blind UACs as
      Safety check added to verify whether the static buffers have

commit 90506c13701a80e5386a7c4bccf3976d6e82dde2
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 16 13:13:55 2009 +0200

    add Changelog from svn trunk (until r5792) after migration to git

commit 5bad9d33802f87be1fbce04b0f24b4aedf6c606c
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Thu Apr 16 12:51:18 2009 +0200

    port doc changes from kamailio 1.5 branch, r5794

commit d752afff9924e66da382a9dea48984761ad52b7f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 16 12:14:37 2009 +0200

    core: path_vec added to sip_msg structure
    
    - basic path support in core (not yet for request forwarding functions)

commit 0253726f99ac151f748712a5d39d71f42d9defc6
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 22:38:52 2009 +0200

    sercmd: include path updated

commit 89fd860c7b1ac4147e2ff56d3d479d6600fdc848
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 22:37:56 2009 +0200

    makefile: fix install-man
    
    - fixed source path when installing modules man pages

commit b0f6ec8784712e4c1436fc9a4a3b54296e94ba5c
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 22:27:36 2009 +0200

    makefile: excluded modules that do not compile
    
    - excluded modules that depend on external libs from default
      compilation
    - excluded non-essential modules that do not compile yet

commit 3cc16e2873a48b89d495f3a2065e4171bfff70ec
Merge: 8203f7a 410bd8e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 21:23:34 2009 +0200

    Merge ser modules into sip-router master branch
    
    (merge commit 'origin/ser_modules')
    
    * commit 'origin/ser_modules': (2777 commits)
      modules: added missing parse_to.h include
      xlog: LOG_() api update
      usrloc: fixed name conflict
      lcr: updated to the route_mode changes
      modules: tm register_tcmb api update
      ser modules ported to sip-router
      tls: ser_cert.sh portability fixes
      METHOD_OTHER is replaced with METHOD_OPTIONS, because the OPTIONS request
      cfg_size macro renamed to cfg_sizeof to avoid a conflict with one of the
      * logging API updated (see doc/logging-api.txt for details)
      When building the route set of ACKs for local UACs, only the reply is now
      Fixed compiler issues warnings over:
      Some errors are marked as DB API (framework) failures instead of MYSQL API
      The header file ds_rpc.h statically defines the doc string for some RPC
      "Route :" prefix (and separator) is used some more time across the
      permissions: fix build without -DUSE_IPV6 errors
      nathelper: added support for SDP rtcp attribute (RFC 3605)
      prefix_route: include atomic_ops.h where atomic_t is used
      Fix warnings on LP64 plarforms out there (all 64-bit amd64/emt64 unixes
      Add comma between function names and fix typo.
      ...

commit 8203f7af56f4cfe10ee437c5ee5000776e4bd8d9
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 20:24:04 2009 +0200

    libcds: added missing parse_to.h include

commit 410bd8e452d94ff6d27c0bb1e325957327ca15a3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 20:11:58 2009 +0200

    modules: added missing parse_to.h include

commit 9554f34758dd73281ef7e321c61378b57698a9ca
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 20:10:46 2009 +0200

    xlog: LOG_() api update

commit 7cb4bf65bd1de0fff7f892c148cf23c3ba34f4ae
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 20:09:24 2009 +0200

    usrloc: fixed name conflict
    
    - destroy_avps() renamed to reg_destroy_avps() to avoid conflicts
      with the usr_avp.h version.

commit d8d1ecf7f7700dd1a53805557d639532940ff701
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 19:39:36 2009 +0200

    lcr: updated to the route_mode changes
    
    - instead of the obsoleted tm route_mode use core's route.h
      is_route_type(REQUEST_ROUTE).

commit 84f05eea920186865233d218ac58a754975ec69a
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 19:30:36 2009 +0200

    modules: tm register_tcmb api update
    
    - register_tmcb has now an additional parameter

commit 7a7f1a7b9265f020e734228a391b903541507cc8
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Apr 15 19:16:10 2009 +0200

    ser modules ported to sip-router
    
    - added -DSER_MOD_INTERFACE to each module Makefile
    - db:
         - linked with srdb2 when needed
         - fixed db includes path (../../lib/srdb2/*.h)
         - fixed db constants
    - fixed tm include path (../../modules/tm/*.h)

commit 03d35c2b93d58c0abb5fd4f47ea010148adb815d
Merge: 93c2f8a eb38b3d
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 17:54:03 2009 +0200

    Merge kamailio modules into sip-router master branch
    
    * commit 'origin/kamailio_modules': (3363 commits)
      Fix relative paths to tm header files.
      Removing kamailio tlsops module.
      Removing kamailio version of db_postgres module.
      Removing kamailio version of db_mysql module.
      Removing kamailio version of db_flatstore module.
      Removing kamailio db_berkeley module.
      Removing kamailio carrierroute module.
      Removing kamailio version of tm module
      Switch to sip-router calling convetion of t_request
      Define OPENSER_MOD_INTERFACE in Makefile.
      Define OPENSER_MOD_INTERFACE in Makefile.
      Various db api changes needed after migration to libsrdb1
      Define OPENSER_MOD_INTERFACE in Makefile.
      Convert hostent2su into proxy2su
      Update the number of parameters to mk_shm_proxy to sr version
      Include lvalue.h which defines EQ_T in sip-router
      Update module to use libkmi
      Define OPENSER_MOD_INTERFACE in Makefile.
      Enclose a label in #ifdef STATISTICS to avoid compilation warning
      Update parse_phostport parameters to the sr version of the function
      ...

commit eb38b3df06a26dda770d60431edd836e1c7e1b6e
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 17:09:42 2009 +0200

    Fix relative paths to tm header files.
    
    This patch fixes relative paths to header files included from the tm
    module. The module is located in sip-router/modules which kamailio
    modules are in sip-router/modules_k, thus we have to replace ../tm/
    with ../../modules/tm/.

commit c86fee3dbfa882dd654312b6b073882ab010ba7e
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 15:33:23 2009 +0200

    Removing kamailio tlsops module.
    
    The module will be replaced by tls module that is available in modules/
    directory, the module contains functionality from SER tls module and
    Kamailio tlsops module.

commit 42918232490b803cfc01bab21b49ccf7ae3413c1
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 15:24:04 2009 +0200

    Removing kamailio version of db_postgres module.
    
    The module has already been merged with its SER counterpart and it is
    available in modules/ directory.

commit 66b459967d7a674d3f2fd4ef074de00268e0c8fd
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 15:22:10 2009 +0200

    Removing kamailio version of db_mysql module.
    
    The module has already been merged with its SER counterpart and it
    is available in modules/ directory.

commit 1d0f4be6d18aa59fedb4d3f27712ec1dec1a1f6d
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 15:21:07 2009 +0200

    Removing kamailio version of db_flatstore module.
    
    The module has already been merged with its SER counterpart and it is
    available in modules/ directory.

commit 4c3850510aca519b0b80a34d24e39629b223ef56
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 15:20:23 2009 +0200

    Removing kamailio db_berkeley module.
    
    The module has already been merged with its ser counterpart and
    it is available in modules/ directory.

commit 36e414c65fb970b772d8f4bedc51e8a19076cff9
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 15:13:30 2009 +0200

    Removing kamailio carrierroute module.
    
    The module is already present in sip-router/modules directory.

commit f9b500dc6d4fa7197a1f6b628da65f54cf5ab2dd
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 15:10:53 2009 +0200

    Removing kamailio version of tm module
    
    Kamailio version of tm module is not needed in the sip-router tree,
    because we use the version from ser.

commit 2d9f83e0e7ef95f35b3ed652b149c157bd2279f5
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 14:20:31 2009 +0100

    Switch to sip-router calling convetion of t_request

commit 9d8781fe299e714e9bebc41f754bdae538bd0e18
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:20 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit d9ace741bfb2124fcb7bfe04bf846ef3223ccb17
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:20 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 6ffa62670457880f38d6df857caf16887d553af3
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:44 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 0a881ed823175fa292a5d88716f0bcbc5af89679
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:20 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 5bda55a56e7fb5345fe433ba9fafdabf06dfc99a
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Mar 31 02:58:06 2009 +0200

    Convert hostent2su into proxy2su
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 848820c260f02bdbe072805bb42e502fe166f252
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Tue Mar 31 02:53:00 2009 +0200

    Update the number of parameters to mk_shm_proxy to sr version
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit b4c5b6b04487b5f9737adfe3c4af2c7ebbfe30b9
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 5 22:43:48 2009 +0100

    Include lvalue.h which defines EQ_T in sip-router

commit ae8b61f731460aa33744f50bc7f85516e2d8d562
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:15 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit a794d436b02b05b3bfa9a43f4ee0343a6613dadf
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:20 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit bfc982d2af47ff4eb73980c81ed91d95fc6f4ef5
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:14:31 2009 +0200

    Enclose a label in #ifdef STATISTICS to avoid compilation warning

commit abbb5ffb549fa5cda68002efda5a7d076bc7c960
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:11:15 2009 +0200

    Update parse_phostport parameters to the sr version of the function

commit fa03d056447c5177d2b1b1d0ee80da77f566045d
Author: Jan Janak <jan@iptel.org>
Date:   Wed Mar 11 00:37:42 2009 +0100

    Update module to use statistics from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the statistics related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to statistics.h to point to the header in the shared
       library.

commit e772fbce0b86d63b0d98e7e2ec67a315648c94b9
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 18:23:14 2009 +0100

    Update module to use hash_func.h from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore (if not yet done)
       which contains all the stuff that was present in kamailio core and
       is missing from the sip-router core.
     * it fixes the path to hash_func.h to point to the header in the shared
       library.

commit 90ab26055ace38caa891a2a9b8c0c94df8c51e9b
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:44 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 907c6a28103536928255190610ec89704f8ab896
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:15 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit b6ae1423d9dcc64d5da058d3a10dcf0ef3416733
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:20 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 865aa2a66f8e222ce84ba05c53e0c8225d12cd24
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:43 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit f1a4d2179940da57e93fedc93d54f0bbd695908c
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:21:02 2009 +0100

    Update module to use libtrie
    
    This patch does two things:
     * It links them modules with shared library libtrie
     * it fixes the path to dtrie.h to point to the header in the shared
       library.

commit 3cb0009d9a7b2f1facfbc2df6b9a2c23c79a312a
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:15 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 204b7ecc3893af73e93b4330a319d9732ab75a7c
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:19 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit da483ce40f8df2ee3fa1f1b6b77850d68feaf9a5
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 02:38:35 2009 +0100

    Include parser_helpers.h and link with libkcore

commit 32905ec8380ec1a15892a9ed3ac081405306423a
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:42 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 5a2f293d28ca18ca188b3762e26ca2e44b6eaa1b
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:19 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 9846af525a6f6ae99f50497cff7256e65f8aa345
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:19 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 47eadf76d459a3c3e691693377b2ef84bf3157b8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 28 15:32:09 2009 +0100

    Get rid of FL_USE_UAC_* flags. They are not needed in sr
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 6d4370b81bf2bde7d1cf4ead3c57525c78061fc4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 28 15:30:20 2009 +0100

    Rename t_get_picked to t_get_picked_branch
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit e9963d4774e49bcae9bdea5b3c5b70a25a51f19c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 28 15:22:43 2009 +0100

    Update t_request parameters for the sip-router tm module version
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit dc262c7081539ea6e34649f9ad8af1029547b6f6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 28 15:13:48 2009 +0100

    Replace core_hash with get_hash1_raw
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit c941546e4f641a027333bad928dc945d6b115c67
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:22 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit 987aa26e959f715233d17a5ae1209b85b48deff1
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:19 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 81fdba56dd3d448406e2adc387c6ccaf8ffce6c0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 27 09:31:43 2009 +0100

    Elements sval and ival of structure fparam have different names in sr
    
    In the sr core the element sval has been renamed to str and the element ival
    has been renamed to i.
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 2da35f91b264a86a6c84878551887c9a26abaef8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 27 09:22:36 2009 +0100

    Adding function fixup_regexpNL_non
    
    This is a function which was originally defined in the kamailio core,
    but because this is the only module using it, we add it here instead
    of the sr core.
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit f2d2a93db68a29e113c08d6b75218c716515cf51
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 27 09:19:34 2009 +0100

    Use sip-router style of calling do_action.
    
    Before calling do_action function from the sip router core, one has to
    first create and initialize a context variable of type run_act_ctx.
    Pointer to this variable is then passed as the first parameter to
    do_action.
    
    Also, attribute 'elem' in 'action' structure was renamed to
    'val in ser.
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 6c472161df218fe41f5a15e88f259de9a5cb0bf8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 27 09:16:54 2009 +0100

    Use the privacy header parser from libkcore
    
    In the sr tree the privacy header field name parser is stored in
    libkcore.
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 19d1d5833e50a28938a7bf47d24020aa11b7e062
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:21 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit 66c4394d4594199400edd63cf0a8514bc20cda45
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:18 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 2ce28b9439fbe4f9a8438013a9abf46bbd6da6bd
Author: Jan Janak <jan@iptel.org>
Date:   Wed Mar 11 00:37:41 2009 +0100

    Update module to use statistics from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the statistics related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to statistics.h to point to the header in the shared
       library.

commit 02330391d23be8c05a475f45aa15827a3701eede
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:18 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit d5480c4fc73916a01d639b942fbca0d52ba7cdf7
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 29 22:09:04 2009 +0200

    Include "sst" and "supported" parsers from libkcore and link with it

commit 1a15155ea86847c636d5ff5da68ed1a4eef11b5b
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 5 22:43:18 2009 +0100

    Include lvalue.h which defines EQ_T in sip-router

commit b7bdcaf67bb57fb3d58fa43de46a5da313ac33cd
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:14 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 1eab6be2dbbd7a2a7792737d16bfdc26724d22c2
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:18 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 0ba5903f9007b371f5e0cc8628c5cd59da290ad7
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 18:23:12 2009 +0100

    Update module to use hash_func.h from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore (if not yet done)
       which contains all the stuff that was present in kamailio core and
       is missing from the sip-router core.
     * it fixes the path to hash_func.h to point to the header in the shared
       library.

commit c61f46045aaf179044a5bcbe73e30b4299bee641
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 17:43:32 2009 +0100

    Rename ival attribute in gparam structure to just 'i'

commit c00d1faa63f7c40d482b6e0022ecf2b9a0397983
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:42 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 5f77716f4a1bd35bf05a91d796d04176417b9ad1
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:18 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 79b27a794cbfcf83d406d112f17511b2f3c7c2eb
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 14:35:58 2009 +0100

    Include parser_helpers from libkcore and link with libkcore

commit 0f36369aefce82e1cb148bde4fe0a2b1fd6abfe0
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 14:34:05 2009 +0100

    Use sip-router style of calling do_action.
    
    Before calling do_action function from the sip router core, one has to
    first create and initialize a context variable of type run_act_ctx.
    Pointer to this variable is then passed as the first parameter to
    do_action.
    
    Also, it is safer to zero the whole 'action' structure using a memset
    than setting all its attributes explicitly, you never know when
    somebody adds a new attribute to the structure and then it might be
    used unitialized.
    
    Finally, attribute 'elem' in 'action' structure was renamed to
    'val in ser.

commit 0b4cc6b67029ca4b9c8c98ec86c95f22adccefd8
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:41 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit af1a43f1d1e3007238b7c2e8d69984f63608543e
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:18 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 2202682e876104e374a5d9e40db5a7081db44ff8
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 27 13:16:52 2009 +0100

    Update module to use statistics from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the statistics related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to statistics.h to point to the header in the shared
       library.

commit b1dfcaa321c425d14d38c4986c371ec0b3004e42
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 27 13:11:05 2009 +0100

    Define OPENSER_OID and include the header where needed.
    
    Kamailio defined OPENSER_OID macro in config.h in the toplevel directory,
    we do not have OPENSER_OID defined there and we agreed that it would be
    better if we define the macro in the module, because snmpstats is the
    only module using the macro.
    
    Patch provided by Ovidiu Sas

commit cffc08a95d48dc94a81a2c8f396eddc7e168ff10
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 27 13:03:11 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 011116085a3ecf58db17e43361cafd4f189fb7a3
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 15:05:09 2009 +0100

    Switch to sip-router t_request calling convention

commit 37370ff464f5b303da04928651fa089ebf372274
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 15:04:54 2009 +0100

    Include libkcore/km_ut.h and link with libkcore

commit 8e7c8ff6f9779787bac84ebef518c7a3e1f03b6f
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:17 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit f3e7d4eeb2283114b80af6502b4f3b9e5cb64941
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 27 08:16:03 2009 +0100

    Switch to the sr convention of calling msg_send
    
    Function msg_send in the sr core accepts several parameters packed in
    a single dest_info parameter.
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit fe27ea11d57942d60d96c4acec35a55b0ebeca9c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 27 08:13:32 2009 +0100

    Make a zero-terminated copy of the reason text where necessary
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit ad9e0383c1a1d4774f963e2a2fc580a055f3c72c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 25 23:46:08 2009 +0100

    Update to the sr calling convention of update_sock-struct_from_via

commit 38b8ad246b6c0e570a8d34a0198e31063e59233b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 25 23:42:48 2009 +0100

    Include missing parse_to.h header file.

commit eece66cd76b9475f636a3f8adc48428b347ce37c
Author: Jan Janak <jan@iptel.org>
Date:   Wed Mar 11 00:37:40 2009 +0100

    Update module to use statistics from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the statistics related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to statistics.h to point to the header in the shared
       library.

commit 49f86bf7ae1a26ba5ab332dd9c39031e1f69a665
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:17 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit a53d3c1b711f5c09e28bcbfcfd024cf4ed257a91
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 12 16:11:47 2009 +0100

    Include km_ut.h and parser_helpers.h from libkcore

commit d025e721f7e7da76d226e7f95ba280576ef2ce5b
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:21 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit 82622ad3cedddc98ce56e86a5ab4504573b34403
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:41 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 8097e0bf29bd1121b7a04bc452fedf3d18d7cc30
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:17 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit c4b6e4b780ff0611aab1dbd2dceeee6b842d93fc
Author: Jan Janak <jan@iptel.org>
Date:   Wed Mar 11 00:37:39 2009 +0100

    Update module to use statistics from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the statistics related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to statistics.h to point to the header in the shared
       library.

commit db0126bca6e354dd50de8da309c6794383eaf45d
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:40 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 2bf690558978023d0bf411f17199bc19c88899d9
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:13 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit a29e5526e81b0665fac3b9e6c782faad8cd6978f
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:17 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 1f25e5083d8e2a5a33b42897e52e6b6aaccb8a26
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 23 13:43:29 2009 +0100

    Include parse_to.h header explicitly
    
    We recently changed header file mss_parser.h in the sr core and it does
    not include parse_to.h anymore, thus all modules that need the to
    parser need to include the to header parser explicitly.

commit 8152dff5fa550824353fae33301b325e4feecdd3
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 23 13:41:09 2009 +0100

    Use next_sibling_hdr to obtain the next header with same type

commit 0bb8e7284d253397d1128a47bbbac85672a922a3
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 18:23:11 2009 +0100

    Update module to use hash_func.h from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore (if not yet done)
       which contains all the stuff that was present in kamailio core and
       is missing from the sip-router core.
     * it fixes the path to hash_func.h to point to the header in the shared
       library.

commit 6af1739019556ad3b4b7d512d54f0d9ea855e53f
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:17 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit a348581e9aaf8ae1b8bce60a24edc7246fc5968d
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 02:34:28 2009 +0100

    Include parse_to.h explicitly.
    
    Previously including msg_parser.h was enough, but after a recent
    change in the core parsers it is necessary to include parse_to.h
    explicitly if the module needs to access the To parser.

commit 00232718780b365130535cbd8085095e33441984
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 02:33:50 2009 +0100

    Remove definition of q_memchr which is already in sip-router core

commit 97baf65122e04633313fbe4fa7551a824ae0cc34
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:17 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 39c1b57ac2e1943cd770bb6dda51b583b2612d2a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 29 21:03:12 2009 +0200

    Rename rlist to main_rt.rlist to match the sr core
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit a978840aef9da939b0ed7f40d0d203080b858c88
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 29 21:01:42 2009 +0200

    Switch to the sr way of registering timer processes
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 53a53d688c635444c57ae3c6fbc93f63fb3094a8
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:17 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 19395739d15a325c65034e835bc266d7e0325280
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 17:29:47 2009 +0100

    Comment out is_2rr
    
    The function is_2rr is already defined in the record route header
    parser in sip-router core

commit 64da097ba775c95b589b4b45f8c9dc7b89e8e094
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 17:29:18 2009 +0100

    Remove definition of ROUTE_PREFIX.
    
    ROUTE_PREFIX and ROUTE_PREFIX_LEN are already defined in file config.h
    in the sip-router core.

commit c01fa558a8a6d884f857d86d1342b002a470bac0
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:16 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 8c64d661b520b208c108d05cd816a158ee20a2be
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 23 13:38:50 2009 +0100

    Use next_sibling_hdr to obtain next header with the same type

commit 5c7f8f719166e31d8d60f4d1270c677acd37d6ec
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 22:51:57 2009 +0100

    Update to the new event parser in the sip-router core.
    
    List of changes:
     * Variable parsed in the event structure has been renamed to type
     * Linked list of parameters is now in event->params.list

commit d367d1d5e30e88712a77d08520f7e7a5701c9bd0
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 22:38:23 2009 +0100

    Switch to the sr convention of calling parse_phostport
    
    The sr version of parse_phostport accepts the socket
    info string as zero-terminated string, thus we need
    to create a temporary zero-terminated copy using
    as_asciiz.

commit 7a154b1d0aeda6d713b309cb1e3059f32ed076c5
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 22:32:25 2009 +0100

    Switch to the sr convention of calling t_request_within

commit deb548796e6d5465878ec5613d67c86ed4fa361e
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 15:09:51 2009 +0100

    Include libkcore/hash_func.h

commit 1e98ebf8dfa3e789a040ea150c810bfde79f88ae
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 15:07:27 2009 +0100

    Replace SYSBASE with /usr
    
    SYSBASE is not defined in sip-router Makefile system

commit e9b29c657ce10853d05a57271dd419e19a63d750
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:20 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit e13ee50503837b3923b0591df074fd4867faea6d
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:39 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 723ef5b1c2fbbf230282bf8c8222d88d79ba1820
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:16 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 97476f945ed6ec15fbbfd268ee23374cde4666b6
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:43:51 2009 +0200

    Update the sr version of parse_phostport
    
    In the sr core the function takes the string to be parsed as a zero
    terminated string

commit 0c3cfb52ccfe021d8be1720023978d3a9ef943f3
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:43:33 2009 +0200

    Comment out force_tcp_conn_lifetime
    
    The function does not exist in the sr core and it is a question whether
    it is really needed whether is should be added to the sr core

commit 9ce3389b90bcf6de4703902ae5b81223e616fce4
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:42:45 2009 +0200

    Include parse_to.h header explicitly
    
    In the sr core this header is not automatically included in
    msg_parser.h

commit 3b6bb0b81a241525dc21613e456bad0966a16c39
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:41:10 2009 +0200

    Swith to the sr version of branch flags api.
    
    The function getb0flags does not exist in the sr core, it is not
    needed, because it can be replaced by getbflags with index 0
    
    Also, setbflag has been replaced with setblflagsval, because
    that's the function which sets all flags at once.

commit 6e2a49d62364c1df0430d05d604ea90ef1cd92ac
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:39:17 2009 +0200

    Switch append_branch to km_append_branch

commit 3fd1b38506070a41c606d9edf6ad7403a062e84e
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:38:58 2009 +0200

    Include parse_supported.h from libkcore

commit f8d814e73aed75fe9eea61bc40004819a3533bba
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:38:13 2009 +0200

    Use next_sibling_hdr to obtain the next header with same type

commit 31305684d1043976bf00947d8e3a007b83780eec
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:37:41 2009 +0200

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit 209627f556a8a7941c9788b3cbba1c1bdd1fb537
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 31 03:37:08 2009 +0200

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit cef1c51c0eed8dca8162753eb17f178ce516df23
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:13 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 20efc4fa1029b654d8f136e3d8c4eee097fc70c5
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 23 19:42:31 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 4775e2d760f0f20a4379d78290927b39b5bbcb97
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 27 09:51:31 2009 +0100

    Include statistics.h from libkcore

commit bc48065926b27040fab933ff55d4ca3a1d788b41
Author: Jan Janak <jan@iptel.org>
Date:   Sat Mar 14 17:08:00 2009 +0100

    Convert kamailio process timer to a fast timer in sip-router.
    
    The timer function in ratelimit module is simple and thus can be
    executed withint the fast timer process in sip-router.
    
    Patch provided by Ovidiu Sas, slightly modified by Jan Janak.

commit 79e63a39e200ba185d6ec92dcf5d84bba75e4bf7
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 13 14:09:20 2009 +0100

    Include the MI header from libkmi and link with the library.
    
    The ratelimit module exports some functions through the MI interface
    and thus we need to include the header file and link with the library.

commit 2c317febce010a83caf82ee41809bc97e8142bd9
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 10 14:09:32 2009 +0100

    Include km_ut.h for k. specific functions and link with libkcore

commit f116b5c1b5d29b31806d8122dca6f4efba37008a
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:16 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit e241e2e93e2fa843a1c2aa66e17d7f95420d1388
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 24 22:31:03 2009 +0100

    Change msg->sdp to msg->body and cast it
    
    In the sr core we have a more generic msg->body variable which contains
    a pointer to the parsed body document and this pointer needs to be
    cast to sdp_info_t here.

commit 45df5c0f2d7c3d936019bb4925df006db7b52325
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 24 22:30:17 2009 +0100

    Include parser/sdp/sdp.h explicitly.
    
    In the sr core this header field is not included in msg_parser.h and
    therefore it needs to be included explicitly

commit 2fe787d60a14c52dd907b6ea4644451f6b10a3fd
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:12 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 9f0c2f7dc80402d6bb691990dad5a2bd974f0e69
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:16 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 903862dd3ed9e63c8df3450bfccfef31b2b77ba4
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 19 14:50:28 2009 +0100

    Use _last_returned_code temporarily.
    
    This is a temporary solution until the sr code an equivalent of k.
    ret_code global variable. After that this patch can be removed.

commit fb0417075c4f376a4ad53ee837d10e7e7a2b03db
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 15:00:54 2009 +0100

    Convert to sip-router convetion of setting/getting all branchflags.
    
    The sip-router core does not contain setb0flags and getb0flags functions,
    instead we have more generic setbflagsval and getbflags where you can
    also select the branch.

commit 890a449a9abada6cf7bf49e8e7866cff2fd34189
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 02:54:15 2009 +0100

    Switch to sip-router calling convetion of parse_avp_spec

commit 359a28bf4c2d285381f447a67a8cdcf3092097b1
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 02:52:44 2009 +0100

    Rename destroy_to to free_to_params.
    
    We do not  have the function destroy_to in sip-router, but we have
    free_to_params which does the same thing. In my opinion the name
    free_to_param describes better what the function does.

commit 54c9ba0f8507808c8f84816f6d6d7aa5fadbc005
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 02:50:14 2009 +0100

    Switch to sip-router parse_phostport calling convention

commit 56975410d31c936d0186c4a10e606fc8c10178ed
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 02:41:40 2009 +0100

    Add missing parse_to.h header file.

commit d4203fc140d86b8a4aa68e5565a6b618b781492d
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 02:40:26 2009 +0100

    The kamailio version of append_branch is called km_append_branch

commit e73fbdf49aa77aa796a96c865fe6a6360816f0ae
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 02:23:40 2009 +0100

    Replace COLONEQ_T (kamailio) with ASSIGN_T (sip-router)

commit 42ed00f87e4aaad39fa53c574469c7f9936a3492
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 02:22:22 2009 +0100

    Convert to sip-router calling convetion of search_{first,next}_avp.
    
    In the sip-router core we keep the search state in an opaque data
    structure called search_state, which is passed to search_first_avp and
    search_next_avp as one of the parameters.

commit 04025671bf647f7ad6612a3afa9ff6001e7a3013
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 02:12:23 2009 +0100

    Replace an occurrence of do_action with reset_dst_branch

commit e7ae6010497d7b78ced7f66fa142c408129de528
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 02:07:02 2009 +0100

    Use sip-router style of calling do_action.
    
    Before calling do_action function from the sip router core, one has to
    first create and initialize a context variable of type run_act_ctx.
    Pointer to this variable is then passed as the first parameter to
    do_action.
    
    Also, attribute 'elem' in 'action' structure was renamed to
    'val in ser.

commit 6518429404d896c1f2c6852b9b0ad31b87e448ea
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 01:46:46 2009 +0100

    Update calls to diversion_param.
    
    We renamed diversion_param to get_diversion_param in sip-router core
    and changed the type of the second parameter from str to str*.

commit affe7aa66c4842f4c5752a658a7e787a03069398
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 01:41:52 2009 +0100

    Include libkcore/parser_helpers.h for parse_{to,from}_uri

commit a1125074364906e96c320676cc95cdd6abc213d1
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 01:17:50 2009 +0100

    Update path to headers that are part of libkcore
    
    That includes the following headers:
     * errinfo.h
     * parse_pai.h
     * parse_ppi.h

commit 51e2637527fc7e5d0e8ff22b84f2329e47bdfe95
Author: Jan Janak <jan@iptel.org>
Date:   Wed Mar 11 00:37:38 2009 +0100

    Update module to use statistics from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the statistics related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to statistics.h to point to the header in the shared
       library.

commit 2e7e077e47231d86535c41644301bea40a9fbc59
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 17:14:49 2009 +0100

    Update module to use strcommon files from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore which contains
       strcommon files that were originally present in kamailio core and
       are missing from the sip-router core.
     * it fixes the path to strcommon.h to point to the header in the shared
       library.

commit b5007a41aeed6b2632ee3329f871fe8e214cc75e
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:19 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit 8db66e364a56bf90cf7cd9d434a621eef6080cc0
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:12 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 171a0ec6338319e58e0c577cd4c43cc282f0a6ae
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:15 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit bb0aef70dff9529b5272b547e614b67042f89d06
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 14:30:37 2009 +0100

    Switch to sip-router convetion of calling t_request

commit 36ea0a364760771abf4074eb64d3ef68cb80f26b
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:38 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit e47980262ef9ffde359785f1ec27177a37612c76
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:15 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 61d70ce408febb5e86b25a6901b5b1da38a7adb9
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:19 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit 9858d802bc4338053f50c63e2caec9667e60d588
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:15 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 1b02b21d4546290e64f0cef279f102e422183865
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 02:30:59 2009 +0100

    Replace SYSBASE with /usr
    
    SYSBASE is not defined in sip-router makefile system

commit 9be6e61e5455f289146ea5665c3f67415db0db8d
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:15 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 39dd874e96b74f16065ade84d9051ea20daf5969
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:19 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit 1d55e9ef8ee8b751b23acb93c31d8687c9136b62
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:12 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit a8adb0f3bb235bdb702669398ce6b9ecaead709a
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:15 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 14da6770cf4a65247582118b6bd91d97c93a3e6b
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 02:28:36 2009 +0100

    Include parse_to.h
    
    Including parse_to.h explicitly wasn't needed until recently because
    the header was include by msg_parser.h, but we chagned this and now
    all files need to include parse_to.h explicitly if needed.

commit ffc7003929f7a7ad0d66120fa7cadf22d46514f2
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 02:27:43 2009 +0100

    Replace SYSBASE with /usr
    
    SYSBASE is not defined in sip-router makefile system

commit d2cdb476b933a3998ca7cb4dc7e4a331b84d0895
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:15 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit c16ba105bd7e3277351c48341b27492c56f6f116
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:18 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit 7b9480270f6fbab6f870947c14fccff67bf8e832
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:14 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 7b371388f73610a2dd19102b86beb8682fe62ee5
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 02:25:50 2009 +0100

    Add missing headers from libkcore

commit 9c1a576d65cac0e278ef3fe35e91b76032d729b7
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 02:04:48 2009 +0100

    Switch to sip-router calling convention of t_request and friends

commit 52a951784b6a67a728db9bea2cf2e9af211ea294
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 02:03:02 2009 +0100

    Replace SYSBASE with /usr
    
    SYSBASE is not defined in sip-router makefile system.

commit f19a7a267363e25598c2f9ccab031c375b54832c
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 18:23:10 2009 +0100

    Update module to use hash_func.h from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore (if not yet done)
       which contains all the stuff that was present in kamailio core and
       is missing from the sip-router core.
     * it fixes the path to hash_func.h to point to the header in the shared
       library.

commit b2d1f930eeeab05dfe98d44e4d4efe6498a9a0df
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:18 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit 0ad45466cf390c13b7e54ae2fe43b1242226a6cf
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:37 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 3267e9f5181e7b03c6260853f8f82eb59a3074e6
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:14 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 14103994abec70ca2ca572a424105718d7c998b0
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 01:40:39 2009 +0100

    Replace SYSBASE with /usr
    
    SYSBASE is not defined in the sip-router makefile system.

commit ee9ce005f5c6ff172114d8d9b58e080b7b7e0a63
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:36 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 9c81e1dbd8c0305687dce45b3bfc1b5debecd0ab
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:14 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit ff615166e6ed44cad81b35c583dfdac3730213af
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:14 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit d44808c615ad504f93c85f52e5cd7d5ca40f4388
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 01:38:32 2009 +0100

    Replace SYSBASE with /usr
    
    SYSBASE is not defined in the sip-router makefile system.

commit c276364e063ef5ea1b478981652b53a6e50ecdc3
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:14 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 11d2d4e2c1bdfeb7512abd30f688777757efc18c
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 23 13:57:51 2009 +0100

    Include parser_helpers.h for print_rr_body

commit b98dfaa71465ed7af12a09a350dba3b848f49762
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 21:23:04 2009 +0100

    Switch to the sr convention of calling t_request_within

commit 9f6e354b0b9326960750d55fb594d3c5cf9a5239
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 19:23:54 2009 +0100

    Update to the sr calling convetion of parse_phostport
    
    We need to create a zero-terminated copy of the input string using
    as_asciiz before passing the string to parse_phostport

commit a0cc7580f9096b6eddc369b38ce52383d5e4ed36
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 19:12:38 2009 +0100

    Copy parameter hooks into the shm mem copy of the event structure.
    
    When copying an event structure into the shared memory, update also
    the value of dialog event parameter hooks and make them point to
    the parameters duplicated in shared memory. This is needed so that
    the macro EVENT_DIALOG_SLA can still be used on the shared memory copy
    of the event (the macro tests if the sla parameter hooks is not NULL).

commit 2a4c47b14a6057b03a0b278d57cfcbc35e24e4e0
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 18:46:13 2009 +0100

    Update to the new event parser in the sip-router core.
    
    List of changes:
     * Variable parsed in the event structure has been renamed to type
     * Variable text in the event structure has been renamed to name
     * Linked list of parameters is now in event->params.list
     * There is a new macro EVENT_DIALOG_SLA in util_func.h
     * Use macro EVENT_DIALOG_SLA to if the Event header contains
       "dialog;sla"

commit f3906eecfee82cc569c59985964eec5b943ee2bc
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 10:47:51 2009 +0100

    Add missing libkcore/hash_func.h headers

commit 6578264dcac666eacb23af77876c81a28d1d5c73
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 10:44:17 2009 +0100

    Include missing parse_param. header field.

commit b145495b7d0df129725d70f45c39b29983c7badd
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 10:44:00 2009 +0100

    Replace SYSBASE with /usr
    
    We do not have SYSBASE defined in the sr makefile system.

commit e7203317d57843bd607dfa70597a234ff11fda20
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 18:23:09 2009 +0100

    Update module to use hash_func.h from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore (if not yet done)
       which contains all the stuff that was present in kamailio core and
       is missing from the sip-router core.
     * it fixes the path to hash_func.h to point to the header in the shared
       library.

commit 08fab93b7138e4759638f9c0562070ffdf46feb6
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:18 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit e1615a19efb937f4e12030e600fd132f0ef0c8a9
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:35 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 2c5fc0e7397fc92c8abab23b8e97760b00678b06
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:11 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 6e17cc8cb5b9f6f08e2d801689fa49728c114c27
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:14 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 431abd50506ea9b72434e5f7f7e918b79c5eaedc
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:10 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit e17875dcd8b58900da640369e188aa3c112425b2
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:14 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit f22996498b3afa3716fa2c0ea221df381d6009f4
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 18:23:09 2009 +0100

    Update module to use hash_func.h from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore (if not yet done)
       which contains all the stuff that was present in kamailio core and
       is missing from the sip-router core.
     * it fixes the path to hash_func.h to point to the header in the shared
       library.

commit 0f39871a34bd3fd0856ff2cb116ec7ea1bb1c239
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:34 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit a59c89eef2498b5a19718cc3ef7e2ead5fe47ec1
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:10 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit e7138edd44cf25e3c9e2842896fd6e9b81bf583b
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:13 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 73b68de154b2a8427853b74c2b79e42bc42d3408
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:34 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 167ba127ff406f61180c7748e59766e28fc093a4
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:13 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit c67ec4344126cc7ff6bf72056fe9c89247ba0f53
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 16:36:28 2009 +0100

    Convert to the module interface in the sr core.
    
    Changes include:
     * Replace cmd_export_t with union cmd_export_u, this is a new union
       in sr core which contains versions of cmd_export_t from both
       projects.
     * Convert find_cmd_export_t from kamailio to find_export_record in sr,
       This function returns the union mentioned in the previous bullet and
       also the version of the interface it found. We are only interested
       in version 1 functions (from kamailio) and report an error if we
       the function found is version 0 (ser).
     * Replace CMD_ST with MODULE_T
     * Pointers to fixup functions are now in cmd->export_u->v1.fixup
    
    We could probably easily extend the patch to support v0 functions from
    SER, but this is not yet done and can be done in the future if needed.

commit 9a8a0709002fe7ac87d7f1895625d7fce28dd9bb
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 16:07:09 2009 +0100

    Use sip-router style of calling do_action.
    
    Before calling do_action function from the sip router core, one has to
    first create and initialize a context variable of type run_act_ctx.
    Pointer to this variable is then passed as the first parameter to
    do_action.
    
    Also, attribute 'elem' in 'action' structure was renamed to
    'val in ser.

commit d5ea9c62f7f6ff27e381bde32cd2b5409953788e
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 15:49:50 2009 +0100

    Fix perl compilation problem.
    
    Adding the output of the perl subcommand enclosed in `` causes the value
    of saved DEFS to be different than the value in the makefile and this
    results in a never-ending compilation loop. Instead of that we save the
    output of the perl subcommand in PERLCCOPTS and then add the value of
    PERLCCOPTS to DEFS.
    
    Suggested by Andrei.

commit 9bd0acde64ade57b7261e0e371a90a29c0b7db8b
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:12:10 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 486e14ad1e288ba8a87f4b8d1b45d7b334c9eeaa
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:13 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 4609a0e8e4831c339a7e63560f7385e50e449b7b
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 16:34:17 2009 +0100

    Update module to use cmpapi files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       files cmpapi.[ch] originally present in kamailio core and missing in
       the sip-router core.
     * it fixes the path to cmpapi.h to point to the header in the shared
       library.

commit d208865837d711e1ab637ee9dffec1f83964ed44
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:50:59 2009 +0100

    Update module to use radius files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the radius related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to radius.h to point to the header in the shared
       library.

commit 2b0cca79120f3b68767316b0783945de0569c1ca
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:13 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit ec511ab5c89778a4fdaad650435d41a23ec49393
Author: Henning Westerholt <henning.westerholt@1und1.de>
Date:   Wed Apr 8 14:21:57 2009 +0200

    Make use of libkmi shared library.
    
    The pdt module exports some functions through the management interface
    and we thus need to link with the shared library libkmi and include
    header file libkmi/mi.h in pdt.c
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 507670760fd1e3e99cd4d66d8e66177855652b19
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 01:32:57 2009 +0100

    Use sip-router style of calling do_action.
    
    Before calling do_action function from the sip router core, one has to
    first create and initialize a context variable of type run_act_ctx.
    Pointer to this variable is then passed as the first parameter to
    do_action.
    
    Also, it is safer to zero the whole 'action' structure using a memset
    than setting all its attributes explicitly, you never know when
    somebody adds a new attribute to the structure and then it might be
    used unitialized.
    
    Finally, attribute 'elem' in 'action' structure was renamed to
    'val in ser.

commit d65fb7dc35b25f5ab89ef3611e58386e54c96b2e
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:33 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 8c7accc426319082e1b1b208be45428ef62424f1
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:13 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 92ffa4b85c67d7f27ca2e10c2c908ac08e5e6b7a
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:13 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 89fbff760d765c43aa12e9f1d3b04eb674976625
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 29 21:30:51 2009 +0200

    Update to the tm version present in the sip-router tree
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit c1db21a852f7740c33a8c4cc8b0ed5e17c280f12
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 29 21:30:08 2009 +0200

    Use km_append_branch instead of append_branch.
    
    Function km_append_branch is the kamailio compatibility function which
    is included in the sr core
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit ceebbfb54ab7a3c90ce11d0e1a0cdff527ec41d0
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 29 21:28:14 2009 +0200

    Switch to the sr way of calling search_{first,next}_avp
    
    This takes creating a new search_state structure and passing that
    structure to both search_first_avp and search_next_avp.

commit cf4a3dda4a7f5c0ddb615b12094687ec23fb7d5a
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 29 21:21:42 2009 +0200

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 4a261f723ce079b13284557ab183da6aebe31495
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 23 13:33:10 2009 +0100

    Use next_sibling_hdr to obtain the next header with same type

commit e578b030d73d5d43b4acfbcf9a39cb9e2115d717
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:12 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 1dfc1ac14abf7c4ce32e4c1567046f6022610ff6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 15 13:06:59 2009 +0200

    Include libkcore/parser_helpers to pull get_path_dst_uri
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit f5c34e79e52811286390379b740de077fa8f830e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 15 13:06:30 2009 +0200

    Switch to sr way of calling hostent2su
    
    In the sr core the function uses a dest_info variable to store the
    result, also we need to update subsequent calls to udp_send and
    send_raw.
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 6ecf15138d595cdfc37616ea5be78a9b65ffdf3f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 15 13:05:59 2009 +0200

    Switch to the sr way of registering timer processes
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit b1494d819b709bd9becb2654e291ad78b304c91c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 15 13:03:42 2009 +0200

    Update sip_resolvehost parameters to match the function in the sr core
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 03654895e867d2a93bfc022135bf9c4aac61f26b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 15 13:03:14 2009 +0200

    Update parameters to parse_phostport to match the function in sr core
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 2d925f2ab57492a7c3f84d54765bdc5238e5da60
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 13:02:14 2009 +0200

    Include km_ut.h from libkcore and link with libkcore

commit e2ec51f31dc584485215b538f0f99dc17b53eaae
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 13:01:54 2009 +0200

    Change MI header paths to point to libkmi and link with libkmi

commit 99e9a858191648e98574d0b7115b925523799c67
Author: Jan Janak <jan@iptel.org>
Date:   Wed Apr 15 13:01:17 2009 +0200

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 5b2cd5eac213956c368179c0f4d926643c7e5b40
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 20 16:27:10 2009 +0100

    Switch the calling convention of t_request to the sr version.
    
    The tm module in the sip-router tree comes from ser and functions like
    t_request have different parameters.
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 3b3110bfc71c0ff5476923e8c716a652a088eea8
Author: Jan Janak <jan@iptel.org>
Date:   Wed Mar 11 00:37:36 2009 +0100

    Update module to use statistics from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the statistics related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to statistics.h to point to the header in the shared
       library.

commit 31fe463de4d53f59d8885eec5cea0c9f24e00913
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:32 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 26b2e5e5f758a15ace50f53af36efc1d22f51c50
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:12 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 8c126cce6a2f862db3ea13f481fe9082ad110030
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:11:54 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 4952ec4bc7ff41df5699d53ce9193b05f6c1c890
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:12 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit af59c47fe7d7488da4cb84c06329de4db600998c
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:50:58 2009 +0100

    Update module to use radius files from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the radius related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to radius.h to point to the header in the shared
       library.

commit 989c634c376459f4d65e9f547d188b673a5647e7
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:12 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit a0914f50cf0c2ae6d8efbc30823e785e0ae3c53d
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:11:53 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 091c549417c38f1a1ef02bea3b5afa72be6a7057
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:11 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit d4121caa7e89015054cf67983868b3d51f0f5952
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 01:21:05 2009 +0100

    Remove 2nd parameter of resolvehost
    
    In kamailio the second parameter of resolvehost was used to disable
    the check whether the string being resolved contains an ip address,
    there is no such parameter in sip router core and this module did
    not disable the check anyway.

commit 3022de989a532d69d903f910d2f56811ac6eb153
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:11:53 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 64af9c0baaa229b772fecf5a7fec747eebc5bb39
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:11 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 38d76d266b2bd57a127616b5aaa35696fa4be253
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 12 16:06:44 2009 +0100

    Define OPENSER_MOD_INTERFACE in the makefile

commit adc44692fb95a88c52bcaabf80cd954c1ddb3ef7
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 10 23:39:50 2009 +0100

    Define DP_WARN_... locally in the file.
    
    The DP_ family of macros was originally defined in kamailio/dprint.h, however no other
    module is using the macros.

commit 9ae5527c5c039d17d5d6e95e319c0b2086435d51
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 01:16:22 2009 +0100

    Swith to sip-router style of calling find_param_export
    
    The prototype of the function was changed due to the merge of ser
    and kamailio module interfaces

commit d7e9ce04759c5b4720bea495db8559455d068980
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 01:11:22 2009 +0100

    keep FL_USE_MEDIA_PROXY local if it is only used here

commit 150dc368d27ee720a3373ed61196e6da17b625eb
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:11 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 19e85c5853b88ab8629ea06658a14c15b8db79bc
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 17:25:44 2009 +0100

    Delete btostr function which is already defined in ut.h

commit e90d72eed7a7c98311155a9ac8805e76d728df14
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:11 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 3852ab517b7905372663cc3d510e14fef48ae3df
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:11 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit e6a66ab5fbe3a64837c5fc8fa9522c44c4220dc4
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 05:13:38 2009 +0100

    Switch to sip-router t_request calling convention.

commit bb8fee24f5c11aa47b55d1dd164b12a30a37a905
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 05:13:18 2009 +0100

    Use sip-router style of calling do_action.
    
    Before calling do_action function from the sip router core, one has to
    first create and initialize a context variable of type run_act_ctx.
    Pointer to this variable is then passed as the first parameter to
    do_action.
    
    Also, it is safer to zero the whole 'action' structure using a memset
    than setting all its attributes explicitly, you never know when
    somebody adds a new attribute to the structure and then it might be
    used unitialized.
    
    Finally, attribute 'elem' in 'action' structure was renamed to
    'val in ser.

commit fad9c2f4f985e69195c6d5f80debe8b0db02237c
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 05:12:37 2009 +0100

    Use set_dst_uri instead of do_action with SET_DSTURI_T type.

commit 38c20101f8c650b208084ae08d6687a74ef88d68
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 04:58:32 2009 +0100

    Include kcore/hash_func.h

commit 03e5293070877956526b08e0ed492d3b584575e9
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 04:53:29 2009 +0100

    Include kcore/km_ut.h and link with the shared library.
    
    Header file km_ut.h is needed for append_str and append_chr.

commit 1e11bc13a6775793700bcc966885205b004f464e
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:31 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 160ac8c8c8a844804f1945470d5d237319339f7d
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:11:52 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit db6128dfa525362d3a025769fb20ab060b60f995
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 23 19:38:32 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit ed358e61af749b18bf93617efc7fef30558bb111
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 00:58:36 2009 +0100

    Swith to sip-router style of calling t_request

commit 23c5eae66d753b7c5c6ed08dbc0ef1a443145057
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:31 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit c1f673ca2f493d3b941751fcf18ffdb15e7aa422
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:10 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit ef6f5ad2329a2f7fff697a1b71b369e83a3fe3a2
Author: Jan Janak <jan@iptel.org>
Date:   Wed Mar 11 00:37:35 2009 +0100

    Update module to use statistics from libkcore
    
    This patch does two things:
     * It links them modules with shared library libkcore which contains
       all the statistics related stuff that was present in kamailio core and
       is missing in the sip-router core.
     * it fixes the path to statistics.h to point to the header in the shared
       library.

commit 43fb0b60093eb440fcd0922ec70acf24c262c9da
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 15:00:32 2009 +0100

    Include libkcore/hash_func.h

commit f3b3890dedb029ecc6085cfc64fdc265944815f9
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 15:00:19 2009 +0100

    Switch to sip-router t_request calling convention.

commit 040575cc503336c9e02f60ed5e4b4334bc17226f
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 18:23:06 2009 +0100

    Update module to use hash_func.h from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore (if not yet done)
       which contains all the stuff that was present in kamailio core and
       is missing from the sip-router core.
     * it fixes the path to hash_func.h to point to the header in the shared
       library.

commit 732ee944322be2428f2a2a381a9ac987ac9744ca
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:30 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 38f424cd25937c1d8b41acf95d0b0b7e7d619700
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:11:52 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 1500dfabff720a4f1eb512d330bbd8325c06df00
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:10 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit dc20909691323954a548538ac98f9e5dbc39c0d5
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 00:16:14 2009 +0100

    Switch to sip-router timer api.
    
    This removes the function register_timer_process and leaves only
    register_timer. Function register_timer_process is missing in
    sip-router and as far as I can tell, it can be replaced by
    register_timer.
    
    It also removes the associated timer_mode modparam which, provided
    that we can use register_timer instead of register_timer_process,
    should not be needed anymore.

commit 2d3d8cf121cf6b020eadbc07f2508dff9c5206fc
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 18:23:06 2009 +0100

    Update module to use hash_func.h from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore (if not yet done)
       which contains all the stuff that was present in kamailio core and
       is missing from the sip-router core.
     * it fixes the path to hash_func.h to point to the header in the shared
       library.

commit ef87fa0cbba9230f541431c68472a13bf5bc8f91
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:29 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 70bb5a1b0ae5bbd7603a4a9ddfb68cb552d5d7ea
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:11:51 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 18e6db3cc83a6fc3ca89f44baee6aac5b09b1e39
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:10 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit b84a5fb752fd7ffd36d98d6079759c5976161143
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:10 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 55f8d2d7487f3b932f47657847decde0b2f1d963
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 00:00:54 2009 +0100

    Include parser_helpers from libkcore and link with the library.
    
    Parser helpers in kcore contain functions parse_from_uri and
    parse_to_uri which are needed by this modules.

commit 30ba8f902614154b14b67398db56fab2c561667a
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 5 22:42:43 2009 +0100

    Include lvalue.h which defines EQ_T in sip-router

commit de95faa4fc21990c88b5eefb389a6f26dc4a1ef1
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:29 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 6fda43cc5bd7aee0f638acdf52de9004b3909be4
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:10 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit d84d84be521accb0fd8859d39f84175f2026aff6
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 5 22:57:44 2009 +0100

    Align parameters of append_branch to sip router core.
    
    The function append_branch in the sip router core takes the pointers
    and lengths of string parameters separately.

commit bf236c4a77f0464041fd95e88ab8eb6a91d86b42
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 5 22:49:52 2009 +0100

    Use sip-router style of calling do_action.
    
    Before calling do_action function from the sip router core, one has to
    first create and initialize a context variable of type run_act_ctx.
    Pointer to this variable is then passed as the first parameter to
    do_action.
    
    Also, attribute 'elem' in 'action' structure was renamed to
    'val in ser.

commit 8888678f02b60dfcf8ad2206f99ab3cab75026cc
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:10 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 29de5f845b8c56ce0e0c91eb7dd669e24260eb23
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 30 12:43:12 2009 +0200

    Switch to the sr way of calling function get_record.
    
    In the sip-router core the function takes an extra parameter.
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 6d6ed5819e7747d07d14c8f56737c9cf9fd72160
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 30 12:40:06 2009 +0200

    Swith to the sr way of calling sip_resolvehost
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit b983be7ce71836d1f0ae0cb21b127d8e23593e04
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 30 12:37:48 2009 +0200

    Include parser_helpers.h from libkcore
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 2fe8c81f03455d83ed47fdb631b3c103eb6e2996
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 30 12:35:31 2009 +0200

    Include regexp.h from libkcore and link with the library
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit d3ce3e561cb7963ea7964b79b6274997b388d4ea
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 30 12:32:29 2009 +0200

    Renamed append_branch to km_append_branch
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit d809b0aaee711c9723a2b31f121d44159135ecdd
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:10 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 95212d93a9c6b97d3d1032f89148b08b9eee2673
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 28 13:23:38 2009 +0100

    Update parameters of parse_phostport to match the function in the sr core
    
    Function parse_phostport in the src core gets the string to be parsed as a
    zero-terminated string (as opposed to the same function in the kamailio core
    which does not require a zero terminated string).
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 0938e300e0a7a65cbf1e55d57f02f1db9280d7dd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 28 13:19:01 2009 +0100

    Update get_record parameters to match function prototype in the sr core
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit d3d3892abc0cab9cb62998a6004b2d26499c6994
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 16 15:30:09 2009 +0100

    Include regexp.h from libkcore and link with the shared library.

commit 0b60b86e5f3c7eca38141ef3d5a0aa2aadb91529
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:28 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit c93f0fcf962db2b16f658fba1bf7f0f4430e1666
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:09 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 7b312ccd9b5511e3b327ac256a401fb48cb0cca6
Author: Jan Janak <jan@iptel.org>
Date:   Sat Mar 7 02:29:48 2009 +0100

    Include parse helpers from libkcore

commit defcb6c74700bbf7f60f727733938432c4e54a8f
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 18:23:05 2009 +0100

    Update module to use hash_func.h from libkcore
    
    This patch does two things:
     * It links the module with the shared library libkcore (if not yet done)
       which contains all the stuff that was present in kamailio core and
       is missing from the sip-router core.
     * it fixes the path to hash_func.h to point to the header in the shared
       library.

commit 8c1777601645bb94e1b274722b931952d75bef69
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:28 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit ab049dc9304d5cf54055ca5775d5e86183fc4e1e
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:11:51 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 015cb1f97d8d802f0b0ea270de1cadd33a7d83ec
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 13:33:09 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 2812b5563b5fa8b3221b18bd8de2d8ac6c9cdcd7
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 14:37:39 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit bf5340e19db3d6418b502ce007d48629db454144
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 17 23:12:36 2009 +0100

    Make dispatcher module compile with sip-router
    
    Removed extra parameter in resolvehost function. Patch written by
    Daniel-Constantin Mierla.

commit 76830266f2a20a1c73521e28f548d458ede4bd74
Author: Jan Janak <jan@iptel.org>
Date:   Sun Mar 8 23:54:08 2009 +0100

    use search_structure to keep state of search in search_{first,next}_avp

commit 4ac3f941417154ec326a96e52e7960cc8a4df119
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 15:15:10 2009 +0100

    Switch to sip-router calling convertion of t_request

commit f39cb549ecafc8e9195724bfdc230b0591d70c13
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 15:10:20 2009 +0100

    Switch to sip-router calling convention of append_branch

commit dfea35f66f2b3ff8f9bd7ec6b99bc10944be4450
Author: Jan Janak <jan@iptel.org>
Date:   Fri Mar 6 15:05:32 2009 +0100

    Use sip-router style of calling do_action.
    
    Before calling do_action function from the sip router core, one has to
    first create and initialize a context variable of type run_act_ctx.
    Pointer to this variable is then passed as the first parameter to
    do_action.
    
    Also, it is safer to zero the whole 'action' structure using a memset
    than setting all its attributes explicitly, you never know when
    somebody adds a new attribute to the structure and then it might be
    used unitialized.
    
    Finally, attribute 'elem' in 'action' structure was renamed to
    'val in ser.

commit 87da8778d046bd165f86934f290419b656e475ce
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 5 22:41:50 2009 +0100

    Include lvalue.h which defines EQ_T in sip-router

commit c1a50c9afa35cb9180b44627857fa420c6bef24c
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:27 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit c497c466c0fdf53f97432b52d5c4b805d3af1bae
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:11:50 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit 37742d0892eba932a134dcd72b3afc220d299193
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 14:37:38 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 5963459defe75c6db709a7e4f061d45b5340902c
Author: Jan Janak <jan@iptel.org>
Date:   Thu Mar 5 22:29:46 2009 +0100

    Include lvalue.h which defines EQ_T in sip-router.

commit 20fda06b4c0bfd9d24ed34096cc5e97e064a7edb
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:41:27 2009 +0100

    Various db api changes needed after migration to libsrdb1
    
    This patch makes the module compatible with the changes done in the
    database library of kamailio/ser when it was converted to shared library
    libsrdb1. These changes are mostly needed to avoid conflicts with the
    symbols defined in the newer version of the library libsrdb2.
    
    List of changes:
     * Rename db_con_t to db1_con_t
     * Rename db_res_t to db1_res_t
     * Rename db field type names from DB_* to DB1_*
     * Updated header paths to files in ../../lib/srdb1
     * Link with libsrdb1

commit 4dac39df8e0a8e81d75b77a091ff4cd990612a33
Author: Jan Janak <jan@iptel.org>
Date:   Tue Mar 3 15:11:50 2009 +0100

    Update module to use libkmi
    
    This patch updates the module to link with the shared library libkmi
    which contains the management interface from kamailio and fixes
    paths to headers in that library.

commit d7ee709c6db99e9a83acf502bd851e024660f678
Author: Jan Janak <jan@iptel.org>
Date:   Mon Mar 23 19:45:31 2009 +0100

    Define OPENSER_MOD_INTERFACE in Makefile.
    
    This patch adds -DOPENSER_MOD_INTERFACE to the modules Makefile, this
    is needed to make Kamailio modules compile with the sip router core.

commit 424768814b394802c823392406dfd628cd9d3b9a
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 3 14:54:53 2009 +0200

    Include libkcore/km_ut.h for strno2int

commit dfc401226d72cf0e860f42fb90c1dbf7961eef4f
Author: Daniel-Constantin Meirla <miconda@gmail.com>
Date:   Fri Apr 3 14:51:24 2009 +0200

    Updated to the sr way of calling reverse_hex2int
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 084f86b49e34509dedcf7c7c01773551d405c0bd
Author: Daniel-Constantin Meirla <miconda@gmail.com>
Date:   Fri Apr 3 14:39:38 2009 +0200

    Updated to the way how t_request_* tm functions are called in the sr
    
    Signed-off-by: Jan Janak <jan@iptel.org>

commit 346bb9e79d68398a08fcb48c4911415c73aae519
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 3 14:25:46 2009 +0200

    Include libkcore/km_ut.h for trim_spaces_lr

commit 84d234836aa5672890c6620663e2608e4d96d836
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 3 14:19:28 2009 +0200

    Renamed get_lock to lock_get and release_lock to lock_release

commit 5c7a2836ff0683fb8c4185015b03e1f03d20f94c
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 3 14:08:07 2009 +0200

    In the sr core, variable rlist is named main_rt.rlist

commit 7b92eb1a318b652456d34b802d7f53341971afd2
Author: Jan Janak <jan@iptel.org>
Date:   Fri Apr 3 14:01:54 2009 +0200

===================== 2009-03-02 Kamailio v1.5.0 released =====================

===================== 2008-08-07 Kamailio v1.4.0 released =====================

===================== 2008-12-13 OpenSER v1.3.0 released ======================

===================== 2007-03-12 OpenSER v1.2.0 released ======================

===================== 2006-07-10 OpenSER v1.1.0 released ======================

===================== 2006-02-27 OpenSER v1.0.1 released ======================

===================== 2005-10-28 OpenSER v1.0.0 released ======================

===================== 2005-06-14 OpenSER v0.9.4 released ======================

* 2005-06-14
 - Initial release of OpenSER (v0.9.4) spawned from SER branch 0.9.0
