<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" 
   "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">

<section id="auth_diameter.functions" xmlns:xi="http://www.w3.org/2001/XInclude">
    <sectioninfo>
	<revhistory>
	    <revision>
		<revnumber>$Revision$</revnumber>
		<date>$Date$</date>
	    </revision>
	</revhistory>
    </sectioninfo>
    
    <title>Functions</title>
    
    <section id="diameter_www_authorize">
	<title>
	    <function>diameter_www_authorize(realm)</function>
	</title>
	<para>
	    SIP Server checks for authorization having a DIAMETER server in
	    backend.  If no credentials are provided inside the SIP request
	    then a challenge is sent back to UAC. If the credentials don't
	    match the ones computed by DISC then "403 Forbidden"
	    is sent back.
	</para>
	<para>Meaning of the parameters is as follows:</para>
	<itemizedlist>
	    <listitem>
		<para>
		    <emphasis>realm</emphasis> - the realm to be use for
		    authentication and authorization.
		</para>
	    </listitem>
	</itemizedlist>
	<example>
	    <title><function>diameter_www_authorize</function> usage</title>
	    <programlisting>
...
if(!diameter_www_authorize("iptel.org"))
{ /* user is not authorized */
	break;
};
...
	    </programlisting>
	</example>
    </section>

    <section id="diameter_proxy_authorize">
	<title>
	    <function>diameter_proxy_authorize(realm)</function>
	</title>
	<para>
	    SIP Proxy checks for authorization having a DIAMETER server in
	    backend.  If no credentials are provided inside the SIP request
	    then a challenge is sent back to UAC. If the credentials don't
	    match the ones computed by DISC then "403 Forbidden"
	    is sent back.
	</para>
	<para>Meaning of the parameters is as follows:</para>
	<itemizedlist>
	    <listitem>
		<para>
		    <emphasis>realm</emphasis> - the realm to be use for
		    authentication and authorization.
		</para>
	    </listitem>
	</itemizedlist>
	<example>
	    <title><function>diameter_proxy_authorize</function> usage</title>
	    <programlisting>
...
if(!diameter_proxy_authorize("iptel.org"))
{ /* user is not authorized */
	break;
};
...
	    </programlisting>
	</example>
    </section>
    
    <section id="diameter_is_user_in">
	<title>
	    <function moreinfo="none">diameter_is_user_in(who, group)</function>
	</title>
	<para>
	    The method performs group membership checking with DISC.
	</para>
	<para>Meaning of the parameters is as follows:</para>
	<itemizedlist>
	    <listitem>
		<para>
		    <emphasis>who</emphasis> - what header to be used to get
		    the SIP URI that is wanted to be checked being member in a
		    certain group.  It can be: "Request-URI",
		    "From", "To" or
		    "Credentials".
		</para>
	    </listitem>
	    <listitem>
		<para>
		    <emphasis>group</emphasis> - the group name where to check
		    if the user is part of.
		</para>
	    </listitem>
	</itemizedlist>
	<example>
	    <title><function>diameter_is_user_in</function> usage</title>
	    <programlisting>
...
if(!diameter_is_user_in("From", "voicemail"))
{ /* user is not authorized */
	break;
};
...
</programlisting>
	</example>
    </section>
</section>
